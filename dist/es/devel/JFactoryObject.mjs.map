{"version":3,"file":"JFactoryObject.mjs","sources":["../../../src/JFactoryObject.mjs"],"sourcesContent":["import { jFactoryBootstrap_onBoot } from \"./jFactory-bootstrap.mjs\";\n\n// ---------------------------------------------------------------------------------------------------------------------\n// JFactoryObject\n// ---------------------------------------------------------------------------------------------------------------------\n// Status: Alpha, HasSideEffects\n// ---------------------------------------------------------------------------------------------------------------------\n\nexport class JFactoryObject {\n\n    static createDescriptors(descriptorPrototype = JFactoryObject.DESCRIPTORS_PROTOTYPE) {\n        let create = JFactoryObject.create(descriptorPrototype, true, true);\n        let o = Object.create(null);\n\n        o.NONE = create();\n\n        o.WRITABLE     = create({ writable: true });\n        o.ENUMERABLE   = create({ enumerable: true });\n        o.CONFIGURABLE = create({ configurable: true });\n\n        o.CONFIGURABLE_WRITABLE   =\n        o.WRITABLE_CONFIGURABLE   = create({ writable: true, configurable: true });\n\n        o.CONFIGURABLE_ENUMERABLE =\n        o.ENUMERABLE_CONFIGURABLE = create({ enumerable: true, configurable: true });\n\n        o.ENUMERABLE_WRITABLE     =\n        o.WRITABLE_ENUMERABLE     = create({ writable: true, enumerable: true });\n\n        o.WRITABLE_ENUMERABLE_CONFIGURABLE =\n        o.WRITABLE_CONFIGURABLE_ENUMERABLE =\n        o.ENUMERABLE_CONFIGURABLE_WRITABLE =\n        o.ENUMERABLE_WRITABLE_CONFIGURABLE =\n        o.CONFIGURABLE_WRITABLE_ENUMERABLE =\n        o.CONFIGURABLE_ENUMERABLE_WRITABLE = create({ writable: true, enumerable: true, configurable: true });\n\n        // Shortcuts\n        o.READONLY = create({ writable: false, enumerable: false, configurable: false });\n\n        return o\n    }\n\n    /**\n     * @example\n     * assign(obj, 'myProperty', 123, {writable:false})\n     * assign(obj, {a:1, b:2}', {writable:false})\n     *\n     * deprecated\n     * assign(obj, 'myProperty', {value:\"ok\", writable:false}) => not strict\n     * assign(obj, 'myProperty', 123) => use native instead\n     * assign(obj, {a:1, b:2}) => use native instead\n     */\n    static assign(target, property, value, descriptor) {\n        let descriptors = {};\n\n        switch (typeof property) {\n\n            case \"string\":\n            case \"symbol\":\n\n                // ------------------------------------------------\n                // assign(obj, 'myProperty', 123, {writable:false})\n                // ------------------------------------------------\n\n                if (!descriptor) {\n                    throw new Error(\"missing descriptor argument; use Object.assign instead\")\n                }\n\n                descriptor = Object.create(descriptor); // avoid descriptor corruption\n                descriptor.value = value;\n\n                Object.defineProperty(target, property, descriptor);\n\n                break;\n\n            case \"object\":\n\n                // ------------------------------------------------\n                // assign(obj, {a:1, b:2}', {writable:false})\n                // ------------------------------------------------\n\n                [value, descriptor] = [property, value];\n\n                if (!descriptor) {\n                    throw new Error(\"missing descriptor argument; use Object.assign instead\")\n                }\n\n                for (let name of Object.getOwnPropertyNames(value)) {\n                    descriptors[name] = Object.create(descriptor); // avoid descriptor corruption\n                    descriptors[name].value = value[name]\n                }\n                for (let name of Object.getOwnPropertySymbols(value)) {\n                    descriptors[name] = Object.create(descriptor); // avoid descriptor corruption\n                    descriptors[name].value = value[name]\n                }\n\n                Object.defineProperties(target, descriptors);\n\n                break;\n\n            default:\n                throw new Error(\"invalid property argument\")\n        }\n\n        return target\n    }\n\n    static create(prototype, flat = false, disinherit = false) {\n        return function create(properties) {\n            if (flat) {\n                return Object.assign(disinherit ? Object.create(null) : {}, prototype, properties)\n            } else {\n                return Object.assign(Object.create(\n                    disinherit ? Object.assign(Object.create(null), prototype) : prototype\n                ), properties)\n            }\n        }\n    }\n\n    static disinherit(object) {\n        return Object.assign(Object.create(null), object);\n    }\n}\n\nJFactoryObject.DESCRIPTORS_PROTOTYPE = { writable: false, enumerable: false, configurable: false };\n\n// ---------------------------------------------------------------------------------------------------------------------\n// jFactoryObject\n// ---------------------------------------------------------------------------------------------------------------------\n\njFactoryBootstrap_onBoot(function() {\n    JFactoryObject.descriptors = JFactoryObject.createDescriptors()\n});"],"names":[],"mappings":"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"}