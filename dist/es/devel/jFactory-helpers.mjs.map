{"version":3,"file":"jFactory-helpers.mjs","sources":["../../../src/jFactory-helpers.mjs"],"sourcesContent":["import { JFACTORY_DEV } from \"./jFactory-env.mjs\";\nimport { jFactoryCompat_run } from \"./jFactory-compat.mjs\";\n\n// ---------------------------------------------------------------------------------------------------------------------\n// jFactory Helpers\n// ---------------------------------------------------------------------------------------------------------------------\n// Centralize helpers and externals in one module\n// ---------------------------------------------------------------------------------------------------------------------\n// Status: Beta\n// ---------------------------------------------------------------------------------------------------------------------\n\n// -------------------------------------\n// Imports jquery from global or package\n// -------------------------------------\n\nconst $ = globalThis.$ || (typeof require !==\"undefined\" && require('jquery'));\n\n// -------------------------------------\n// Imports lodash from global or package\n// -------------------------------------\n\n// Individual importation improves the tree shaking\n// This is supposed to be equivalent to babel-plugin-lodash\nconst _ = globalThis._ || {\n    isString : require('lodash/isString'),\n    isNumber : require('lodash/isNumber'),\n    isPlainObject : require('lodash/isPlainObject'),\n    defaultsDeep : require('lodash/defaultsDeep'),\n    lowerFirst : require('lodash/lowerFirst'),\n    get : require('lodash/get'),\n    template : require('lodash/template'),\n    camelCase : require('lodash/camelCase'),\n};\n\nif (JFACTORY_DEV) {\n    jFactoryCompat_run([\n        {\n            name: \"lodash\",\n            test: () => _,\n            strict: true,\n            info: \"http://github.com/jfactory-es/jfactory/blob/master/docs/ref-import.md\"\n        },\n        {\n            name: \"jquery\",\n            test: () => $,\n            strict: true,\n            info: \"http://github.com/jfactory-es/jfactory/blob/master/docs/ref-import.md\"\n        }\n    ]);\n}\n\nexport const jQuery = $;\n\nexport const helper_isString = _.isString;\nexport const helper_isNumber = _.isNumber;\nexport const helper_isPlainObject = _.isPlainObject;\nexport const helper_defaultsDeep = _.defaultsDeep;\nexport const helper_lowerFirst = _.lowerFirst;\nexport const helper_get = _.get;\nexport const helper_template = _.template;\nexport const helper_camelCase = _.camelCase;\n\nexport const NOOP = () => {};\nexport const helper_setFunctionName = (name, f) => Object.defineProperty(f, \"name\", { value: name });\nconst helper_url_abs_a = /*#__PURE__*/document.createElement(\"a\");\nexport const helper_url_abs = url => { helper_url_abs_a.href = url; return helper_url_abs_a.href }\n\nexport const helper_isNative = function(f) {\n    return typeof f === \"function\" && Function.prototype.toString.call(f).indexOf(\"[native code]\") !== -1\n}\n\nexport function helper_useragent(id) {\n    return globalThis.navigator &&\n    globalThis.navigator.userAgent &&\n    globalThis.navigator.userAgent.indexOf(id + \"/\") > 0\n}\n\nexport const helper_deferred = () => new Deferred;\nclass Deferred {\n    constructor() {\n        this._done = [];\n        this._fail = [];\n    }\n    execute(list) {\n        for (let h of list){\n            h()\n        }\n        this.fulfilled = true\n    }\n    resolve() {\n        this.execute(this._done);\n    }\n    reject() {\n        this.execute(this._fail);\n    }\n    done(callback) {\n        if (this.fulfilled) {\n            callback()\n        } else {\n            this._done.push(callback);\n        }\n    }\n    fail(callback) {\n        if (this.fulfilled) {\n            callback()\n        } else {\n            this._fail.push(callback);\n        }\n    }\n}"],"names":[],"mappings":"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"}