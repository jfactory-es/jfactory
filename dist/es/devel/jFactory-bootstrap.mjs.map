{"version":3,"file":"jFactory-bootstrap.mjs","sources":["../../../src/jFactory-bootstrap.mjs"],"sourcesContent":["import { JFACTORY_BOOT, JFACTORY_DEV, JFACTORY_LOG, JFACTORY_NAME, JFACTORY_VER } from \"./jFactory-env.mjs\";\nimport { jFactoryCompat_run } from \"./jFactory-compat.mjs\";\n\nexport function jFactoryBootstrap(auto) {\n    if (!_isLoaded) {\n        if (auto && !JFACTORY_BOOT) {\n            // auto bootstrap is disabled by env\n            return\n        }\n        if (JFACTORY_DEV) {\n            console.log(`${JFACTORY_NAME} ${JFACTORY_VER} running in development mode; performances will be affected`);\n            !JFACTORY_LOG && console.log(\"jFactory: logs disabled\");\n            jFactoryCompat_run()\n        }\n        init();\n        _isLoaded = true\n    }\n}\n\nlet seq = [];\nfunction init() {\n    if (seq) {\n        for (let handler of seq) {\n            handler()\n        }\n        seq = null;\n    }\n}\n\nlet _isLoaded = false;\nexport function jFactoryBootstrap_expected() {\n    if (!_isLoaded) {\n        throw new Error(\"jFactoryBootstrap() must be called before using jFactory\")\n    }\n}\n\nexport function jFactoryBootstrap_onBoot(handler) {\n    if (_isLoaded) {\n        throw new Error(\"jFactoryBootstrap() already called\")\n    }\n    seq.push(handler)\n}"],"names":[],"mappings":";;;;;;;;;AAGO,SAAS,iBAAiB,CAAC,IAAI,EAAE;AACxC,IAAI,IAAI,CAAC,SAAS,EAAE;AACpB,QAAQ,IAAI,IAAI,IAAI,CAAC,aAAa,EAAE;AACpC;AACA,YAAY,MAAM;AAClB,SAAS;AACT,QAA0B;AAC1B,YAAY,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,EAAE,YAAY,CAAC,2DAA2D,CAAC,CAAC,CAAC;AACvH,YAAY,CAAC,YAAY,IAAI,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;AACpE,YAAY,kBAAkB,GAAE;AAChC,SAAS;AACT,QAAQ,IAAI,EAAE,CAAC;AACf,QAAQ,SAAS,GAAG,KAAI;AACxB,KAAK;AACL,CAAC;AACD;AACA,IAAI,GAAG,GAAG,EAAE,CAAC;AACb,SAAS,IAAI,GAAG;AAChB,IAAI,IAAI,GAAG,EAAE;AACb,QAAQ,KAAK,IAAI,OAAO,IAAI,GAAG,EAAE;AACjC,YAAY,OAAO,GAAE;AACrB,SAAS;AACT,QAAQ,GAAG,GAAG,IAAI,CAAC;AACnB,KAAK;AACL,CAAC;AACD;AACA,IAAI,SAAS,GAAG,KAAK,CAAC;AACf,SAAS,0BAA0B,GAAG;AAC7C,IAAI,IAAI,CAAC,SAAS,EAAE;AACpB,QAAQ,MAAM,IAAI,KAAK,CAAC,0DAA0D,CAAC;AACnF,KAAK;AACL,CAAC;AACD;AACO,SAAS,wBAAwB,CAAC,OAAO,EAAE;AAClD,IAAI,IAAI,SAAS,EAAE;AACnB,QAAQ,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC;AAC7D,KAAK;AACL,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,EAAC;AACrB;;;;"}