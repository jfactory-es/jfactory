{"version":3,"file":"jFactory-traits.mjs","sources":["../../../src/jFactory-traits.mjs"],"sourcesContent":["import { JFACTORY_ERR_INVALID_CALL } from \"./JFactoryError.mjs\";\nimport { JFactoryTraits } from \"./JFactoryTraits.mjs\";\nimport { jFactoryFunctionWrappable } from \"./JFactoryFunction.mjs\";\n\n// ---------------------------------------------------------------------------------------------------------------------\n// jFactoryTraits\n// ---------------------------------------------------------------------------------------------------------------------\n// Status: Beta\n// ---------------------------------------------------------------------------------------------------------------------\n\nexport function jFactoryTraits(callerInstance, callerConstructor) {\n    return new JFactoryTraits(callerInstance, callerConstructor, {\n\n        parser(propertyName, propertyDescriptor/*, source, target, isStatic */) {\n            let parsed = JFactoryTraits.defaultParser(...arguments);\n\n            if (parsed) {\n                ({ propertyName, propertyDescriptor } = parsed);\n\n                let value = propertyDescriptor.value;\n                if (typeof value === \"function\") {\n                    switch (value.name) {\n                        case \"$install\":\n                        case \"$uninstall\":\n                        case \"$enable\":\n                        case \"$disable\":\n                        case \"$state\":\n                            break;\n                        default:\n                            propertyDescriptor.value = jFactoryFunctionWrappable(value)\n                                .beforeAll(function() {\n                                    if (!this.$.states.enabled && this.$.service.phase === \"PHASE_NONE\") {\n                                        let e = new JFACTORY_ERR_INVALID_CALL({\n                                            owner: this,\n                                            target: value,\n                                            reason: \"component disabled\"\n                                        });\n                                        this.$logErr(...e);\n                                        throw e\n                                    }\n                                })\n                    }\n                }\n\n                return { propertyName, propertyDescriptor }\n            }\n        }\n    })\n}"],"names":[],"mappings":";;;;;;;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,cAAc,CAAC,cAAc,EAAE,iBAAiB,EAAE;AAClE,IAAI,OAAO,IAAI,cAAc,CAAC,cAAc,EAAE,iBAAiB,EAAE;AACjE;AACA,QAAQ,MAAM,CAAC,YAAY,EAAE,kBAAkB,iCAAiC;AAChF,YAAY,IAAI,MAAM,GAAG,cAAc,CAAC,aAAa,CAAC,GAAG,SAAS,CAAC,CAAC;AACpE;AACA,YAAY,IAAI,MAAM,EAAE;AACxB,gBAAgB,CAAC,EAAE,YAAY,EAAE,kBAAkB,EAAE,GAAG,MAAM,EAAE;AAChE;AACA,gBAAgB,IAAI,KAAK,GAAG,kBAAkB,CAAC,KAAK,CAAC;AACrD,gBAAgB,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;AACjD,oBAAoB,QAAQ,KAAK,CAAC,IAAI;AACtC,wBAAwB,KAAK,UAAU,CAAC;AACxC,wBAAwB,KAAK,YAAY,CAAC;AAC1C,wBAAwB,KAAK,SAAS,CAAC;AACvC,wBAAwB,KAAK,UAAU,CAAC;AACxC,wBAAwB,KAAK,QAAQ;AACrC,4BAA4B,MAAM;AAClC,wBAAwB;AACxB,4BAA4B,kBAAkB,CAAC,KAAK,GAAG,yBAAyB,CAAC,KAAK,CAAC;AACvF,iCAAiC,SAAS,CAAC,WAAW;AACtD,oCAAoC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,KAAK,YAAY,EAAE;AACzG,wCAAwC,IAAI,CAAC,GAAG,IAAI,yBAAyB,CAAC;AAC9E,4CAA4C,KAAK,EAAE,IAAI;AACvD,4CAA4C,MAAM,EAAE,KAAK;AACzD,4CAA4C,MAAM,EAAE,oBAAoB;AACxE,yCAAyC,CAAC,CAAC;AAC3C,wCAAwC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;AAC3D,wCAAwC,MAAM,CAAC;AAC/C,qCAAqC;AACrC,iCAAiC,EAAC;AAClC,qBAAqB;AACrB,iBAAiB;AACjB;AACA,gBAAgB,OAAO,EAAE,YAAY,EAAE,kBAAkB,EAAE;AAC3D,aAAa;AACb,SAAS;AACT,KAAK,CAAC;AACN;;;;"}