"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash"),t=require("jquery");
/*!
 * jFactory, Copyright (c) 2019, StÃ©phane Plazis
 * https://github.com/jfactory-es/jfactory/blob/master/LICENSE.txt
 */
const s="undefined"!=typeof process&&process.versions&&process.versions.node,r={TraitLog:!s||false,JFactoryError:{keys:["$.about.name","$dev_name","$name","name","id"]},JFactoryTrace:!s&&{keys:["$dev_traceLog","$dev_traceSource"],libOptions:{offline:Boolean(globalThis.chrome),filter:function(e){return e.lineNumber}}},jFactoryDev:{requireCompatibility:{globalThis:{test:()=>globalThis,info:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/globalThis"},fetch:{test:()=>fetch,info:"https://developer.mozilla.org/docs/Web/API/Fetch_API/Using_Fetch"},Request:{test:()=>Request,info:"https://developer.mozilla.org/docs/Web/API/Request"},"AbortController, AbortSignal":{test:()=>(new AbortController).signal,info:"https://developer.mozilla.org/docs/Web/API/AbortController, https://developer.mozilla.org/docs/Web/API/AbortSignal"},MutationObserver:{test:()=>MutationObserver,info:"https://developer.mozilla.org/docs/Web/API/MutationObserver"}}}},i={seq:[],init(){if(this.seq){let e=this.seq;delete this.seq;for(let t of e)t();delete globalThis.jFactoryOverride}},onInit(e){this.seq.push(e)}};i.onInit((function(){console.log("jFactory is running in development mode; performances will be affected");for(let[e,t]of Object.entries(r.jFactoryDev.requireCompatibility)){let s;try{s=Boolean(t.test())}catch(e){}s||console.warn(`jFactory may require the support of "${e}", ${t.info}`)}})),i.onInit((function(){!r.TraitLog&&console.warn("jFactory logs disabled")}));const a=t,n=e.isNative,o=e.isString,l=e.isNumber,c=e.isPlainObject,h=e.defaultsDeep,u=e.lowerFirst,p=e.get,d=e.template,m=e.camelCase,$=()=>{},f=(e,t)=>Object.defineProperty(t,"name",{value:e}),g=e=>(g.a.href=e,g.a.href);g.a=document.createElement("a");class v{constructor({label:e,stackTraceLimit:t,keys:s,libOptions:r}={}){this.label=e||"The stack has been printed in the console",this.stackTraceLimit=t||1/0,this.keys=s||["stackLog","stackSource"],this.libOptions=r||{}}captureTraceSource(e,t){let s;this.stackTraceLimit&&(s=Error.stackTraceLimit,Error.stackTraceLimit=this.stackTraceLimit),e||(e="captureTraceSource",t=!0);let r={source:new Error,omitAboveFunctionName:e,omitSelf:t};return this.stackTraceLimit&&(Error.stackTraceLimit=s),r}attachTrace(e,t){"object"!=typeof t&&(t=this.captureTraceSource(t||"attachTrace",!t));let s=t.source;this.toPrintableTrace(t).then(e=>s=e);let r=()=>console.log(s)||this.label;Object.defineProperty(e,this.keys[0],{enumerable:!1,configurable:!0,get:()=>r()}),Object.defineProperty(e,this.keys[1],{enumerable:!1,configurable:!0,get:()=>t})}toPrintableTrace(e){return Promise.resolve(e.source)}}class b extends v{constructor(e){super(e)}toPrintableTrace(e){return StackTrace.fromError(e.source,this.libOptions).then(t=>{if(e.omitAboveFunctionName){let s=t.findIndex(t=>t.functionName&&t.functionName.endsWith(e.omitAboveFunctionName));s>0&&(e.omitSelf&&s++,t=t.slice(s))}return t=t.filter(this.libOptions.filter),this.formatTraceFrames(t)})}formatTraceFrames(e){let t,s;return this.libOptions.offline&&window.chrome?(t="Error\n",s="\tat "):(t="",s=""),t+e.map(e=>s+e.toString()).join("\n")}}const E={};i.onInit((function(){let e=r.JFactoryTrace;if(e&&!1!==e.use){let t;t="function"==typeof e.use?e.use:"object"==typeof StackTrace?b:v,t===b&&console.warn("jFactory: Stack trace enabled; Performance will be affected"),E.tracer=new t(e)}else E.tracer={captureTraceSource:$,attachTrace:$}}));class A extends Error{constructor(e="unspecified error",t=null){t=Object.assign(Object.create(null),t),super(e=A.toPrintable(e,t)),this.$data=Object.assign(Object.create(null),t)}toString(){return this.message}*[Symbol.iterator](){yield this.message,yield this.$data}static getId(e){return e[(r.JFactoryError.keys||A.DEFAULT_KEYS).find(t=>{let s=p(e,t);return s||0===s})]}static toPrintableData(e){const t={};let s;for(let[r,i]of Object.entries(e)){switch(typeof i){case"function":i=i.name+"()";break;case"object":if(null===i){i="null";break}if(i instanceof Error){i=i.toString();break}if(void 0!==(s=A.getId(i)))i='"'+s+'"';else if(n(i.toString))try{s=JSON.stringify(i),i=s.length>A.JSON_MAX?s.substring(0,A.JSON_MAX)+"[...]":s}catch(e){i="[object "+i.constructor.name+"]"}else i=i.toString();break;case"string":i='"'+i+'"';break;default:i=String(i)}t[r]=i}return t}static toPrintable(e,t){const s=[];for(let r of e.split(";")){let e,i=A.RE_PLACEHOLDER;if(i.lastIndex=0,e=i.exec(r)){do{if(e[1]&&e[1]in t){s.push(r.trim());break}}while(null!==(e=i.exec(r)))}else s.push(r.trim())}return u(d(s.join("; "))(A.toPrintableData(t)))}}A.JSON_MAX=40,A.DEFAULT_KEYS=["name","id"],A.RE_PLACEHOLDER=/\${([^}]+)}/g;let y=new Proxy(A,{set:function(e,t,s){let{template:r}=s;if(e[t])throw new Error("already declared");return e[t]=class extends A{constructor(e,t){super(r,e),E.tracer.attachTrace(this.$data,t)}},e[t].prototype.name="Error jFactoryError."+t,!0}});function S(e,t){if(!new.target)return new S(e,t);this.label=e,this.value=t}y.INVALID_VALUE={template:"invalid value for ${target}; Reason: ${reason}; Given: ${given}"},y.INVALID_CALL={template:"invalid call ${target}; Reason: ${reason}; Owner: ${owner}"},y.PROMISE_EXPIRED={template:"expired promise ${target}; Reason: ${reason}"},y.REQUEST_ERROR={template:"error requesting ${target}; Reason: ${reason}; Owner: ${owner}"},y.KEY_DUPLICATED={template:"duplicated key for ${target}; Given: ${given}"},y.KEY_MISSING={template:"missing key for ${target}; Given: ${given}"};const _=function(e,t,s){throw new y.INVALID_VALUE({target:e,reason:s,given:t})},R={notUndefined:(e,t)=>(void 0===t&&_(e,t,"cannot be undefined"),!0),notEmptyString:(e,t)=>(""===t&&_(e,t,"cannot be empty string"),!0),notFalsy:(e,t)=>(t||_(e,t,'cannot be a falsy value (undefined, null, NaN, 0, "")'),!0),validSpaces:(e,t)=>(t.replace&&t.replace(/\s+/g," ").trim()===t||_(e,t,"invalid space delimiters"),!0),matchReg:(e,t,s)=>(s.test(t)||_(e,t,'string "'+t+'" must match '+s),!0),type(e,t,...s){let r,i=!1;for(let a of s){null===a?r="Null":"name"in a&&(r=a.name);let s=R["type"+r];if(s)try{i=s(e,t)}catch(e){}else i=t instanceof a;if(i)break}return i||_(e,t,"must be an instance of ["+s.map(e=>e.name).join(", ")+"]"),!0},typeNull:(e,t)=>(null!==t&&_(e,t,"must be null"),!0),typeBoolean:(e,t)=>(!0!==t&&!1!==t&&_(e,t,"must be a boolean"),!0),typeString:(e,t)=>(o(t)||_(e,t,"must be a string"),!0),typeNumber:(e,t)=>(l(t)||_(e,t,"must be a number"),!0),typeFunction:(e,t)=>("function"!=typeof t&&_(e,t,"must be a function"),!0),typePlainObject:(e,t)=>(c(t)||_(e,t,"must be a plain object"),!0),equal(e,t,...s){let r=!1;for(let e of s)if(r=t===e)break;return r||_(e,t,"must be one of ["+s+"]"),!0},equalIn:(e,t,s)=>(Array.isArray(s)||(s=Object.values(s)),s.includes(t)||_(e,t,"must be one from ["+s.join(", ")+"]"),!0),properties(e,t,s){for(let r of Object.getOwnPropertyNames(t))S(e+', property name "'+r+'"',r).equalIn(s);return!0},writable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).writable||_(e,t,"must be writable"),!0),notWritable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).writable&&_(e,t,"must not be writable"),!0),enumerable:(e,t,s)=>(Object.prototype.propertyIsEnumerable.call(t,s)||_(e,t,"must be enumerable"),!0),notEnumerable:(e,t,s)=>(Object.prototype.propertyIsEnumerable.call(t,s)&&_(e,t,"must not be enumerable"),!0),configurable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).configurable||_(e,t,"must be configurable"),!0),notConfigurable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).configurable&&_(e,t,"must not be configurable"),!0),reservedProperty:(e,t,s)=>(s in t&&_(e,t,"is a reserved property"),!0)};i.onInit((function(){Object.assign(S,R);for(const e of Object.getOwnPropertyNames(R))S.prototype[e]=function(...t){return S[e](this.label,this.value,...t),this}}));class L{constructor(e,t,s={}){this.callerInstance=e,this.callerConstructor=t,this.options=s}use(e,...t){S("JFactoryTraits(trait)",e).typeFunction();let{callerInstance:s,callerConstructor:i}=this,a=L.CACHE.get(s);if(a){if(a.has(e))return r.TraitLog&&console.warn(e.name+" already called on",s),this;a.add(e)}else L.CACHE.set(s,new WeakSet([e]));!i.JFactoryTrait&&(i.JFactoryTrait=new WeakSet),i.JFactoryTrait.has(e)||(i.JFactoryTrait.add(e),this.export(e.prototype,i.prototype),this.export(e,i,!0));let n=new e(s,...t);return n.trait_constructor&&n.trait_constructor.apply(s,t),this}export(e,t,s){let r=Object.getOwnPropertyDescriptors(e);for(let i of Object.keys(r)){let a=L.getPrefix(i);if(L.getTarget(i,t,a)){let a=r[i],n=(this.options.parser||L.defaultParser)(i,a,e,t,s);n&&(({propertyName:i,propertyDescriptor:a}=n),Object.defineProperty(t,i,a))}}}static defaultParser(e,t,s,i,a){let n=t.value;return a?null:e in i?(r.TraitLog&&console.warn(`${i.constructor.name}> skipping export of existing property "${e}"`,n),null):"object"==typeof n?(r.TraitLog&&console.warn(`${i.constructor.name}> skipping export of shared object "${e}"`,n),null):{propertyName:e,propertyDescriptor:t}}static getPrefix(e){let t=e.split("_");return t.length>1?t[0]:null}static getTarget(e,t,s){return L.EXCLUDES.includes(e)||"trait"===s?null:t}}L.CACHE=new WeakMap,L.EXCLUDES=["constructor","prototype","length","size"];class T{constructor(){this.handlers=Object.create(null)}*[Symbol.iterator](e=[]){e.length||(e=Object.keys(this.handlers)),e.length||(e=["default"]);for(let t of e)t in this.handlers&&(yield*this.handlers[t])}first(e,t){return 1===arguments.length&&([e,t]=["default",e]),(this.handlers[e]||(this.handlers[e]=[])).unshift(t),this}last(e,t){return 1===arguments.length&&([e,t]=["default",e]),(this.handlers[e]||(this.handlers[e]=[])).push(t),this}compose(...e){let t=this,s=function(){let s={canceled:!1,parameters:Array.from(arguments),result:void 0},r=t[Symbol.iterator](e),i=r.next();return T.composite_iterator(this,s,i,r)};return s.composer=t,s}static composite_iterator(e,t,s,r){let i,a;for(;!t.canceled&&!s.done;)if(i=s.value,a=e?i.call(e,t,...t.parameters):i(t,...t.parameters),s=r.next(),a instanceof Promise){if(!s.done||a.constructor===Promise)return a.then(f([i.name,"[compositeAsyncHandler]"].filter(Boolean).join(" "),(function(i){return t.result=i,T.composite_iterator(e,t,s,r)})));t.result=a}else t.result=a;return t.result}}class O{constructor(e){this.originalHandler=e,this.expiredCalls=0,this.composer=new T;let t,s=this.composer.compose("conditions"),r=this;this.isExpired=e=>t||s.call(e)||!1,this.setExpired=e=>t=e?e instanceof Error?e:new y.INVALID_CALL({target:this.originalHandler,reason:"manually expired"}):Boolean(this.expiredCalls=0),this.addExpireCondition=function(e){this.composer.last("conditions",(function(t){let s=function(s){return S("JFactoryFunctionExpirable.addExpireCondition(), result",s).type(Boolean,Error),r.setExpired(!!s&&((t.canceled=!0)&&(s instanceof Error?s:new y.INVALID_CALL({target:r.originalHandler,reason:"conditionally expired",condition:e}))))},i=e.apply(this,t.parameters);return i instanceof Promise?i.then(s):s(i)}))}}compose(){let e=this,t=function(){let t=e.isExpired(this),s=e.constructor.call.bind(void 0,e,this,arguments);return t instanceof Promise?t.then(s):s(t)};return Object.assign(t,{expirable:this,isExpired:e=>this.isExpired(e),setExpired:e=>this.setExpired(e),addExpireCondition:e=>(this.addExpireCondition(e),t)})}static call(e,t,s,r){return r?e.onExpired(r):e.onNotExpired(t,s)}onExpired(e){return this.expiredCalls<O.MaxWarningExpiration&&(this.expiredCalls++,r.TraitLog&&console.warn(...new y.INVALID_CALL({...e.$data,reason:e.$data.reason+"; expiredCalls="+this.expiredCalls+(this.expiredCalls===O.MaxWarningExpiration?"; Max Warning Exceeded":"")}))),e}onNotExpired(e,t){return this.originalHandler.apply(e,t)}}function w(e){return new P(e).compose()}O.MaxWarningExpiration=10;class P{constructor(e){this.originalHandler=e,this.composer=new T,this.composer.first("original",f([e.name,"[condition]"].filter(Boolean).join(" "),(function(t){return e.apply(this,t.parameters)})))}compose(){let e=this.composer.compose("conditions","original");return Object.assign(e,{conditional:this,addCondition:t=>(this.addCondition(t),e)})}addCondition(e){this.composer.last("conditions",(function(t){let s=function(e){S("JFactoryFunctionConditional.addCondition(), result",e).typeBoolean(),!e&&(t.canceled=!0)},r=e.apply(this,t.parameters);return r instanceof Promise?r.then(s):s(r)}))}}function I(e){return new N(e).compose()}class N{constructor(e){this.originalHandler=e,this.composer=new T,this.composer.first("original",f([e.name,"[wrapped]"].filter(Boolean).join(" "),(function(t){return e.apply(this,t.parameters)})))}compose(){let e=this.composer.compose("before","original","after");return Object.assign(e,{wrappable:this,beforeAll:t=>(this.beforeAll(t),e),justBefore:t=>(this.justBefore(t),e),justAfter:t=>(this.justAfter(t),e),afterAll:t=>(this.afterAll(t),e)})}beforeAll(e){this.composer.first("before",e)}justBefore(e){this.composer.last("before",e)}justAfter(e){this.composer.first("after",e)}afterAll(e){this.composer.last("after",e)}}function j(e,t){return new L(e,t,{parser(e,t){let s=L.defaultParser(...arguments);if(s){({propertyName:e,propertyDescriptor:t}=s);let r=t.value;if("function"==typeof r)switch(r.name){case"$install":case"$uninstall":case"$enable":case"$disable":case"$state":break;default:t.value=I(r).beforeAll((function(){if(!this.$.states.enabled&&"PHASE_NONE"===this.$.service.phase){let e=new y.INVALID_CALL({owner:this,target:r,reason:"component disabled"});throw this.$logErr(...e),e}}))}return{propertyName:e,propertyDescriptor:t}}}})}class F{constructor(e){F.inject(this,F,e)}static inject(e,t,s){j(e,t).use(M.TraitCore).use(M.TraitAbout,{name:s}).use(M.TraitLog).use(M.TraitEvents).use(M.TraitState).use(M.TraitService).use(M.TraitTask)}}class C extends F{constructor(e){super(e),C.inject(this,C)}static inject(e,t){j(e,t).use(M.TraitFetch).use(M.TraitDOM).use(M.TraitCSS).use(M.TraitMutation).use(M.TraitTimeout).use(M.TraitInterval).use(M.TraitLibVue).use(M.TraitLibReact)}}const M=(e,t)=>Object.assign(new C(e),t);class k{static createDescriptors(e=k.DESCRIPTORS_PROTOTYPE){let t=k.create(e,!0,!0),s=Object.create(null);return s.NONE=t(),s.WRITABLE=t({writable:!0}),s.ENUMERABLE=t({enumerable:!0}),s.CONFIGURABLE=t({configurable:!0}),s.CONFIGURABLE_WRITABLE=s.WRITABLE_CONFIGURABLE=t({writable:!0,configurable:!0}),s.CONFIGURABLE_ENUMERABLE=s.ENUMERABLE_CONFIGURABLE=t({enumerable:!0,configurable:!0}),s.ENUMERABLE_WRITABLE=s.WRITABLE_ENUMERABLE=t({writable:!0,enumerable:!0}),s.WRITABLE_ENUMERABLE_CONFIGURABLE=s.WRITABLE_CONFIGURABLE_ENUMERABLE=s.ENUMERABLE_CONFIGURABLE_WRITABLE=s.ENUMERABLE_WRITABLE_CONFIGURABLE=s.CONFIGURABLE_WRITABLE_ENUMERABLE=s.CONFIGURABLE_ENUMERABLE_WRITABLE=t({writable:!0,enumerable:!0,configurable:!0}),s.READONLY=t({writable:!1,enumerable:!1,configurable:!1}),s}static assign(e,t,s,r){let i={};switch(typeof t){case"string":case"symbol":if(!r)throw new Error("missing descriptor argument; use Object.assign instead");(r=Object.create(r)).value=s,Object.defineProperty(e,t,r);break;case"object":if([s,r]=[t,s],!r)throw new Error("missing descriptor argument; use Object.assign instead");for(let e of Object.getOwnPropertyNames(s))i[e]=Object.create(r),i[e].value=s[e];for(let e of Object.getOwnPropertySymbols(s))i[e]=Object.create(r),i[e].value=s[e];Object.defineProperties(e,i);break;default:throw new Error("invalid property argument")}return e}static create(e,t=!1,s=!1){return function(r){return t?Object.assign(s?Object.create(null):{},e,r):Object.assign(Object.create(s?Object.assign(Object.create(null),e):e),r)}}static disinherit(e){return Object.assign(Object.create(null),e)}}k.DESCRIPTORS_PROTOTYPE={writable:!1,enumerable:!1,configurable:!1},i.onInit((function(){k.descriptors=k.createDescriptors()}));const D=()=>++D.uid;D.uid=0;class U{constructor(e,t={}){let s,r;S("JFactoryAbout(owner)",e).type(Object),S("JFactoryAbout(about)",t).typePlainObject().reservedProperty("uid").reservedProperty("fingerprint"),"name"in t&&S("JFactoryAbout(about.name)",t.name).typeString().notEmptyString();let i=D();t.name?(s=t.name,delete t.name,r="jFactory_"+m(s.toLowerCase())+"_"+i):(delete t.name,s=`[${e.constructor.name}#${i}]`,r="jFactory_"+e.constructor.name+"_"+i),k.assign(this,{uid:i,name:s,fingerprint:r},k.descriptors.ENUMERABLE),Object.assign(this,t),S("JFactoryAbout.name",this.name).matchReg(/^[\w[\]#]+$/),S("JFactoryAbout.fingerprint",this.fingerprint).matchReg(/^[\w]+$/)}}const B=()=>++B.uid;B.uid=0;class H extends Promise{constructor({name:e,config:t,traceSource:s},r){1===arguments.length&&([e,t,r]=[null,null,arguments[0]]);const i=B();let a,o;t={...H.DEFAULT_CONFIG,...t},S("name",e=e||"unnamed").type(String,Number).matchReg(/^[^. ]+$/),S("config",t).typePlainObject(),S("executor",r).typeFunction(),super((e,t)=>{a=e,o=t});const l=new J(this,i,e,t);Object.defineProperties(this,{$chain:{enumerable:!0,writable:!0,value:l},$type:{writable:!0,value:"promise"},$value:{writable:!0,value:void 0},$isSettled:{writable:!0,value:!1},$isRejected:{writable:!0,value:null},$isFulfilled:{writable:!0,value:null},$isExpired:{writable:!0,value:!1},$isAborted:{writable:!0,value:!1}}),Object.defineProperties(this,{$dev_name:{configurable:!0,value:e+"["+i+":0]"},$dev_path:{writable:!0,value:new V(this)},$dev_position:{writable:!0,value:0}}),n(r)||Object.defineProperties(this,{$dev_source:{value:r}}),E.tracer.attachTrace(this,s);const c=()=>{if(!this.$chain.isPending)try{this.$chainComplete("auto-completed")}catch(e){console.error(e)}},h=e=>{if(!this.$isSettled){if(e===this)return void u(new TypeError("Chaining cycle detected for promise "+this.$dev_name));let t;if(null!==e&&("object"==typeof e||"function"==typeof x))try{t=e.then}catch(e){return void u(e)}if("function"==typeof t){let s=!1,r=function(e){s||(s=!0,h(e))},i=function(e){s||(s=!0,u(e))};try{t.call(e,r,i)}catch(e){s||u(e)}}else this.$isRejected=!1,this.$isFulfilled=!0,this.$isExpired&&(e=this.$chain.errorExpired),a(e),p(e)}},u=e=>{this.$isSettled||(this.$isRejected=!0,this.$isFulfilled=!1,o(e),p(e))},p=e=>{this.$value=e,this.$isSettled=!0,this.$chain.chainMap.set(this,!0),this.$chain.chainConfig.chainAutoComplete&&(1!==this.$chain.chainMap.size||this.$isExpired?c():this.then(c))};let d=t.chainAutoComplete;Object.defineProperty(t,"chainAutoComplete",{get:()=>d,set:e=>{d!==e&&(d=e,e&&c())}}),l.chainMap.set(this,!1),Object.defineProperties(this,{__resolve__:{value:h},__reject__:{value:u}});try{r(h,u)}catch(e){u(e)}}then(e,t,s){let r,i,a,o=n(e)&&!e.name.startsWith("bound ");e&&"function"==typeof e&&(r=function(s){return"await"===l?a.$isAborted?t(a.$chain.errorExpired):e(s):a.$isExpired?void 0:(a.$isSettled,e(s))}),t&&"function"==typeof t&&(i=function(e){return a.$isSettled,t(e)});let l=s||(o?"await":void 0===e?"catch":"then");a=Object.assign(super.then(r,i),this),B.uid--,a.$type=l;{a.$dev_position=this.$chain.chainMap.size;let s="";e&&e.name&&(s+=e.name),t&&t.name&&(s+=","+t.name),Object.defineProperties(a,{$dev_name:{value:this.$chain.chainName+"["+this.$chain.chainId+":"+this.$dev_position+"]."+a.$type+(s?"("+s+")":"")+"["+a.$chain.chainId+":"+a.$dev_position+"]"},$dev_path:{value:new V(this.$dev_path,a)},$dev_onFulfilled:{value:e},$dev_onRejected:{value:t}})}return a.$chain.chainMap.set(a,!1),this.$isExpired&&H.setExpired(a,!0,!this.$isAborted,this.$chain.errorExpired),a}$catchExpired(e){return this.then(t=>this.$chain.chainRoot.$isExpired?e(t):t,void 0,"$catchExpired")}static resolve(e,t){return 1===arguments.length&&([e,t]=[{},e]),e||(e={}),t instanceof this&&1===arguments.length?t:new this(e,(function(e){e(t)}))}static reject(e,t){return 1===arguments.length&&([e,t]=[{},e]),e||(e={}),new this(e,(function(e,s){s(t)}))}$toPromise(){return Promise.resolve(this)}$chainAbort(e="$chainAbort()"){return this.$chain.complete(e,!0),this}$chainComplete(e="$chainComplete()"){try{this.$chain.complete(e,!1)}catch(e){throw e instanceof y.INVALID_CALL?new y.INVALID_CALL({target:e.$data.target,reason:"Trying to complete a pending chain. Use $chainAbort() if you want to stop it."}):e}return this}$chainAutoComplete(){return this.$chain.chainConfig.chainAutoComplete=!0,this}static setExpired(e,t,s,r){if(!e.$isSettled){if(!t)throw new y.INVALID_CALL({target:e,reason:"promise must be aborted or settled before setting it to expired."});e.$isAborted=!s,e.__resolve__(r)}e.$isExpired=!0}}H.DEFAULT_CONFIG={chainAutoComplete:!1};class J{constructor(e,t,s,r){Object.defineProperties(this,{chainConfig:{value:r},chainRoot:{value:e},chainId:{value:t},chainName:{value:s},chainMap:{value:new Map},isCompleted:{value:!1,configurable:!0},data:{value:{}},__deferred__:{value:a.Deferred()}})}get isPending(){return Array.from(this.chainMap.values()).includes(!1)}then(e){return this.__deferred__.done(e),this}complete(e="chain.complete()",t){let s=this.chainRoot;if(!s.$isExpired){let r=s.$chain.errorExpired=new y.PROMISE_EXPIRED({target:s,reason:e}),i=this.chainMap;for(let e of i.keys())H.setExpired(e,t,!1,r);Object.defineProperty(this,"isCompleted",{value:!0}),this.__deferred__.resolve()}return this}}class V extends Array{constructor(){super();for(let e of arguments)Array.isArray(e)?this.push(...e):this.push(e)}get printable(){return this.map((e,t)=>0===t?e.$dev_name:e.$dev_name.split(".")[1]).join(".")}toString(){return this.printable}}class Y extends Promise{constructor(e){let t={$isSettled:!1,$isRejected:null,$value:void 0};super((s,r)=>{let i=!1,a=e=>{e instanceof Promise?Y.resolve(e).then(a,n):i||(i=!0,t.$isSettled=!0,t.$isRejected=!1,t.$value=e,s(e))},n=e=>{i||(i=!0,t.$isSettled=!0,t.$isRejected=!0,t.$value=e,r(e))};try{e(a,n)}catch(e){n(e)}}),Object.assign(this,t),t=this}then(e,t){if(this.$isSettled){let s=this.$value;try{if(this.$isRejected){if(super.then(void 0,()=>null),!t||"function"!=typeof t)return Y.reject(s);s=t(s)}else e&&"function"==typeof e&&(s=e(s))}catch(e){return Y.reject(e)}return Y.resolve(s)}return super.then(e,t)}static resolve(e){return e instanceof Y?e:new Y(e instanceof Promise?e.then.bind(e):t=>t(e))}}class q{constructor(){Object.defineProperties(this,{registry:{value:a(Object.create(null))},handlers:{value:new WeakMap},onListenerUpdate:{value:null,writable:!0},onObserverUpdate:{value:null,writable:!0}})}on({events:e,handler:t,target:s,selector:r}){q.validateSelector(e),S("JFactoryEvents.on({handler})",t).typeFunction(),s&&S("JFactoryEvents.on({target})",s).type(String,a,HTMLElement),r&&S("JFactoryEvents.on({selector})",s).typeString();let i=this.handlers.get(t);s?(i||this.handlers.set(t,!0),r?a(s).on(e,r,t):a(s).on(e,t),this.onListenerUpdate&&this.onListenerUpdate(arguments)):(i||(this.handlers.set(t,i=function(e,{data:s,stack:r}){r.push(()=>t(e,s))}),i.originalHandler=t),this.registry.on(e,i),this.onObserverUpdate&&this.onObserverUpdate(arguments))}off({events:e,handler:t,target:s,selector:r}){if(void 0!==e&&(q.validateSelector(e),t&&S("JFactoryEvents.off({handler})",t).typeFunction(),s&&S("JFactoryEvents.off({target})",s).type(String,a,HTMLElement),r&&S("JFactoryEvents.off({selector})",s).typeString()),s)r?a(s).off(e,r,t):a(s).off(e,t);else{if(a("*").off(e,t),t&&!(t=this.handlers.get(t)))throw new y.INVALID_VALUE({target:"handler",reason:"not registered",given:t});this.registry.off(e,t)}this.onObserverUpdate&&this.onObserverUpdate(arguments),this.onListenerUpdate&&this.onListenerUpdate(arguments)}triggerParallel({events:e,data:t,target:s}){q.validateSelector(e),s&&S("JFactoryEvents.triggerParallel({target})",s).type(String,a,HTMLElement);const r=[],i=[];if(e=e.split(" "),s)for(let i of e)a(s).trigger(i,{data:t,stack:r});else for(let s of e)this.registry.triggerHandler(s,{data:t,stack:r});for(let e of r){let t=e();t instanceof Promise&&!t.$isSettled&&i.push(t)}return i.length?Promise.all(i):Y.resolve()}triggerSeries({events:e,data:t,target:s}){return q.validateSelector(e),s&&S("JFactoryEvents.triggerSeries({target})",s).type(String,a,HTMLElement),new Y(async r=>{const i=[];if(e=e.split(" "),s)for(let r of e)a(s).trigger(r,{data:t,stack:i});else for(let s of e)this.registry.triggerHandler(s,{data:t,stack:i});for(let e of i){let t=e();t instanceof Promise&&!t.$isSettled&&await t}r()})}}class W extends q{constructor(e){super(),Object.defineProperties(this,{parent:{value:e},affiliateRules:{value:(new T).compose()}}),this.affiliateAddRule(W.rule_namespace)}affiliate(e="",t="",s){let r=new G(e);for(let e of r.events)this.affiliateRules(e,t,s);return r.toString()}affiliateAddRule(e){this.affiliateRules.composer.last(e)}static rule_namespace(e,t,s){s=s.split(".");for(let e of s)e&&t.addNamespace(e)}on(e,t,s,r,i){switch(arguments.length){case 2:[r,t]=[t];break;case 3:"function"==typeof arguments[2]?[r,s]=[s]:[r,i,t,s]=[t,s];break;case 4:"object"==typeof arguments[3]&&([i,r,s]=[r,s])}e=this.affiliate(e,this.parent.$.about.fingerprint,i),void 0===t?super.on({events:e,handler:r}):super.on({events:e,target:t,selector:s,handler:r})}off(e,t,s,r,i){const a=arguments.length;switch(a){case 1:"object"==typeof arguments[0]&&([i,e]=[e]);break;case 2:"function"==typeof arguments[1]?[r,t]=[t]:c(arguments[1])&&([i,t]=[t]);break;case 3:"function"==typeof arguments[2]?[r,s]=[s]:"function"==typeof arguments[1]&&([r,i,t,s]=[t,s]);break;case 4:"object"==typeof arguments[3]&&([i,r,s]=[r,s])}e=this.affiliate(e,this.parent.$.about.fingerprint,i),a<2?super.off({events:e}):t?super.off({events:e,target:t,selector:s,handler:r}):super.off({events:e,handler:r})}trigger(e,t,s){switch(arguments.length){case 2:"object"!=typeof t||t.jquery||([s,t]=[t])}return t?super.triggerSeries({events:e,target:t,data:s}):super.triggerSeries({events:e,data:s})}triggerParallel(e,t,s){switch(arguments.length){case 2:"object"!=typeof t||t.jquery||([s,t]=[t])}return t?super.triggerParallel({events:e,target:t,data:s}):super.triggerParallel({events:e,data:s})}getDomListeners(e){let t=new Map;for(let s of a("*")){let r=a._data(s,"events");if(r)for(let i of Object.values(r))for(let r of i){let i;if(new K(r.namespace).hasNamespace(e)){(i=t.get(s))||t.set(s,i={}),(i[r.type]||(i[r.type]=[])).push({selector:r.selector||null,handler:r.handler,namespace:r.namespace})}}}return t}getObservers(){let e=new Map,t=this.registry._events;if(!t){let e=Object.values(this.registry)[0],s=Object.getOwnPropertyNames(e).find(e=>0===e.indexOf("jQuery"));e&&s&&(t=this.registry._events=e[s].events)}if(t)for(let[s,r]of Object.entries(t)){let t=e.get(s);t||(t=[],e.set(s,t));for(let e of r)t.push({handler:e.handler.originalHandler,namespace:e.namespace})}return e}}class G{constructor(e){q.validateSelector(e),this.events=e.split(" ").map(e=>new K(e))}toString(){let e=[];for(let t of this.events)e.push(t.toString());return e.join(" ")}}class K{constructor(e){let[t,...s]=e.split(".");this.event=t,this.namespace=new Set(s)}hasNamespace(e){Array.isArray(e)||(e=[e]);for(let t of e){if(!/^[\w:]+$/.test(t))throw new y.INVALID_VALUE({target:"namespace",reason:"must be alphanumeric, underscore and colon characters",given:t});if(t&&this.namespace.has(t))return t}return!1}addNamespace(e){if(!/^[\w:]+$/.test(e))throw new y.INVALID_VALUE({target:"namespace",reason:"must be alphanumeric, underscore and colon characters",given:e});this.namespace.add(e)}deleteNamespace(e){if(!/^[\w:]+$/.test(e))throw new y.INVALID_VALUE({target:"namespace",reason:"must be alphanumeric, underscore and colon characters",given:e});this.namespace.delete(e)}toString(){return this.namespace.size?this.event+"."+Array.from(this.namespace.values()).join("."):this.event}}q.validateSelector=function(e){S("JFactoryEvents.validateSelector(selector)",e).notUndefined().validSpaces();for(let[t,s]of e.split(" ").map(e=>e.split(".")).map(e=>[e.shift(),e.join(".")]))t&&q.validateEvent(t),s&&q.validateNamespace(s);return!0},q.validateEvent=function(e){if(S("JFactoryEvents.validateEvent(event)",e).notUndefined().notEmptyString().validSpaces(),!/^[\w:]+$/.test(e))throw new y.INVALID_VALUE({target:"JFactoryEvents.validateEvent(event)",reason:"must be alphanumeric, underscore and colon characters",given:e});return!0},q.validateNamespace=function(e){if(S("JFactoryEvents.validateNamespace(namespace)",e).notUndefined().notEmptyString().validSpaces(),!/^[\w:.]+$/.test(e))throw new y.INVALID_VALUE({target:"JFactoryEvents.validateNamespace(namespace)",reason:"must be alphanumeric, underscore, dot and colon characters",given:e});return!0};class z extends H{constructor(e,t,s={}){if("function"==typeof e)super(e);else{"string"==typeof e&&([e,t,s]=[{},arguments[0],arguments[1]]);let r=new Request(t,s);super(e,(i,a)=>{let n=fetch(r).then(e=>{if(this.$chain.fetchResponse=e,!e.ok)throw Error(e.status+":"+e.statusText);return e});s.$typeText?n=n.then(e=>e.text()).then(e=>this.$chain.responseText=e):s.$typeJSON&&(n=n.then(e=>e.json()).then(e=>this.$chain.responseJSON=e)),n=n.catch(i=>{throw new y.REQUEST_ERROR({reason:i.message||i,target:this.$chain.fetchResponse&&this.$chain.fetchResponse.url||t,owner:this,fetchOptions:s,fetchRequest:r,fetchResponse:this.$chain.fetchResponse||null},e.traceSource)}),n.then(i,a)}),this.$chain.fetchOptions=s,this.$chain.fetchRequest=r;let i=s.abortController||new AbortController;s.signal=i.signal,this.$chain.fetchAbortController=i}}$chainAbort(e="request aborted"){return super.$chainAbort(e),this.$chain.fetchAbortController.abort(),this}}const Q=Symbol();class X{constructor(e){e&&S("JFactoryLogger(options)",e).properties(Object.getOwnPropertyNames(X.DEFAULT_CONFIG)),h(this,e,X.DEFAULT_CONFIG),this.condition=w(X.DEFAULT_CONDITION),this.installAccessor("log"),this.installAccessor("warn"),this.installAccessor("error")}get enabled(){return this[Q]&&(!this.parentLogger||this.parentLogger.enabled)}set enabled(e){e?this.enable():this.disable()}enable(){!0!==this[Q]&&(this[Q]=!0)}disable(){!1!==this[Q]&&(this[Q]=!1)}disallow(e,t=this.label){this.filters[t]||(this.filters[t]={}),this.filters[t][e]=!0}allow(e,t=this.label){this.filters[t]&&delete this.filters[t][e]}installAccessor(e,t=e,s=this){S("JFactoryLogger(nativeName)",e).equalIn(["log","warn","error"]),Object.defineProperties(s,{[t]:{get:this.accessor.bind(this,e),configurable:!0}})}accessor(e){return this[Q]&&this.condition(e)&&this.formatter[e](this)||$}createSubLogger(e){let t=new X({enabled:this.enabled,label:this.label+"."+e,styles_css:this.styles_css,styles_cli:this.styles_cli,console:this.console,formatter:this.formatter});return t.parentLogger=this,t.condition.addCondition(()=>this.enabled),t.filters=this.filters,t}}X.FORMATTER_NATIVE={log:e=>e.console.log.bind(e.console,e.label+">"),warn:e=>e.console.warn.bind(e.console,e.label+">"),error:e=>e.console.error.bind(e.console,e.label+">")},X.FORMATTER_CLI={log:e=>e.console.log.bind(e.console,e.styles_cli.label,e.label+">"),warn:e=>e.console.warn.bind(e.console,e.styles_cli.label,e.label+">"),error:e=>e.console.error.bind(e.console,e.styles_cli.label,e.label+">")},X.FORMATTER_BROWSER={log:e=>e.console.log.bind(e.console,"%c"+e.label+">",e.styles_css.label),warn:e=>e.console.warn.bind(e.console,"%c"+e.label+">",e.styles_css.label),error:e=>e.console.error.bind(e.console,"%c"+e.label+">",e.styles_css.label)},X.DEFAULT_CONDITION=function(e){return S("JFactoryLogger.condition(nativeName)",e).equalIn(["log","warn","error"]),S("JFactoryLogger.enabled",this.enabled).equal(!0),!(this.filters[this.label]&&this.filters[this.label][e])},X.DEFAULT_CONFIG={label:"",enabled:!0,parentLogger:null,formatter:s?X.FORMATTER_CLI:X.FORMATTER_BROWSER,console:console,filters:{},styles_cli:{label:"[1;30m%s[0m"},styles_css:{label:"color: gray"}};class Z extends Date{toString(){return this.toLocaleTimeString()+", "+this.getUTCMilliseconds()+"ms ("+this.valueOf()+")"}$toDurationString(){let e=this.getUTCHours(),t=this.getUTCMinutes(),s=this.getUTCSeconds(),r=this.getUTCMilliseconds(),i=[];return e&&i.push(e+"h"),t&&i.push(t+"min"),s&&i.push(s+"s"),i.push(r+"ms"),1===i.length?i[0]:i.join(",")+" ("+this.valueOf()+")"}}class ee extends Date{constructor(){super(),this.elapsed=null,Object.defineProperties(this,{t1:{value:null,writable:!0},t0:{value:new Z}})}end(){this.t1=new Z,this.elapsed=new Z(this.t1-this.t0).$toDurationString()}toString(){return this.elapsed}}class te{trait_constructor(){const e=this;class t extends Map{constructor(...e){super(...e),Object.defineProperty(this,"id_autoinc",{value:0,writable:!0})}$registerSync(t,s){let r=Object.defineProperties({},{$value:{value:s},$phaseRemove:{value:oe.getContextualRemovePhase(e)}});return this.set(t,r),r}$registerAsync(t,s,r){let i=e.$task(s,r.$chain);return r.$chain.then(()=>{i.$chainAutoComplete()}),i.$chain.then(()=>{r.$chain.isCompleted||r.$chainAbort("aborted by task")}),Object.defineProperty(r,"$phaseRemove",{value:i.$phaseRemove}),this.set(t,r),i}$id_resolve(e){if(e.indexOf("?")>=0){let t=++this.id_autoinc;e=e.replace(/\?/g,t)}return e}}const s=Object.assign(Object.create(null),{[te.SYMBOL_PRIVATE]:Object.create(null),assign:function(e,t,s){k.assign(this,e,t,s)},createSubMap:()=>new t});Object.defineProperty(this,"$",{value:Object.create(s)}),this.$.assign({tasks:null,requests:null},k.descriptors.ENUMERABLE_WRITABLE)}}te.SYMBOL_PRIVATE=Symbol("_");class se{trait_constructor(e){k.assign(this.$,"about",new U(this,e),k.descriptors.READONLY)}}class re{trait_constructor(){let e=Object.assign({label:this.$.about.name},r.TraitLog||{enabled:!1}),t=new X(e);Object.defineProperty(this.$,"logger",{value:t}),t.installAccessor("log","$log",this),t.installAccessor("warn","$logWarn",this),t.installAccessor("error","$logErr",this)}}class ie{trait_constructor(){this.$.assign("tasks",this.$.createSubMap(),k.descriptors.ENUMERABLE)}$task(e,t){if(S("$task(id)",e=this.$.tasks.$id_resolve(e)).typeString(),S("$task(executorOrValue)",t).notUndefined(),this.$.tasks.has(e))throw new y.KEY_DUPLICATED({target:"$task(id)",given:e});let s,r;return s="function"==typeof t?new H({name:e,owner:this},t):H.resolve({name:e,owner:this},t),s.$phaseRemove=oe.getContextualRemovePhase(this),r=new ee,s.$taskMetrics={$dev_timing:r},s.$chain.then(()=>{r.end(),this.$.tasks.get(e)&&this.$taskRemove(e)}),this.$.tasks.set(e,s),s}$taskRemove(e,t){if(S("$taskRemove(id)",e).typeString(),t&&S("$taskRemove(reason)",t).typeString(),!this.$.tasks.has(e))throw new y.KEY_MISSING({target:"$taskRemove(id)",given:e});this.$.tasks.get(e)._called,this.$.tasks.get(e)._called=!0;let s=this.$.tasks.get(e);this.$.tasks.delete(e),s.$chainAbort(t||"$taskRemove()")}$taskRemoveAll(e){S("$taskRemoveAll(removePhase)",e).equalIn(oe.PHASES);let t=this.$.tasks;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$taskRemove(s,"$taskRemoveAll("+e+")")}$taskPromiseAll(e=!1){let t=[];if(this.$.tasks.size)for(let s of this.$.tasks.values())e&&(s.$chain.chainConfig.chainAutoComplete=!0),s.$chain.isPending&&t.push(s.$chain);return t.length?Promise.all(t):Y.resolve()}}class ae{trait_constructor(){le(this,"events",{custom:new W(this),kernel:new W(this)},k.descriptors.NONE);let e=this.$[te.SYMBOL_PRIVATE].events.custom;Object.defineProperties(this.$,{listeners:{get:e.getDomListeners.bind(e,this.$.about.fingerprint),enumerable:!0},observers:{get:e.getObservers.bind(e),enumerable:!0}})}$on(){this.$[te.SYMBOL_PRIVATE].events.custom.on(...arguments)}$off(){this.$[te.SYMBOL_PRIVATE].events.custom.off(...arguments)}$trigger(){return this.$[te.SYMBOL_PRIVATE].events.custom.trigger(...arguments)}$triggerParallel(){return this.$[te.SYMBOL_PRIVATE].events.custom.triggerParallel(...arguments)}$notify(e,t){return this.$trigger(e,t).then(()=>this.$[te.SYMBOL_PRIVATE].events.kernel.trigger(e,t))}}class ne{trait_constructor(){const e=Object.create(null),t=Object.create(null),s=this.$[te.SYMBOL_PRIVATE].events.kernel;le(this,{states:e,stateRoutes:t},k.descriptors.READONLY),k.assign(this.$,"states",new Proxy(e,{set:(e,t,s)=>this.$state(t,s),get:(t,s)=>e[s]}),k.descriptors.READONLY),s.on("beforeStateChange",(e,s)=>{let r;if(t[s.key]&&t[s.key].before&&(r=t[s.key].before(s.val)))return this.$notify(r)}),s.on("afterStateChange",(e,s)=>{let r;if(t[s.key]&&t[s.key].after&&(r=t[s.key].after(s.val)))return this.$notify(r)})}$state(e,t,s=!0){return S("$state(key)",e).typeString(),S("$state(notify)",s).typeBoolean(),new Y(async r=>{let i,a=this.$[te.SYMBOL_PRIVATE].states,n=a[e];e in a&&n===t||(i=s&&this.$notify("beforeStateChange",{key:e,val:t,previousVal:n}),i&&S("beforeStateChange result",i).type(Y),i&&!i.$isSettled&&(a[e]=i,await i),void 0===t?delete a[e]:a[e]=t,i=s&&this.$notify("afterStateChange",{key:e,val:t,previousVal:n}),i&&S("afterStateChange result",i).type(Y)),i?i.then(r):r()})}}class oe{trait_constructor(){k.assign(this.$,"service",Object.create(null),k.descriptors.READONLY),this.$.service.phase=oe.PHASE.NONE,this.$.service.phaseQueue=H.resolve({name:"phaseQueue"},null),this.$.service.phaseTask=null,this.$.service.phaseMap={install:new Set,enable:new Set,disable:new Set,uninstall:new Set},this.$state("installed",!1,!1),this.$state("enabled",!1,!1),ce(this,"stateRoutes",{installed:{after:e=>e?"install":"uninstall"},enabled:{after:e=>e?"enable":"disable"}},k.descriptors.NONE);let e=this.$[te.SYMBOL_PRIVATE].events.custom,t=this.$[te.SYMBOL_PRIVATE].events.kernel;e.affiliateAddRule((e,t,s,r)=>oe.setEventNamespaceRemovePhase(this,t,r));let s=e=>{this.$.tasks.size&&this.$taskRemoveAll(this.$.service.phase);let t=Y.resolve();return e&&(t=t.then(()=>e.call(this)).then(()=>this.$taskPromiseAll(!0))),t.catch(e=>{e instanceof y.PROMISE_EXPIRED||this.$logErr("unhandled promise rejection in "+this.$.service.phase+";",...e instanceof A?e:[e])})};t.on("install",()=>s(this.onInstall)),t.on("enable",()=>s(this.onEnable)),t.on("disable",()=>s(this.onDisable)),t.on("uninstall",()=>s(this.onUninstall)),t.on("disable",()=>this.$off({removal:oe.PHASE.DISABLE})),t.on("uninstall",()=>this.$off({removal:oe.PHASE.UNINSTALL}))}$install(e){let t;const s=new H({name:"install",config:{chainAutoComplete:!0}},e=>t=e).then(()=>{if(!this.$.states.installed)return this.$.service.phase=oe.PHASE.INSTALL,this.$state("installed",!0)});return this.$.service.phaseMap.install.add(s),s.$chain.then(()=>{this.$.service.phaseTask=null,this.$.service.phaseMap.install.delete(s),this.$.service.phase=oe.PHASE.NONE}),this.$.service.phaseQueue=this.$.service.phaseQueue.then(()=>(this.$.service.phaseTask=s,t(),s.$chain)),e?this.$enable():s}$enable(){let e;const t=new H({name:"enable",config:{chainAutoComplete:!0}},t=>e=t).then(()=>{if(this.$.states.installed&&!this.$.states.enabled)return this.$.service.phase=oe.PHASE.ENABLE,this.$state("enabled",!0)});return this.$.service.phaseMap.enable.add(t),t.$chain.then(()=>{this.$.service.phaseTask=null,this.$.service.phaseMap.enable.delete(t),this.$.service.phase=oe.PHASE.NONE}),this.$.service.phaseQueue=this.$.service.phaseQueue.then(()=>(this.$.service.phaseTask=t,e(),t.$chain)),t}$disable(){let e;const t=new H({name:"disable",config:{chainAutoComplete:!0}},t=>e=t).then(()=>{if(this.$.states.enabled)return this.$.service.phase=oe.PHASE.DISABLE,this.$state("enabled",!1)});this.$.service.phaseMap.disable.add(t),t.$chain.then(()=>{this.$.service.phaseTask=null,this.$.service.phaseMap.disable.delete(t),this.$.service.phase=oe.PHASE.NONE});for(let[e,t]of this.$.service.phaseMap.enable.entries())t===this.$.service.phaseTask&&oe.phaseKill(this),t.$chainAbort(),this.$.service.phaseMap.enable.delete(e);return this.$.service.phaseQueue=this.$.service.phaseQueue.then(()=>(this.$.service.phaseTask=t,e(),t.$chain)),t}$uninstall(){let e;const t=new H({name:"uninstall",config:{chainAutoComplete:!0}},t=>e=t).then(()=>{if(this.$.states.installed)return this.$.service.phase=oe.PHASE.UNINSTALL,this.$state("installed",!1)});this.$.service.phaseMap.uninstall.add(t),t.$chain.then(()=>{this.$.service.phaseTask=null,this.$.service.phaseMap.uninstall.delete(t),this.$.service.phase=oe.PHASE.NONE});for(let[e,t]of this.$.service.phaseMap.install.entries())t===this.$.service.phaseTask&&oe.phaseKill(this),t.$chainAbort(),this.$.service.phaseMap.install.delete(e);return this.$disable(),this.$.service.phaseQueue=this.$.service.phaseQueue.then(()=>(this.$.service.phaseTask=t,e(),t.$chain)),t}static phaseKill(e){e.$.tasks.size&&e.$taskRemoveAll(oe.getContextualRemovePhase(e)),e.$.service.phase=oe.PHASE.NONE}static getContextualRemovePhase(e){return oe.PHASE_REVERT[e.$.service.phase]}static setEventNamespaceRemovePhase(e,t,s){let r=t.hasNamespace(oe.PHASES),i=s&&s.removal;i||(i=oe.getContextualRemovePhase(e)),"uninstall"===t.event&&i===oe.PHASE.DISABLE&&(i=oe.PHASE.UNINSTALL),r!==i&&(t.deleteNamespace(r),t.addNamespace(i)),t.addNamespace(i)}}function le(e,t,s,r){k.assign(e.$[te.SYMBOL_PRIVATE],t,s,r)}function ce(e,t,s,r){k.assign(e.$[te.SYMBOL_PRIVATE][t],s,r)}oe.PHASE={NONE:"PHASE_NONE",INSTALL:"PHASE_INSTALL",ENABLE:"PHASE_ENABLE",DISABLE:"PHASE_DISABLE",UNINSTALL:"PHASE_UNINSTALL"},oe.PHASE_REVERT={[oe.PHASE.INSTALL]:oe.PHASE.UNINSTALL,[oe.PHASE.UNINSTALL]:oe.PHASE.INSTALL,[oe.PHASE.DISABLE]:oe.PHASE.ENABLE,[oe.PHASE.ENABLE]:oe.PHASE.DISABLE,[oe.PHASE.NONE]:oe.PHASE.DISABLE},oe.PHASES=Object.values(oe.PHASE),M.PHASE=k.disinherit(oe.PHASE),M.TraitCore=te,M.TraitAbout=se,M.TraitLog=re,M.TraitEvents=ae,M.TraitState=ne,M.TraitService=oe,M.TraitTask=ie;class he{trait_constructor(){const e=this.$[te.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$fetchRemoveAll(oe.PHASE.DISABLE)),e.on("uninstall",()=>this.$fetchRemoveAll(oe.PHASE.UNINSTALL)),this.$.assign("requests",this.$.createSubMap(),k.descriptors.ENUMERABLE)}$fetch(e,t,s={}){if(S("$fetch(id)",e=this.$.requests.$id_resolve(e)).typeString(),S("$fetch(url)",t).typeString(),S("$fetch(fetchOptions)",s).typePlainObject(),this.$.requests.has(e))throw new y.KEY_DUPLICATED({target:"$fetch(id)",given:e});let r=new z({name:e,traceSource:E.tracer.captureTraceSource("$fetch"),config:{chainAutoComplete:!0}},t,s);return this.$.requests.$registerAsync(e,'$fetch("'+e+'")',r),r.$chain.then(()=>{this.$.requests.has(e)&&this.$fetchRemove(e)}),r}$fetchText(e,t,s={}){return this.$fetch(e,t,{...s,$typeText:!0})}$fetchJSON(e,t,s={}){return this.$fetch(e,t,{...s,$typeJSON:!0})}$fetchRemove(e,t){if(S("$fetchRemove(id)",e).typeString(),t&&S("$fetchRemove(reason)",t).typeString(),!this.$.requests.has(e))throw new y.KEY_MISSING({target:"$fetchRemove(id)",given:e});this.$.requests.get(e)._debug_remove_called,this.$.requests.get(e)._debug_remove_called=!0;let s=this.$.requests.get(e);this.$.requests.delete(e),s.$chainAbort(t||"$fetchRemove()")}$fetchRemoveAll(e){S("removePhase",e).equalIn(oe.PHASES);let t=this.$.requests;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$fetchRemove(s,"$fetchRemoveAll("+e+")")}}class ue{trait_constructor(){const e=this.$[te.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$timeoutRemoveAll(oe.PHASE.DISABLE)),e.on("uninstall",()=>this.$timeoutRemoveAll(oe.PHASE.UNINSTALL)),this.$.assign("timeouts",this.$.createSubMap(),k.descriptors.ENUMERABLE)}$timeout(e,t,s=null,...r){if(S("id",e=this.$.timeouts.$id_resolve(e)).typeString(),S("delay",t).typeNumber(),S("handler",s).type(Function,null),this.$.timeouts.has(e))throw new y.KEY_DUPLICATED({target:"$timeout(id)",given:e});let i,a=new H({name:e,traceSource:E.tracer.captureTraceSource("$timeout"),config:{chainAutoComplete:!0}},e=>{i=setTimeout(()=>{a.$isExpired||e(s?s(...r):void 0)},t)});return a.$chain.data.timer=i,this.$.timeouts.$registerAsync(e,'$timeout("'+e+'")',a),a.$chain.then(()=>{this.$.timeouts.has(e)&&this.$timeoutRemove(e)}),a}$timeoutRemove(e,t){if(S("$timeoutRemove(id)",e).typeString(),t&&S("$timeoutRemove(reason)",t).typeString(),!this.$.timeouts.has(e))throw new y.KEY_MISSING({target:"$timeoutRemove(id)",given:e});this.$.timeouts.get(e)._debug_remove_called,this.$.timeouts.get(e)._debug_remove_called=!0;let s=this.$.timeouts.get(e);clearTimeout(s.$chain.data.timer),this.$.timeouts.delete(e),s.$chainAbort(t||"$timeoutRemove()")}$timeoutRemoveAll(e){S("removePhase",e).equalIn(oe.PHASES);let t=this.$.timeouts;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$timeoutRemove(s,"$timeoutRemoveAll()")}}class pe{trait_constructor(){const e=this.$[te.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$intervalRemoveAll(oe.PHASE.DISABLE)),e.on("uninstall",()=>this.$intervalRemoveAll(oe.PHASE.UNINSTALL)),this.$.assign("timeints",this.$.createSubMap(),k.descriptors.ENUMERABLE)}$interval(e,t,s,...r){if(S("id",e=this.$.timeints.$id_resolve(e)).typeString(),S("handler",s).typeFunction(),S("delay",t).typeNumber(),this.$.timeints.has(e))throw new y.KEY_DUPLICATED({target:"$interval(id)",given:e});let i=setInterval(s,t,...r);this.$.timeints.$registerSync(e,i)}$intervalRemove(e){if(S("$intervalRemove(id)",e).typeString(),!this.$.timeints.has(e))throw new y.KEY_MISSING({target:"$intervalRemove(id)",given:e});this.$.timeints.get(e)._debug_remove_called,this.$.timeints.get(e)._debug_remove_called=!0,clearInterval(this.$.timeints.get(e).$value),this.$.timeints.delete(e)}$intervalRemoveAll(e){S("removePhase",e).equalIn(oe.PHASES);let t=this.$.timeints;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$intervalRemove(s)}}class de{trait_constructor(){const e=this.$[te.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$mutationRemoveAll(oe.PHASE.DISABLE)),e.on("uninstall",()=>this.$mutationRemoveAll(oe.PHASE.UNINSTALL)),this.$.assign("mutations",this.$.createSubMap(),k.descriptors.ENUMERABLE)}$mutation(e,t,s,r){if(S("id",e=this.$.mutations.$id_resolve(e)).typeString(),S("parent",t).type(HTMLElement,Document),S("config",s).typePlainObject(),S("handler",r).typeFunction(),this.$.mutations.has(e))throw new y.KEY_DUPLICATED({target:"$mutation(id)",given:e});let i=new MutationObserver(r);i.observe(t,s),this.$.mutations.$registerSync(e,i)}$mutationRemove(e,t){if(S("$mutationRemove(id)",e).typeString(),t&&S("$mutationRemove(reason)",t).typeString(),!this.$.mutations.has(e))throw new y.KEY_MISSING({target:"$mutationRemove(id)",given:e});this.$.mutations.get(e)._debug_remove_called,this.$.mutations.get(e)._debug_remove_called=!0,this.$.mutations.get(e).$value.disconnect(),this.$.mutations.delete(e)}$mutationRemoveAll(e){S("removePhase",e).equalIn(oe.PHASES);let t=this.$.mutations;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$mutationRemove(s)}}class me{trait_constructor(){const e=this.$[te.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$domRemoveAll(oe.PHASE.DISABLE)),e.on("uninstall",()=>this.$domRemoveAll(oe.PHASE.UNINSTALL)),this.$.assign("dom",this.$.createSubMap(),k.descriptors.ENUMERABLE)}$dom(e,t,s){let r;if(S("id",e=this.$.dom.$id_resolve(e)).typeString(),S("jQueryArgument",t).type(String,Object),s&&S("appendTo",s).type(String,Object),"#"===e[0]&&(e=e.substring(1),r=!0),this.$.dom.has(e))throw new y.KEY_DUPLICATED({target:"$dom(id)",given:e});let i=a(t);if("TEMPLATE"===i[0].tagName&&(i=a(a(i[0]).html())),r){if(i[0].nodeType!==Node.ELEMENT_NODE)throw new y.INVALID_VALUE({target:"$dom(#id)",given:i,reason:"cannot set the dom id: the first element of the selection isn't an ELEMENT_NODE"});i[0].id=e}return s&&i.appendTo(s),this.$.dom.$registerSync(e,i).$value}$domFetch(e,t,s,r){let i;if(s&&!c(s)&&([s,r]=[{},s]),S("id",e=this.$.dom.$id_resolve(e)).typeString(),S("url",t).typeString(),r&&S("appendTo",r).type(String,Object),s&&S("fetchOptions",s).type(Object),"#"===e[0]&&(e=e.substring(1),i=!0),this.$.dom.has(e))throw new y.KEY_DUPLICATED({target:"$domFetch(id)",given:e});let n=this.$fetchText('$domFetch("'+e+'")',t,s).then(t=>{let s=a(t);return i&&(s[0].id=e),r&&s.appendTo(r),s});return this.$.dom.$registerAsync(e,'$domFetch("'+e+'")',n),n}$domRemove(e,t){if(S("$domRemove(id)",e).typeString(),t&&S("$domRemove(reason)",t).typeString(),!this.$.dom.has(e))throw new y.KEY_MISSING({target:"$domRemove(id)",given:e});this.$.dom.get(e)._debug_remove_called,this.$.dom.get(e)._debug_remove_called=!0;let s=this.$.dom.get(e),r=s.$value;r instanceof a&&r.remove(),s instanceof z&&s.$chainAbort(t||"$domRemove()"),this.$.dom.delete(e)}$domRemoveAll(e){S("removePhase",e).equalIn(oe.PHASES);let t=this.$.dom;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$domRemove(s)}}class $e{trait_constructor(){const e=this.$[te.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$cssRemoveAll(oe.PHASE.DISABLE)),e.on("uninstall",()=>this.$cssRemoveAll(oe.PHASE.UNINSTALL)),this.$.assign("css",this.$.createSubMap(),k.descriptors.ENUMERABLE)}$css(e,t){let s;if(S("id",e=this.$.css.$id_resolve(e)).typeString(),S("css",t).typeString(),"#"===e[0]&&(e=e.substring(1),s=!0),this.$.css.has(e))throw new y.KEY_DUPLICATED({target:"$css(id)",given:e});return this.$.css.$registerSync(e,a("<style>").attr(s?{id:e}:{}).html(t).appendTo("head")).$value}$cssFetch(e,t,s="head"){let r;if(S("id",e=this.$.css.$id_resolve(e)).typeString(),S("url",t).typeString(),"#"===e[0]&&(e=e.substring(1),r=!0),this.$.css.has(e))throw new y.KEY_DUPLICATED({target:"$cssFetch(id)",given:e});t=g(t);let i=a(s).find(`link[href="${t}"]`)[0];if(i){i.dataset.usage=parseInt(i.dataset.usage)+1;let t=a(i),s=H.resolve({name:e,config:{chainAutoComplete:!0},traceSource:E.tracer.captureTraceSource("$cssFetch")},t);return s.$chain.data.dom=t,this.$.css.$registerAsync(e,'$cssFetch("'+e+'")',s),s}{let i,n=new H({name:e,config:{chainAutoComplete:!0},traceSource:E.tracer.captureTraceSource("$cssFetch")},n=>i=a("<link>",{id:r?e:"",rel:"stylesheet",type:"text/css","data-usage":"1"}).appendTo(s).on("load",()=>n(i)).attr("href",t));return n.$chain.data.dom=i,this.$.css.$registerAsync(e,'$cssFetch("'+e+'")',n),n}}$cssRemove(e,t){if(S("$cssRemove(id)",e).typeString(),t&&S("$cssRemove(reason)",t).typeString(),!this.$.css.has(e))throw new y.KEY_MISSING({target:"$cssRemove(id)",given:e});this.$.css.get(e)._debug_remove_called,this.$.css.get(e)._debug_remove_called=!0;let s=this.$.css.get(e),r=s.$chain&&s.$chain.data.dom||s.$value;if(r instanceof a){let e=parseInt(r[0].dataset.usage)-1;e?r[0].dataset.usage=e:r.remove()}s instanceof H&&s.$chainAbort(t||"$cssRemove()"),this.$.css.delete(e)}$cssRemoveAll(e){S("removePhase",e).equalIn(oe.PHASES);let t=this.$.css;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$cssRemove(s)}}class fe{trait_constructor(){const e=this.$[te.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$vueRemoveAll(oe.PHASE.DISABLE)),e.on("uninstall",()=>this.$vueRemoveAll(oe.PHASE.UNINSTALL)),this.$.assign("vue",this.$.createSubMap(),k.descriptors.ENUMERABLE)}$vue(e,t){if(S("id",e=this.$.vue.$id_resolve(e)).typeString(),S("vue",t).type(Object),this.$.vue.has(e))throw new y.KEY_DUPLICATED({target:"$vue(id)",given:e});return this.$.vue.$registerSync(e,t).$value}$vueRemove(e){if(S("$vueRemove(id)",e).typeString(),!this.$.vue.has(e))throw new y.KEY_MISSING({target:"$vueRemove(id)",given:e});this.$.vue.get(e)._debug_remove_called,this.$.vue.get(e)._debug_remove_called=!0;let t=this.$.vue.get(e);a(t.$value.$el).remove(),t.$value.$destroy(),this.$.vue.delete(e)}$vueRemoveAll(e){S("removePhase",e).equalIn(oe.PHASES);let t=this.$.vue;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$vueRemove(s)}}class ge{trait_constructor(){const e=this.$[te.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$reactRemoveAll(oe.PHASE.DISABLE)),e.on("uninstall",()=>this.$reactRemoveAll(oe.PHASE.UNINSTALL)),this.$.assign("react",this.$.createSubMap(),k.descriptors.ENUMERABLE)}$react(e,t,s,...r){if(e=this.$.react.$id_resolve(e),!M.ReactDOM)throw new Error("jFactory.ReactDOM=ReactDOM must be set before using the React Trait");if(S("id",e).typeString(),S("container",t).type(HTMLElement,a),this.$.react.has(e))throw new y.KEY_DUPLICATED({target:"$react(id)",given:e});t=a(t)[0];let i=M.ReactDOM.render(s,t,...r);return this.$.react.$registerSync(e,{container:t,view:i}).$value.view}$reactRemove(e){if(S("$reactRemove(id)",e).typeString(),!this.$.react.has(e))throw new y.KEY_MISSING({target:"$reactRemove(id)",given:e});this.$.react.get(e)._debug_remove_called,this.$.react.get(e)._debug_remove_called=!0;let t=this.$.react.get(e).$value.container;t&&(M.ReactDOM.unmountComponentAtNode(t)||this.$logWarn("unmountComponentAtNode failed to unmount",t),a(t).remove()),this.$.react.delete(e)}$reactRemoveAll(e){S("removePhase",e).equalIn(oe.PHASES);let t=this.$.react;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$reactRemove(s)}}M.TraitFetch=he,M.TraitTimeout=ue,M.TraitInterval=pe,M.TraitMutation=de,M.TraitDOM=me,M.TraitCSS=$e,M.TraitLibVue=fe,M.TraitLibReact=ge,"undefined"!=typeof jFactoryOverride&&jFactoryOverride||i.init(),exports.JFACTORY_CLI=s,exports.JFACTORY_DEBUG=false,exports.JFACTORY_DEV=true,exports.JFactoryAbout=U,exports.JFactoryComponent=C,exports.JFactoryCoreObject=F,exports.JFactoryError=A,exports.JFactoryEventSelector=K,exports.JFactoryEventSelectorParser=G,exports.JFactoryEvents=q,exports.JFactoryEventsManager=W,exports.JFactoryExpect=S,exports.JFactoryFetch=z,exports.JFactoryFunctionComposer=T,exports.JFactoryFunctionConditional=P,exports.JFactoryFunctionExpirable=O,exports.JFactoryFunctionWrappable=N,exports.JFactoryLogger=X,exports.JFactoryObject=k,exports.JFactoryPromise=H,exports.JFactoryPromiseChain=J,exports.JFactoryPromisePath=V,exports.JFactoryPromiseSync=Y,exports.JFactoryTime=Z,exports.JFactoryTimeTrace=ee,exports.JFactoryTrace_LIB_STACKTRACE=b,exports.JFactoryTrace_NOFILTER=v,exports.JFactoryTraits=L,exports.TraitAbout=se,exports.TraitCSS=$e,exports.TraitCore=te,exports.TraitDOM=me,exports.TraitEvents=ae,exports.TraitFetch=he,exports.TraitInterval=pe,exports.TraitLibReact=ge,exports.TraitLibVue=fe,exports.TraitLog=re,exports.TraitMutation=de,exports.TraitService=oe,exports.TraitState=ne,exports.TraitTask=ie,exports.TraitTimeout=ue,exports.assignPrivate=le,exports.assignPrivateMember=ce,exports.jFactory=M,exports.jFactoryConfig=r,exports.jFactoryError=y,exports.jFactoryFunctionConditional=w,exports.jFactoryFunctionExpirable=function(e){return new O(e).compose()},exports.jFactoryFunctionWrappable=I,exports.jFactoryLoader=i,exports.jFactoryTrace=E,exports.jFactoryTraits=j;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiakZhY3RvcnktZGV2ZWwuY2pzLmpzIiwic291cmNlcyI6WyIuLi9zcmMvakZhY3RvcnktZW52Lm1qcyIsIi4uL3NyYy9qRmFjdG9yeS1sb2FkZXIubWpzIiwiLi4vc3JjL2pGYWN0b3J5LWhlbHBlcnMubWpzIiwiLi4vc3JjL0pGYWN0b3J5VHJhY2UubWpzIiwiLi4vc3JjL0pGYWN0b3J5RXJyb3IubWpzIiwiLi4vc3JjL0pGYWN0b3J5RXhwZWN0Lm1qcyIsIi4uL3NyYy9KRmFjdG9yeVRyYWl0cy5tanMiLCIuLi9zcmMvSkZhY3RvcnlGdW5jdGlvbi5tanMiLCIuLi9zcmMvakZhY3RvcnktdHJhaXRzLm1qcyIsIi4uL3NyYy9qRmFjdG9yeS5tanMiLCIuLi9zcmMvSkZhY3RvcnlPYmplY3QubWpzIiwiLi4vc3JjL0pGYWN0b3J5QWJvdXQubWpzIiwiLi4vc3JjL0pGYWN0b3J5UHJvbWlzZS5tanMiLCIuLi9zcmMvSkZhY3RvcnlFdmVudHMubWpzIiwiLi4vc3JjL0pGYWN0b3J5RmV0Y2gubWpzIiwiLi4vc3JjL0pGYWN0b3J5TG9nZ2VyLm1qcyIsIi4uL3NyYy9KRmFjdG9yeVRpbWUubWpzIiwiLi4vc3JjL1RyYWl0c0NvcmUubWpzIiwiLi4vc3JjL1RyYWl0c0NvbXBvbmVudHMubWpzIiwiLi4vc3JjL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXNcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dFxuICovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnkgRW52XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gQ29tcGlsZS10aW1lIGltbXV0YWJsZSBFbnY7IHVzZWQgYnkgVHJlZSBTaGFraW5nIHRvIHJlbW92ZSB1bnVzZWQgY29kZVxuZXhwb3J0IGNvbnN0IEpGQUNUT1JZX0RFViA9IHR5cGVvZiBDT01QSUxFUl9ERVYgPT09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IENPTVBJTEVSX0RFVjsgLy8gRGV2ZWxvcGVyIE1vZGVcbmV4cG9ydCBjb25zdCBKRkFDVE9SWV9ERUJVRyA9IHR5cGVvZiBDT01QSUxFUl9ERUJVRyA9PT0gXCJ1bmRlZmluZWRcIiA/IGZhbHNlIDogQ09NUElMRVJfREVCVUc7IC8vIERlYnVnIHRoZSBsaWJyYXJ5XG5leHBvcnQgY29uc3QgSkZBQ1RPUllfQ0xJID0gdHlwZW9mIENPTVBJTEVSX0NMSSA9PT0gXCJ1bmRlZmluZWRcIiA/XG4gICAgdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy52ZXJzaW9ucyAmJiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgOiBDT01QSUxFUl9DTEk7XG5cbi8vIE11dGFibGUgY29uZmlndXJhdGlvblxuZXhwb3J0IGNvbnN0IGpGYWN0b3J5Q29uZmlnID0ge1xuICAgIFRyYWl0TG9nOiBKRkFDVE9SWV9ERVYgJiYgIUpGQUNUT1JZX0NMSSB8fCBKRkFDVE9SWV9ERUJVRyxcbiAgICBKRmFjdG9yeUVycm9yOiB7XG4gICAgICAgIGtleXM6IFtcIiQuYWJvdXQubmFtZVwiLCBcIiRkZXZfbmFtZVwiLCBcIiRuYW1lXCIsIFwibmFtZVwiLCBcImlkXCJdXG4gICAgfSxcbiAgICBKRmFjdG9yeVRyYWNlOiBKRkFDVE9SWV9ERVYgJiYgIUpGQUNUT1JZX0NMSVxuICAgICAgICAmJiB7XG4gICAgICAgICAgICBrZXlzOiBbXCIkZGV2X3RyYWNlTG9nXCIsIFwiJGRldl90cmFjZVNvdXJjZVwiXSxcbiAgICAgICAgICAgIGxpYk9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBvZmZsaW5lOiBCb29sZWFuKGdsb2JhbFRoaXMuY2hyb21lKSwgLy8gbG9hZGluZyBzb3VyY2VtYXBzIGlzIG5vdCByZXF1aXJlZCBpbiBjaHJvbWVcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5saW5lTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgIC8vICYmICh2YWx1ZS5maWxlTmFtZSArIHZhbHVlLmZ1bmN0aW9uTmFtZSkudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKCdqZmFjdG9yeScpIDwgMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICBqRmFjdG9yeURldjogSkZBQ1RPUllfREVWXG4gICAgICAgICYmIHtcbiAgICAgICAgICAgIHJlcXVpcmVDb21wYXRpYmlsaXR5OiB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpczoge1xuICAgICAgICAgICAgICAgICAgICB0ZXN0OiAoKSA9PiBnbG9iYWxUaGlzLFxuICAgICAgICAgICAgICAgICAgICBpbmZvOiBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL2dsb2JhbFRoaXNcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmV0Y2g6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVzdDogKCkgPT4gZmV0Y2gsXG4gICAgICAgICAgICAgICAgICAgIGluZm86IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0ZldGNoX0FQSS9Vc2luZ19GZXRjaFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBSZXF1ZXN0OiB7XG4gICAgICAgICAgICAgICAgICAgIHRlc3Q6ICgpID0+IFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIGluZm86IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL1JlcXVlc3RcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJBYm9ydENvbnRyb2xsZXIsIEFib3J0U2lnbmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVzdDogKCkgPT4gbmV3IEFib3J0Q29udHJvbGxlcigpLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgaW5mbzogXCJodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQWJvcnRDb250cm9sbGVyLCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9BYm9ydFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBNdXRhdGlvbk9ic2VydmVyOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlc3Q6ICgpID0+IE11dGF0aW9uT2JzZXJ2ZXIsXG4gICAgICAgICAgICAgICAgICAgIGluZm86IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL011dGF0aW9uT2JzZXJ2ZXJcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxufTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfQ0xJLCBKRkFDVE9SWV9ERVYsIGpGYWN0b3J5Q29uZmlnIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnkgTG9hZGVyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjb25zdCBqRmFjdG9yeUxvYWRlciA9IHtcbiAgICBzZXE6IFtdLFxuICAgIGluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlcSkge1xuICAgICAgICAgICAgbGV0IHNlcSA9IHRoaXMuc2VxO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2VxO1xuICAgICAgICAgICAgZm9yIChsZXQgbW9kdWxlIG9mIHNlcSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxldGUgZ2xvYmFsVGhpcy5qRmFjdG9yeU92ZXJyaWRlXG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uSW5pdChoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuc2VxLnB1c2goaGFuZGxlcilcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBqRmFjdG9yeURldigpIHtcbiAgICBjb25zb2xlLmxvZyhcImpGYWN0b3J5IGlzIHJ1bm5pbmcgaW4gZGV2ZWxvcG1lbnQgbW9kZTsgcGVyZm9ybWFuY2VzIHdpbGwgYmUgYWZmZWN0ZWRcIik7XG4gICAgZm9yIChsZXQgW25hbWUsIGVudHJ5XSBvZiBPYmplY3QuZW50cmllcyhqRmFjdG9yeUNvbmZpZy5qRmFjdG9yeURldi5yZXF1aXJlQ29tcGF0aWJpbGl0eSkpIHtcbiAgICAgICAgbGV0IHBhc3M7XG4gICAgICAgIHRyeSB7cGFzcyA9IEJvb2xlYW4oZW50cnkudGVzdCgpKX0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgICAgaWYgKCFwYXNzKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYGpGYWN0b3J5IG1heSByZXF1aXJlIHRoZSBzdXBwb3J0IG9mIFwiJHtuYW1lfVwiLCAke2VudHJ5LmluZm99YClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gakZhY3RvcnlJbml0KCkge1xuICAgICFqRmFjdG9yeUNvbmZpZy5UcmFpdExvZyAmJiAoSkZBQ1RPUllfREVWIHx8IEpGQUNUT1JZX0NMSSkgJiYgY29uc29sZS53YXJuKFwiakZhY3RvcnkgbG9ncyBkaXNhYmxlZFwiKTtcbn1cblxuSkZBQ1RPUllfREVWICYmIGpGYWN0b3J5TG9hZGVyLm9uSW5pdChqRmFjdG9yeURldik7XG5qRmFjdG9yeUxvYWRlci5vbkluaXQoakZhY3RvcnlJbml0KTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0ICQgZnJvbSBcImpxdWVyeVwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGpGYWN0b3J5IEhlbHBlcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ2VudHJhbGl6ZSBoZWxwZXJzIGFuZCBleHRlcm5hbHMgaW4gb25lIG1vZHVsZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY29uc3QgalF1ZXJ5ID0gJDtcblxuZXhwb3J0IGNvbnN0IGhlbHBlcl9pc05hdGl2ZSA9IF8uaXNOYXRpdmU7XG5leHBvcnQgY29uc3QgaGVscGVyX2lzU3RyaW5nID0gXy5pc1N0cmluZztcbmV4cG9ydCBjb25zdCBoZWxwZXJfaXNOdW1iZXIgPSBfLmlzTnVtYmVyO1xuZXhwb3J0IGNvbnN0IGhlbHBlcl9pc1BsYWluT2JqZWN0ID0gXy5pc1BsYWluT2JqZWN0O1xuZXhwb3J0IGNvbnN0IGhlbHBlcl9kZWZhdWx0c0RlZXAgPSBfLmRlZmF1bHRzRGVlcDtcbmV4cG9ydCBjb25zdCBoZWxwZXJfbG93ZXJGaXJzdCA9IF8ubG93ZXJGaXJzdDtcbmV4cG9ydCBjb25zdCBoZWxwZXJfZ2V0ID0gXy5nZXQ7XG5leHBvcnQgY29uc3QgaGVscGVyX3RlbXBsYXRlID0gXy50ZW1wbGF0ZTtcbmV4cG9ydCBjb25zdCBoZWxwZXJfY2FtZWxDYXNlID0gXy5jYW1lbENhc2U7XG5cbmV4cG9ydCBjb25zdCBOT09QID0gKCkgPT4ge307XG5leHBvcnQgY29uc3QgaGVscGVyX3NldEZ1bmN0aW9uTmFtZSA9IChuYW1lLCBmKSA9PiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZiwgXCJuYW1lXCIsIHsgdmFsdWU6IG5hbWUgfSk7XG5leHBvcnQgY29uc3QgaGVscGVyX3VybF9hYnMgPSB1cmwgPT4ge2hlbHBlcl91cmxfYWJzLmEuaHJlZiA9IHVybDsgcmV0dXJuIGhlbHBlcl91cmxfYWJzLmEuaHJlZn07XG5oZWxwZXJfdXJsX2Ficy5hID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IGpGYWN0b3J5Q29uZmlnIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBqRmFjdG9yeUxvYWRlciB9IGZyb20gXCIuL2pGYWN0b3J5LWxvYWRlclwiO1xuaW1wb3J0IHsgTk9PUCB9IGZyb20gXCIuL2pGYWN0b3J5LWhlbHBlcnNcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeVRyYWNlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtICNsaW1pdGF0aW9uIyBFcnJvci5zdGFjayBpcyBub3Qgc3RhbmRhcmRpemVkXG4vLyAtICNsaW1pdGF0aW9uIyBFcnJvci5zdGFjayBpcyBub3Qgc291cmNlLW1hcHBlZFxuLy8gLSAjbGltaXRhdGlvbiMgYnVnIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE1ODQyNDRcbi8vIC0gI2xpbWl0YXRpb24jIFN0YWNrVHJhY2UuanMgcmVzb2x2ZXMgc291cmNlbWFwcy4gVW5mb3J0dW5hdGVseSwgaXQgZG9lc24ndCB3b3JrIHdpdGggXCJ3ZWJwYWNrOlwiIHByb3RvY29sXG4vLyAgIHNlZSBodHRwczovL2dpdGh1Yi5jb20vc3RhY2t0cmFjZWpzL3N0YWNrdHJhY2UuanMvaXNzdWVzLzIwOVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS9zb3VyY2UtbWFwL1xuLy8gaHR0cHM6Ly93d3cuc3RhY2t0cmFjZWpzLmNvbS9cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ub3ZvY2FpbmUvc291cmNlbWFwcGVkLXN0YWNrdHJhY2Vcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlUcmFjZV9OT0ZJTFRFUiB7XG5cbiAgICBjb25zdHJ1Y3Rvcih7IGxhYmVsLCBzdGFja1RyYWNlTGltaXQsIGtleXMsIGxpYk9wdGlvbnMgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbCB8fCBcIlRoZSBzdGFjayBoYXMgYmVlbiBwcmludGVkIGluIHRoZSBjb25zb2xlXCI7XG4gICAgICAgIHRoaXMuc3RhY2tUcmFjZUxpbWl0ID0gc3RhY2tUcmFjZUxpbWl0IHx8IEluZmluaXR5O1xuICAgICAgICB0aGlzLmtleXMgPSBrZXlzIHx8IFtcInN0YWNrTG9nXCIsIFwic3RhY2tTb3VyY2VcIl07XG4gICAgICAgIHRoaXMubGliT3B0aW9ucyA9IGxpYk9wdGlvbnMgfHwge31cbiAgICB9XG5cbiAgICBjYXB0dXJlVHJhY2VTb3VyY2Uob21pdEFib3ZlRnVuY3Rpb25OYW1lLCBvbWl0U2VsZikge1xuICAgICAgICBsZXQgX3N0YWNrVHJhY2VMaW1pdDtcbiAgICAgICAgaWYgKHRoaXMuc3RhY2tUcmFjZUxpbWl0KSB7XG4gICAgICAgICAgICBfc3RhY2tUcmFjZUxpbWl0ID0gRXJyb3Iuc3RhY2tUcmFjZUxpbWl0O1xuICAgICAgICAgICAgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID0gdGhpcy5zdGFja1RyYWNlTGltaXRcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9taXRBYm92ZUZ1bmN0aW9uTmFtZSkge1xuICAgICAgICAgICAgb21pdEFib3ZlRnVuY3Rpb25OYW1lID0gXCJjYXB0dXJlVHJhY2VTb3VyY2VcIjtcbiAgICAgICAgICAgIG9taXRTZWxmID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGxldCB0cmFjZVNvdXJjZSA9IHtcbiAgICAgICAgICAgIHNvdXJjZTogbmV3IEVycm9yKCksXG4gICAgICAgICAgICBvbWl0QWJvdmVGdW5jdGlvbk5hbWUsXG4gICAgICAgICAgICBvbWl0U2VsZlxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5zdGFja1RyYWNlTGltaXQpIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9IF9zdGFja1RyYWNlTGltaXRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhY2VTb3VyY2VcbiAgICB9XG5cbiAgICBhdHRhY2hUcmFjZSh0YXJnZXRPYmplY3QsIHRyYWNlU291cmNlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdHJhY2VTb3VyY2UgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRyYWNlU291cmNlID0gdGhpcy5jYXB0dXJlVHJhY2VTb3VyY2UodHJhY2VTb3VyY2UgfHwgXCJhdHRhY2hUcmFjZVwiLCAhdHJhY2VTb3VyY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRyYWNlID0gdHJhY2VTb3VyY2Uuc291cmNlO1xuICAgICAgICB0aGlzLnRvUHJpbnRhYmxlVHJhY2UodHJhY2VTb3VyY2UpXG4gICAgICAgICAgICAudGhlbihyID0+IHRyYWNlID0gcik7XG5cbiAgICAgICAgbGV0IGxvZyA9ICgpID0+IGNvbnNvbGUubG9nKHRyYWNlKSB8fCB0aGlzLmxhYmVsO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXRPYmplY3QsIHRoaXMua2V5c1swXSAvKiB0cmFjZUxvZyAqLywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAvLyBoaWRlIHRoZSBmdW5jdGlvbiBib2R5IHRvIGltcHJvdmUgcmVhZGFiaWxpdHkgaW4gZGV2dG9vbFxuICAgICAgICAgICAgZ2V0OiAoKSA9PiBsb2coKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldE9iamVjdCwgdGhpcy5rZXlzWzFdIC8qIHRyYWNlU291cmNlICovLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIC8vIGhpZGUgdGhlIHRyYWNlU291cmNlIEVycm9yIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkgaW4gZGV2dG9vbCwgc3BlY2lhbGx5IGluIEZpcmVmb3hcbiAgICAgICAgICAgIGdldDogKCkgPT4gdHJhY2VTb3VyY2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdG9QcmludGFibGVUcmFjZSh0cmFjZVNvdXJjZSkge1xuICAgICAgICAvLyBTUEVDOiB0aGlzIG92ZXJyaWRhYmxlIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZVxuICAgICAgICAvLyBiZWNhdXNlIHN0YWNrdHJhY2UgcGFyc2VycyBtYXkgYmUgYXN5bmNocm9ub3VzXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJhY2VTb3VyY2Uuc291cmNlKVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5VHJhY2VfTElCX1NUQUNLVFJBQ0UgZXh0ZW5kcyBKRmFjdG9yeVRyYWNlX05PRklMVEVSIHtcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcihjb25maWcpO1xuICAgIH1cblxuICAgIHRvUHJpbnRhYmxlVHJhY2UodHJhY2VTb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIFN0YWNrVHJhY2UuZnJvbUVycm9yKHRyYWNlU291cmNlLnNvdXJjZSwgdGhpcy5saWJPcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4odHJhY2VGcmFtZXMgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRyYWNlU291cmNlLm9taXRBYm92ZUZ1bmN0aW9uTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2xpY2UgPSB0cmFjZUZyYW1lcy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmZ1bmN0aW9uTmFtZSAmJiB2YWx1ZS5mdW5jdGlvbk5hbWUuZW5kc1dpdGgodHJhY2VTb3VyY2Uub21pdEFib3ZlRnVuY3Rpb25OYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpY2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2VTb3VyY2Uub21pdFNlbGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGljZSsrXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjZUZyYW1lcyA9IHRyYWNlRnJhbWVzLnNsaWNlKHNsaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cmFjZUZyYW1lcyA9IHRyYWNlRnJhbWVzXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIodGhpcy5saWJPcHRpb25zLmZpbHRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VHJhY2VGcmFtZXModHJhY2VGcmFtZXMpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3JtYXRUcmFjZUZyYW1lcyh0cmFjZUZyYW1lcykge1xuICAgICAgICBsZXQgaGVhZGVyO1xuICAgICAgICBsZXQgbGluZVByZWZpeDtcbiAgICAgICAgaWYgKHRoaXMubGliT3B0aW9ucy5vZmZsaW5lICYmIHdpbmRvdy5jaHJvbWUpIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBmYWxsb3dpbmcgc3ludGF4IGlzIGRldGVjdGVkIG9uIENocm9tZSxcbiAgICAgICAgICAgIC8vIHRoZSBjb25zb2xlLmxvZygpIHdpbGwgY29udmVydCB0aGUgZmlsZU5hbWVzIHVzaW5nIHNvdXJjZW1hcHNcbiAgICAgICAgICAgIGhlYWRlciA9IFwiRXJyb3JcXG5cIjsgLy8gbm90ZXMgdGhhdCBhbnl0aGluZyBhZnRlciBcIkVycm9yXCIgaXMgdmFsaWRcbiAgICAgICAgICAgIGxpbmVQcmVmaXggPSBcIlxcdGF0IFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGVhZGVyID0gXCJcIjtcbiAgICAgICAgICAgIGxpbmVQcmVmaXggPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWFkZXIgK1xuICAgICAgICAgICAgdHJhY2VGcmFtZXNcbiAgICAgICAgICAgICAgICAubWFwKHNmID0+IGxpbmVQcmVmaXggKyBzZi50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBqRmFjdG9yeVRyYWNlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjb25zdCBqRmFjdG9yeVRyYWNlID0ge307XG5cbmpGYWN0b3J5TG9hZGVyLm9uSW5pdChmdW5jdGlvbigpIHtcbiAgICBsZXQgY29uZmlnID0gakZhY3RvcnlDb25maWcuSkZhY3RvcnlUcmFjZTtcbiAgICBpZiAoY29uZmlnICYmIGNvbmZpZy51c2UgIT09IGZhbHNlKSB7XG4gICAgICAgIGxldCBjb25zdHJ1Y3RvcjtcbiAgICAgICAgY29uc3RydWN0b3IgPSB0eXBlb2YgY29uZmlnLnVzZSA9PT0gXCJmdW5jdGlvblwiID9cbiAgICAgICAgICAgIGNvbmZpZy51c2UgOlxuICAgICAgICAgICAgdHlwZW9mIFN0YWNrVHJhY2UgPT09IFwib2JqZWN0XCIgPyBKRmFjdG9yeVRyYWNlX0xJQl9TVEFDS1RSQUNFIDogSkZhY3RvcnlUcmFjZV9OT0ZJTFRFUjtcbiAgICAgICAgaWYgKGNvbnN0cnVjdG9yID09PSBKRmFjdG9yeVRyYWNlX0xJQl9TVEFDS1RSQUNFKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJqRmFjdG9yeTogU3RhY2sgdHJhY2UgZW5hYmxlZDsgUGVyZm9ybWFuY2Ugd2lsbCBiZSBhZmZlY3RlZFwiKVxuICAgICAgICB9XG4gICAgICAgIGpGYWN0b3J5VHJhY2UudHJhY2VyID0gbmV3IGNvbnN0cnVjdG9yKGNvbmZpZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgakZhY3RvcnlUcmFjZS50cmFjZXIgPSB7XG4gICAgICAgICAgICBjYXB0dXJlVHJhY2VTb3VyY2U6IE5PT1AsXG4gICAgICAgICAgICBhdHRhY2hUcmFjZTogTk9PUFxuICAgICAgICB9O1xuICAgIH1cbn0pOyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRkFDVE9SWV9ERVYsIGpGYWN0b3J5Q29uZmlnIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBoZWxwZXJfZ2V0LCBoZWxwZXJfaXNOYXRpdmUsIGhlbHBlcl9sb3dlckZpcnN0LCBoZWxwZXJfdGVtcGxhdGUgfSBmcm9tIFwiLi9qRmFjdG9yeS1oZWxwZXJzXCI7XG5pbXBvcnQgeyBqRmFjdG9yeVRyYWNlIH0gZnJvbSBcIi4vSkZhY3RvcnlUcmFjZVwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RXJyb3Jcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9IFwidW5zcGVjaWZpZWQgZXJyb3JcIiwgZGF0YSA9IG51bGwpIHtcbiAgICAgICAgZGF0YSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgZGF0YSk7XG4gICAgICAgIG1lc3NhZ2UgPSBKRmFjdG9yeUVycm9yLnRvUHJpbnRhYmxlKG1lc3NhZ2UsIGRhdGEpO1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy4kZGF0YSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgZGF0YSk7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VcbiAgICB9XG5cbiAgICAqIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICB5aWVsZCB0aGlzLm1lc3NhZ2U7XG4gICAgICAgIHlpZWxkIHRoaXMuJGRhdGE7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldElkKG9iamVjdCkge1xuICAgICAgICByZXR1cm4gb2JqZWN0WyhqRmFjdG9yeUNvbmZpZy5KRmFjdG9yeUVycm9yLmtleXMgfHwgSkZhY3RvcnlFcnJvci5ERUZBVUxUX0tFWVMpLmZpbmQoa2V5ID0+IHtcbiAgICAgICAgICAgIGxldCB2YWwgPSBoZWxwZXJfZ2V0KG9iamVjdCwga2V5KTtcbiAgICAgICAgICAgIHJldHVybiB2YWwgfHwgdmFsID09PSAwXG4gICAgICAgIH0pXVxuICAgIH1cblxuICAgIHN0YXRpYyB0b1ByaW50YWJsZURhdGEoZGF0YSkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZURhdGEgPSB7fTtcbiAgICAgICAgbGV0IG52O1xuICAgICAgICBmb3IgKGxldCBba2V5LCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gdmFsLm5hbWUgKyBcIigpXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gXCJudWxsXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gdmFsLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgobnYgPSBKRmFjdG9yeUVycm9yLmdldElkKHZhbCkpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9ICdcIicgKyBudiArICdcIidcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGVscGVyX2lzTmF0aXZlKHZhbC50b1N0cmluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWwudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudiA9IEpTT04uc3RyaW5naWZ5KHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IG52Lmxlbmd0aCA+IEpGYWN0b3J5RXJyb3IuSlNPTl9NQVhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnYuc3Vic3RyaW5nKDAsIEpGYWN0b3J5RXJyb3IuSlNPTl9NQVgpICsgXCJbLi4uXVwiIDogbnY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBcIltvYmplY3QgXCIgKyB2YWwuY29uc3RydWN0b3IubmFtZSArIFwiXVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gJ1wiJyArIHZhbCArICdcIic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IFN0cmluZyh2YWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGFba2V5XSA9IHZhbFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZURhdGFcbiAgICB9XG5cbiAgICBzdGF0aWMgdG9QcmludGFibGUodGVtcGxhdGUsIGRhdGEpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVNZXNzYWdlID0gW107XG4gICAgICAgIGZvciAobGV0IHBhcnQgb2YgdGVtcGxhdGUuc3BsaXQoXCI7XCIpKSB7XG4gICAgICAgICAgICBsZXQgcGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBsZXQgUkVfUExBQ0VIT0xERVIgPSBKRmFjdG9yeUVycm9yLlJFX1BMQUNFSE9MREVSO1xuICAgICAgICAgICAgUkVfUExBQ0VIT0xERVIubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgIGlmICgocGxhY2Vob2xkZXIgPSBSRV9QTEFDRUhPTERFUi5leGVjKHBhcnQpKSkge1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyWzFdICYmIHBsYWNlaG9sZGVyWzFdIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlTWVzc2FnZS5wdXNoKHBhcnQudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IHdoaWxlICgocGxhY2Vob2xkZXIgPSBSRV9QTEFDRUhPTERFUi5leGVjKHBhcnQpKSAhPT0gbnVsbClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVNZXNzYWdlLnB1c2gocGFydC50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWxwZXJfbG93ZXJGaXJzdChoZWxwZXJfdGVtcGxhdGUodGVtcGxhdGVNZXNzYWdlLmpvaW4oXCI7IFwiKSkoSkZhY3RvcnlFcnJvci50b1ByaW50YWJsZURhdGEoZGF0YSkpKTtcbiAgICB9XG59XG5cbkpGYWN0b3J5RXJyb3IuSlNPTl9NQVggPSA0MDtcbkpGYWN0b3J5RXJyb3IuREVGQVVMVF9LRVlTID0gW1wibmFtZVwiLCBcImlkXCJdO1xuSkZhY3RvcnlFcnJvci5SRV9QTEFDRUhPTERFUiA9IC9cXCR7KFtefV0rKX0vZztcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBqRmFjdG9yeUVycm9yXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBsZXQgakZhY3RvcnlFcnJvciA9IG5ldyBQcm94eShKRmFjdG9yeUVycm9yLCB7XG4gICAgc2V0OiBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgICAgICBsZXQgeyB0ZW1wbGF0ZSB9ID0gdmFsdWU7XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiB0YXJnZXRbcHJvcGVydHldKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhbHJlYWR5IGRlY2xhcmVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0W3Byb3BlcnR5XSA9IGNsYXNzIGV4dGVuZHMgSkZhY3RvcnlFcnJvciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihkYXRhLCB0cmFjZVNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHN1cGVyKHRlbXBsYXRlLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBqRmFjdG9yeVRyYWNlLnRyYWNlci5hdHRhY2hUcmFjZSh0aGlzLiRkYXRhLCB0cmFjZVNvdXJjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIENhdXRpb246IENocm9tZSBhdXRvbWF0aWNhbGx5IHJlc29sdmVzIHNvdXJjZW1hcCB3aGVuIGxvZ2dpbmcgZXJyb3JzXG4gICAgICAgIC8vIGJ1dCBvbmx5IGlmIHRoZSBlcnJvciBuYW1lIHN0YXJ0cyB3aXRoIFwiRXJyb3JcIlxuICAgICAgICB0YXJnZXRbcHJvcGVydHldLnByb3RvdHlwZS5uYW1lID0gXCJFcnJvciBqRmFjdG9yeUVycm9yLlwiICsgcHJvcGVydHk7XG5cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG59KTtcblxuakZhY3RvcnlFcnJvci5JTlZBTElEX1ZBTFVFID0geyB0ZW1wbGF0ZTogXCJpbnZhbGlkIHZhbHVlIGZvciAke3RhcmdldH07IFJlYXNvbjogJHtyZWFzb259OyBHaXZlbjogJHtnaXZlbn1cIiB9O1xuakZhY3RvcnlFcnJvci5JTlZBTElEX0NBTEwgPSB7IHRlbXBsYXRlOiBcImludmFsaWQgY2FsbCAke3RhcmdldH07IFJlYXNvbjogJHtyZWFzb259OyBPd25lcjogJHtvd25lcn1cIiB9O1xuakZhY3RvcnlFcnJvci5QUk9NSVNFX0VYUElSRUQgPSB7IHRlbXBsYXRlOiBcImV4cGlyZWQgcHJvbWlzZSAke3RhcmdldH07IFJlYXNvbjogJHtyZWFzb259XCIgfTtcbmpGYWN0b3J5RXJyb3IuUkVRVUVTVF9FUlJPUiA9IHsgdGVtcGxhdGU6IFwiZXJyb3IgcmVxdWVzdGluZyAke3RhcmdldH07IFJlYXNvbjogJHtyZWFzb259OyBPd25lcjogJHtvd25lcn1cIiB9O1xuakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCA9IHsgdGVtcGxhdGU6IFwiZHVwbGljYXRlZCBrZXkgZm9yICR7dGFyZ2V0fTsgR2l2ZW46ICR7Z2l2ZW59XCIgfTtcbmpGYWN0b3J5RXJyb3IuS0VZX01JU1NJTkcgPSB7IHRlbXBsYXRlOiBcIm1pc3Npbmcga2V5IGZvciAke3RhcmdldH07IEdpdmVuOiAke2dpdmVufVwiIH07IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBoZWxwZXJfaXNOdW1iZXIsIGhlbHBlcl9pc1BsYWluT2JqZWN0LCBoZWxwZXJfaXNTdHJpbmcgfSBmcm9tIFwiLi9qRmFjdG9yeS1oZWxwZXJzXCI7XG5pbXBvcnQgeyBqRmFjdG9yeUxvYWRlciB9IGZyb20gXCIuL2pGYWN0b3J5LWxvYWRlclwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RXhwZWN0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEEgc21hbGwgaW5wdXQvb3V0cHV0IHZhbGlkYXRpb24gdG9vbFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEFscGhhLCBEcmFmdFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQHJldHVybiB7KnxKRmFjdG9yeUV4cGVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEpGYWN0b3J5RXhwZWN0KGxhYmVsLCB2YWx1ZSkge1xuICAgIGlmIChuZXcudGFyZ2V0KSB7XG4gICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgSkZhY3RvcnlFeHBlY3QobGFiZWwsIHZhbHVlKVxuICAgIH1cbn1cblxuY29uc3QgZXJyb3IgPSBmdW5jdGlvbiBqRmFjdG9yeVRocm93KGxhYmVsLCB2YWx1ZSwgbWVzc2FnZSkge1xuICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICB0YXJnZXQ6IGxhYmVsLFxuICAgICAgICByZWFzb246IG1lc3NhZ2UsXG4gICAgICAgIGdpdmVuOiB2YWx1ZVxuICAgIH0pXG59O1xuXG5jb25zdCBzdGF0aWNNZXRob2RzID0ge1xuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90VW5kZWZpbmVkXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG5vdFVuZGVmaW5lZFxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG5vdFVuZGVmaW5lZChsYWJlbCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJjYW5ub3QgYmUgdW5kZWZpbmVkXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RFbXB0eVN0cmluZ1xuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RFbXB0eVN0cmluZ1xuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG5vdEVtcHR5U3RyaW5nKGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJjYW5ub3QgYmUgZW1wdHkgc3RyaW5nXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RGYWxzeVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RGYWxzeVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG5vdEZhbHN5KGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsICdjYW5ub3QgYmUgYSBmYWxzeSB2YWx1ZSAodW5kZWZpbmVkLCBudWxsLCBOYU4sIDAsIFwiXCIpJylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHZhbGlkU3BhY2VzXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHZhbGlkU3BhY2VzXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgdmFsaWRTcGFjZXMobGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICghdmFsdWUucmVwbGFjZSB8fCB2YWx1ZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwiaW52YWxpZCBzcGFjZSBkZWxpbWl0ZXJzXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBtYXRjaFJlZ1xuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gcmVnXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgbWF0Y2hSZWdcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBtYXRjaFJlZyhsYWJlbCwgdmFsdWUsIHJlZykge1xuICAgICAgICBpZiAoIXJlZy50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCAnc3RyaW5nIFwiJyArIHZhbHVlICsgJ1wiIG11c3QgbWF0Y2ggJyArIHJlZylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHBhcmFtIHsuLi4qfSBleHBlY3RlZFxuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlKGxhYmVsLCB2YWx1ZSwgLi4uZXhwZWN0ZWQpIHtcbiAgICAgICAgbGV0IG5hbWUsIG9rID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGNvbnN0cnVjdG9yIG9mIGV4cGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAoY29uc3RydWN0b3IgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuYW1lID0gXCJOdWxsXCJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJuYW1lXCIgaW4gY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgICAgICBuYW1lID0gY29uc3RydWN0b3IubmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRlc3QgPSBzdGF0aWNNZXRob2RzW1widHlwZVwiICsgbmFtZV07XG4gICAgICAgICAgICBpZiAodGVzdCkge1xuICAgICAgICAgICAgICAgIHRyeSB7b2sgPSB0ZXN0KGxhYmVsLCB2YWx1ZS8qLCBlKi8pfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2sgPSB2YWx1ZSBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2spIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvaykge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgW1wiICsgZXhwZWN0ZWQubWFwKGUgPT4gZS5uYW1lKS5qb2luKFwiLCBcIikgKyBcIl1cIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVOdWxsXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVOdWxsXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgdHlwZU51bGwobGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgbnVsbFwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZUJvb2xlYW5cbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZUJvb2xlYW5cbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlQm9vbGVhbihsYWJlbCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB0cnVlICYmIHZhbHVlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgYSBib29sZWFuXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlU3RyaW5nXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVTdHJpbmdcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlU3RyaW5nKGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIWhlbHBlcl9pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIGEgc3RyaW5nXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlTnVtYmVyXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVOdW1iZXJcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlTnVtYmVyKGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIWhlbHBlcl9pc051bWJlcih2YWx1ZSkpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIGEgbnVtYmVyXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlRnVuY3Rpb25cbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZUZ1bmN0aW9uXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgdHlwZUZ1bmN0aW9uKGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAoISh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIGEgZnVuY3Rpb25cIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVQbGFpbk9iamVjdFxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlUGxhaW5PYmplY3RcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlUGxhaW5PYmplY3QobGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICghaGVscGVyX2lzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBiZSBhIHBsYWluIG9iamVjdFwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgZXF1YWxcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHBhcmFtIHsqfSBleHBlY3RlZFxuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGVxdWFsXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgZXF1YWwobGFiZWwsIHZhbHVlLCAuLi5leHBlY3RlZCkge1xuICAgICAgICBsZXQgb2sgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgZSBvZiBleHBlY3RlZCkge1xuICAgICAgICAgICAgaWYgKChvayA9IHZhbHVlID09PSBlKSkgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9rKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBiZSBvbmUgb2YgW1wiICsgZXhwZWN0ZWQgKyBcIl1cIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBlcXVhbEluXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBleHBlY3RlZFxuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGVxdWFsSW5cbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBlcXVhbEluKGxhYmVsLCB2YWx1ZSwgZXhwZWN0ZWQpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkKSkge1xuICAgICAgICAgICAgZXhwZWN0ZWQgPSBPYmplY3QudmFsdWVzKGV4cGVjdGVkKVxuICAgICAgICB9XG4gICAgICAgIGlmICghZXhwZWN0ZWQuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBiZSBvbmUgZnJvbSBbXCIgKyBleHBlY3RlZC5qb2luKFwiLCBcIikgKyBcIl1cIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHByb3BlcnRpZXNcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHBhcmFtIHtBcnJheX0gZXhwZWN0ZWRcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBwcm9wZXJ0aWVzXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgcHJvcGVydGllcyhsYWJlbCwgdmFsdWUsIGV4cGVjdGVkKSB7XG4gICAgICAgIGZvciAobGV0IG5hbWUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChsYWJlbCArICcsIHByb3BlcnR5IG5hbWUgXCInICsgbmFtZSArICdcIicsIG5hbWUpLmVxdWFsSW4oZXhwZWN0ZWQpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB3cml0YWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgd3JpdGFibGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB3cml0YWJsZShsYWJlbCwgdmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkud3JpdGFibGUpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIHdyaXRhYmxlXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RXcml0YWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90V3JpdGFibGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBub3RXcml0YWJsZShsYWJlbCwgdmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KS53cml0YWJsZSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3Qgbm90IGJlIHdyaXRhYmxlXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBlbnVtZXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBlbnVtZXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgZW51bWVyYWJsZShsYWJlbCwgdmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgZW51bWVyYWJsZVwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90RW51bWVyYWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90RW51bWVyYWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG5vdEVudW1lcmFibGUobGFiZWwsIHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3Qgbm90IGJlIGVudW1lcmFibGVcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGNvbmZpZ3VyYWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgY29uZmlndXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgY29uZmlndXJhYmxlKGxhYmVsLCB2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmICghT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KS5jb25maWd1cmFibGUpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIGNvbmZpZ3VyYWJsZVwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90Q29uZmlndXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RDb25maWd1cmFibGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBub3RDb25maWd1cmFibGUobGFiZWwsIHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkuY29uZmlndXJhYmxlKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBub3QgYmUgY29uZmlndXJhYmxlXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCByZXNlcnZlZFByb3BlcnR5XG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCByZXNlcnZlZFByb3BlcnR5XG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgcmVzZXJ2ZWRQcm9wZXJ0eShsYWJlbCwgdmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoa2V5IGluIHZhbHVlKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwiaXMgYSByZXNlcnZlZCBwcm9wZXJ0eVwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxufTtcblxuakZhY3RvcnlMb2FkZXIub25Jbml0KGZ1bmN0aW9uKCkge1xuICAgIE9iamVjdC5hc3NpZ24oSkZhY3RvcnlFeHBlY3QsIHN0YXRpY01ldGhvZHMpO1xuICAgIC8vIEdlbmVyYXRlIG1lbWJlcnMgZnJvbSBzdGF0aWMgbWV0aG9kc1xuICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzdGF0aWNNZXRob2RzKSkge1xuICAgICAgICBKRmFjdG9yeUV4cGVjdC5wcm90b3R5cGVbbmFtZV0gPVxuICAgICAgICAgICAgZnVuY3Rpb24gY2FsbFN0YXRpYyguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3RbbmFtZV0odGhpcy5sYWJlbCwgdGhpcy52YWx1ZSwgLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgICAgIH1cbiAgICB9XG59KTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfREVWLCBqRmFjdG9yeUNvbmZpZyB9IGZyb20gXCIuL2pGYWN0b3J5LWVudlwiO1xuaW1wb3J0IHsgSkZhY3RvcnlFeHBlY3QgfSBmcm9tIFwiLi9KRmFjdG9yeUV4cGVjdFwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5VHJhaXRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeVRyYWl0cyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtKRmFjdG9yeUNvcmVPYmplY3R8T2JqZWN0fSBjYWxsZXJJbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7Q2xhc3N8RnVuY3Rpb259IGNhbGxlckNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjYWxsZXJJbnN0YW5jZSwgY2FsbGVyQ29uc3RydWN0b3IsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0pGYWN0b3J5Q29yZU9iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FsbGVySW5zdGFuY2UgPSBjYWxsZXJJbnN0YW5jZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NsYXNzfEZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWxsZXJDb25zdHJ1Y3RvciA9IGNhbGxlckNvbnN0cnVjdG9yO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICB1c2UodHJhaXQsIC4uLnRyYWl0QXJncykge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5VHJhaXRzKHRyYWl0KVwiLCB0cmFpdCkudHlwZUZ1bmN0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjYWxsZXJDb25zdHJ1Y3RvciBpcyBub3QgYWx3YXlzIHRoZSBjYWxsZXJJbnN0YW5jZS5jb25zdHJ1Y3RvcjpcbiAgICAgICAgLy8gVGhlIFRyYWl0IGNhbiBiZSBpbmplY3RlZCBpbiBhbiBpbmhlcml0ZWQgY29uc3RydWN0b3IgZnJvbSBzdXBlcigpIGF0IGNhbGwgdGltZVxuICAgICAgICBsZXQgeyBjYWxsZXJJbnN0YW5jZSwgY2FsbGVyQ29uc3RydWN0b3IgfSA9IHRoaXM7XG5cbiAgICAgICAgLy8gRGV0ZWN0IGltcHJvcGVyIGR1cGxpY2F0aW9uIChjYW4gYmUgYSB0cmFpdCBhbHJlYWR5IGNhbGxlZCBieSBhIHN1cGVyIGNsYXNzKVxuICAgICAgICBsZXQgY2FjaGUgPSBKRmFjdG9yeVRyYWl0cy5DQUNIRS5nZXQoY2FsbGVySW5zdGFuY2UpO1xuXG4gICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgICAgaWYgKGNhY2hlLmhhcyh0cmFpdCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoakZhY3RvcnlDb25maWcuVHJhaXRMb2cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGAke3RyYWl0Lm5hbWV9IGFscmVhZHkgY2FsbGVkIG9uYCwgY2FsbGVySW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FjaGUuYWRkKHRyYWl0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgSkZhY3RvcnlUcmFpdHMuQ0FDSEUuc2V0KGNhbGxlckluc3RhbmNlLCBuZXcgV2Vha1NldChbdHJhaXRdKSlcbiAgICAgICAgfVxuXG4gICAgICAgICFjYWxsZXJDb25zdHJ1Y3Rvci5KRmFjdG9yeVRyYWl0ICYmIChjYWxsZXJDb25zdHJ1Y3Rvci5KRmFjdG9yeVRyYWl0ID0gbmV3IFdlYWtTZXQpO1xuXG4gICAgICAgIGlmICghY2FsbGVyQ29uc3RydWN0b3IuSkZhY3RvcnlUcmFpdC5oYXModHJhaXQpKSB7XG4gICAgICAgICAgICBjYWxsZXJDb25zdHJ1Y3Rvci5KRmFjdG9yeVRyYWl0LmFkZCh0cmFpdCk7XG4gICAgICAgICAgICB0aGlzLmV4cG9ydCh0cmFpdC5wcm90b3R5cGUsIGNhbGxlckNvbnN0cnVjdG9yLnByb3RvdHlwZSk7XG4gICAgICAgICAgICB0aGlzLmV4cG9ydCh0cmFpdCwgY2FsbGVyQ29uc3RydWN0b3IsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW4gYSBUcmFpdC5jb25zdHJ1Y3RvcihjYWxsZXJJbnN0YW5jZSwgLi4uYXJncykgOiB0aGlzICE9IGNhbGxlckluc3RhbmNlXG4gICAgICAgIC8vIEluIGEgVHJhaXQudHJhaXRfY29uc3RydWN0b3IoLi4uYXJncykgOiB0aGlzID09IGNhbGxlckluc3RhbmNlICh0cmFpdHMgaXMgaW5qZWN0ZWQgYW5kIGF2YWlsYWJsZSlcblxuICAgICAgICAvLyBUcmFpdHMgYXJlIGluamVjdGlvbnMuIFRoZXkgYXJlIG5vdCBkeW5hbWljIGluaGVyaXRhbmNlLlxuICAgICAgICAvLyBTbyB0aGUgVHJhaXQuY29uc3RydWN0b3IoKSBkb2Vzbid0IHNoYXJlIHRoZSBcInRoaXNcIiBrZXl3b3JkIHdpdGggaXRzIGNhbGxlci5cblxuICAgICAgICAvLyAjbGltaXRhdGlvbiMgTm8gd2F5IHRvIGJpbmQgYW4gRVM2IGNsYXNzIGNvbnN0cnVjdG9yIHRvIGFuIG9iamVjdFxuICAgICAgICAvLyA9PiBJbXBsZW1lbnRlciBjYW4gZGVmaW5lIGEgXCJ0cmFpdF9jb25zdHJ1Y3RvcigpXCIgdGhhdCBpcyBhdXRvbWF0aWNhbGx5IGJvdW5kIHRvIFwiY2FsbGVySW5zdGFuY2VcIlxuICAgICAgICAvLyBhbmQgY2FsbGVkIGFmdGVyIHRoZSBuYXRpdmUgdHJhaXQgY29uc3RydWN0b3IoKS5cblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcFxuICAgICAgICBsZXQgdHJhaXRJbnN0YW5jZSA9IG5ldyB0cmFpdChjYWxsZXJJbnN0YW5jZSwgLi4udHJhaXRBcmdzKTtcbiAgICAgICAgaWYgKHRyYWl0SW5zdGFuY2UudHJhaXRfY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIHRyYWl0SW5zdGFuY2UudHJhaXRfY29uc3RydWN0b3IuYXBwbHkoY2FsbGVySW5zdGFuY2UsIHRyYWl0QXJncylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIGV4cG9ydChzb3VyY2UsIHRhcmdldCwgaXNTdGF0aWMpIHtcbiAgICAgICAgbGV0IHNvdXJjZURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpO1xuXG4gICAgICAgIGZvciAobGV0IHByb3BlcnR5TmFtZSBvZiBPYmplY3Qua2V5cyhzb3VyY2VEZXNjcmlwdG9yKSkge1xuICAgICAgICAgICAgbGV0IHByZWZpeCA9IEpGYWN0b3J5VHJhaXRzLmdldFByZWZpeChwcm9wZXJ0eU5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoSkZhY3RvcnlUcmFpdHMuZ2V0VGFyZ2V0KHByb3BlcnR5TmFtZSwgdGFyZ2V0LCBwcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHByb3BlcnR5RGVzY3JpcHRvciA9IHNvdXJjZURlc2NyaXB0b3JbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgICBsZXQgcGFyc2VkID0gKHRoaXMub3B0aW9ucy5wYXJzZXIgfHwgSkZhY3RvcnlUcmFpdHMuZGVmYXVsdFBhcnNlcikoXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZSwgcHJvcGVydHlEZXNjcmlwdG9yLCBzb3VyY2UsIHRhcmdldCwgaXNTdGF0aWNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgKHsgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eURlc2NyaXB0b3IgfSA9IHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5TmFtZSwgcHJvcGVydHlEZXNjcmlwdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFBhcnNlcihwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvciwgc291cmNlLCB0YXJnZXQsIGlzU3RhdGljKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHByb3BlcnR5RGVzY3JpcHRvci52YWx1ZTtcblxuICAgICAgICBpZiAoaXNTdGF0aWMpIHtyZXR1cm4gbnVsbH0gLy8gZG9uJ3QgZXhwb3J0IHN0YXRpYyBtZW1iZXJzXG5cbiAgICAgICAgaWYgKHByb3BlcnR5TmFtZSBpbiB0YXJnZXQpIHsgLy8gc2tpcCBleGlzdGluZyBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBpZiAoakZhY3RvcnlDb25maWcuVHJhaXRMb2cpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgIGAke3RhcmdldC5jb25zdHJ1Y3Rvci5uYW1lfT4gc2tpcHBpbmcgZXhwb3J0IG9mIGV4aXN0aW5nIHByb3BlcnR5IFwiJHtwcm9wZXJ0eU5hbWV9XCJgLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikgeyAvLyBwcmV2ZW50IHNoYXJlZCBvYmplY3QgZXhwb3J0YXRpb25cbiAgICAgICAgICAgIGlmIChqRmFjdG9yeUNvbmZpZy5UcmFpdExvZykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgYCR7dGFyZ2V0LmNvbnN0cnVjdG9yLm5hbWV9PiBza2lwcGluZyBleHBvcnQgb2Ygc2hhcmVkIG9iamVjdCBcIiR7cHJvcGVydHlOYW1lfVwiYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvciB9XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFByZWZpeChrZXkpIHtcbiAgICAgICAgbGV0IHNwbGl0ID0ga2V5LnNwbGl0KFwiX1wiKTtcbiAgICAgICAgcmV0dXJuIHNwbGl0Lmxlbmd0aCA+IDEgPyBzcGxpdFswXSA6IG51bGw7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFRhcmdldChrZXksIHRhcmdldCwgcHJlZml4KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIEpGYWN0b3J5VHJhaXRzLkVYQ0xVREVTLmluY2x1ZGVzKGtleSkgfHxcbiAgICAgICAgICAgIHByZWZpeCA9PT0gXCJ0cmFpdFwiXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXJnZXRcbiAgICB9XG59XG5cbkpGYWN0b3J5VHJhaXRzLkNBQ0hFID0gbmV3IFdlYWtNYXA7XG5KRmFjdG9yeVRyYWl0cy5FWENMVURFUyA9IFtcImNvbnN0cnVjdG9yXCIsIFwicHJvdG90eXBlXCIsIFwibGVuZ3RoXCIsIFwic2l6ZVwiXTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfREVWLCBqRmFjdG9yeUNvbmZpZyB9IGZyb20gXCIuL2pGYWN0b3J5LWVudlwiO1xuaW1wb3J0IHsgSkZhY3RvcnlFeHBlY3QgfSBmcm9tIFwiLi9KRmFjdG9yeUV4cGVjdFwiO1xuaW1wb3J0IHsgakZhY3RvcnlFcnJvciB9IGZyb20gXCIuL0pGYWN0b3J5RXJyb3JcIjtcbmltcG9ydCB7IGhlbHBlcl9zZXRGdW5jdGlvbk5hbWUgfSBmcm9tIFwiLi9qRmFjdG9yeS1oZWxwZXJzXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXIge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH1cblxuICAgICogW1N5bWJvbC5pdGVyYXRvcl0oaGFuZGxlckdyb3VwcyA9IFtdKSB7XG5cbiAgICAgICAgaWYgKCFoYW5kbGVyR3JvdXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgaGFuZGxlckdyb3VwcyA9IE9iamVjdC5rZXlzKHRoaXMuaGFuZGxlcnMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYW5kbGVyR3JvdXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgaGFuZGxlckdyb3VwcyA9IFtcImRlZmF1bHRcIl1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGhhbmRsZXJHcm91cCBvZiBoYW5kbGVyR3JvdXBzKSB7XG4gICAgICAgICAgICBpZiAoaGFuZGxlckdyb3VwIGluIHRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCogdGhpcy5oYW5kbGVyc1toYW5kbGVyR3JvdXBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQHJldHVybiB7SkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyfSAqL1xuICAgIGZpcnN0KGhhbmRsZXJHcm91cCwgaGFuZGxlcikge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgW2hhbmRsZXJHcm91cCwgaGFuZGxlcl0gPSBbXCJkZWZhdWx0XCIsIGhhbmRsZXJHcm91cF1cbiAgICAgICAgfVxuICAgICAgICAodGhpcy5oYW5kbGVyc1toYW5kbGVyR3JvdXBdIHx8ICh0aGlzLmhhbmRsZXJzW2hhbmRsZXJHcm91cF0gPSBbXSkpLnVuc2hpZnQoaGFuZGxlcik7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgLyoqIEByZXR1cm4ge0pGYWN0b3J5RnVuY3Rpb25Db21wb3Nlcn0gKi9cbiAgICBsYXN0KGhhbmRsZXJHcm91cCwgaGFuZGxlcikge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgW2hhbmRsZXJHcm91cCwgaGFuZGxlcl0gPSBbXCJkZWZhdWx0XCIsIGhhbmRsZXJHcm91cF1cbiAgICAgICAgfVxuICAgICAgICAodGhpcy5oYW5kbGVyc1toYW5kbGVyR3JvdXBdIHx8ICh0aGlzLmhhbmRsZXJzW2hhbmRsZXJHcm91cF0gPSBbXSkpLnB1c2goaGFuZGxlcik7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgLyoqIEByZXR1cm4geyhmdW5jdGlvbigpOiAqKSAmIHtjb21wb3NlcjogSkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyfX0gKi9cbiAgICBjb21wb3NlKC4uLmhhbmRsZXJHcm91cHMpIHtcbiAgICAgICAgbGV0IGNvbXBvc2VyID0gdGhpcztcbiAgICAgICAgbGV0IGNvbXBvc2l0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhISAvL1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgd3JhcHBlZCBmdW5jdGlvbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgWW91IHNob3VsZCBCbGFja2JveCBKRmFjdG9yeUZ1bmN0aW9uLm1qcyAgICAvL1xuICAgICAgICAgICAgLy8gICAgdG8gc2ltcGxpZnkgZGVidWdnaW5nICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhISAvL1xuICAgICAgICAgICAgbGV0IGNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IEFycmF5LmZyb20oYXJndW1lbnRzKSxcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxldCBpdGVyYXRvciA9IGNvbXBvc2VyW1N5bWJvbC5pdGVyYXRvcl0oaGFuZGxlckdyb3Vwcyk7XG4gICAgICAgICAgICBsZXQgaXRlcmF0aW9uID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgcmV0dXJuIEpGYWN0b3J5RnVuY3Rpb25Db21wb3Nlci5jb21wb3NpdGVfaXRlcmF0b3IoXG4gICAgICAgICAgICAgICAgdGhpcyAvKiBwcmVzZXJ2ZSBjYWxsIHNjb3BlICovLCBjb250ZXh0LCBpdGVyYXRpb24sIGl0ZXJhdG9yKVxuICAgICAgICB9O1xuICAgICAgICBjb21wb3NpdGUuY29tcG9zZXIgPSBjb21wb3NlcjtcbiAgICAgICAgcmV0dXJuIGNvbXBvc2l0ZTtcbiAgICB9XG5cbiAgICAvLyBTUEVDOiBDb21wb3NpdGUgZnVuY3Rpb25zIHJldHVybnMgcHJvbWlzZSAqb25seSogaWYgYXQgbGVhc3RcbiAgICAvLyBvbmUgaGFuZGxlciByZXR1cm5zIGEgcHJvbWlzZSAoYXN5bmMgZnVuY3Rpb24gb3IgcHJvbWlzZSByZXR1cm4pXG4gICAgLy8gU28gd2UgY2Fubm90IGp1c3QgaXRlcmF0ZSB1c2luZyBhbiBcImF3YWl0IGZvciBvZlwiXG4gICAgc3RhdGljIGNvbXBvc2l0ZV9pdGVyYXRvcihzY29wZSwgY29udGV4dCwgaXRlcmF0aW9uLCBoYW5kbGVycykge1xuICAgICAgICBsZXQgaGFuZGxlcixcbiAgICAgICAgICAgIHJlc3VsdDtcblxuICAgICAgICB3aGlsZSAoIWNvbnRleHQuY2FuY2VsZWQgJiYgIWl0ZXJhdGlvbi5kb25lKSB7XG4gICAgICAgICAgICBoYW5kbGVyID0gaXRlcmF0aW9uLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaGFuZGxlci5jYWxsKHNjb3BlLCBjb250ZXh0LCAuLi5jb250ZXh0LnBhcmFtZXRlcnMpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIoY29udGV4dCwgLi4uY29udGV4dC5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlcmF0aW9uID0gaGFuZGxlcnMubmV4dCgpOyAvLyBwcmVwYXJlcyBuZXh0IGl0ZXJhdGlvbiB0byBrbm93IGlmIFwiZG9uZVwiXG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVyYXRpb24uZG9uZVxuICAgICAgICAgICAgICAgICAgICAvLyBjYXNlIG9mIGxhc3QgaGFuZGxlciByZXR1cm5pbmcgYSBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIC8vICNsaW1pdGF0aW9uIyBub3cgd2F5IHRvIGRldGVjdCBpZiB0aGUgcHJvbWlzZSBpcyB0aGUgcmV0dXJuZWQgdmFsdWUgb3IgYW4gXCJhd2FpdFwiXG4gICAgICAgICAgICAgICAgICAgIC8vICh3ZSBkb24ndCB3YW50IHRvIGNoYW5nZSB0aGUgdmFsdWUgb2YgY29udGV4dC5yZXN1bHQgZHVyaW5nIGEgcGVuZGluZyBoYW5kbGVyKVxuICAgICAgICAgICAgICAgICAgICAvLyA9PiBuYXRpdmUgUHJvbWlzZSBhcmUgYWx3YXlzIGNoYWluZWRcbiAgICAgICAgICAgICAgICAgICAgJiYgcmVzdWx0LmNvbnN0cnVjdG9yICE9PSBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVzdWx0ID0gcmVzdWx0IC8vIHdlIGNhbiBzYWZlbHkgc2V0IHRoZSBuZXcgcmVzdWx0XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKGhlbHBlcl9zZXRGdW5jdGlvbk5hbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICBbaGFuZGxlci5uYW1lLCBcIltjb21wb3NpdGVBc3luY0hhbmRsZXJdXCJdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyLmNvbXBvc2l0ZV9pdGVyYXRvcihzY29wZSwgY29udGV4dCwgaXRlcmF0aW9uLCBoYW5kbGVycylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRleHQucmVzdWx0ID0gcmVzdWx0XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRleHQucmVzdWx0XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RnVuY3Rpb25FeHBpcmFibGUgLSBFeHBpcmFibGUgRnVuY3Rpb24gUGF0dGVyblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBmdW5jdGlvbiBqRmFjdG9yeUZ1bmN0aW9uRXhwaXJhYmxlKG9yaWdpbmFsSGFuZGxlcikge1xuICAgIHJldHVybiBuZXcgSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZShvcmlnaW5hbEhhbmRsZXIpLmNvbXBvc2UoKVxufVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcmlnaW5hbEhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEhhbmRsZXIgPSBvcmlnaW5hbEhhbmRsZXI7XG4gICAgICAgIHRoaXMuZXhwaXJlZENhbGxzID0gMDtcbiAgICAgICAgdGhpcy5jb21wb3NlciA9IG5ldyBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXI7XG5cbiAgICAgICAgbGV0IGlzRXhwaXJlZCA9IHRoaXMuY29tcG9zZXIuY29tcG9zZShcImNvbmRpdGlvbnNcIik7XG4gICAgICAgIGxldCBleHBpcmFibGUgPSB0aGlzO1xuICAgICAgICBsZXQgZXhwaXJlZDtcblxuICAgICAgICAvLyBjYW5ub3QgdXNlIGEgcmVhbCBhY2Nlc3NvciBoZXJlIChjb25kaXRpb25zIGNhbiBiZSBzY29wZWQsIHNvIGlzRXhwaXJlZCB0b28pXG4gICAgICAgIHRoaXMuaXNFeHBpcmVkID0gc2NvcGUgPT4gZXhwaXJlZCB8fCBpc0V4cGlyZWQuY2FsbChzY29wZSkgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuc2V0RXhwaXJlZCA9IHZhbHVlID0+IGV4cGlyZWQgPSB2YWx1ZSA/XG4gICAgICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIEVycm9yID8gdmFsdWUgOiBuZXcgakZhY3RvcnlFcnJvci5JTlZBTElEX0NBTEwoe1xuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5vcmlnaW5hbEhhbmRsZXIsXG4gICAgICAgICAgICAgICAgcmVhc29uOiBcIm1hbnVhbGx5IGV4cGlyZWRcIlxuICAgICAgICAgICAgfSkgOiBCb29sZWFuKHRoaXMuZXhwaXJlZENhbGxzID0gMCk7XG5cbiAgICAgICAgdGhpcy5hZGRFeHBpcmVDb25kaXRpb24gPSBmdW5jdGlvbihjb25kaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9zZXIubGFzdChcImNvbmRpdGlvbnNcIiwgZnVuY3Rpb24oY29udGV4dCkge1xuICAgICAgICAgICAgICAgIGxldCBkb25lID0gZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZS5hZGRFeHBpcmVDb25kaXRpb24oKSwgcmVzdWx0XCIsIHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHlwZShCb29sZWFuLCBFcnJvcilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhwaXJhYmxlLnNldEV4cGlyZWQocmVzdWx0ID9cbiAgICAgICAgICAgICAgICAgICAgICAgIChjb250ZXh0LmNhbmNlbGVkID0gdHJ1ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvciA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgakZhY3RvcnlFcnJvci5JTlZBTElEX0NBTEwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGV4cGlyYWJsZS5vcmlnaW5hbEhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJjb25kaXRpb25hbGx5IGV4cGlyZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gY29uZGl0aW9uLmFwcGx5KHRoaXMsIGNvbnRleHQucGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgPyByZXN1bHQudGhlbihkb25lKSA6IGRvbmUocmVzdWx0KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9zZSgpIHtcbiAgICAgICAgbGV0IGV4cGlyYWJsZSA9IHRoaXM7XG4gICAgICAgIGxldCBjb21wb3NpdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxldCBpc0V4cGlyZWQgPSBleHBpcmFibGUuaXNFeHBpcmVkKHRoaXMpO1xuICAgICAgICAgICAgbGV0IGNhbGwgPSBleHBpcmFibGUuY29uc3RydWN0b3IuY2FsbC5iaW5kKHVuZGVmaW5lZCwgZXhwaXJhYmxlLCB0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgcmV0dXJuIGlzRXhwaXJlZCBpbnN0YW5jZW9mIFByb21pc2UgPyBpc0V4cGlyZWQudGhlbihjYWxsKSA6IGNhbGwoaXNFeHBpcmVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oY29tcG9zaXRlLCB7XG4gICAgICAgICAgICBleHBpcmFibGU6IHRoaXMsXG4gICAgICAgICAgICBpc0V4cGlyZWQ6IGYgPT4gdGhpcy5pc0V4cGlyZWQoZiksXG4gICAgICAgICAgICBzZXRFeHBpcmVkOiBmID0+IHRoaXMuc2V0RXhwaXJlZChmKSxcbiAgICAgICAgICAgIGFkZEV4cGlyZUNvbmRpdGlvbjogZiA9PiB7dGhpcy5hZGRFeHBpcmVDb25kaXRpb24oZik7IHJldHVybiBjb21wb3NpdGV9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBjYWxsKGV4cGlyYWJsZSwgc2NvcGUsIGFyZ3MsIGlzRXhwaXJlZCkge1xuICAgICAgICByZXR1cm4gaXNFeHBpcmVkID8gZXhwaXJhYmxlLm9uRXhwaXJlZChpc0V4cGlyZWQpIDogZXhwaXJhYmxlLm9uTm90RXhwaXJlZChzY29wZSwgYXJncyk7XG4gICAgfVxuXG4gICAgb25FeHBpcmVkKGV4cGlyZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuZXhwaXJlZENhbGxzIDwgSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZS5NYXhXYXJuaW5nRXhwaXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5leHBpcmVkQ2FsbHMrKztcbiAgICAgICAgICAgIGlmIChqRmFjdG9yeUNvbmZpZy5UcmFpdExvZykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiguLi5uZXcgakZhY3RvcnlFcnJvci5JTlZBTElEX0NBTEwoe1xuICAgICAgICAgICAgICAgICAgICAuLi5leHBpcmVkLiRkYXRhLFxuICAgICAgICAgICAgICAgICAgICByZWFzb246IGV4cGlyZWQuJGRhdGEucmVhc29uXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwiOyBleHBpcmVkQ2FsbHM9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgdGhpcy5leHBpcmVkQ2FsbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICsgKHRoaXMuZXhwaXJlZENhbGxzID09PSBKRmFjdG9yeUZ1bmN0aW9uRXhwaXJhYmxlLk1heFdhcm5pbmdFeHBpcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIjsgTWF4IFdhcm5pbmcgRXhjZWVkZWRcIiA6IFwiXCIpXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleHBpcmVkXG4gICAgfVxuXG4gICAgb25Ob3RFeHBpcmVkKHNjb3BlLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbmFsSGFuZGxlci5hcHBseShzY29wZSwgYXJncylcbiAgICB9XG59XG5cbkpGYWN0b3J5RnVuY3Rpb25FeHBpcmFibGUuTWF4V2FybmluZ0V4cGlyYXRpb24gPSAxMDtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeUZ1bmN0aW9uQ29uZGl0aW9uYWwgLSBDb25kaXRpb25hbCBGdW5jdGlvbiBQYXR0ZXJuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGZ1bmN0aW9uIGpGYWN0b3J5RnVuY3Rpb25Db25kaXRpb25hbChvcmlnaW5hbEhhbmRsZXIpIHtcbiAgICByZXR1cm4gbmV3IEpGYWN0b3J5RnVuY3Rpb25Db25kaXRpb25hbChvcmlnaW5hbEhhbmRsZXIpLmNvbXBvc2UoKVxufVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlGdW5jdGlvbkNvbmRpdGlvbmFsIHtcblxuICAgIGNvbnN0cnVjdG9yKG9yaWdpbmFsSGFuZGxlcikge1xuICAgICAgICB0aGlzLm9yaWdpbmFsSGFuZGxlciA9IG9yaWdpbmFsSGFuZGxlcjtcbiAgICAgICAgdGhpcy5jb21wb3NlciA9IG5ldyBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXI7XG4gICAgICAgIHRoaXMuY29tcG9zZXIuZmlyc3QoXCJvcmlnaW5hbFwiLCBoZWxwZXJfc2V0RnVuY3Rpb25OYW1lKFxuICAgICAgICAgICAgW29yaWdpbmFsSGFuZGxlci5uYW1lLCBcIltjb25kaXRpb25dXCJdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxIYW5kbGVyLmFwcGx5KHRoaXMsIGNvbnRleHQucGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNvbXBvc2UoKSB7XG4gICAgICAgIGxldCBjb21wb3NpdGUgPSB0aGlzLmNvbXBvc2VyLmNvbXBvc2UoXCJjb25kaXRpb25zXCIsIFwib3JpZ2luYWxcIik7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGNvbXBvc2l0ZSwge1xuICAgICAgICAgICAgY29uZGl0aW9uYWw6IHRoaXMsXG4gICAgICAgICAgICBhZGRDb25kaXRpb246IGYgPT4ge3RoaXMuYWRkQ29uZGl0aW9uKGYpOyByZXR1cm4gY29tcG9zaXRlfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRDb25kaXRpb24oY29uZGl0aW9uKSB7XG4gICAgICAgIHRoaXMuY29tcG9zZXIubGFzdChcImNvbmRpdGlvbnNcIiwgZnVuY3Rpb24oY29udGV4dCkge1xuICAgICAgICAgICAgbGV0IGhhbmRsZSA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUZ1bmN0aW9uQ29uZGl0aW9uYWwuYWRkQ29uZGl0aW9uKCksIHJlc3VsdFwiLCByZXN1bHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudHlwZUJvb2xlYW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIXJlc3VsdCAmJiAoY29udGV4dC5jYW5jZWxlZCA9IHRydWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBjb25kaXRpb24uYXBwbHkodGhpcywgY29udGV4dC5wYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlID8gcmVzdWx0LnRoZW4oaGFuZGxlKSA6IGhhbmRsZShyZXN1bHQpO1xuICAgICAgICB9KVxuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeUZ1bmN0aW9uV3JhcHBhYmxlIC0gV3JhcHBhYmxlIEZ1bmN0aW9uIFBhdHRlcm5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgZnVuY3Rpb24gakZhY3RvcnlGdW5jdGlvbldyYXBwYWJsZShvcmlnaW5hbEhhbmRsZXIpIHtcbiAgICByZXR1cm4gbmV3IEpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUob3JpZ2luYWxIYW5kbGVyKS5jb21wb3NlKClcbn1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUge1xuXG4gICAgY29uc3RydWN0b3Iob3JpZ2luYWxIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxIYW5kbGVyID0gb3JpZ2luYWxIYW5kbGVyO1xuICAgICAgICB0aGlzLmNvbXBvc2VyID0gbmV3IEpGYWN0b3J5RnVuY3Rpb25Db21wb3NlcjtcbiAgICAgICAgdGhpcy5jb21wb3Nlci5maXJzdChcIm9yaWdpbmFsXCIsIGhlbHBlcl9zZXRGdW5jdGlvbk5hbWUoXG4gICAgICAgICAgICBbb3JpZ2luYWxIYW5kbGVyLm5hbWUsIFwiW3dyYXBwZWRdXCJdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxIYW5kbGVyLmFwcGx5KHRoaXMsIGNvbnRleHQucGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNvbXBvc2UoKSB7XG4gICAgICAgIGxldCBjb21wb3NpdGUgPSB0aGlzLmNvbXBvc2VyLmNvbXBvc2UoXCJiZWZvcmVcIiwgXCJvcmlnaW5hbFwiLCBcImFmdGVyXCIpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihjb21wb3NpdGUsIHtcbiAgICAgICAgICAgIHdyYXBwYWJsZTogdGhpcyxcbiAgICAgICAgICAgIGJlZm9yZUFsbDogZiA9PiB7dGhpcy5iZWZvcmVBbGwoZik7IHJldHVybiBjb21wb3NpdGV9LFxuICAgICAgICAgICAganVzdEJlZm9yZTogZiA9PiB7dGhpcy5qdXN0QmVmb3JlKGYpOyByZXR1cm4gY29tcG9zaXRlfSxcbiAgICAgICAgICAgIGp1c3RBZnRlcjogZiA9PiB7dGhpcy5qdXN0QWZ0ZXIoZik7IHJldHVybiBjb21wb3NpdGV9LFxuICAgICAgICAgICAgYWZ0ZXJBbGw6IGYgPT4ge3RoaXMuYWZ0ZXJBbGwoZik7IHJldHVybiBjb21wb3NpdGV9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGJlZm9yZUFsbChoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuY29tcG9zZXIuZmlyc3QoXCJiZWZvcmVcIiwgaGFuZGxlcik7XG4gICAgfVxuXG4gICAganVzdEJlZm9yZShoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuY29tcG9zZXIubGFzdChcImJlZm9yZVwiLCBoYW5kbGVyKTtcbiAgICB9XG5cbiAgICBqdXN0QWZ0ZXIoaGFuZGxlcikge1xuICAgICAgICB0aGlzLmNvbXBvc2VyLmZpcnN0KFwiYWZ0ZXJcIiwgaGFuZGxlcik7XG4gICAgfVxuXG4gICAgYWZ0ZXJBbGwoaGFuZGxlcikge1xuICAgICAgICB0aGlzLmNvbXBvc2VyLmxhc3QoXCJhZnRlclwiLCBoYW5kbGVyKTtcbiAgICB9XG59IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBKRmFjdG9yeVRyYWl0cyB9IGZyb20gXCIuL0pGYWN0b3J5VHJhaXRzXCI7XG5pbXBvcnQgeyBqRmFjdG9yeUZ1bmN0aW9uV3JhcHBhYmxlIH0gZnJvbSBcIi4vSkZhY3RvcnlGdW5jdGlvblwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGpGYWN0b3J5VHJhaXRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBmdW5jdGlvbiBqRmFjdG9yeVRyYWl0cyhjYWxsZXJJbnN0YW5jZSwgY2FsbGVyQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IEpGYWN0b3J5VHJhaXRzKGNhbGxlckluc3RhbmNlLCBjYWxsZXJDb25zdHJ1Y3Rvciwge1xuXG4gICAgICAgIHBhcnNlcihwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvci8qLCBzb3VyY2UsIHRhcmdldCwgaXNTdGF0aWMgKi8pIHtcbiAgICAgICAgICAgIGxldCBwYXJzZWQgPSBKRmFjdG9yeVRyYWl0cy5kZWZhdWx0UGFyc2VyKC4uLmFyZ3VtZW50cyk7XG5cbiAgICAgICAgICAgIGlmIChwYXJzZWQpIHtcbiAgICAgICAgICAgICAgICAoeyBwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvciB9ID0gcGFyc2VkKTtcblxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHByb3BlcnR5RGVzY3JpcHRvci52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2YWx1ZS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJGluc3RhbGxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIkdW5pbnN0YWxsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJGVuYWJsZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRkaXNhYmxlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJHN0YXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5RGVzY3JpcHRvci52YWx1ZSA9IGpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iZWZvcmVBbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuJC5zdGF0ZXMuZW5hYmxlZCAmJiB0aGlzLiQuc2VydmljZS5waGFzZSA9PT0gXCJQSEFTRV9OT05FXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiY29tcG9uZW50IGRpc2FibGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRsb2dFcnIoLi4uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eURlc2NyaXB0b3IgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn0iLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgakZhY3RvcnlUcmFpdHMgfSBmcm9tIFwiLi9qRmFjdG9yeS10cmFpdHNcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBQcmVkZWZpbmVkIENvbXBvbmVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBAbWl4ZXMgVHJhaXRDb3JlXG4gKiBAbWl4ZXMgVHJhaXRBYm91dFxuICogQG1peGVzIFRyYWl0TG9nXG4gKiBAbWl4ZXMgVHJhaXRFdmVudHNcbiAqIEBtaXhlcyBUcmFpdFN0YXRlXG4gKiBAbWl4ZXMgVHJhaXRTZXJ2aWNlXG4gKiBAbWl4ZXMgVHJhaXRUYXNrXG4gKi9cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUNvcmVPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgSkZhY3RvcnlDb3JlT2JqZWN0LmluamVjdCh0aGlzLCBKRmFjdG9yeUNvcmVPYmplY3QsIG5hbWUpXG4gICAgfVxuXG4gICAgc3RhdGljIGluamVjdCh0YXJnZXQsIGNvbnN0cnVjdG9yLCBuYW1lKSB7XG4gICAgICAgIGpGYWN0b3J5VHJhaXRzKHRhcmdldCwgY29uc3RydWN0b3IpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0Q29yZSlcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRBYm91dCwgeyBuYW1lIH0pXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0TG9nKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdEV2ZW50cylcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRTdGF0ZSlcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRTZXJ2aWNlKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdFRhc2spO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbWl4ZXMgVHJhaXRGZXRjaFxuICogQG1peGVzIFRyYWl0RE9NXG4gKiBAbWl4ZXMgVHJhaXRDU1NcbiAqIEBtaXhlcyBUcmFpdE11dGF0aW9uXG4gKiBAbWl4ZXMgVHJhaXRUaW1lb3V0XG4gKiBAbWl4ZXMgVHJhaXRJbnRlcnZhbFxuICogQG1peGVzIFRyYWl0TGliVnVlXG4gKiBAbWl4ZXMgVHJhaXRMaWJSZWFjdFxuICovXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlDb21wb25lbnQgZXh0ZW5kcyBKRmFjdG9yeUNvcmVPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgc3VwZXIobmFtZSk7XG4gICAgICAgIEpGYWN0b3J5Q29tcG9uZW50LmluamVjdCh0aGlzLCBKRmFjdG9yeUNvbXBvbmVudClcbiAgICB9XG5cbiAgICBzdGF0aWMgaW5qZWN0KHRhcmdldCwgY29uc3RydWN0b3IpIHtcbiAgICAgICAgakZhY3RvcnlUcmFpdHModGFyZ2V0LCBjb25zdHJ1Y3RvcilcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRGZXRjaClcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRET00pXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0Q1NTKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdE11dGF0aW9uKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdFRpbWVvdXQpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0SW50ZXJ2YWwpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0TGliVnVlKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdExpYlJlYWN0KTtcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3Rvcnlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKiogQHJldHVybiB7SkZhY3RvcnlDb21wb25lbnR9ICovXG5leHBvcnQgY29uc3QgakZhY3RvcnkgPSAobmFtZSwgcHJvcGVydGllcykgPT4gT2JqZWN0LmFzc2lnbihuZXcgSkZhY3RvcnlDb21wb25lbnQobmFtZSksIHByb3BlcnRpZXMpOyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBqRmFjdG9yeUxvYWRlciB9IGZyb20gXCIuL2pGYWN0b3J5LWxvYWRlclwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGpGYWN0b3J5T2JqZWN0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQWxwaGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlPYmplY3Qge1xuXG4gICAgc3RhdGljIGNyZWF0ZURlc2NyaXB0b3JzKGRlc2NyaXB0b3JQcm90b3R5cGUgPSBKRmFjdG9yeU9iamVjdC5ERVNDUklQVE9SU19QUk9UT1RZUEUpIHtcbiAgICAgICAgbGV0IGNyZWF0ZSA9IEpGYWN0b3J5T2JqZWN0LmNyZWF0ZShkZXNjcmlwdG9yUHJvdG90eXBlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgbGV0IG8gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgICAgIG8uTk9ORSA9IGNyZWF0ZSgpO1xuXG4gICAgICAgIG8uV1JJVEFCTEUgICAgID0gY3JlYXRlKHsgd3JpdGFibGU6IHRydWUgfSk7XG4gICAgICAgIG8uRU5VTUVSQUJMRSAgID0gY3JlYXRlKHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgby5DT05GSUdVUkFCTEUgPSBjcmVhdGUoeyBjb25maWd1cmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgby5DT05GSUdVUkFCTEVfV1JJVEFCTEUgICA9XG4gICAgICAgIG8uV1JJVEFCTEVfQ09ORklHVVJBQkxFICAgPSBjcmVhdGUoeyB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgICAgIG8uQ09ORklHVVJBQkxFX0VOVU1FUkFCTEUgPVxuICAgICAgICBvLkVOVU1FUkFCTEVfQ09ORklHVVJBQkxFID0gY3JlYXRlKHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgICAgIG8uRU5VTUVSQUJMRV9XUklUQUJMRSAgICAgPVxuICAgICAgICBvLldSSVRBQkxFX0VOVU1FUkFCTEUgICAgID0gY3JlYXRlKHsgd3JpdGFibGU6IHRydWUsIGVudW1lcmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgby5XUklUQUJMRV9FTlVNRVJBQkxFX0NPTkZJR1VSQUJMRSA9XG4gICAgICAgIG8uV1JJVEFCTEVfQ09ORklHVVJBQkxFX0VOVU1FUkFCTEUgPVxuICAgICAgICBvLkVOVU1FUkFCTEVfQ09ORklHVVJBQkxFX1dSSVRBQkxFID1cbiAgICAgICAgby5FTlVNRVJBQkxFX1dSSVRBQkxFX0NPTkZJR1VSQUJMRSA9XG4gICAgICAgIG8uQ09ORklHVVJBQkxFX1dSSVRBQkxFX0VOVU1FUkFCTEUgPVxuICAgICAgICBvLkNPTkZJR1VSQUJMRV9FTlVNRVJBQkxFX1dSSVRBQkxFID0gY3JlYXRlKHsgd3JpdGFibGU6IHRydWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICAvLyBTaG9ydGN1dHNcbiAgICAgICAgby5SRUFET05MWSA9IGNyZWF0ZSh7IHdyaXRhYmxlOiBmYWxzZSwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogZmFsc2UgfSk7XG5cbiAgICAgICAgcmV0dXJuIG9cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGFzc2lnbihvYmosICdteVByb3BlcnR5JywgMTIzLCB7d3JpdGFibGU6ZmFsc2V9KVxuICAgICAqIGFzc2lnbihvYmosIHthOjEsIGI6Mn0nLCB7d3JpdGFibGU6ZmFsc2V9KVxuICAgICAqXG4gICAgICogZGVwcmVjYXRlZFxuICAgICAqIGFzc2lnbihvYmosICdteVByb3BlcnR5Jywge3ZhbHVlOlwib2tcIiwgd3JpdGFibGU6ZmFsc2V9KSA9PiBub3Qgc3RyaWN0XG4gICAgICogYXNzaWduKG9iaiwgJ215UHJvcGVydHknLCAxMjMpID0+IHVzZSBuYXRpdmUgaW5zdGVhZFxuICAgICAqIGFzc2lnbihvYmosIHthOjEsIGI6Mn0pID0+IHVzZSBuYXRpdmUgaW5zdGVhZFxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NpZ24odGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgbGV0IGRlc2NyaXB0b3JzID0ge307XG5cbiAgICAgICAgc3dpdGNoICh0eXBlb2YgcHJvcGVydHkpIHtcblxuICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gYXNzaWduKG9iaiwgJ215UHJvcGVydHknLCAxMjMsIHt3cml0YWJsZTpmYWxzZX0pXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgICAgICAgICBpZiAoIWRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBkZXNjcmlwdG9yIGFyZ3VtZW50OyB1c2UgT2JqZWN0LmFzc2lnbiBpbnN0ZWFkXCIpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvciA9IE9iamVjdC5jcmVhdGUoZGVzY3JpcHRvcik7IC8vIGF2b2lkIGRlc2NyaXB0b3IgY29ycnVwdGlvblxuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKTtcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBhc3NpZ24ob2JqLCB7YToxLCBiOjJ9Jywge3dyaXRhYmxlOmZhbHNlfSlcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgICAgICAgICAgICAgIFt2YWx1ZSwgZGVzY3JpcHRvcl0gPSBbcHJvcGVydHksIHZhbHVlXTtcblxuICAgICAgICAgICAgICAgIGlmICghZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIGRlc2NyaXB0b3IgYXJndW1lbnQ7IHVzZSBPYmplY3QuYXNzaWduIGluc3RlYWRcIilcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuYW1lIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yc1tuYW1lXSA9IE9iamVjdC5jcmVhdGUoZGVzY3JpcHRvcik7IC8vIGF2b2lkIGRlc2NyaXB0b3IgY29ycnVwdGlvblxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yc1tuYW1lXS52YWx1ZSA9IHZhbHVlW25hbWVdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IG5hbWUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvcnNbbmFtZV0gPSBPYmplY3QuY3JlYXRlKGRlc2NyaXB0b3IpOyAvLyBhdm9pZCBkZXNjcmlwdG9yIGNvcnJ1cHRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvcnNbbmFtZV0udmFsdWUgPSB2YWx1ZVtuYW1lXVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgZGVzY3JpcHRvcnMpO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBwcm9wZXJ0eSBhcmd1bWVudFwiKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRhcmdldFxuICAgIH1cblxuICAgIHN0YXRpYyBjcmVhdGUocHJvdG90eXBlLCBmbGF0ID0gZmFsc2UsIGRpc2luaGVyaXQgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChmbGF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZGlzaW5oZXJpdCA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiB7fSwgcHJvdG90eXBlLCBwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICBkaXNpbmhlcml0ID8gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBwcm90b3R5cGUpIDogcHJvdG90eXBlXG4gICAgICAgICAgICAgICAgKSwgcHJvcGVydGllcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBkaXNpbmhlcml0KG9iamVjdCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBvYmplY3QpO1xuICAgIH1cbn1cblxuSkZhY3RvcnlPYmplY3QuREVTQ1JJUFRPUlNfUFJPVE9UWVBFID0geyB3cml0YWJsZTogZmFsc2UsIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IGZhbHNlIH07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnlPYmplY3Rcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5qRmFjdG9yeUxvYWRlci5vbkluaXQoZnVuY3Rpb24oKSB7XG4gICAgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMgPSBKRmFjdG9yeU9iamVjdC5jcmVhdGVEZXNjcmlwdG9ycygpXG59KTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfREVWIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBoZWxwZXJfY2FtZWxDYXNlIH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuaW1wb3J0IHsgSkZhY3RvcnlPYmplY3QgfSBmcm9tIFwiLi9KRmFjdG9yeU9iamVjdFwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5QWJvdXRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgbW9kdWxlR2VuSWQgPSAoKSA9PiArK21vZHVsZUdlbklkLnVpZDsgbW9kdWxlR2VuSWQudWlkID0gMDtcblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5QWJvdXQge1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBhYm91dCA9IHt9KSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlBYm91dChvd25lcilcIiwgb3duZXIpLnR5cGUoT2JqZWN0KTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlBYm91dChhYm91dClcIiwgYWJvdXQpXG4gICAgICAgICAgICAgICAgLnR5cGVQbGFpbk9iamVjdCgpXG4gICAgICAgICAgICAgICAgLnJlc2VydmVkUHJvcGVydHkoXCJ1aWRcIilcbiAgICAgICAgICAgICAgICAucmVzZXJ2ZWRQcm9wZXJ0eShcImZpbmdlcnByaW50XCIpO1xuICAgICAgICAgICAgaWYgKFwibmFtZVwiIGluIGFib3V0KSB7XG4gICAgICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUFib3V0KGFib3V0Lm5hbWUpXCIsIGFib3V0Lm5hbWUpXG4gICAgICAgICAgICAgICAgICAgIC50eXBlU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgLm5vdEVtcHR5U3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBuYW1lO1xuICAgICAgICBsZXQgZmluZ2VycHJpbnQ7XG4gICAgICAgIGxldCB1aWQgPSBtb2R1bGVHZW5JZCgpO1xuXG4gICAgICAgIGlmIChhYm91dC5uYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gYWJvdXQubmFtZTtcbiAgICAgICAgICAgIGRlbGV0ZSBhYm91dC5uYW1lO1xuICAgICAgICAgICAgZmluZ2VycHJpbnQgPSBcImpGYWN0b3J5XCIgKyBcIl9cIiArIGhlbHBlcl9jYW1lbENhc2UobmFtZS50b0xvd2VyQ2FzZSgpKSArIFwiX1wiICsgdWlkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgYWJvdXQubmFtZTtcbiAgICAgICAgICAgIG5hbWUgPSBgWyR7b3duZXIuY29uc3RydWN0b3IubmFtZX0jJHt1aWR9XWA7XG4gICAgICAgICAgICBmaW5nZXJwcmludCA9IFwiakZhY3RvcnlcIiArIFwiX1wiICsgb3duZXIuY29uc3RydWN0b3IubmFtZSArIFwiX1wiICsgdWlkO1xuICAgICAgICB9XG5cbiAgICAgICAgSkZhY3RvcnlPYmplY3QuYXNzaWduKHRoaXMsIC8qKiBAbGVuZHMgSkZhY3RvcnlBYm91dCMgKi8ge1xuICAgICAgICAgICAgdWlkLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGZpbmdlcnByaW50XG4gICAgICAgIH0sIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEUpO1xuXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgYWJvdXQpO1xuXG4gICAgICAgIC8vIC0tLVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlBYm91dC5uYW1lXCIsIHRoaXMubmFtZSlcbiAgICAgICAgICAgICAgICAubWF0Y2hSZWcoL15bXFx3W1xcXSNdKyQvKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlBYm91dC5maW5nZXJwcmludFwiLCB0aGlzLmZpbmdlcnByaW50KVxuICAgICAgICAgICAgICAgIC5tYXRjaFJlZygvXltcXHddKyQvKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfREVWIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBqRmFjdG9yeUVycm9yIH0gZnJvbSBcIi4vSkZhY3RvcnlFcnJvclwiO1xuaW1wb3J0IHsgakZhY3RvcnlUcmFjZSB9IGZyb20gXCIuL0pGYWN0b3J5VHJhY2VcIjtcbmltcG9ydCB7IGpRdWVyeSwgaGVscGVyX2lzTmF0aXZlIH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5UHJvbWlzZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBQcm92aWRlcyBhd2FpdGFibGUsIGV4cGlyYWJsZSwgZGVidWdnYWJsZSBwcm9taXNlIGNoYWluc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEV4cGVyaW1lbnRhbCBEcmFmdFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vICNsaW1pdGF0aW9uIyBhc3luYyBmdW5jdGlvbnMgYWx3YXlzIHVzZSB0aGUgbmF0aXZlIFByb21pc2UgY29uc3RydWN0b3IgZXZlbiBpZiBuYXRpdmUgUHJvbWlzZSBjbGFzcyBpcyBvdmVycmlkZGVuXG4vLyAjbGltaXRhdGlvbiMgYXN5bmMgZnVuY3Rpb25zIGFsd2F5cyByZXR1cm5zIGEgbmF0aXZlIFByb21pc2UgZXZlbiBpZiByZXR1cm5pbmcgYW4gZXh0ZW5kZWQgUHJvbWlzZVxuLy8gI2xpbWl0YXRpb24jIGFzeW5jIGZ1bmN0aW9ucyBhbHdheXMgcmV0dXJucyBhIHBlbmRpbmcgUHJvbWlzZSBldmVuIGlmIHJldHVybmluZyBhIHJlc29sdmVkIFByb21pc2VcblxuY29uc3QgbW9kdWxlR2VuSWQgPSAoKSA9PiArK21vZHVsZUdlbklkLnVpZDsgbW9kdWxlR2VuSWQudWlkID0gMDtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeVByb21pc2Vcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlQcm9taXNlIGV4dGVuZHMgUHJvbWlzZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGNvbmZpZywgdHJhY2VTb3VyY2UgfSwgZXhlY3V0b3IpIHtcblxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgW25hbWUsIGNvbmZpZywgZXhlY3V0b3JdID0gW251bGwsIG51bGwsIGFyZ3VtZW50c1swXV1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNoYWluSWQgPSBtb2R1bGVHZW5JZCgpO1xuICAgICAgICBjb25maWcgPSB7IC4uLkpGYWN0b3J5UHJvbWlzZS5ERUZBVUxUX0NPTkZJRywgLi4uY29uZmlnIH07XG4gICAgICAgIG5hbWUgPSBuYW1lIHx8IFwidW5uYW1lZFwiO1xuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwibmFtZVwiLCBuYW1lKVxuICAgICAgICAgICAgICAgIC50eXBlKFN0cmluZywgTnVtYmVyKVxuICAgICAgICAgICAgICAgIC5tYXRjaFJlZygvXlteLiBdKyQvKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiY29uZmlnXCIsIGNvbmZpZykudHlwZVBsYWluT2JqZWN0KCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImV4ZWN1dG9yXCIsIGV4ZWN1dG9yKS50eXBlRnVuY3Rpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNvbHZlO1xuICAgICAgICBsZXQgcmVqZWN0O1xuXG4gICAgICAgIHN1cGVyKChfcmVzb2x2ZSwgX3JlamVjdCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSA9IF9yZXNvbHZlO1xuICAgICAgICAgICAgcmVqZWN0ID0gX3JlamVjdDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2hhaW4gPSBuZXcgSkZhY3RvcnlQcm9taXNlQ2hhaW4odGhpcywgY2hhaW5JZCwgbmFtZSwgY29uZmlnKTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICAkY2hhaW46IHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBjaGFpblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICR0eXBlOiB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IFwicHJvbWlzZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICRpc1NldHRsZWQ6IHtcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAkaXNSZWplY3RlZDoge1xuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJGlzRnVsZmlsbGVkOiB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAkaXNFeHBpcmVkOiB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJGlzQWJvcnRlZDoge1xuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICAgICAgJGRldl9uYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5hbWUgKyBcIltcIiArIGNoYWluSWQgKyBcIjowXVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAkZGV2X3BhdGg6IHtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgSkZhY3RvcnlQcm9taXNlUGF0aCh0aGlzKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJGRldl9wb3NpdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghaGVscGVyX2lzTmF0aXZlKGV4ZWN1dG9yKSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgICAgICAgICAgJGRldl9zb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBleGVjdXRvclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBqRmFjdG9yeVRyYWNlLnRyYWNlci5hdHRhY2hUcmFjZSh0aGlzLCB0cmFjZVNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0cnlBdXRvQ29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuJGNoYWluLmlzUGVuZGluZykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGNoYWluQ29tcGxldGUoXCJhdXRvLWNvbXBsZXRlZFwiKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENhc2Ugb2YgZXJyb3IgaW4gXCJjb21wbGV0ZVwiIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhdGNoIHRoZSBleGNlcHRpb24gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyBhbHJlYWR5IGZ1bGZpbGxlZFxuICAgICAgICAgICAgICAgICAgICAvLyBGdXJ0aGVybW9yZSB0aGlzIGlzc3VlIG11c3QgYmUgaGFuZGxlZCBieSB0aGUgY2hhaW4sIG5vdCB0aGUgY3VycmVudCBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSkgLy8gcHJpbnQgdGhlIGVycm9yIG90aGVyd2lzZSBub3RoaW5nIGhhcHBlbnNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgb25SZXNvbHZlID0gdmFsdWUgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ29uUmVzb2x2ZScsdGhpcy4kZGV2X25hbWUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICAvLyAyLjMuMS4gSWYgcHJvbWlzZSBhbmQgeCByZWZlciB0byB0aGUgc2FtZSBvYmplY3QsIHJlamVjdCBwcm9taXNlIHdpdGggYSBUeXBlRXJyb3IgYXMgdGhlIHJlYXNvbi5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgb25SZWplY3QobmV3IFR5cGVFcnJvcihcIkNoYWluaW5nIGN5Y2xlIGRldGVjdGVkIGZvciBwcm9taXNlIFwiICsgdGhpcy4kZGV2X25hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxldCB0aGVuO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiAodHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIgfHwgdHlwZW9mIHggPT0gXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAyLjMuMy4yLiBJZiByZXRyaWV2aW5nIHRoZSBwcm9wZXJ0eSB4LnRoZW4gcmVzdWx0cyBpbiBhIHRocm93biBleGNlcHRpb24gZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVqZWN0IHByb21pc2Ugd2l0aCBlIGFzIHRoZSByZWFzb24uXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25SZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc29sdmVQcm9taXNlID0gZnVuY3Rpb24oeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4zLjMuMy4xLiBJZi93aGVuIHJlc29sdmVQcm9taXNlIGlzIGNhbGxlZCB3aXRoIGEgdmFsdWUgeSwgcnVuIFtbUmVzb2x2ZV1dKHByb21pc2UsIHkpLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZSh5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlamVjdFByb21pc2UgPSBmdW5jdGlvbihyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyLjMuMy4zLjIuIElmL3doZW4gcmVqZWN0UHJvbWlzZSBpcyBjYWxsZWQgd2l0aCBhIHJlYXNvbiByLCByZWplY3QgcHJvbWlzZSB3aXRoIHIuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZWplY3Qocik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgcmVzb2x2ZVByb21pc2UsIHJlamVjdFByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IC8vIDIuMy4zLjMuNC4gSWYgY2FsbGluZyB0aGVuIHRocm93cyBhbiBleGNlcHRpb24gZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuMy4zLjMuNC4xLiBJZiByZXNvbHZlUHJvbWlzZSBvciByZWplY3RQcm9taXNlIGhhdmUgYmVlbiBjYWxsZWQsIGlnbm9yZSBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4zLjMuMy40LjIuIE90aGVyd2lzZSwgcmVqZWN0IHByb21pc2Ugd2l0aCBlIGFzIHRoZSByZWFzb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGlzUmVqZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaXNGdWxmaWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuJGNoYWluLmVycm9yRXhwaXJlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgb25TZXR0bGUodmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uUmVqZWN0ID0gcmVhc29uID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdvblJlamVjdCcsdGhpcy4kZGV2X25hbWUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRpc1JlamVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLiRpc0Z1bGZpbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJlamVjdChyZWFzb24pO1xuICAgICAgICAgICAgICAgIG9uU2V0dGxlKHJlYXNvbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvblNldHRsZSA9IHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuJHZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLiRpc1NldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy4kY2hhaW4uY2hhaW5NYXAuc2V0KHRoaXMsIHRydWUpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy4kY2hhaW4uY2hhaW5Db25maWcuY2hhaW5BdXRvQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kY2hhaW4uY2hhaW5NYXAuc2l6ZSA9PT0gMSAmJiAhdGhpcy4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB0cnlBdXRvQ29tcGxldGUoKSB3aWxsIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseSAodGhlbigpIGNhbGxiYWNrIGlzIGFzeW5jaHJvbm91cylcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBvZiBwcm9taXNlLnJlc29sdmUocHJpbWl0aXZlKSwgcHJldmVudHMgZm9sbG93aW5nIHRoZW4oKSBmcm9tIGJlaW5nIGltbWVkaWF0ZWx5IGxvY2tlZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRoZW4odHJ5QXV0b0NvbXBsZXRlKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeUF1dG9Db21wbGV0ZSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBfY2hhaW5BdXRvQ29tcGxldGUgPSBjb25maWcuY2hhaW5BdXRvQ29tcGxldGU7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb25maWcsIFwiY2hhaW5BdXRvQ29tcGxldGVcIiwge1xuICAgICAgICAgICAgZ2V0OiAoKSA9PiBfY2hhaW5BdXRvQ29tcGxldGUsXG4gICAgICAgICAgICBzZXQ6IHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoX2NoYWluQXV0b0NvbXBsZXRlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBfY2hhaW5BdXRvQ29tcGxldGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlBdXRvQ29tcGxldGUoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjaGFpbi5jaGFpbk1hcC5zZXQodGhpcywgZmFsc2UpO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgIF9fcmVzb2x2ZV9fOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG9uUmVzb2x2ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9fcmVqZWN0X186IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogb25SZWplY3RcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGV4ZWN1dG9yKG9uUmVzb2x2ZSwgb25SZWplY3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvblJlamVjdChlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgZm9yY2VUeXBlKSB7XG4gICAgICAgIGxldCB3cmFwcGVkRnVsZmlsbGVkO1xuICAgICAgICBsZXQgd3JhcHBlZFJlamVjdGVkO1xuICAgICAgICBsZXQgbmV3UHJvbWlzZTtcbiAgICAgICAgbGV0IGlzTmF0aXZlID0gaGVscGVyX2lzTmF0aXZlKG9uRnVsZmlsbGVkKSAmJiAhb25GdWxmaWxsZWQubmFtZS5zdGFydHNXaXRoKFwiYm91bmQgXCIpO1xuXG4gICAgICAgIGlmIChvbkZ1bGZpbGxlZCAmJiB0eXBlb2Ygb25GdWxmaWxsZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgd3JhcHBlZEZ1bGZpbGxlZCA9IGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICAvLyBcImF3YWl0XCIgbXVzdCBhbHdheXMgcnVuIHRoZSBuYXRpdmUgaGFuZGxlclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcImF3YWl0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU1BFQzogXCJhd2FpdFwiIHRocm93cyB0aGUgZXJyb3JFeHBpcmVkIGlmICRpc0Fib3J0ZWQgaXMgdHJ1ZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3dzIGFzeW5jIGZ1bmN0aW9uIHRvIHRyeSBjYXRjaCB0aGUgYXdhaXRlZCBhYm9ydGVkIHByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gb3IsIGlmIG5vdCBjYXVnaHQsIGJyZWFrcyBhbmQgaWdub3JlIHRoZSByZXN0IG9mIHRoZSBhc3luYyBmdW5jdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Byb21pc2UuJGlzQWJvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uUmVqZWN0ZWQobmV3UHJvbWlzZS4kY2hhaW4uZXJyb3JFeHBpcmVkKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRnVsZmlsbGVkKHIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGRvbid0IGNhbGwgdGhlIGhhbmRsZXIgaWYgZXhwaXJlZFxuICAgICAgICAgICAgICAgIGlmICghbmV3UHJvbWlzZS4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcm9taXNlLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1kZWJ1Z2dlclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25GdWxmaWxsZWQocilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9uUmVqZWN0ZWQgJiYgdHlwZW9mIG9uUmVqZWN0ZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgd3JhcHBlZFJlamVjdGVkID0gZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgICAgIGlmIChuZXdQcm9taXNlLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGlmICghbmV3UHJvbWlzZS4kaXNTZXR0bGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9uUmVqZWN0ZWQocilcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdHlwZSA9IGZvcmNlVHlwZSB8fCAoaXNOYXRpdmUgPyBcImF3YWl0XCIgOiBvbkZ1bGZpbGxlZCA9PT0gdW5kZWZpbmVkID8gXCJjYXRjaFwiIDogXCJ0aGVuXCIpO1xuICAgICAgICBuZXdQcm9taXNlID0gT2JqZWN0LmFzc2lnbihzdXBlci50aGVuKHdyYXBwZWRGdWxmaWxsZWQsIHdyYXBwZWRSZWplY3RlZCksIHRoaXMpO1xuICAgICAgICBtb2R1bGVHZW5JZC51aWQtLTsgLy8gcmV2ZXJzZSBiZWNhdXNlIG5vdCBhIG5ldyBjaGFpblxuICAgICAgICBuZXdQcm9taXNlLiR0eXBlID0gdHlwZTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBuZXdQcm9taXNlLiRkZXZfcG9zaXRpb24gPSB0aGlzLiRjaGFpbi5jaGFpbk1hcC5zaXplO1xuICAgICAgICAgICAgbGV0IGZOYW1lcyA9IFwiXCI7XG4gICAgICAgICAgICBpZiAob25GdWxmaWxsZWQgJiYgb25GdWxmaWxsZWQubmFtZSkge1xuICAgICAgICAgICAgICAgIGZOYW1lcyArPSBvbkZ1bGZpbGxlZC5uYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob25SZWplY3RlZCAmJiBvblJlamVjdGVkLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBmTmFtZXMgKz0gXCIsXCIgKyBvblJlamVjdGVkLm5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG5ld1Byb21pc2UsIHtcbiAgICAgICAgICAgICAgICAkZGV2X25hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRjaGFpbi5jaGFpbk5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCJbXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgdGhpcy4kY2hhaW4uY2hhaW5JZFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcIjpcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKyB0aGlzLiRkZXZfcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCJdXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCIuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgbmV3UHJvbWlzZS4kdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgKyAoZk5hbWVzID8gXCIoXCIgKyBmTmFtZXMgKyBcIilcIiA6IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwiW1wiXG4gICAgICAgICAgICAgICAgICAgICAgICArIG5ld1Byb21pc2UuJGNoYWluLmNoYWluSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCI6XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgbmV3UHJvbWlzZS4kZGV2X3Bvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwiXVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAkZGV2X3BhdGg6IHsgdmFsdWU6IG5ldyBKRmFjdG9yeVByb21pc2VQYXRoKHRoaXMuJGRldl9wYXRoLCBuZXdQcm9taXNlKSB9LFxuICAgICAgICAgICAgICAgICRkZXZfb25GdWxmaWxsZWQ6IHsgdmFsdWU6IG9uRnVsZmlsbGVkIH0sXG4gICAgICAgICAgICAgICAgJGRldl9vblJlamVjdGVkOiB7IHZhbHVlOiBvblJlamVjdGVkIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3UHJvbWlzZS4kY2hhaW4uY2hhaW5NYXAuc2V0KG5ld1Byb21pc2UsIGZhbHNlKTtcblxuICAgICAgICBpZiAodGhpcy4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAvLyBjYXNlOiBwMC50aGVuKCk7IGNoYWluQWJvcnQoKTsgcDEudGhlbigpXG4gICAgICAgICAgICAvLyA9PiB0aGUgbmV3IHByb21pc2UgbXVzdCBiZSBleHBpcmVkXG4gICAgICAgICAgICAvLyBpZiBwYXJlbnQgcHJvbWlzZSBpcyBqdXN0IGV4cGlyZWQsIGFib3J0IHNpbGVudGx5XG4gICAgICAgICAgICAvLyBpZiBwYXJlbnQgcHJvbWlzZSBpcyBhYm9ydGVkLCBhYm9ydCBleHBsaWNpdGx5XG4gICAgICAgICAgICBKRmFjdG9yeVByb21pc2Uuc2V0RXhwaXJlZChuZXdQcm9taXNlLCB0cnVlLCAhdGhpcy4kaXNBYm9ydGVkLCB0aGlzLiRjaGFpbi5lcnJvckV4cGlyZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld1Byb21pc2VcbiAgICB9XG5cbiAgICAkY2F0Y2hFeHBpcmVkKG9uRXhwaXJlZCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aGVuKHIgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuJGNoYWluLmNoYWluUm9vdC4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9uRXhwaXJlZChyKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gclxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB1bmRlZmluZWQsIFwiJGNhdGNoRXhwaXJlZFwiKVxuICAgIH1cblxuICAgIHN0YXRpYyByZXNvbHZlKG9wdGlvbmFsQXJncywgdmFsdWUpIHtcbiAgICAgICAgLy8gcmVzb2x2ZSgpXG4gICAgICAgIC8vIHJlc29sdmUob3B0aW9uYWxBcmdzLCB2YWx1ZSlcbiAgICAgICAgLy8gcmVzb2x2ZSh2YWx1ZSlcblxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgW29wdGlvbmFsQXJncywgdmFsdWVdID0gW3t9LCBvcHRpb25hbEFyZ3NdXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRpb25hbEFyZ3MpIHtcbiAgICAgICAgICAgIG9wdGlvbmFsQXJncyA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgdGhpcyAmJiBhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvLyBSZXR1cm5zIHRoZSBwcm9taXNlIGFzIGlzIChuYXRpdmUgc3BlYylcbiAgICAgICAgICAgIC8vIGJ1dCBvbmx5IGlmIG5vIG9wdGlvbmFsQXJnc1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMob3B0aW9uYWxBcmdzLCBmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIHJlamVjdChvcHRpb25hbEFyZ3MsIHJlYXNvbikge1xuICAgICAgICAvLyByZWplY3QoKVxuICAgICAgICAvLyByZWplY3Qob3B0aW9uYWxBcmdzLCByZWFzb24pXG4gICAgICAgIC8vIHJlamVjdChyZWFzb24pXG5cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIFtvcHRpb25hbEFyZ3MsIHJlYXNvbl0gPSBbe30sIG9wdGlvbmFsQXJnc11cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbmFsQXJncykge1xuICAgICAgICAgICAgb3B0aW9uYWxBcmdzID0ge31cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMob3B0aW9uYWxBcmdzLCBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHJlamVjdChyZWFzb24pXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICR0b1Byb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcylcbiAgICB9XG5cbiAgICAvLyBDb21wbGV0ZXMgYW4gZXhwaXJlcyB0aGUgd2hvbGUgY2hhaW4gYmVmb3JlIGl0cyBub3JtYWwgZW5kXG4gICAgLy8gU2V0cyB0aGUgJGlzQWJvcnRlZCB0byB0cnVlIG9uIGFib3J0ZWQgcHJvbWlzZXNcbiAgICAkY2hhaW5BYm9ydChyZWFzb24gPSBcIiRjaGFpbkFib3J0KClcIikge1xuICAgICAgICB0aGlzLiRjaGFpbi5jb21wbGV0ZShyZWFzb24sIHRydWUpO1xuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIC8vIE1hbnVhbGx5IGNvbXBsZXRlcyBhbiBleHBpcmVzIHRoZSB3aG9sZSBjaGFpblxuICAgIC8vIE9ubHkgcmVxdWlyZWQgaWYgYXdhaXRpbmcgXCJteVByb21pc2UuJGNoYWluXCJcbiAgICAvLyB3aGVuIHRoZSBhdXRvY29tcGxldGUgd2F0Y2hlciBpcyBub3QgdXNlZFxuICAgICRjaGFpbkNvbXBsZXRlKHJlYXNvbiA9IFwiJGNoYWluQ29tcGxldGUoKVwiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLiRjaGFpbi5jb21wbGV0ZShyZWFzb24sIGZhbHNlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogZS4kZGF0YS50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJUcnlpbmcgdG8gY29tcGxldGUgYSBwZW5kaW5nIGNoYWluLiBVc2UgJGNoYWluQWJvcnQoKSBpZiB5b3Ugd2FudCB0byBzdG9wIGl0LlwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgICRjaGFpbkF1dG9Db21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy4kY2hhaW4uY2hhaW5Db25maWcuY2hhaW5BdXRvQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHN0YXRpYyBzZXRFeHBpcmVkKHByb21pc2UsIGFib3J0LCBzaWxlbnQsIHJlYXNvbikge1xuICAgICAgICBpZiAoIXByb21pc2UuJGlzU2V0dGxlZCkge1xuICAgICAgICAgICAgaWYgKGFib3J0KSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS4kaXNBYm9ydGVkID0gIXNpbGVudDtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9fcmVzb2x2ZV9fKHJlYXNvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcInByb21pc2UgbXVzdCBiZSBhYm9ydGVkIG9yIHNldHRsZWQgYmVmb3JlIHNldHRpbmcgaXQgdG8gZXhwaXJlZC5cIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByb21pc2UuJGlzRXhwaXJlZCA9IHRydWU7XG4gICAgfVxufVxuXG5KRmFjdG9yeVByb21pc2UuREVGQVVMVF9DT05GSUcgPSB7XG4gICAgY2hhaW5BdXRvQ29tcGxldGU6IGZhbHNlXG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5UHJvbWlzZUNoYWluXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5UHJvbWlzZUNoYWluIHtcblxuICAgIGNvbnN0cnVjdG9yKGNoYWluUm9vdCwgY2hhaW5JZCwgY2hhaW5OYW1lLCBjaGFpbkNvbmZpZykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBjaGFpbkNvbmZpZzogeyB2YWx1ZTogY2hhaW5Db25maWcgfSxcbiAgICAgICAgICAgIGNoYWluUm9vdDogeyB2YWx1ZTogY2hhaW5Sb290IH0sXG4gICAgICAgICAgICBjaGFpbklkOiB7IHZhbHVlOiBjaGFpbklkIH0sXG4gICAgICAgICAgICBjaGFpbk5hbWU6IHsgdmFsdWU6IGNoYWluTmFtZSB9LFxuICAgICAgICAgICAgY2hhaW5NYXA6IHsgdmFsdWU6IG5ldyBNYXAgfSxcbiAgICAgICAgICAgIGlzQ29tcGxldGVkOiB7IHZhbHVlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlIH0sXG4gICAgICAgICAgICBkYXRhOiB7IHZhbHVlOiB7fSB9LFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXBcbiAgICAgICAgICAgIF9fZGVmZXJyZWRfXzogeyB2YWx1ZTogalF1ZXJ5LkRlZmVycmVkKCkgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldCBpc1BlbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY2hhaW5NYXAudmFsdWVzKCkpLmluY2x1ZGVzKGZhbHNlKVxuICAgIH1cblxuICAgIHRoZW4ob25SZXNvbHZlKSB7IC8vID0+IFwiYXdhaXQgY2hhaW5cIlxuICAgICAgICB0aGlzLl9fZGVmZXJyZWRfXy5kb25lKG9uUmVzb2x2ZSk7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgY29tcGxldGUocmVhc29uID0gXCJjaGFpbi5jb21wbGV0ZSgpXCIsIGFib3J0ICkge1xuICAgICAgICBsZXQgY2hhaW5Sb290ID0gdGhpcy5jaGFpblJvb3Q7XG4gICAgICAgIGlmICghY2hhaW5Sb290LiRpc0V4cGlyZWQpIHtcbiAgICAgICAgICAgIGxldCBlcnJvckV4cGlyZWQgPSBjaGFpblJvb3QuJGNoYWluLmVycm9yRXhwaXJlZCA9IG5ldyBqRmFjdG9yeUVycm9yLlBST01JU0VfRVhQSVJFRCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBjaGFpblJvb3QsXG4gICAgICAgICAgICAgICAgcmVhc29uXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IG1hcCA9IHRoaXMuY2hhaW5NYXA7XG4gICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIG1hcC5rZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBKRmFjdG9yeVByb21pc2Uuc2V0RXhwaXJlZChpdGVtLCBhYm9ydCwgZmFsc2UsIGVycm9yRXhwaXJlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzQ29tcGxldGVkXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgICAgICAgICB0aGlzLl9fZGVmZXJyZWRfXy5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlQcm9taXNlUGF0aFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeVByb21pc2VQYXRoIGV4dGVuZHMgQXJyYXkge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGZvciAobGV0IGkgb2YgYXJndW1lbnRzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHVzaCguLi5pKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2goaSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBwcmludGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcCgodiwgaSkgPT4gaSA9PT0gMCA/IHYuJGRldl9uYW1lIDogdi4kZGV2X25hbWUuc3BsaXQoXCIuXCIpWzFdKS5qb2luKFwiLlwiKVxuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge3JldHVybiB0aGlzLnByaW50YWJsZX1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeVByb21pc2VTeW5jXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFByb21pc2UgdGhhdCB0cmllcyB0byByZXNvbHZlIHN5bmNocm9ub3VzbHlcbi8vIGFsbG93aW5nIHN5bmNocm9ub3VzIHN0YXRlcyBhbmQgcmVzdWx0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5UHJvbWlzZVN5bmMgZXh0ZW5kcyBQcm9taXNlIHtcblxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yKSB7XG5cbiAgICAgICAgbGV0IHN0YXRlcyA9IHtcbiAgICAgICAgICAgICRpc1NldHRsZWQ6IGZhbHNlLCAvLyB0cnVlID0gbm90IHBlbmRpbmdcbiAgICAgICAgICAgICRpc1JlamVjdGVkOiBudWxsLCAvLyB0cnVlID0gbm90IHBlbmRpbmcgKyByZWplY3RlZFxuICAgICAgICAgICAgJHZhbHVlOiB1bmRlZmluZWRcbiAgICAgICAgfTtcblxuICAgICAgICBzdXBlcigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgbGV0IG9uUmVzb2x2ZSA9IHIgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUocilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKG9uUmVzb2x2ZSwgb25SZWplY3QpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJGlzU2V0dGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJGlzUmVqZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlcy4kdmFsdWUgPSByO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IG9uUmVqZWN0ID0gciA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgcmVzb2x2ZSBwZW5kaW5nIHByb21pc2VcbiAgICAgICAgICAgICAgICAvLyB0byBrZWVwIG5hdGl2ZSBzcGVjaWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzLiRpc1NldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJGlzUmVqZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJHZhbHVlID0gcjtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBleGVjdXRvcihvblJlc29sdmUsIG9uUmVqZWN0KVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIG9uUmVqZWN0KGUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgc3RhdGVzKTtcbiAgICAgICAgc3RhdGVzID0gdGhpc1xuICAgIH1cblxuICAgIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcblxuICAgICAgICBpZiAodGhpcy4kaXNTZXR0bGVkKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLiR2YWx1ZTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kaXNSZWplY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjYW5jZWwgYW55IHVuY2F1Z2h0IHJlamVjdGVkIHJlc3VsdCBmcm9tIHRoaXMgcHJvbWlzZVxuICAgICAgICAgICAgICAgICAgICAvLyBiZWZvcmUgcmV0dXJuaW5nIHRoZSBuZXcgb25lXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyLnRoZW4odW5kZWZpbmVkLCAoKSA9PiBudWxsKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob25SZWplY3RlZCAmJiB0eXBlb2Ygb25SZWplY3RlZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG9uUmVqZWN0ZWQodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSkZhY3RvcnlQcm9taXNlU3luYy5yZWplY3QodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAob25GdWxmaWxsZWQgJiYgdHlwZW9mIG9uRnVsZmlsbGVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gb25GdWxmaWxsZWQodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpGYWN0b3J5UHJvbWlzZVN5bmMucmVqZWN0KGUpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUodmFsdWUpXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSkZhY3RvcnlQcm9taXNlU3luYykge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBKRmFjdG9yeVByb21pc2VTeW5jKHZhbHVlLnRoZW4uYmluZCh2YWx1ZSkpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSkZhY3RvcnlQcm9taXNlU3luYyhyID0+IHIodmFsdWUpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRkFDVE9SWV9ERVYgfSBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcbmltcG9ydCB7IEpGYWN0b3J5RXhwZWN0IH0gZnJvbSBcIi4vSkZhY3RvcnlFeHBlY3RcIjtcbmltcG9ydCB7IEpGYWN0b3J5UHJvbWlzZVN5bmMgfSBmcm9tIFwiLi9KRmFjdG9yeVByb21pc2VcIjtcbmltcG9ydCB7IEpGYWN0b3J5RnVuY3Rpb25Db21wb3NlciB9IGZyb20gXCIuL0pGYWN0b3J5RnVuY3Rpb25cIjtcbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBqUXVlcnksIGhlbHBlcl9pc1BsYWluT2JqZWN0IH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RXZlbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGh0dHBzOi8vbGVhcm4uanF1ZXJ5LmNvbS9ldmVudHMvZXZlbnQtZXh0ZW5zaW9ucy9cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5RXZlbnRzIHtcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIGpRdWVyeSBkb2Vzbid0IGhhbmRsZSBhc3luYyB0cmlnZ2VyIHNvIGpGYWN0b3J5IHByb3ZpZGVzIHRoZSBmb2xsb3dpbmcgOlxuICAgIC8vXG4gICAgLy8gLSB0cmlnZ2VyUGFyYWxsZWwoKTogdGhlIHRyaWdnZXIgZnVuY3Rpb24gcmV0dXJucyBhIFByb21pc2UuYWxsKHBlbmRpbmdBcnJheSlcbiAgICAvLyAgIHdoZXJlIHBlbmRpbmdBcnJheSBpcyBmaWxsZWQgYnkgYW55IGFzeW5jIHJ1bm5pbmcgaGFuZGxlci5cbiAgICAvLyAgIE5vdCByZWNvbW1lbmRlZCBiZWNhdXNlIGl0J3MgdGhlIGJlc3Qgd2F5IHRvIHByb2R1Y2UgdW5wcmVkaWN0YWJsZSBhc3luYyBzaWRlIGVmZmVjdHNcbiAgICAvL1xuICAgIC8vIC0gdHJpZ2dlclNlcmllcygpOiBoYW5kbGVycyBhcmUgcnVuIGluIGEgc3luY2hyb25vdXMgb3JkZXIsIHdpdGggXCJhd2FpdFwiXG4gICAgLy8gICBUaGlzIGF2b2lkcyB1bnByZWRpY3RhYmxlIGFzeW5jIHJhY2UgY29uZGl0aW9uXG4gICAgLy9cbiAgICAvLyAgQm90aCByZXR1cm5zIGEgSkZhY3RvcnlQcm9taXNlU3luYyB0aGF0IGNvbnRhaW5zIHRoZSBqRmFjdG9yeV9mdWxmaWxsZWQgZmxhZ1xuICAgIC8vICBUaGlzIGZsYWcgaXMgaW1tZWRpYXRlbHkgKG5vdCBhc3luYykgc2V0IHRvIHRydWUgaWYgbm8gYXN5bmMgaGFuZGxlciBpcyBzdGlsbCBwZW5kaW5nXG4gICAgLy9cbiAgICAvLyA9PiBoYW5kbGVycyBhcmUgd3JhcHBlZC4gT3JpZ2luYWxIYW5kbGVycyBhbmQgd3JhcHBlZEhhbmRsZXJzIHJlbGF0aW9ucyBhcmUgc3RvcmVkIGluIGEgV2Vha01hcFxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywgLyoqIEBsZW5kcyBKRmFjdG9yeUV2ZW50cyMgKi8ge1xuICAgICAgICAgICAgcmVnaXN0cnk6IHsgdmFsdWU6IGpRdWVyeShPYmplY3QuY3JlYXRlKG51bGwpKSB9LFxuICAgICAgICAgICAgaGFuZGxlcnM6IHsgdmFsdWU6IG5ldyBXZWFrTWFwIH0sXG4gICAgICAgICAgICBvbkxpc3RlbmVyVXBkYXRlOiB7IHZhbHVlOiBudWxsLCB3cml0YWJsZTogdHJ1ZSB9LFxuICAgICAgICAgICAgb25PYnNlcnZlclVwZGF0ZTogeyB2YWx1ZTogbnVsbCwgd3JpdGFibGU6IHRydWUgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbih7IGV2ZW50cywgaGFuZGxlciwgdGFyZ2V0LCBzZWxlY3RvciB9KSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlU2VsZWN0b3IoZXZlbnRzKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub24oe2hhbmRsZXJ9KVwiLCBoYW5kbGVyKS50eXBlRnVuY3Rpb24oKTtcbiAgICAgICAgICAgIHRhcmdldCAmJiBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLm9uKHt0YXJnZXR9KVwiLCB0YXJnZXQpLnR5cGUoU3RyaW5nLCBqUXVlcnksIEhUTUxFbGVtZW50KTtcbiAgICAgICAgICAgIHNlbGVjdG9yICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub24oe3NlbGVjdG9yfSlcIiwgdGFyZ2V0KS50eXBlU3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgd3JhcHBlZEhhbmRsZXIgPSB0aGlzLmhhbmRsZXJzLmdldChoYW5kbGVyKTtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgLy8gZG9uJ3QgbmVlZCB0byB3cmFwIERPTSBoYW5kbGVyc1xuICAgICAgICAgICAgaWYgKCF3cmFwcGVkSGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGhhbmRsZXIsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRhcmdldCkub24oZXZlbnRzLCBzZWxlY3RvciwgaGFuZGxlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGpRdWVyeSh0YXJnZXQpLm9uKGV2ZW50cywgaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vbkxpc3RlbmVyVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkxpc3RlbmVyVXBkYXRlKGFyZ3VtZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghd3JhcHBlZEhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChoYW5kbGVyLCB3cmFwcGVkSGFuZGxlciA9IGZ1bmN0aW9uKGUsIHsgZGF0YSwgc3RhY2sgfSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKCgpID0+IGhhbmRsZXIoZSwgZGF0YSkpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgd3JhcHBlZEhhbmRsZXIub3JpZ2luYWxIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVnaXN0cnkub24oZXZlbnRzLCB3cmFwcGVkSGFuZGxlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5vbk9ic2VydmVyVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbk9ic2VydmVyVXBkYXRlKGFyZ3VtZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9mZih7IGV2ZW50cywgaGFuZGxlciwgdGFyZ2V0LCBzZWxlY3RvciB9KSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkgeyAvLyBvZmYoKSBpcyB2YWxpZFxuICAgICAgICAgICAgICAgIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlU2VsZWN0b3IoZXZlbnRzKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVyICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub2ZmKHtoYW5kbGVyfSlcIiwgaGFuZGxlcikudHlwZUZ1bmN0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub2ZmKHt0YXJnZXR9KVwiLCB0YXJnZXQpLnR5cGUoU3RyaW5nLCBqUXVlcnksIEhUTUxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBzZWxlY3RvciAmJiBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLm9mZih7c2VsZWN0b3J9KVwiLCB0YXJnZXQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIGpRdWVyeSh0YXJnZXQpLm9mZihldmVudHMsIHNlbGVjdG9yLCBoYW5kbGVyKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkodGFyZ2V0KS5vZmYoZXZlbnRzLCBoYW5kbGVyKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgalF1ZXJ5KFwiKlwiKS5vZmYoZXZlbnRzLCBoYW5kbGVyKTtcblxuICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gdGhpcy5oYW5kbGVycy5nZXQoaGFuZGxlcik7XG4gICAgICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcImhhbmRsZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJub3QgcmVnaXN0ZXJlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2l2ZW46IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdHJ5Lm9mZihldmVudHMsIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9uT2JzZXJ2ZXJVcGRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMub25PYnNlcnZlclVwZGF0ZShhcmd1bWVudHMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub25MaXN0ZW5lclVwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5vbkxpc3RlbmVyVXBkYXRlKGFyZ3VtZW50cylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJ1biBpbiBwYXJhbGxlbC4gRG9uJ3QgXCJhd2FpdFwiIGZvciBhc3luYyBoYW5kbGVyc1xuICAgICAqIE9idmlvdXNseSBwcm9kdWNlcyB1bnByZWRpY3RhYmxlIHJhY2UgY29uZGl0aW9uc1xuICAgICAqL1xuICAgIHRyaWdnZXJQYXJhbGxlbCh7IGV2ZW50cywgZGF0YSwgdGFyZ2V0IH0pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvcihldmVudHMpO1xuICAgICAgICAgICAgdGFyZ2V0XG4gICAgICAgICAgICAgICAgJiYgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUV2ZW50cy50cmlnZ2VyUGFyYWxsZWwoe3RhcmdldH0pXCIsIHRhcmdldCkudHlwZShTdHJpbmcsIGpRdWVyeSwgSFRNTEVsZW1lbnQpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgICAgICBjb25zdCBwZW5kaW5nID0gW107XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cy5zcGxpdChcIiBcIik7XG5cbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgZm9yIChsZXQgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRhcmdldCkudHJpZ2dlcihldmVudCwgeyBkYXRhLCBzdGFjayB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGV2ZW50IG9mIGV2ZW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0cnkudHJpZ2dlckhhbmRsZXIoZXZlbnQsIHsgZGF0YSwgc3RhY2sgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGhhbmRsZXIgb2Ygc3RhY2spIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBoYW5kbGVyKCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZVxuICAgICAgICAgICAgICAgICYmICFyZXN1bHQuJGlzU2V0dGxlZCAvLyBkb24ndCBuZWVkIHRvIGF3YWl0XG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2gocmVzdWx0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBlbmRpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocGVuZGluZylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUnVuIGluIGRlY2xhcmF0aW9uIG9yZGVyIHN5bmNocm9ub3VzbHkuIFdpbGwgXCJhd2FpdFwiIGZvciBhc3luYyBoYW5kbGVyc1xuICAgICAqIFByZXZlbnRzIHVucHJlZGljdGFibGUgcmFjZSBjb25kaXRpb25zXG4gICAgICovXG4gICAgdHJpZ2dlclNlcmllcyh7IGV2ZW50cywgZGF0YSwgdGFyZ2V0IH0pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvcihldmVudHMpO1xuICAgICAgICAgICAgdGFyZ2V0ICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMudHJpZ2dlclNlcmllcyh7dGFyZ2V0fSlcIiwgdGFyZ2V0KS50eXBlKFN0cmluZywgalF1ZXJ5LCBIVE1MRWxlbWVudClcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgSkZhY3RvcnlQcm9taXNlU3luYyhhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgICAgICBldmVudHMgPSBldmVudHMuc3BsaXQoXCIgXCIpO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0YXJnZXQpLnRyaWdnZXIoZXZlbnQsIHsgZGF0YSwgc3RhY2sgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBldmVudCBvZiBldmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS50cmlnZ2VySGFuZGxlcihldmVudCwgeyBkYXRhLCBzdGFjayB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaGFuZGxlciBvZiBzdGFjaykge1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBoYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgJiYgIXJlc3VsdC4kaXNTZXR0bGVkIC8vIGRvbid0IG5lZWQgdG8gYXdhaXRcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlFdmVudHNNYW5hZ2VyIGV4dGVuZHMgSkZhY3RvcnlFdmVudHMge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBwYXJlbnQ6IHsgdmFsdWU6IHBhcmVudCB9LFxuICAgICAgICAgICAgYWZmaWxpYXRlUnVsZXM6IHsgdmFsdWU6IG5ldyBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXIoKS5jb21wb3NlKCkgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZmZpbGlhdGVBZGRSdWxlKEpGYWN0b3J5RXZlbnRzTWFuYWdlci5ydWxlX25hbWVzcGFjZSlcbiAgICB9XG5cbiAgICBhZmZpbGlhdGUoZXZlbnRzID0gXCJcIiwgbmFtZXNwYWNlcyA9IFwiXCIsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHBhcnNlciA9IG5ldyBKRmFjdG9yeUV2ZW50U2VsZWN0b3JQYXJzZXIoZXZlbnRzKTtcbiAgICAgICAgZm9yIChsZXQgcGFyc2VkRXZlbnQgb2YgcGFyc2VyLmV2ZW50cykge1xuICAgICAgICAgICAgdGhpcy5hZmZpbGlhdGVSdWxlcyhwYXJzZWRFdmVudCwgbmFtZXNwYWNlcywgb3B0aW9ucylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VyLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgYWZmaWxpYXRlQWRkUnVsZShoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuYWZmaWxpYXRlUnVsZXMuY29tcG9zZXIubGFzdChoYW5kbGVyKVxuICAgIH1cblxuICAgIHN0YXRpYyBydWxlX25hbWVzcGFjZShjb250ZXh0LCBwYXJzZWRFdmVudCwgbmFtZXNwYWNlcykge1xuICAgICAgICBuYW1lc3BhY2VzID0gbmFtZXNwYWNlcy5zcGxpdChcIi5cIik7XG4gICAgICAgIGZvciAobGV0IG5hbWVzcGFjZSBvZiBuYW1lc3BhY2VzKSB7XG4gICAgICAgICAgICBuYW1lc3BhY2UgJiYgcGFyc2VkRXZlbnQuYWRkTmFtZXNwYWNlKG5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbihldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gT2JzZXJ2ZXJzOlxuICAgICAgICAvLyBldmVudHMsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyLCBvcHRpb25zXG5cbiAgICAgICAgLy8gRE9NIEV2ZW50czpcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXIsIG9wdGlvbnNcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLFxuICAgICAgICAvLyBldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnNcblxuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAvLyBldmVudHMsIGhhbmRsZXJcbiAgICAgICAgICAgICAgICBbaGFuZGxlciwgdGFyZ2V0XSA9IFt0YXJnZXQvKiwgdW5kZWZpbmVkKi9dO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzJdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgW2hhbmRsZXIsIHNlbGVjdG9yXSA9IFtzZWxlY3Rvci8qLCB1bmRlZmluZWQqL107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyLCBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIFtoYW5kbGVyLCBvcHRpb25zLCB0YXJnZXQsIHNlbGVjdG9yXSA9IFt0YXJnZXQsIHNlbGVjdG9yLyosIHVuZGVmaW5lZCwgdW5kZWZpbmVkKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1szXSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldCwgaGFuZGxlciwgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBbb3B0aW9ucywgaGFuZGxlciwgc2VsZWN0b3JdID0gW2hhbmRsZXIsIHNlbGVjdG9yLyosIHVuZGVmaW5lZCovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBldmVudHMgPSB0aGlzLmFmZmlsaWF0ZShldmVudHMsIHRoaXMucGFyZW50LiQuYWJvdXQuZmluZ2VycHJpbnQsIG9wdGlvbnMpO1xuXG4gICAgICAgIHRhcmdldCA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIHN1cGVyLm9uKHsgZXZlbnRzLCBoYW5kbGVyIH0pIDpcbiAgICAgICAgICAgIHN1cGVyLm9uKHsgZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLyosIG9wdGlvbnMqLyB9KVxuICAgIH1cblxuICAgIG9mZihldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQm90aDpcbiAgICAgICAgLy8gZXZlbnRzIChjYW4gYmUgbmFtZXNwYWNlcylcbiAgICAgICAgLy8gZXZlbnRzLCBvcHRpb25zXG4gICAgICAgIC8vIG9wdGlvbnMgKGNhbiBiZSByZW1vdmFsKVxuXG4gICAgICAgIC8vIE9ic2VydmVyOlxuICAgICAgICAvLyBldmVudHMsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyLCBvcHRpb25zXG5cbiAgICAgICAgLy8gRE9NIEV2ZW50czpcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXIsIG9wdGlvbnNcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yXG4gICAgICAgIC8vIGV2ZW50cywgdGFyZ2V0LCBzZWxlY3RvciwgaGFuZGxlcixcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLCBvcHRpb25zXG5cbiAgICAgICAgY29uc3QgYXJnTCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIHN3aXRjaCAoYXJnTCkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgW29wdGlvbnMsIGV2ZW50c10gPSBbZXZlbnRzLyosIHVuZGVmaW5lZCovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZWxzZSBldmVudHMgKGNhbiBuYW1lc3BhY2VzKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzFdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgIFtoYW5kbGVyLCB0YXJnZXRdID0gW3RhcmdldC8qLCB1bmRlZmluZWQqL107XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoZWxwZXJfaXNQbGFpbk9iamVjdChhcmd1bWVudHNbMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cywgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBbb3B0aW9ucywgdGFyZ2V0XSA9IFt0YXJnZXQvKiwgdW5kZWZpbmVkKi9dXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVsc2UgZXZlbnRzLCB0YXJnZXRcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1syXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cywgdGFyZ2V0LCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgIFtoYW5kbGVyLCBzZWxlY3Rvcl0gPSBbc2VsZWN0b3IvKiwgdW5kZWZpbmVkKi9dO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cywgaGFuZGxlciwgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBbaGFuZGxlciwgb3B0aW9ucywgdGFyZ2V0LCBzZWxlY3Rvcl0gPSBbdGFyZ2V0LCBzZWxlY3Rvci8qLCB1bmRlZmluZWQsIHVuZGVmaW5lZCovXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldCwgc2VsZWN0b3JcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbM10gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXIsIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgW29wdGlvbnMsIGhhbmRsZXIsIHNlbGVjdG9yXSA9IFtoYW5kbGVyLCBzZWxlY3Rvci8qLCB1bmRlZmluZWQqL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnRzID0gdGhpcy5hZmZpbGlhdGUoZXZlbnRzLCB0aGlzLnBhcmVudC4kLmFib3V0LmZpbmdlcnByaW50LCBvcHRpb25zKTtcblxuICAgICAgICBpZiAoYXJnTCA8IDIpIHtcbiAgICAgICAgICAgIHN1cGVyLm9mZih7IGV2ZW50cyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldCA/XG4gICAgICAgICAgICAgICAgc3VwZXIub2ZmKHsgZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLyosIG9wdGlvbnMqLyB9KSA6XG4gICAgICAgICAgICAgICAgc3VwZXIub2ZmKHsgZXZlbnRzLCBoYW5kbGVyIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0cmlnZ2VyKGV2ZW50cywgdGFyZ2V0LCBkYXRhKSB7XG4gICAgICAgIC8vIGV2ZW50c1xuICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGRhdGFcblxuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJvYmplY3RcIiAmJiAhdGFyZ2V0LmpxdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgW2RhdGEsIHRhcmdldF0gPSBbdGFyZ2V0XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0ID9cbiAgICAgICAgICAgIHN1cGVyLnRyaWdnZXJTZXJpZXMoeyBldmVudHMsIHRhcmdldCwgZGF0YSB9KSA6XG4gICAgICAgICAgICBzdXBlci50cmlnZ2VyU2VyaWVzKHsgZXZlbnRzLCBkYXRhIH0pXG4gICAgfVxuXG4gICAgdHJpZ2dlclBhcmFsbGVsKGV2ZW50cywgdGFyZ2V0LCBkYXRhKSB7XG4gICAgICAgIC8vIGV2ZW50c1xuICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGRhdGFcblxuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJvYmplY3RcIiAmJiAhdGFyZ2V0LmpxdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgW2RhdGEsIHRhcmdldF0gPSBbdGFyZ2V0XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0ID9cbiAgICAgICAgICAgIHN1cGVyLnRyaWdnZXJQYXJhbGxlbCh7IGV2ZW50cywgdGFyZ2V0LCBkYXRhIH0pIDpcbiAgICAgICAgICAgIHN1cGVyLnRyaWdnZXJQYXJhbGxlbCh7IGV2ZW50cywgZGF0YSB9KVxuICAgIH1cblxuICAgIC8vICN1bm9wdGltaXplZCBkcmFmdCNcbiAgICAvLyBJdCdzIG5vdCBlYXN5IHRvIGtlZXAgdGhpcyBsaXN0IHVwIHRvIGRhdGUgYmVjYXVzZTpcbiAgICAvLyAtIGxpc3RlbmVycyBjYW4gYmUgcmVtb3ZlZCBieSBleHRlcm5hbCBkb20gbXV0YXRpb25zXG4gICAgLy8gLSBsaXN0ZW5lcnMgY2FuIGJlIGRlbGVnYXRlZFxuICAgIC8vIC0gb2ZmKCkgbWV0aG9kIGNhbiByZW1vdmUgbGlzdGVuZXJzIGdsb2JhbGx5XG4gICAgZ2V0RG9tTGlzdGVuZXJzKG5hbWVzcGFjZSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGxldCBlbG0gb2YgalF1ZXJ5KFwiKlwiKSkge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBqUXVlcnkuX2RhdGEoZWxtLCBcImV2ZW50c1wiKTtcbiAgICAgICAgICAgIGlmIChkYXRhKSB7Ly8gZGF0YSA9IHtjbGljazogW3t9XSwgLi4uIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlbnRyaWVzIG9mIE9iamVjdC52YWx1ZXMoZGF0YSkpIHsvLyBlbnRyaWVzID0gW3t0eXBlOi4uLn1dXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIGVudHJpZXMpIHsvLyBlbnRyeSA9IHt0eXBlLCBuYW1lc3BhY2UsIGhhbmRsZXIsIC4uLn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJzZXIgPSBuZXcgSkZhY3RvcnlFdmVudFNlbGVjdG9yKGVudHJ5Lm5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLmhhc05hbWVzcGFjZShuYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZXMgPSByZXN1bHQuZ2V0KGVsbSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXQoZWxtLCB0eXBlcyA9IHt9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2VudHJ5LnR5cGVdIHx8ICh0eXBlc1tlbnRyeS50eXBlXSA9IFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IGVudHJ5LnNlbGVjdG9yIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IGVudHJ5LmhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogZW50cnkubmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cblxuICAgIC8vICN1bm9wdGltaXplZCBkcmFmdCNcbiAgICBnZXRPYnNlcnZlcnMoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgTWFwKCk7XG4gICAgICAgIGxldCBldmVudHMgPSB0aGlzLnJlZ2lzdHJ5Ll9ldmVudHM7XG5cbiAgICAgICAgaWYgKCFldmVudHMpIHtcbiAgICAgICAgICAgIGxldCByZWdpc3RyeSA9IE9iamVjdC52YWx1ZXModGhpcy5yZWdpc3RyeSlbMF07XG4gICAgICAgICAgICBsZXQgZXhwYW5kbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHJlZ2lzdHJ5KS5maW5kKGsgPT4gay5pbmRleE9mKFwialF1ZXJ5XCIpID09PSAwKTtcbiAgICAgICAgICAgIGlmIChyZWdpc3RyeSAmJiBleHBhbmRvKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzID0gdGhpcy5yZWdpc3RyeS5fZXZlbnRzID0gcmVnaXN0cnlbZXhwYW5kb10uZXZlbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50cykge1xuICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhldmVudHMpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGV2ZW50ID0gcmVzdWx0LmdldChrZXkpO1xuICAgICAgICAgICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldChrZXksIGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZXZlbnRUeXBlRW50cnkgb2YgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogZXZlbnRUeXBlRW50cnkuaGFuZGxlci5vcmlnaW5hbEhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IGV2ZW50VHlwZUVudHJ5Lm5hbWVzcGFjZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUV2ZW50U2VsZWN0b3JQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9ycykge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV2ZW50cy52YWxpZGF0ZVNlbGVjdG9yKHNlbGVjdG9ycyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIEFycmF5PEpGYWN0b3J5RXZlbnRTZWxlY3Rvcj5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXZlbnRzID0gc2VsZWN0b3JzLnNwbGl0KFwiIFwiKS5tYXAoc2VsZWN0b3IgPT4gbmV3IEpGYWN0b3J5RXZlbnRTZWxlY3RvcihzZWxlY3RvcikpXG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCBzID0gW107XG4gICAgICAgIGZvciAobGV0IGV2ZW50IG9mIHRoaXMuZXZlbnRzKSB7XG4gICAgICAgICAgICBzLnB1c2goZXZlbnQudG9TdHJpbmcoKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcy5qb2luKFwiIFwiKVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5RXZlbnRTZWxlY3RvciB7XG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgbGV0IFtldmVudCwgLi4ubmFtZXNwYWNlXSA9IHNlbGVjdG9yLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgdGhpcy5ldmVudCA9IGV2ZW50O1xuICAgICAgICB0aGlzLm5hbWVzcGFjZSA9IG5ldyBTZXQobmFtZXNwYWNlKVxuICAgIH1cblxuICAgIC8qKiBAcmV0dXJuIHtCb29sZWFufFN0cmluZ30gKi9cbiAgICBoYXNOYW1lc3BhY2UobmFtZXNwYWNlcykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobmFtZXNwYWNlcykpIHtcbiAgICAgICAgICAgIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc11cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBuYW1lc3BhY2Ugb2YgbmFtZXNwYWNlcykge1xuICAgICAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgICAgIGlmICghL15bXFx3Ol0rJC8udGVzdChuYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIm5hbWVzcGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIm11c3QgYmUgYWxwaGFudW1lcmljLCB1bmRlcnNjb3JlIGFuZCBjb2xvbiBjaGFyYWN0ZXJzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBnaXZlbjogbmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5hbWVzcGFjZSAmJiB0aGlzLm5hbWVzcGFjZS5oYXMobmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lc3BhY2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBhZGROYW1lc3BhY2UobmFtZXNwYWNlKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIGlmICghL15bXFx3Ol0rJC8udGVzdChuYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuSU5WQUxJRF9WQUxVRSh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJuYW1lc3BhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIm11c3QgYmUgYWxwaGFudW1lcmljLCB1bmRlcnNjb3JlIGFuZCBjb2xvbiBjaGFyYWN0ZXJzXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBuYW1lc3BhY2VcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZXNwYWNlLmFkZChuYW1lc3BhY2UpXG4gICAgfVxuXG4gICAgZGVsZXRlTmFtZXNwYWNlKG5hbWVzcGFjZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBpZiAoIS9eW1xcdzpdKyQvLnRlc3QobmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwibmFtZXNwYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJtdXN0IGJlIGFscGhhbnVtZXJpYywgdW5kZXJzY29yZSBhbmQgY29sb24gY2hhcmFjdGVyc1wiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogbmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWVzcGFjZS5kZWxldGUobmFtZXNwYWNlKVxuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lc3BhY2Uuc2l6ZSA/IHRoaXMuZXZlbnQgKyBcIi5cIiArIEFycmF5LmZyb20odGhpcy5uYW1lc3BhY2UudmFsdWVzKCkpLmpvaW4oXCIuXCIpIDogdGhpcy5ldmVudDtcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5pZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvciA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvcihzZWxlY3RvcilcIiwgc2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgLm5vdFVuZGVmaW5lZCgpXG4gICAgICAgICAgICAgICAgLnZhbGlkU3BhY2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBbZXZlbnQsIG5zXSBvZiBzZWxlY3Rvci5zcGxpdChcIiBcIilcbiAgICAgICAgICAgIC5tYXAodiA9PiB2LnNwbGl0KFwiLlwiKSlcbiAgICAgICAgICAgIC5tYXAodiA9PiBbdi5zaGlmdCgpLCB2LmpvaW4oXCIuXCIpXSkpIHtcbiAgICAgICAgICAgIGV2ZW50ICYmIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgbnMgJiYgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVOYW1lc3BhY2UobnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfTtcblxuICAgIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlRXZlbnQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlRXZlbnQoZXZlbnQpXCIsIGV2ZW50KVxuICAgICAgICAgICAgICAgIC5ub3RVbmRlZmluZWQoKVxuICAgICAgICAgICAgICAgIC5ub3RFbXB0eVN0cmluZygpXG4gICAgICAgICAgICAgICAgLnZhbGlkU3BhY2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIS9eW1xcdzpdKyQvLnRlc3QoZXZlbnQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5JTlZBTElEX1ZBTFVFKHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiSkZhY3RvcnlFdmVudHMudmFsaWRhdGVFdmVudChldmVudClcIixcbiAgICAgICAgICAgICAgICByZWFzb246IFwibXVzdCBiZSBhbHBoYW51bWVyaWMsIHVuZGVyc2NvcmUgYW5kIGNvbG9uIGNoYXJhY3RlcnNcIixcbiAgICAgICAgICAgICAgICBnaXZlbjogZXZlbnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH07XG5cbiAgICBKRmFjdG9yeUV2ZW50cy52YWxpZGF0ZU5hbWVzcGFjZSA9IGZ1bmN0aW9uKG5hbWVzcGFjZSkgeyAvLyBleDogbnMubnMyLm5zM1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlTmFtZXNwYWNlKG5hbWVzcGFjZSlcIiwgbmFtZXNwYWNlKVxuICAgICAgICAgICAgICAgIC5ub3RVbmRlZmluZWQoKVxuICAgICAgICAgICAgICAgIC5ub3RFbXB0eVN0cmluZygpXG4gICAgICAgICAgICAgICAgLnZhbGlkU3BhY2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIS9eW1xcdzouXSskLy50ZXN0KG5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgIHRhcmdldDogXCJKRmFjdG9yeUV2ZW50cy52YWxpZGF0ZU5hbWVzcGFjZShuYW1lc3BhY2UpXCIsXG4gICAgICAgICAgICAgICAgcmVhc29uOiBcIm11c3QgYmUgYWxwaGFudW1lcmljLCB1bmRlcnNjb3JlLCBkb3QgYW5kIGNvbG9uIGNoYXJhY3RlcnNcIixcbiAgICAgICAgICAgICAgICBnaXZlbjogbmFtZXNwYWNlXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9O1xufSIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRmFjdG9yeVByb21pc2UgfSBmcm9tIFwiLi9KRmFjdG9yeVByb21pc2VcIjtcbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlGZXRjaFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlGZXRjaCBleHRlbmRzIEpGYWN0b3J5UHJvbWlzZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25hbEFyZ3MsIHVybCwgZmV0Y2hPcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25hbEFyZ3MgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgc3VwZXIob3B0aW9uYWxBcmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uYWxBcmdzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgW29wdGlvbmFsQXJncywgdXJsLCBmZXRjaE9wdGlvbnNdID0gW3t9LCBhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXV1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGZldGNoUmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHVybCwgZmV0Y2hPcHRpb25zKTtcblxuICAgICAgICAgICAgc3VwZXIob3B0aW9uYWxBcmdzLCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHByb21pc2UgPSBmZXRjaChmZXRjaFJlcXVlc3QpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGNoYWluLmZldGNoUmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihyZXNwb25zZS5zdGF0dXMgKyBcIjpcIiArIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZldGNoT3B0aW9ucy4kdHlwZVRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHIgPT4gdGhpcy4kY2hhaW4ucmVzcG9uc2VUZXh0ID0gcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZldGNoT3B0aW9ucy4kdHlwZUpTT04pIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHIgPT4gdGhpcy4kY2hhaW4ucmVzcG9uc2VKU09OID0gcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2UuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuUkVRVUVTVF9FUlJPUih7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IHJlYXNvbi5tZXNzYWdlIHx8IHJlYXNvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy4kY2hhaW4uZmV0Y2hSZXNwb25zZSAmJiB0aGlzLiRjaGFpbi5mZXRjaFJlc3BvbnNlLnVybCB8fCB1cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoUmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoUmVzcG9uc2U6IHRoaXMuJGNoYWluLmZldGNoUmVzcG9uc2UgfHwgbnVsbFxuICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25hbEFyZ3MudHJhY2VTb3VyY2UpXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuJGNoYWluLmZldGNoT3B0aW9ucyA9IGZldGNoT3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMuJGNoYWluLmZldGNoUmVxdWVzdCA9IGZldGNoUmVxdWVzdDtcblxuICAgICAgICAgICAgbGV0IGFib3J0Q3RybCA9IGZldGNoT3B0aW9ucy5hYm9ydENvbnRyb2xsZXIgfHwgbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgICAgZmV0Y2hPcHRpb25zLnNpZ25hbCA9IGFib3J0Q3RybC5zaWduYWw7XG4gICAgICAgICAgICB0aGlzLiRjaGFpbi5mZXRjaEFib3J0Q29udHJvbGxlciA9IGFib3J0Q3RybDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRjaGFpbkFib3J0KHJlYXNvbiA9IFwicmVxdWVzdCBhYm9ydGVkXCIpIHtcbiAgICAgICAgc3VwZXIuJGNoYWluQWJvcnQocmVhc29uKTtcbiAgICAgICAgdGhpcy4kY2hhaW4uZmV0Y2hBYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG59IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IEpGQUNUT1JZX0RFViwgSkZBQ1RPUllfQ0xJIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBqRmFjdG9yeUZ1bmN0aW9uQ29uZGl0aW9uYWwgfSBmcm9tIFwiLi9KRmFjdG9yeUZ1bmN0aW9uXCI7XG5pbXBvcnQgeyBoZWxwZXJfZGVmYXVsdHNEZWVwLCBOT09QIH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5TG9nZ2VyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEEgY29udGV4dHVhbCBsb2dnZXIgdGhhdCBwcmVwZW5kcyBhIGxhYmVsIGFuZCBhbGxvd3MgcnVudGltZSBmaWx0ZXJpbmcgd2hpbGUgcHJlc2VydmluZyB0aGUgY2FsbGVyIGxpbmUgbnVtYmVyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxvZ2dlci5jcmVhdGVTdWJMb2dnZXIobGFiZWwpIGNyZWF0ZSBhIHN1Yi1sb2dnZXIgb2YgbG9nZ2VyOyBcImxvZ2dlclwiIGNhbiBiZSBhIHN1Yi1sb2dnZXIuXG4vLyBsb2dnZXIuZGlzYWJsZSgpIGRpc2FibGUgY29uc29sZSBmb3IgaXRzZWxmIGFuZCBzdWItbG9nZ2Vyc1xuLy8gbG9nZ2VyLmRpc2FsbG93KCdsb2cnKSBkaXNhbGxvdyBsb2dnZXIubG9nKCkgb25seVxuLy8gbG9nZ2VyLmRpc2FsbG93KCdsb2cnLCBzdWJMb2dnZXIubGFiZWwpIGRpc2FsbG93IHN1Yi1sb2dnZXIubG9nKCkgb25seS4gVGhpcyBpcyBjYWxsYWJsZSBmcm9tIGFueSBsb2dnZXIvc3ViLWxvZ2dlclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXMgOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgU1lNQk9MX0VOQUJMRUQgPSBTeW1ib2woKTtcblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5TG9nZ2VyIHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiBvcHRpb25zKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5TG9nZ2VyKG9wdGlvbnMpXCIsIG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgLnByb3BlcnRpZXMoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05GSUcpKVxuICAgICAgICB9XG4gICAgICAgIGhlbHBlcl9kZWZhdWx0c0RlZXAodGhpcywgb3B0aW9ucywgSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05GSUcpO1xuICAgICAgICB0aGlzLmNvbmRpdGlvbiA9IGpGYWN0b3J5RnVuY3Rpb25Db25kaXRpb25hbChKRmFjdG9yeUxvZ2dlci5ERUZBVUxUX0NPTkRJVElPTik7XG4gICAgICAgIHRoaXMuaW5zdGFsbEFjY2Vzc29yKFwibG9nXCIpO1xuICAgICAgICB0aGlzLmluc3RhbGxBY2Nlc3NvcihcIndhcm5cIik7XG4gICAgICAgIHRoaXMuaW5zdGFsbEFjY2Vzc29yKFwiZXJyb3JcIilcbiAgICB9XG5cbiAgICBnZXQgZW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbU1lNQk9MX0VOQUJMRURdICYmICh0aGlzLnBhcmVudExvZ2dlciA/IHRoaXMucGFyZW50TG9nZ2VyLmVuYWJsZWQgOiB0cnVlKVxuICAgIH1cblxuICAgIHNldCBlbmFibGVkKHYpIHtcbiAgICAgICAgdiA/IHRoaXMuZW5hYmxlKCkgOiB0aGlzLmRpc2FibGUoKVxuICAgIH1cblxuICAgIGVuYWJsZSgpIHtcbiAgICAgICAgaWYgKHRoaXNbU1lNQk9MX0VOQUJMRURdICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzW1NZTUJPTF9FTkFCTEVEXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNhYmxlKCkge1xuICAgICAgICBpZiAodGhpc1tTWU1CT0xfRU5BQkxFRF0gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzW1NZTUJPTF9FTkFCTEVEXSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzYWxsb3cobmF0aXZlTmFtZSwgbGFiZWwgPSB0aGlzLmxhYmVsKSB7XG4gICAgICAgIGlmICghdGhpcy5maWx0ZXJzW2xhYmVsXSkge3RoaXMuZmlsdGVyc1tsYWJlbF0gPSB7fX1cbiAgICAgICAgdGhpcy5maWx0ZXJzW2xhYmVsXVtuYXRpdmVOYW1lXSA9IHRydWVcbiAgICB9XG5cbiAgICBhbGxvdyhuYXRpdmVOYW1lLCBsYWJlbCA9IHRoaXMubGFiZWwpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyc1tsYWJlbF0pIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmZpbHRlcnNbbGFiZWxdW25hdGl2ZU5hbWVdXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbnN0YWxsQWNjZXNzb3IobmF0aXZlTmFtZSwgdGFyZ2V0TmFtZSA9IG5hdGl2ZU5hbWUsIHRhcmdldCA9IHRoaXMpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUxvZ2dlcihuYXRpdmVOYW1lKVwiLCBuYXRpdmVOYW1lKS5lcXVhbEluKFtcImxvZ1wiLCBcIndhcm5cIiwgXCJlcnJvclwiXSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCB7XG4gICAgICAgICAgICBbdGFyZ2V0TmFtZV06IHtcbiAgICAgICAgICAgICAgICBnZXQ6IHRoaXMuYWNjZXNzb3IuYmluZCh0aGlzLCBuYXRpdmVOYW1lLyosIHRhcmdldCovKSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBhY2Nlc3NvcihuYXRpdmVOYW1lLyosIHRhcmdldCovKSB7XG4gICAgICAgIGlmICghdGhpc1tTWU1CT0xfRU5BQkxFRF0pIHtcbiAgICAgICAgICAgIHJldHVybiBOT09QO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvbihuYXRpdmVOYW1lKSAmJiB0aGlzLmZvcm1hdHRlcltuYXRpdmVOYW1lXSh0aGlzKSB8fCBOT09QXG4gICAgfVxuXG4gICAgY3JlYXRlU3ViTG9nZ2VyKGxhYmVsKSB7XG4gICAgICAgIC8qKiBAdHlwZSBKRmFjdG9yeUxvZ2dlciAqL1xuICAgICAgICBsZXQgc3ViID0gbmV3IEpGYWN0b3J5TG9nZ2VyKHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRoaXMuZW5hYmxlZCxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsICsgXCIuXCIgKyBsYWJlbCxcbiAgICAgICAgICAgIHN0eWxlc19jc3M6IHRoaXMuc3R5bGVzX2NzcyxcbiAgICAgICAgICAgIHN0eWxlc19jbGk6IHRoaXMuc3R5bGVzX2NsaSxcbiAgICAgICAgICAgIGNvbnNvbGU6IHRoaXMuY29uc29sZSxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogdGhpcy5mb3JtYXR0ZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHN1Yi5wYXJlbnRMb2dnZXIgPSB0aGlzO1xuICAgICAgICBzdWIuY29uZGl0aW9uLmFkZENvbmRpdGlvbigoKSA9PiB0aGlzLmVuYWJsZWQpO1xuICAgICAgICBzdWIuZmlsdGVycyA9IHRoaXMuZmlsdGVyczsgLy8gc2hhcmVkIHRvIGFsbG93L2Rpc2FsbG93IGZyb20gYW55d2hlcmVcbiAgICAgICAgcmV0dXJuIHN1YlxuICAgIH1cbn1cblxuLy8gI2xpbWl0YXRpb24jIFRvIHByZXNlcnZlIHRoZSBsaW5lIG51bWJlciwgd2UgY2FuIG9ubHkgdXNlIG5hdGl2ZSBmdW5jdGlvbnMsIGxpa2UgYmluZFxuLy8gI2xpbWl0YXRpb24jIEJlY2F1c2Ugd2UgdXNlIGJpbmQoKSwgb25seSB0aGUgc3R5bGUgb2YgdGhlIGZpcnN0IGVsZW1lbnQgY2FuIGJlIGVmZmljaWVudGx5IGRlZmluZWRcblxuSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX05BVElWRSA9IHtcbiAgICBsb2c6IGxvZ2dlciA9PiBsb2dnZXIuY29uc29sZS5sb2cuYmluZChsb2dnZXIuY29uc29sZSwgbG9nZ2VyLmxhYmVsICsgXCI+XCIpLFxuICAgIHdhcm46IGxvZ2dlciA9PiBsb2dnZXIuY29uc29sZS53YXJuLmJpbmQobG9nZ2VyLmNvbnNvbGUsIGxvZ2dlci5sYWJlbCArIFwiPlwiKSxcbiAgICBlcnJvcjogbG9nZ2VyID0+IGxvZ2dlci5jb25zb2xlLmVycm9yLmJpbmQobG9nZ2VyLmNvbnNvbGUsIGxvZ2dlci5sYWJlbCArIFwiPlwiKVxufTtcblxuSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX0NMSSA9IHtcbiAgICBsb2c6IGxvZ2dlciA9PiBsb2dnZXIuY29uc29sZS5sb2cuYmluZChsb2dnZXIuY29uc29sZSwgbG9nZ2VyLnN0eWxlc19jbGkubGFiZWwsIGxvZ2dlci5sYWJlbCArIFwiPlwiKSxcbiAgICB3YXJuOiBsb2dnZXIgPT4gbG9nZ2VyLmNvbnNvbGUud2Fybi5iaW5kKGxvZ2dlci5jb25zb2xlLCBsb2dnZXIuc3R5bGVzX2NsaS5sYWJlbCwgbG9nZ2VyLmxhYmVsICsgXCI+XCIpLFxuICAgIGVycm9yOiBsb2dnZXIgPT4gbG9nZ2VyLmNvbnNvbGUuZXJyb3IuYmluZChsb2dnZXIuY29uc29sZSwgbG9nZ2VyLnN0eWxlc19jbGkubGFiZWwsIGxvZ2dlci5sYWJlbCArIFwiPlwiKVxufTtcblxuSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX0JST1dTRVIgPSB7XG4gICAgbG9nOiBsb2dnZXIgPT4gbG9nZ2VyLmNvbnNvbGUubG9nLmJpbmQobG9nZ2VyLmNvbnNvbGUsIFwiJWNcIiArIGxvZ2dlci5sYWJlbCArIFwiPlwiLCBsb2dnZXIuc3R5bGVzX2Nzcy5sYWJlbCksXG4gICAgd2FybjogbG9nZ2VyID0+IGxvZ2dlci5jb25zb2xlLndhcm4uYmluZChsb2dnZXIuY29uc29sZSwgXCIlY1wiICsgbG9nZ2VyLmxhYmVsICsgXCI+XCIsIGxvZ2dlci5zdHlsZXNfY3NzLmxhYmVsKSxcbiAgICBlcnJvcjogbG9nZ2VyID0+IGxvZ2dlci5jb25zb2xlLmVycm9yLmJpbmQobG9nZ2VyLmNvbnNvbGUsIFwiJWNcIiArIGxvZ2dlci5sYWJlbCArIFwiPlwiLCBsb2dnZXIuc3R5bGVzX2Nzcy5sYWJlbClcbn07XG5cbi8qKiBAcmV0dXJuIHtib29sZWFufSAqL1xuSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05ESVRJT04gPSBmdW5jdGlvbihuYXRpdmVOYW1lKSB7XG4gICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5TG9nZ2VyLmNvbmRpdGlvbihuYXRpdmVOYW1lKVwiLCBuYXRpdmVOYW1lKS5lcXVhbEluKFtcImxvZ1wiLCBcIndhcm5cIiwgXCJlcnJvclwiXSk7XG4gICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlMb2dnZXIuZW5hYmxlZFwiLCB0aGlzLmVuYWJsZWQpLmVxdWFsKHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gISh0aGlzLmZpbHRlcnNbdGhpcy5sYWJlbF0gJiYgdGhpcy5maWx0ZXJzW3RoaXMubGFiZWxdW25hdGl2ZU5hbWVdKVxufTtcblxuSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05GSUcgPSAvKiogQGxlbmRzIEpGYWN0b3J5TG9nZ2VyIyAqLyB7XG4gICAgbGFiZWw6IFwiXCIsXG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBwYXJlbnRMb2dnZXI6IG51bGwsXG4gICAgZm9ybWF0dGVyOiBKRkFDVE9SWV9DTEkgP1xuICAgICAgICBKRmFjdG9yeUxvZ2dlci5GT1JNQVRURVJfQ0xJIDpcbiAgICAgICAgSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX0JST1dTRVIsXG4gICAgY29uc29sZSxcbiAgICBmaWx0ZXJzOiB7XG4gICAgfSxcbiAgICBzdHlsZXNfY2xpOiB7XG4gICAgICAgIGxhYmVsOiBcIlxceDFiWzE7MzBtJXNcXHgxYlswbVwiXG4gICAgfSxcbiAgICBzdHlsZXNfY3NzOiB7XG4gICAgICAgIGxhYmVsOiBcImNvbG9yOiBncmF5XCJcbiAgICB9XG59OyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5VGltZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlUaW1lIGV4dGVuZHMgRGF0ZSB7XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvTG9jYWxlVGltZVN0cmluZygpICsgXCIsIFwiICsgdGhpcy5nZXRVVENNaWxsaXNlY29uZHMoKSArIFwibXMgKFwiICsgdGhpcy52YWx1ZU9mKCkgKyBcIilcIlxuICAgIH1cbiAgICAkdG9EdXJhdGlvblN0cmluZygpIHtcbiAgICAgICAgbGV0IGhvdXJzID0gdGhpcy5nZXRVVENIb3VycygpO1xuICAgICAgICBsZXQgbWludXRlcyA9IHRoaXMuZ2V0VVRDTWludXRlcygpO1xuICAgICAgICBsZXQgc2Vjb25kcyA9IHRoaXMuZ2V0VVRDU2Vjb25kcygpO1xuICAgICAgICBsZXQgbWlsbGlzZWNvbmRzID0gdGhpcy5nZXRVVENNaWxsaXNlY29uZHMoKTtcblxuICAgICAgICBsZXQgYSA9IFtdO1xuICAgICAgICBpZiAoaG91cnMpIHtcbiAgICAgICAgICAgIGEucHVzaChob3VycyArIFwiaFwiKVxuICAgICAgICB9XG4gICAgICAgIGlmIChtaW51dGVzKSB7XG4gICAgICAgICAgICBhLnB1c2gobWludXRlcyArIFwibWluXCIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlY29uZHMpIHtcbiAgICAgICAgICAgIGEucHVzaChzZWNvbmRzICsgXCJzXCIpXG4gICAgICAgIH1cbiAgICAgICAgYS5wdXNoKG1pbGxpc2Vjb25kcyArIFwibXNcIik7XG4gICAgICAgIGlmIChhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYS5qb2luKFwiLFwiKSArIFwiIChcIiArIHRoaXMudmFsdWVPZigpICsgXCIpXCI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeVRpbWVUcmFjZSBleHRlbmRzIERhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmVsYXBzZWQgPSBudWxsO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICB0MTogeyB2YWx1ZTogbnVsbCwgd3JpdGFibGU6IHRydWUgfSxcbiAgICAgICAgICAgIHQwOiB7IHZhbHVlOiBuZXcgSkZhY3RvcnlUaW1lKCkgfVxuICAgICAgICB9KVxuICAgIH1cbiAgICBlbmQoKSB7XG4gICAgICAgIHRoaXMudDEgPSBuZXcgSkZhY3RvcnlUaW1lKCk7XG4gICAgICAgIHRoaXMuZWxhcHNlZCA9IG5ldyBKRmFjdG9yeVRpbWUodGhpcy50MSAtIHRoaXMudDApLiR0b0R1cmF0aW9uU3RyaW5nKClcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsYXBzZWRcbiAgICB9XG59IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdENvcmVcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmltcG9ydCB7IEpGQUNUT1JZX0RFViwgakZhY3RvcnlDb25maWcgfSBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IsIEpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBqRmFjdG9yeSB9IGZyb20gXCIuL2pGYWN0b3J5XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUFib3V0IH0gZnJvbSBcIi4vSkZhY3RvcnlBYm91dFwiO1xuaW1wb3J0IHsgSkZhY3RvcnlMb2dnZXIgfSBmcm9tIFwiLi9KRmFjdG9yeUxvZ2dlclwiO1xuaW1wb3J0IHsgSkZhY3RvcnlQcm9taXNlLCBKRmFjdG9yeVByb21pc2VTeW5jIH0gZnJvbSBcIi4vSkZhY3RvcnlQcm9taXNlXCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV2ZW50c01hbmFnZXIgfSBmcm9tIFwiLi9KRmFjdG9yeUV2ZW50c1wiO1xuaW1wb3J0IHsgSkZhY3RvcnlPYmplY3QgfSBmcm9tIFwiLi9KRmFjdG9yeU9iamVjdFwiO1xuaW1wb3J0IHsgSkZhY3RvcnlUaW1lVHJhY2UgfSBmcm9tIFwiLi9KRmFjdG9yeVRpbWVcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBPYmplY3Rcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgVHJhaXRDb3JlIHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qgb3duZXIgPSB0aGlzO1xuXG4gICAgICAgIGNsYXNzIFN1Yk1hcCBleHRlbmRzIE1hcCB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWRfYXV0b2luY1wiLCB7IHZhbHVlOiAwLCB3cml0YWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRyZWdpc3RlclN5bmMoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGxldCBzdWIgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7fSwge1xuICAgICAgICAgICAgICAgICAgICAkdmFsdWU6IHsgdmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgJHBoYXNlUmVtb3ZlOiB7IHZhbHVlOiBUcmFpdFNlcnZpY2UuZ2V0Q29udGV4dHVhbFJlbW92ZVBoYXNlKG93bmVyKSB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCBzdWIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdWJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRyZWdpc3RlckFzeW5jKGtleSwgdGFza05hbWUsIHByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGFzayA9IG93bmVyLiR0YXNrKHRhc2tOYW1lLCBwcm9taXNlLiRjaGFpbik7XG5cbiAgICAgICAgICAgICAgICAvLyBFbmQgb2YgcHJvbWlzZSBjaGFpbiBtdXN0IGNvbXBsZXRlIHRoZSB0YXNrXG4gICAgICAgICAgICAgICAgcHJvbWlzZS4kY2hhaW4udGhlbigoKSA9PiB7IC8vIHN5bmNocm9ub3VzIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgdGFzay4kY2hhaW5BdXRvQ29tcGxldGUoKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQWJvcnRlZCB0YXNrIG11c3QgYWJvcnQgdGhlIHByb21pc2UgaWYgc3RpbGwgcnVubmluZ1xuICAgICAgICAgICAgICAgIHRhc2suJGNoYWluLnRoZW4oKCkgPT4gey8vIHN5bmNocm9ub3VzIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcm9taXNlLiRjaGFpbi5pc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS4kY2hhaW5BYm9ydChcImFib3J0ZWQgYnkgdGFza1wiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvbWlzZSwgXCIkcGhhc2VSZW1vdmVcIiwgeyB2YWx1ZTogdGFzay4kcGhhc2VSZW1vdmUgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFza1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkaWRfcmVzb2x2ZShzdHIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyLmluZGV4T2YoXCI/XCIpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlkID0gKyt0aGlzLmlkX2F1dG9pbmM7XG4gICAgICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXD8vZywgaWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB7XG4gICAgICAgICAgICBbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXTogT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgICAgICAgIGFzc2lnbjogZnVuY3Rpb24ocHJvcGVydHksIHZhbHVlLCBkZXNjcmlwdG9yKSB7SkZhY3RvcnlPYmplY3QuYXNzaWduKHRoaXMsIHByb3BlcnR5LCB2YWx1ZSwgZGVzY3JpcHRvcil9LFxuICAgICAgICAgICAgY3JlYXRlU3ViTWFwOiAoKSA9PiBuZXcgU3ViTWFwKClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiJFwiLCB7IHZhbHVlOiBPYmplY3QuY3JlYXRlKHByb3RvKSB9KTtcblxuICAgICAgICAvLyBwcmUtZGVmaW5lIG1vc3QgaW1wb3J0YW50IHByb3BlcnRpZXNcbiAgICAgICAgLy8gdG8gb3JkZXIgdGhlbSBmaXJzdCBpbiBkZXZ0b29sIChyZWR1Y2VkIGZvcm0gb25seSlcbiAgICAgICAgdGhpcy4kLmFzc2lnbih7XG4gICAgICAgICAgICB0YXNrczogbnVsbCxcbiAgICAgICAgICAgIHJlcXVlc3RzOiBudWxsXG4gICAgICAgIH0sIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEVfV1JJVEFCTEUpO1xuICAgIH1cbn1cblxuVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFID0gU3ltYm9sKFwiX1wiKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBBYm91dFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdEFib3V0IHtcblxuICAgIHRyYWl0X2NvbnN0cnVjdG9yKGFib3V0KSB7XG4gICAgICAgIEpGYWN0b3J5T2JqZWN0LmFzc2lnbih0aGlzLiQsIFwiYWJvdXRcIixcbiAgICAgICAgICAgIG5ldyBKRmFjdG9yeUFib3V0KHRoaXMsIGFib3V0KSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuUkVBRE9OTFkpXG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IExvZ1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdExvZyB7XG5cbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgbGFiZWw6IHRoaXMuJC5hYm91dC5uYW1lXG4gICAgICAgIH0sIGpGYWN0b3J5Q29uZmlnLlRyYWl0TG9nIHx8IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBsb2dnZXIgPSBuZXcgSkZhY3RvcnlMb2dnZXIoY29uZmlnKTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy4kLCBcImxvZ2dlclwiLCB7IHZhbHVlOiBsb2dnZXIgfSk7XG5cbiAgICAgICAgbG9nZ2VyLmluc3RhbGxBY2Nlc3NvcihcImxvZ1wiLCAgIFwiJGxvZ1wiLCAgICAgdGhpcyk7XG4gICAgICAgIGxvZ2dlci5pbnN0YWxsQWNjZXNzb3IoXCJ3YXJuXCIsICBcIiRsb2dXYXJuXCIsIHRoaXMpO1xuICAgICAgICBsb2dnZXIuaW5zdGFsbEFjY2Vzc29yKFwiZXJyb3JcIiwgXCIkbG9nRXJyXCIsICB0aGlzKTtcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVHJhaXQgVGFza3Ncbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgVHJhaXRUYXNrIHtcblxuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLiQuYXNzaWduKFwidGFza3NcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkdGFzayhpZCwgZXhlY3V0b3JPclZhbHVlKSB7XG4gICAgICAgIGlkID0gdGhpcy4kLnRhc2tzLiRpZF9yZXNvbHZlKGlkKTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiR0YXNrKGlkKVwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkdGFzayhleGVjdXRvck9yVmFsdWUpXCIsIGV4ZWN1dG9yT3JWYWx1ZSkubm90VW5kZWZpbmVkKCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kLnRhc2tzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkdGFzayhpZClcIiwgZ2l2ZW46IGlkIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGFzaztcblxuICAgICAgICBpZiAodHlwZW9mIGV4ZWN1dG9yT3JWYWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0YXNrICA9IG5ldyBKRmFjdG9yeVByb21pc2UoeyBuYW1lOiBpZCwgb3duZXI6IHRoaXMgfSwgZXhlY3V0b3JPclZhbHVlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFzayA9IEpGYWN0b3J5UHJvbWlzZS5yZXNvbHZlKHsgbmFtZTogaWQsIG93bmVyOiB0aGlzIH0sIGV4ZWN1dG9yT3JWYWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0YXNrLiRwaGFzZVJlbW92ZSA9IFRyYWl0U2VydmljZS5nZXRDb250ZXh0dWFsUmVtb3ZlUGhhc2UodGhpcyk7XG5cbiAgICAgICAgbGV0IG1ldHJpY3M7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIG1ldHJpY3MgPSBuZXcgSkZhY3RvcnlUaW1lVHJhY2UoKTtcbiAgICAgICAgICAgIHRhc2suJHRhc2tNZXRyaWNzID0geyAkZGV2X3RpbWluZzogbWV0cmljcyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGFzay4kY2hhaW4udGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICAgICAgbWV0cmljcy5lbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiQudGFza3MuZ2V0KGlkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHRhc2tSZW1vdmUoaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiQudGFza3Muc2V0KGlkLCB0YXNrKTtcbiAgICAgICAgcmV0dXJuIHRhc2tcbiAgICB9XG5cbiAgICAkdGFza1JlbW92ZShpZCwgcmVhc29uKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiJHRhc2tSZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICByZWFzb24gJiYgSkZhY3RvcnlFeHBlY3QoXCIkdGFza1JlbW92ZShyZWFzb24pXCIsIHJlYXNvbikudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiQudGFza3MuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLktFWV9NSVNTSU5HKHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIiR0YXNrUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyXG4gICAgICAgICAgICBpZiAodGhpcy4kLnRhc2tzLmdldChpZCkuX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLnRhc2tzLmdldChpZCkuX2NhbGxlZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbnRyeSA9IHRoaXMuJC50YXNrcy5nZXQoaWQpO1xuICAgICAgICAvLyBkZWxldGluZyBiZWZvcmUgY2hhaW5BYm9ydCgpIHRvIHByZXZlbnQgcmVtb3ZlKCkgcmVjYWxsXG4gICAgICAgIHRoaXMuJC50YXNrcy5kZWxldGUoaWQpO1xuICAgICAgICBlbnRyeS4kY2hhaW5BYm9ydChyZWFzb24gfHwgXCIkdGFza1JlbW92ZSgpXCIpO1xuICAgIH1cblxuICAgICR0YXNrUmVtb3ZlQWxsKHJlbW92ZVBoYXNlKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiJHRhc2tSZW1vdmVBbGwocmVtb3ZlUGhhc2UpXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRhc2tzID0gdGhpcy4kLnRhc2tzO1xuICAgICAgICBpZiAodGFza3Muc2l6ZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB0YXNrXSBvZiB0YXNrcykge1xuICAgICAgICAgICAgICAgIGlmICh0YXNrLiRwaGFzZVJlbW92ZSA9PT0gcmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdGFza1JlbW92ZShrZXksIFwiJHRhc2tSZW1vdmVBbGwoXCIgKyByZW1vdmVQaGFzZSArIFwiKVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgICR0YXNrUHJvbWlzZUFsbChhdXRvQ29tcGxldGUgPSBmYWxzZSkge1xuICAgICAgICBsZXQgcGVuZGluZyA9IFtdO1xuICAgICAgICBpZiAodGhpcy4kLnRhc2tzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHRhc2sgb2YgdGhpcy4kLnRhc2tzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF1dG9Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlcyB0aGUgY2hhaW4gYXMgc29vbiBhcyBubyBtb3JlIHBlbmRpbmcgcHJvbWlzZSBpbiB0aGUgY2hhaW5cbiAgICAgICAgICAgICAgICAgICAgdGFzay4kY2hhaW4uY2hhaW5Db25maWcuY2hhaW5BdXRvQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzdGlsbCBwZW5kaW5nID9cbiAgICAgICAgICAgICAgICBpZiAodGFzay4kY2hhaW4uaXNQZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCh0YXNrLiRjaGFpbilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBlbmRpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocGVuZGluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gSkZhY3RvcnlQcm9taXNlU3luYy5yZXNvbHZlKClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBFdmVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgVHJhaXRFdmVudHMge1xuXG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGFzc2lnblByaXZhdGUodGhpcywgXCJldmVudHNcIiwge1xuICAgICAgICAgICAgY3VzdG9tOiBuZXcgSkZhY3RvcnlFdmVudHNNYW5hZ2VyKHRoaXMpLFxuICAgICAgICAgICAga2VybmVsOiBuZXcgSkZhY3RvcnlFdmVudHNNYW5hZ2VyKHRoaXMpXG4gICAgICAgIH0sIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLk5PTkUpO1xuXG4gICAgICAgIGxldCBldmVudE1hbmFnZXIgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMuY3VzdG9tO1xuXG4gICAgICAgIC8vIGlmIChKRkFDVE9SWV9ERVYpIHsgLy8gdmVyeSBzbG93OyByZXF1aXJlcyBvcHRpbWl6YXRpb25cbiAgICAgICAgLy8gICAgIC8vIHJlZ2lzdHJ5IGFyZSBhdXRvIHVwZGF0ZWQgaW4gZGV2IG1vZGUgKHVub3B0aW1pemVkIGltcGxlbWVudGF0aW9uKVxuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgbGV0IGxpc3RlbmVyVXBkYXRlID0gKCkgPT4ge1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuJC5saXN0ZW5lcnMgPSBldmVudE1hbmFnZXIuZ2V0RG9tTGlzdGVuZXJzKHRoaXMuJC5hYm91dC5maW5nZXJwcmludCk7XG4gICAgICAgIC8vICAgICB9O1xuICAgICAgICAvLyAgICAgbGV0IG9ic2VydmVyVXBkYXRlID0gKCkgPT4ge1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuJC5vYnNlcnZlcnMgPSBldmVudE1hbmFnZXIuZ2V0T2JzZXJ2ZXJzKCk7XG4gICAgICAgIC8vICAgICB9O1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgZXZlbnRNYW5hZ2VyLm9uTGlzdGVuZXJVcGRhdGUgPSBsaXN0ZW5lclVwZGF0ZTtcbiAgICAgICAgLy8gICAgIGV2ZW50TWFuYWdlci5vbk9ic2VydmVyVXBkYXRlID0gb2JzZXJ2ZXJVcGRhdGU7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICBsZXQgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihsaXN0ZW5lclVwZGF0ZSk7XG4gICAgICAgIC8vICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwge2NoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZX0pO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgbGlzdGVuZXJVcGRhdGUoKTtcbiAgICAgICAgLy8gICAgIG9ic2VydmVyVXBkYXRlKCk7XG4gICAgICAgIC8vIH0gZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLiQsIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBldmVudE1hbmFnZXIuZ2V0RG9tTGlzdGVuZXJzLmJpbmQoZXZlbnRNYW5hZ2VyLCB0aGlzLiQuYWJvdXQuZmluZ2VycHJpbnQpLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvYnNlcnZlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBldmVudE1hbmFnZXIuZ2V0T2JzZXJ2ZXJzLmJpbmQoZXZlbnRNYW5hZ2VyKSxcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkb24oLyogZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLCBvcHRpb25zICovKSB7XG4gICAgICAgIHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5jdXN0b20ub24oLi4uYXJndW1lbnRzKVxuICAgIH1cblxuICAgICRvZmYoLyogZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLCBvcHRpb25zICovKSB7XG4gICAgICAgIHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5jdXN0b20ub2ZmKC4uLmFyZ3VtZW50cylcbiAgICB9XG5cbiAgICAkdHJpZ2dlcigvKiBldmVudHMsIHRhcmdldCwgZGF0YSAqLykge1xuICAgICAgICByZXR1cm4gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmN1c3RvbS50cmlnZ2VyKC4uLmFyZ3VtZW50cylcbiAgICB9XG5cbiAgICAkdHJpZ2dlclBhcmFsbGVsKC8qIGV2ZW50cywgdGFyZ2V0LCBkYXRhICovKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMuY3VzdG9tLnRyaWdnZXJQYXJhbGxlbCguLi5hcmd1bWVudHMpXG4gICAgfVxuXG4gICAgJG5vdGlmeShldmVudHMsIGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHRyaWdnZXIoZXZlbnRzLCBkYXRhKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbC50cmlnZ2VyKGV2ZW50cywgZGF0YSkpXG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IFN0YXRlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdFN0YXRlIHtcblxuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBjb25zdCBzdGF0ZVJvdXRlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG5cbiAgICAgICAgYXNzaWduUHJpdmF0ZSh0aGlzLCB7IHN0YXRlcywgc3RhdGVSb3V0ZXMgfSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuUkVBRE9OTFkpO1xuXG4gICAgICAgIEpGYWN0b3J5T2JqZWN0LmFzc2lnbih0aGlzLiQsIFwic3RhdGVzXCIsIG5ldyBQcm94eShzdGF0ZXMsIHtcbiAgICAgICAgICAgIHNldDogKHRhcmdldCwga2V5LCB2YWwpID0+IHRoaXMuJHN0YXRlKGtleSwgdmFsKSxcbiAgICAgICAgICAgIGdldDogKHRhcmdldCwga2V5KSA9PiBzdGF0ZXNba2V5XVxuICAgICAgICB9KSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuUkVBRE9OTFkpO1xuXG4gICAgICAgIGtlcm5lbC5vbihcImJlZm9yZVN0YXRlQ2hhbmdlXCIsIChlLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBsZXQgaDtcbiAgICAgICAgICAgIGlmIChzdGF0ZVJvdXRlc1tkYXRhLmtleV0gJiYgc3RhdGVSb3V0ZXNbZGF0YS5rZXldLmJlZm9yZVxuICAgICAgICAgICAgICAgICYmIChoID0gc3RhdGVSb3V0ZXNbZGF0YS5rZXldLmJlZm9yZShkYXRhLnZhbCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG5vdGlmeShoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAga2VybmVsLm9uKFwiYWZ0ZXJTdGF0ZUNoYW5nZVwiLCAoZSwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgbGV0IGg7XG4gICAgICAgICAgICBpZiAoc3RhdGVSb3V0ZXNbZGF0YS5rZXldICYmIHN0YXRlUm91dGVzW2RhdGEua2V5XS5hZnRlclxuICAgICAgICAgICAgICAgICYmIChoID0gc3RhdGVSb3V0ZXNbZGF0YS5rZXldLmFmdGVyKGRhdGEudmFsKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbm90aWZ5KGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc3RhdGUoa2V5LCB2YWwsIG5vdGlmeSA9IHRydWUpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkc3RhdGUoa2V5KVwiLCBrZXkpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiJHN0YXRlKG5vdGlmeSlcIiwgbm90aWZ5KS50eXBlQm9vbGVhbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBKRmFjdG9yeVByb21pc2VTeW5jKGFzeW5jIHJlc29sdmUgPT4ge1xuXG4gICAgICAgICAgICBsZXQgc3RhdGVzID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uc3RhdGVzO1xuICAgICAgICAgICAgbGV0IHByZXZpb3VzVmFsID0gc3RhdGVzW2tleV07XG4gICAgICAgICAgICBsZXQgcGVuZGluZztcblxuICAgICAgICAgICAgaWYgKCEoa2V5IGluIHN0YXRlcykgfHwgcHJldmlvdXNWYWwgIT09IHZhbCkge1xuXG4gICAgICAgICAgICAgICAgcGVuZGluZyA9IG5vdGlmeSAmJiB0aGlzLiRub3RpZnkoXCJiZWZvcmVTdGF0ZUNoYW5nZVwiLCB7IGtleSwgdmFsLCBwcmV2aW91c1ZhbCB9KTtcbiAgICAgICAgICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcgJiYgSkZhY3RvcnlFeHBlY3QoXCJiZWZvcmVTdGF0ZUNoYW5nZSByZXN1bHRcIiwgcGVuZGluZykudHlwZShKRmFjdG9yeVByb21pc2VTeW5jKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocGVuZGluZyAmJiAhcGVuZGluZy4kaXNTZXR0bGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlc1trZXldID0gcGVuZGluZztcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGVuZGluZztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN0YXRlc1trZXldXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzW2tleV0gPSB2YWw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcGVuZGluZyA9IG5vdGlmeSAmJiB0aGlzLiRub3RpZnkoXCJhZnRlclN0YXRlQ2hhbmdlXCIsIHsga2V5LCB2YWwsIHByZXZpb3VzVmFsIH0pO1xuICAgICAgICAgICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZyAmJiBKRmFjdG9yeUV4cGVjdChcImFmdGVyU3RhdGVDaGFuZ2UgcmVzdWx0XCIsIHBlbmRpbmcpLnR5cGUoSkZhY3RvcnlQcm9taXNlU3luYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGVuZGluZykge1xuICAgICAgICAgICAgICAgIHBlbmRpbmcudGhlbihyZXNvbHZlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBTZXJ2aWNlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0U2VydmljZSB7XG5cbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuYW1lIHRoaXMuJC5zZXJ2aWNlXG4gICAgICAgICAqIEB0eXBlIHtvYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBKRmFjdG9yeU9iamVjdC5hc3NpZ24odGhpcy4kLCBcInNlcnZpY2VcIiwgT2JqZWN0LmNyZWF0ZShudWxsKSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuUkVBRE9OTFkpO1xuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZSA9IFRyYWl0U2VydmljZS5QSEFTRS5OT05FO1xuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVF1ZXVlID0gSkZhY3RvcnlQcm9taXNlLnJlc29sdmUoeyBuYW1lOiBcInBoYXNlUXVldWVcIiB9LCBudWxsKTtcbiAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VUYXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAgPSB7XG4gICAgICAgICAgICBpbnN0YWxsOiBuZXcgU2V0KCksXG4gICAgICAgICAgICBlbmFibGU6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIGRpc2FibGU6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIHVuaW5zdGFsbDogbmV3IFNldCgpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU2V0IGluaXRpYWwgc3RhdGVzIGJ1dCBkb24ndCB0cmlnZ2VyIGV2ZW50c1xuICAgICAgICB0aGlzLiRzdGF0ZShcImluc3RhbGxlZFwiLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLiRzdGF0ZShcImVuYWJsZWRcIiwgZmFsc2UsIGZhbHNlKTtcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGV2ZW50cyB0byBub3RpZnkgYmVmb3JlL2FmdGVyIGEgc3RhdGUgY2hhbmdlXG4gICAgICAgIC8vIHN0YXRlTmFtZSA6IHtiZWZvcmUgOiBldmVudE5hbWUsIGFmdGVyIDogZXZlbnROYW1lfVxuXG4gICAgICAgIC8vIFNQRUNcbiAgICAgICAgLy8gc3RhdCBpcyBjaGFuZ2VkIGJlZm9yZSBjYWxsaW5nIGhhbmRsZXJzIGV2ZW4gaWYgcGVuZGluZ1xuXG4gICAgICAgIGFzc2lnblByaXZhdGVNZW1iZXIodGhpcywgXCJzdGF0ZVJvdXRlc1wiLCB7XG4gICAgICAgICAgICBpbnN0YWxsZWQ6IHsgYWZ0ZXI6IHZhbCA9PiB2YWwgPyBcImluc3RhbGxcIiA6IFwidW5pbnN0YWxsXCIgfSxcbiAgICAgICAgICAgIGVuYWJsZWQ6IHsgYWZ0ZXI6IHZhbCA9PiB2YWwgPyBcImVuYWJsZVwiICA6IFwiZGlzYWJsZVwiIH1cbiAgICAgICAgfSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuTk9ORSk7XG5cbiAgICAgICAgbGV0IGN1c3RvbSA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5jdXN0b207XG4gICAgICAgIGxldCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuXG4gICAgICAgIC8vIEF0dGFjaCBhIHJlbW92ZSBwaGFzZSBuYW1lc3BhY2VzIG9uIGV2ZW50c1xuICAgICAgICBjdXN0b20uYWZmaWxpYXRlQWRkUnVsZSgoY29udGV4dCwgcGFyc2VkRXZlbnQsIG5hbWVzcGFjZXMsIG9wdGlvbnMpID0+XG4gICAgICAgICAgICBUcmFpdFNlcnZpY2Uuc2V0RXZlbnROYW1lc3BhY2VSZW1vdmVQaGFzZSh0aGlzLCBwYXJzZWRFdmVudCwgb3B0aW9ucylcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBBdHRhY2ggbW9kdWxlIGV2ZW50IGhhbmRsZXJzXG5cbiAgICAgICAgLyoqIEBuYW1lIEpGYWN0b3J5Q29yZU9iamVjdCNvbkluc3RhbGwgKi9cbiAgICAgICAgLyoqIEBuYW1lIEpGYWN0b3J5Q29yZU9iamVjdCNvbkVuYWJsZSAqL1xuICAgICAgICAvKiogQG5hbWUgSkZhY3RvcnlDb3JlT2JqZWN0I29uRGlzYWJsZSAqL1xuICAgICAgICAvKiogQG5hbWUgSkZhY3RvcnlDb3JlT2JqZWN0I29uVW5pbnN0YWxsICovXG5cbiAgICAgICAgbGV0IHBoYXNlUmVzb2x2ZSA9IGhhbmRsZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuJC50YXNrcy5zaXplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdGFza1JlbW92ZUFsbCh0aGlzLiQuc2VydmljZS5waGFzZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwcm9taXNlID0gSkZhY3RvcnlQcm9taXNlU3luYy5yZXNvbHZlKCk7XG4gICAgICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IGhhbmRsZXIuY2FsbCh0aGlzKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy4kdGFza1Byb21pc2VBbGwodHJ1ZSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZVxuICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoLyp0aGlzLiQuc2VydmljZS5pc1BoYXNlS2lsbGluZyAmJiovIGUgaW5zdGFuY2VvZiBqRmFjdG9yeUVycm9yLlBST01JU0VfRVhQSVJFRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGxvZ0VycihcInVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiBpbiBcIiArIHRoaXMuJC5zZXJ2aWNlLnBoYXNlICsgXCI7XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZSBpbnN0YW5jZW9mIEpGYWN0b3J5RXJyb3IgPyBlIDogW2VdKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAga2VybmVsLm9uKFwiaW5zdGFsbFwiLCAoKSA9PiBwaGFzZVJlc29sdmUodGhpcy5vbkluc3RhbGwpKTtcbiAgICAgICAga2VybmVsLm9uKFwiZW5hYmxlXCIsICgpID0+IHBoYXNlUmVzb2x2ZSh0aGlzLm9uRW5hYmxlKSk7XG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgKCkgPT4gcGhhc2VSZXNvbHZlKHRoaXMub25EaXNhYmxlKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiBwaGFzZVJlc29sdmUodGhpcy5vblVuaW5zdGFsbCkpO1xuXG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgICAoKSA9PiB0aGlzLiRvZmYoeyByZW1vdmFsOiBUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSB9KSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRvZmYoeyByZW1vdmFsOiBUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMIH0pKTtcbiAgICB9XG5cbiAgICAkaW5zdGFsbChlbmFibGUpIHtcbiAgICAgICAgbGV0IHJlc29sdmU7XG4gICAgICAgIGNvbnN0IHAgPSBuZXcgSkZhY3RvcnlQcm9taXNlKFxuICAgICAgICAgICAgeyBuYW1lOiBcImluc3RhbGxcIiwgY29uZmlnOiB7IGNoYWluQXV0b0NvbXBsZXRlOiB0cnVlIH0gfSxcbiAgICAgICAgICAgIF9yZXNvbHZlID0+IHJlc29sdmUgPSBfcmVzb2x2ZSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuJC5zdGF0ZXMuaW5zdGFsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLklOU1RBTEw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdGF0ZShcImluc3RhbGxlZFwiLCB0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlTWFwLmluc3RhbGwuYWRkKHApO1xuICAgICAgICBwLiRjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlVGFzayA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZU1hcC5pbnN0YWxsLmRlbGV0ZShwKTtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZSA9IHRoaXMuJC5zZXJ2aWNlLnBoYXNlUXVldWUudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVRhc2sgPSBwO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHAuJGNoYWluXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBlbmFibGVcbiAgICAgICAgaWYgKGVuYWJsZSkge3JldHVybiB0aGlzLiRlbmFibGUoKX1cbiAgICAgICAgcmV0dXJuIHBcbiAgICB9XG5cbiAgICAkZW5hYmxlKCkge1xuICAgICAgICBsZXQgcmVzb2x2ZTtcbiAgICAgICAgY29uc3QgcCA9IG5ldyBKRmFjdG9yeVByb21pc2UoXG4gICAgICAgICAgICB7IG5hbWU6IFwiZW5hYmxlXCIsIGNvbmZpZzogeyBjaGFpbkF1dG9Db21wbGV0ZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgICBfcmVzb2x2ZSA9PiByZXNvbHZlID0gX3Jlc29sdmUpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuJC5zdGF0ZXMuaW5zdGFsbGVkICYmICF0aGlzLiQuc3RhdGVzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2UgPSBUcmFpdFNlcnZpY2UuUEhBU0UuRU5BQkxFO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RhdGUoXCJlbmFibGVkXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuZW5hYmxlLmFkZChwKTtcbiAgICAgICAgcC4kY2hhaW4udGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVRhc2sgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuZW5hYmxlLmRlbGV0ZShwKTtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZSA9IHRoaXMuJC5zZXJ2aWNlLnBoYXNlUXVldWUudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVRhc2sgPSBwO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHAuJGNoYWluXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcFxuICAgIH1cblxuICAgICRkaXNhYmxlKCkge1xuICAgICAgICBsZXQgcmVzb2x2ZTtcbiAgICAgICAgY29uc3QgcCA9IG5ldyBKRmFjdG9yeVByb21pc2UoXG4gICAgICAgICAgICB7IG5hbWU6IFwiZGlzYWJsZVwiLCBjb25maWc6IHsgY2hhaW5BdXRvQ29tcGxldGU6IHRydWUgfSB9LFxuICAgICAgICAgICAgX3Jlc29sdmUgPT4gcmVzb2x2ZSA9IF9yZXNvbHZlKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiQuc3RhdGVzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2UgPSBUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0YXRlKFwiZW5hYmxlZFwiLCBmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZU1hcC5kaXNhYmxlLmFkZChwKTtcbiAgICAgICAgcC4kY2hhaW4udGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVRhc2sgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuZGlzYWJsZS5kZWxldGUocCk7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZSA9IFRyYWl0U2VydmljZS5QSEFTRS5OT05FXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGV4cGlyZXMgYWxsIHN0YWNrZWQgZW5hYmxlXG4gICAgICAgIGZvciAobGV0IFtrZXksIHZhbF0gb2YgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuZW5hYmxlLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gdGhpcy4kLnNlcnZpY2UucGhhc2VUYXNrKSB7XG4gICAgICAgICAgICAgICAgVHJhaXRTZXJ2aWNlLnBoYXNlS2lsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbC4kY2hhaW5BYm9ydCgpO1xuICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuZW5hYmxlLmRlbGV0ZShrZXkpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVF1ZXVlID0gdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlVGFzayA9IHA7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm4gcC4kY2hhaW5cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwXG4gICAgfVxuXG4gICAgJHVuaW5zdGFsbCgpIHtcbiAgICAgICAgbGV0IHJlc29sdmU7XG4gICAgICAgIGNvbnN0IHAgPSBuZXcgSkZhY3RvcnlQcm9taXNlKFxuICAgICAgICAgICAgeyBuYW1lOiBcInVuaW5zdGFsbFwiLCBjb25maWc6IHsgY2hhaW5BdXRvQ29tcGxldGU6IHRydWUgfSB9LFxuICAgICAgICAgICAgX3Jlc29sdmUgPT4gcmVzb2x2ZSA9IF9yZXNvbHZlKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiQuc3RhdGVzLmluc3RhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZSA9IFRyYWl0U2VydmljZS5QSEFTRS5VTklOU1RBTEw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdGF0ZShcImluc3RhbGxlZFwiLCBmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZU1hcC51bmluc3RhbGwuYWRkKHApO1xuICAgICAgICBwLiRjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlVGFzayA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZU1hcC51bmluc3RhbGwuZGVsZXRlKHApO1xuICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2UgPSBUcmFpdFNlcnZpY2UuUEhBU0UuTk9ORVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBleHBpcmVzIGFsbCBzdGFja2VkIGluc3RhbGxcbiAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsXSBvZiB0aGlzLiQuc2VydmljZS5waGFzZU1hcC5pbnN0YWxsLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gdGhpcy4kLnNlcnZpY2UucGhhc2VUYXNrKSB7XG4gICAgICAgICAgICAgICAgVHJhaXRTZXJ2aWNlLnBoYXNlS2lsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbC4kY2hhaW5BYm9ydCgpO1xuICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuaW5zdGFsbC5kZWxldGUoa2V5KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gcXVldWUgZGlzYWJsZSBiZWZvcmUgdW5pbnN0YWxsXG4gICAgICAgIHRoaXMuJGRpc2FibGUoKTtcblxuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVF1ZXVlID0gdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlVGFzayA9IHA7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm4gcC4kY2hhaW5cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwXG4gICAgfVxuXG4gICAgc3RhdGljIHBoYXNlS2lsbChjb21wb25lbnQpIHtcbiAgICAgICAgLy8gY29tcG9uZW50LiQuc2VydmljZS5pc1BoYXNlS2lsbGluZyA9IHRydWU7XG4gICAgICAgIGlmIChjb21wb25lbnQuJC50YXNrcy5zaXplKSB7XG4gICAgICAgICAgICBjb21wb25lbnQuJHRhc2tSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLmdldENvbnRleHR1YWxSZW1vdmVQaGFzZShjb21wb25lbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb25lbnQuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkU7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldENvbnRleHR1YWxSZW1vdmVQaGFzZShqRmFjdG9yeUNvcmVPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIFRyYWl0U2VydmljZS5QSEFTRV9SRVZFUlRbakZhY3RvcnlDb3JlT2JqZWN0LiQuc2VydmljZS5waGFzZV1cbiAgICB9XG5cbiAgICBzdGF0aWMgc2V0RXZlbnROYW1lc3BhY2VSZW1vdmVQaGFzZShqRmFjdG9yeUNvcmVPYmplY3QsIHBhcnNlZEV2ZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBjdXJSZW1vdmVQaGFzZSA9IHBhcnNlZEV2ZW50Lmhhc05hbWVzcGFjZShUcmFpdFNlcnZpY2UuUEhBU0VTKTtcbiAgICAgICAgbGV0IG5ld1JlbW92ZVBoYXNlID0gb3B0aW9ucyAmJiBvcHRpb25zLnJlbW92YWw7XG5cbiAgICAgICAgaWYgKCFuZXdSZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgbmV3UmVtb3ZlUGhhc2UgPSBUcmFpdFNlcnZpY2UuZ2V0Q29udGV4dHVhbFJlbW92ZVBoYXNlKGpGYWN0b3J5Q29yZU9iamVjdCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzcGVjaWFsIGNhc2UgOiBvbihcInVuaW5zdGFsbFwiKSB3aXRoIHJlbW92YWwgPSBESVNBQkxFICh0aGUgZGVmYXVsdCB2YWx1ZSlcbiAgICAgICAgLy8gPT4gZGlzYWJsZSgpIGlzIGFsd2F5cyBjYWxsZWQgYmVmb3JlIHVuaW5zdGFsbCgpIGNhdXNpbmcgdGhlIGV2ZW50IHRvIGJlIHJlbW92ZWQgdG9vIGVhcmx5XG4gICAgICAgIGlmIChwYXJzZWRFdmVudC5ldmVudCA9PT0gXCJ1bmluc3RhbGxcIiAmJiBuZXdSZW1vdmVQaGFzZSA9PT0gVHJhaXRTZXJ2aWNlLlBIQVNFLkRJU0FCTEUpIHtcbiAgICAgICAgICAgIG5ld1JlbW92ZVBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1clJlbW92ZVBoYXNlICE9PSBuZXdSZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgcGFyc2VkRXZlbnQuZGVsZXRlTmFtZXNwYWNlKGN1clJlbW92ZVBoYXNlKTtcbiAgICAgICAgICAgIHBhcnNlZEV2ZW50LmFkZE5hbWVzcGFjZShuZXdSZW1vdmVQaGFzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwYXJzZWRFdmVudC5hZGROYW1lc3BhY2UobmV3UmVtb3ZlUGhhc2UpO1xuICAgIH1cbn1cblxuVHJhaXRTZXJ2aWNlLlBIQVNFID0ge1xuICAgIE5PTkU6IFwiUEhBU0VfTk9ORVwiLFxuICAgIElOU1RBTEw6IFwiUEhBU0VfSU5TVEFMTFwiLFxuICAgIEVOQUJMRTogXCJQSEFTRV9FTkFCTEVcIixcbiAgICBESVNBQkxFOiBcIlBIQVNFX0RJU0FCTEVcIixcbiAgICBVTklOU1RBTEw6IFwiUEhBU0VfVU5JTlNUQUxMXCJcbn07XG5cblRyYWl0U2VydmljZS5QSEFTRV9SRVZFUlQgPSB7XG4gICAgW1RyYWl0U2VydmljZS5QSEFTRS5JTlNUQUxMXTogVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTCxcbiAgICBbVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTF06IFRyYWl0U2VydmljZS5QSEFTRS5JTlNUQUxMLFxuICAgIFtUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRV06IFRyYWl0U2VydmljZS5QSEFTRS5FTkFCTEUsXG4gICAgW1RyYWl0U2VydmljZS5QSEFTRS5FTkFCTEVdOiBUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSxcbiAgICBbVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkVdOiBUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRVxufTtcblxuVHJhaXRTZXJ2aWNlLlBIQVNFUyA9IE9iamVjdC52YWx1ZXMoVHJhaXRTZXJ2aWNlLlBIQVNFKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByaXZhdGUoc2NvcGUsIHByb3BlcnR5LCB2YWx1ZSwgZGVzY3JpcHRvcikge1xuICAgIEpGYWN0b3J5T2JqZWN0LmFzc2lnbihzY29wZS4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0sIHByb3BlcnR5LCB2YWx1ZSwgZGVzY3JpcHRvcilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByaXZhdGVNZW1iZXIoc2NvcGUsIHByb3BlcnR5LCB2YWx1ZSwgZGVzY3JpcHRvcikge1xuICAgIEpGYWN0b3J5T2JqZWN0LmFzc2lnbihzY29wZS4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV1bcHJvcGVydHldLCB2YWx1ZSwgZGVzY3JpcHRvcilcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmpGYWN0b3J5LlBIQVNFID0gSkZhY3RvcnlPYmplY3QuZGlzaW5oZXJpdChUcmFpdFNlcnZpY2UuUEhBU0UpO1xuXG5qRmFjdG9yeS5UcmFpdENvcmUgPSBUcmFpdENvcmU7XG5qRmFjdG9yeS5UcmFpdEFib3V0ID0gVHJhaXRBYm91dDtcbmpGYWN0b3J5LlRyYWl0TG9nID0gVHJhaXRMb2c7XG5qRmFjdG9yeS5UcmFpdEV2ZW50cyA9IFRyYWl0RXZlbnRzO1xuakZhY3RvcnkuVHJhaXRTdGF0ZSA9IFRyYWl0U3RhdGU7XG5qRmFjdG9yeS5UcmFpdFNlcnZpY2UgPSBUcmFpdFNlcnZpY2U7XG5qRmFjdG9yeS5UcmFpdFRhc2sgPSBUcmFpdFRhc2s7IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdENvbXBvbmVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmltcG9ydCB7IGpGYWN0b3J5IH0gZnJvbSBcIi4vakZhY3RvcnlcIjtcbmltcG9ydCB7IEpGQUNUT1JZX0RFViB9IGZyb20gXCIuL2pGYWN0b3J5LWVudlwiO1xuaW1wb3J0IHsgakZhY3RvcnlFcnJvciB9IGZyb20gXCIuL0pGYWN0b3J5RXJyb3JcIjtcbmltcG9ydCB7IEpGYWN0b3J5RXhwZWN0IH0gZnJvbSBcIi4vSkZhY3RvcnlFeHBlY3RcIjtcbmltcG9ydCB7IFRyYWl0Q29yZSwgVHJhaXRTZXJ2aWNlIH0gZnJvbSBcIi4vVHJhaXRzQ29yZVwiO1xuaW1wb3J0IHsgSkZhY3RvcnlGZXRjaCB9IGZyb20gXCIuL0pGYWN0b3J5RmV0Y2hcIjtcbmltcG9ydCB7IEpGYWN0b3J5UHJvbWlzZSB9IGZyb20gXCIuL0pGYWN0b3J5UHJvbWlzZVwiO1xuaW1wb3J0IHsgSkZhY3RvcnlPYmplY3QgfSBmcm9tIFwiLi9KRmFjdG9yeU9iamVjdFwiO1xuaW1wb3J0IHsgakZhY3RvcnlUcmFjZSB9IGZyb20gXCIuL0pGYWN0b3J5VHJhY2VcIjtcbmltcG9ydCB7IGhlbHBlcl9pc1BsYWluT2JqZWN0LCBoZWxwZXJfdXJsX2FicywgalF1ZXJ5IH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IEZldGNoXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0RmV0Y2gge1xuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuICAgICAgICBrZXJuZWwub24oXCJkaXNhYmxlXCIsICgpID0+IHRoaXMuJGZldGNoUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRmZXRjaFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJyZXF1ZXN0c1wiLCB0aGlzLiQuY3JlYXRlU3ViTWFwKCksIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEUpO1xuICAgIH1cblxuICAgICRmZXRjaChpZCwgdXJsLCBmZXRjaE9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZCA9IHRoaXMuJC5yZXF1ZXN0cy4kaWRfcmVzb2x2ZShpZCk7XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2goaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiRmZXRjaCh1cmwpXCIsIHVybCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2goZmV0Y2hPcHRpb25zKVwiLCBmZXRjaE9wdGlvbnMpLnR5cGVQbGFpbk9iamVjdCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuJC5yZXF1ZXN0cy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX0RVUExJQ0FURUQoeyB0YXJnZXQ6IFwiJGZldGNoKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcm9taXNlID0gbmV3IEpGYWN0b3J5RmV0Y2goe1xuICAgICAgICAgICAgbmFtZTogaWQsXG4gICAgICAgICAgICB0cmFjZVNvdXJjZTogakZhY3RvcnlUcmFjZS50cmFjZXIuY2FwdHVyZVRyYWNlU291cmNlKFwiJGZldGNoXCIpLFxuICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgY2hhaW5BdXRvQ29tcGxldGU6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdXJsLCBmZXRjaE9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuJC5yZXF1ZXN0cy4kcmVnaXN0ZXJBc3luYyhpZCwgJyRmZXRjaChcIicgKyBpZCArICdcIiknLCBwcm9taXNlKTtcblxuICAgICAgICBwcm9taXNlLiRjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiQucmVxdWVzdHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGZldGNoUmVtb3ZlKGlkKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICAkZmV0Y2hUZXh0KGlkLCB1cmwsIGZldGNoT3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRmZXRjaChpZCwgdXJsLCB7IC4uLmZldGNoT3B0aW9ucywgJHR5cGVUZXh0OiB0cnVlIH0pO1xuICAgIH1cblxuICAgICRmZXRjaEpTT04oaWQsIHVybCwgZmV0Y2hPcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZldGNoKGlkLCB1cmwsIHsgLi4uZmV0Y2hPcHRpb25zLCAkdHlwZUpTT046IHRydWUgfSk7XG4gICAgfVxuXG4gICAgJGZldGNoUmVtb3ZlKGlkLCByZWFzb24pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2hSZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICByZWFzb24gJiYgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2hSZW1vdmUocmVhc29uKVwiLCByZWFzb24pLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLnJlcXVlc3RzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkZmV0Y2hSZW1vdmUoaWQpXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBpZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZGVidWdnZXIsYnJhY2Utc3R5bGVcbiAgICAgICAgICAgIGlmICh0aGlzLiQucmVxdWVzdHMuZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLnJlcXVlc3RzLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQucmVxdWVzdHMuZ2V0KGlkKTtcbiAgICAgICAgdGhpcy4kLnJlcXVlc3RzLmRlbGV0ZShpZCk7XG4gICAgICAgIGVudHJ5LiRjaGFpbkFib3J0KHJlYXNvbiB8fCBcIiRmZXRjaFJlbW92ZSgpXCIpO1xuICAgIH1cblxuICAgICRmZXRjaFJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQucmVxdWVzdHM7XG4gICAgICAgIGlmIChzdWJzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgc3ViXSBvZiBzdWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yi4kcGhhc2VSZW1vdmUgPT09IHJlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGZldGNoUmVtb3ZlKGtleSwgXCIkZmV0Y2hSZW1vdmVBbGwoXCIgKyByZW1vdmVQaGFzZSArIFwiKVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBUaW1lb3V0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0VGltZW91dCB7XG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgKCkgPT4gdGhpcy4kdGltZW91dFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSkpO1xuICAgICAgICBrZXJuZWwub24oXCJ1bmluc3RhbGxcIiwgKCkgPT4gdGhpcy4kdGltZW91dFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJ0aW1lb3V0c1wiLCB0aGlzLiQuY3JlYXRlU3ViTWFwKCksIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEUpO1xuICAgIH1cblxuICAgICR0aW1lb3V0KGlkLCBkZWxheSwgaGFuZGxlciA9IG51bGwsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gaWRcbiAgICAgICAgLy8gaWQsIGRlbGF5XG4gICAgICAgIC8vIGlkLCBkZWxheSwgaGFuZGxlciwgLi4uYXJnc1xuXG4gICAgICAgIGlkID0gdGhpcy4kLnRpbWVvdXRzLiRpZF9yZXNvbHZlKGlkKTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImRlbGF5XCIsIGRlbGF5KS50eXBlTnVtYmVyKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImhhbmRsZXJcIiwgaGFuZGxlcikudHlwZShGdW5jdGlvbiwgbnVsbCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kLnRpbWVvdXRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkdGltZW91dChpZClcIiwgZ2l2ZW46IGlkIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGltZXI7XG4gICAgICAgIGxldCBwcm9taXNlID0gbmV3IEpGYWN0b3J5UHJvbWlzZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBpZCxcbiAgICAgICAgICAgICAgICB0cmFjZVNvdXJjZTogakZhY3RvcnlUcmFjZS50cmFjZXIuY2FwdHVyZVRyYWNlU291cmNlKFwiJHRpbWVvdXRcIiksXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoYWluQXV0b0NvbXBsZXRlOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJvbWlzZS4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGhhbmRsZXIgPyBoYW5kbGVyKC4uLmFyZ3MpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGRlbGF5KVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHByb21pc2UuJGNoYWluLmRhdGEudGltZXIgPSB0aW1lcjtcbiAgICAgICAgdGhpcy4kLnRpbWVvdXRzLiRyZWdpc3RlckFzeW5jKGlkLCAnJHRpbWVvdXQoXCInICsgaWQgKyAnXCIpJywgcHJvbWlzZSk7XG5cbiAgICAgICAgcHJvbWlzZS4kY2hhaW4udGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4kLnRpbWVvdXRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiR0aW1lb3V0UmVtb3ZlKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgJHRpbWVvdXRSZW1vdmUoaWQsIHJlYXNvbikge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiR0aW1lb3V0UmVtb3ZlKGlkKVwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgcmVhc29uICYmIEpGYWN0b3J5RXhwZWN0KFwiJHRpbWVvdXRSZW1vdmUocmVhc29uKVwiLCByZWFzb24pLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLnRpbWVvdXRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkdGltZW91dFJlbW92ZShpZClcIixcbiAgICAgICAgICAgICAgICAgICAgZ2l2ZW46IGlkXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1kZWJ1Z2dlcixicmFjZS1zdHlsZVxuICAgICAgICAgICAgaWYgKHRoaXMuJC50aW1lb3V0cy5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQudGltZW91dHMuZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQudGltZW91dHMuZ2V0KGlkKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGVudHJ5LiRjaGFpbi5kYXRhLnRpbWVyKTtcbiAgICAgICAgLy8gZGVsZXRpbmcgYmVmb3JlIGNoYWluQWJvcnQoKSB0byBwcmV2ZW50IHJlbW92ZSgpIHJlY2FsbFxuICAgICAgICB0aGlzLiQudGltZW91dHMuZGVsZXRlKGlkKTtcbiAgICAgICAgZW50cnkuJGNoYWluQWJvcnQocmVhc29uIHx8IFwiJHRpbWVvdXRSZW1vdmUoKVwiKTtcbiAgICB9XG5cbiAgICAkdGltZW91dFJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdWJzID0gdGhpcy4kLnRpbWVvdXRzO1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiR0aW1lb3V0UmVtb3ZlKGtleSwgXCIkdGltZW91dFJlbW92ZUFsbCgpXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IEludGVydmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0SW50ZXJ2YWwge1xuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuICAgICAgICBrZXJuZWwub24oXCJkaXNhYmxlXCIsICgpID0+IHRoaXMuJGludGVydmFsUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRpbnRlcnZhbFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJ0aW1laW50c1wiLCB0aGlzLiQuY3JlYXRlU3ViTWFwKCksIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEUpO1xuICAgIH1cblxuICAgICRpbnRlcnZhbChpZCwgZGVsYXksIGhhbmRsZXIsIC4uLmFyZ3MpIHtcbiAgICAgICAgaWQgPSB0aGlzLiQudGltZWludHMuJGlkX3Jlc29sdmUoaWQpO1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImhhbmRsZXJcIiwgaGFuZGxlcikudHlwZUZ1bmN0aW9uKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImRlbGF5XCIsIGRlbGF5KS50eXBlTnVtYmVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kLnRpbWVpbnRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkaW50ZXJ2YWwoaWQpXCIsIGdpdmVuOiBpZCB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKGhhbmRsZXIsIGRlbGF5LCAuLi5hcmdzKTtcbiAgICAgICAgdGhpcy4kLnRpbWVpbnRzLiRyZWdpc3RlclN5bmMoaWQsIHRpbWVyKVxuICAgIH1cblxuICAgICRpbnRlcnZhbFJlbW92ZShpZCkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiRpbnRlcnZhbFJlbW92ZShpZClcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLnRpbWVpbnRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkaW50ZXJ2YWxSZW1vdmUoaWQpXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBpZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZGVidWdnZXIsYnJhY2Utc3R5bGVcbiAgICAgICAgICAgIGlmICh0aGlzLiQudGltZWludHMuZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLnRpbWVpbnRzLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLiQudGltZWludHMuZ2V0KGlkKS4kdmFsdWUpO1xuICAgICAgICB0aGlzLiQudGltZWludHMuZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICRpbnRlcnZhbFJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQudGltZWludHM7XG4gICAgICAgIGlmIChzdWJzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgc3ViXSBvZiBzdWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yi4kcGhhc2VSZW1vdmUgPT09IHJlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGludGVydmFsUmVtb3ZlKGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVHJhaXQgTXV0YXRpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0TXV0YXRpb24ge1xuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuICAgICAgICBrZXJuZWwub24oXCJkaXNhYmxlXCIsICgpID0+IHRoaXMuJG11dGF0aW9uUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRtdXRhdGlvblJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJtdXRhdGlvbnNcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkbXV0YXRpb24oaWQsIHBhcmVudCwgY29uZmlnLCBoYW5kbGVyKSB7XG4gICAgICAgIGlkID0gdGhpcy4kLm11dGF0aW9ucy4kaWRfcmVzb2x2ZShpZCk7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaWRcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwicGFyZW50XCIsIHBhcmVudCkudHlwZShIVE1MRWxlbWVudCwgRG9jdW1lbnQpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJjb25maWdcIiwgY29uZmlnKS50eXBlUGxhaW5PYmplY3QoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaGFuZGxlclwiLCBoYW5kbGVyKS50eXBlRnVuY3Rpb24oKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiQubXV0YXRpb25zLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkbXV0YXRpb24oaWQpXCIsIGdpdmVuOiBpZCB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGhhbmRsZXIpO1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHBhcmVudCwgY29uZmlnKTtcbiAgICAgICAgdGhpcy4kLm11dGF0aW9ucy4kcmVnaXN0ZXJTeW5jKGlkLCBvYnNlcnZlcik7XG4gICAgfVxuXG4gICAgJG11dGF0aW9uUmVtb3ZlKGlkLCByZWFzb24pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkbXV0YXRpb25SZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICByZWFzb24gJiYgSkZhY3RvcnlFeHBlY3QoXCIkbXV0YXRpb25SZW1vdmUocmVhc29uKVwiLCByZWFzb24pLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLm11dGF0aW9ucy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX01JU1NJTkcoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiJG11dGF0aW9uUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLm11dGF0aW9ucy5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQubXV0YXRpb25zLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kLm11dGF0aW9ucy5nZXQoaWQpLiR2YWx1ZS5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMuJC5tdXRhdGlvbnMuZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICRtdXRhdGlvblJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQubXV0YXRpb25zO1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRtdXRhdGlvblJlbW92ZShrZXkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IERPTVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdERPTSB7XG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgKCkgPT4gdGhpcy4kZG9tUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRkb21SZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTCkpO1xuICAgICAgICB0aGlzLiQuYXNzaWduKFwiZG9tXCIsIHRoaXMuJC5jcmVhdGVTdWJNYXAoKSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuRU5VTUVSQUJMRSk7XG4gICAgfVxuXG4gICAgJGRvbShpZCwgalF1ZXJ5QXJndW1lbnQsIGFwcGVuZFRvKSB7XG4gICAgICAgIGlkID0gdGhpcy4kLmRvbS4kaWRfcmVzb2x2ZShpZCk7XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJpZFwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJqUXVlcnlBcmd1bWVudFwiLCBqUXVlcnlBcmd1bWVudCkudHlwZShTdHJpbmcsIE9iamVjdCk7XG4gICAgICAgICAgICBhcHBlbmRUbyAmJiBKRmFjdG9yeUV4cGVjdChcImFwcGVuZFRvXCIsIGFwcGVuZFRvKS50eXBlKFN0cmluZywgT2JqZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkb21JZDtcbiAgICAgICAgaWYgKGlkWzBdID09PSBcIiNcIikge1xuICAgICAgICAgICAgaWQgPSBpZC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICBkb21JZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYgJiYgdGhpcy4kLmRvbS5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkZG9tKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkb20gPSBqUXVlcnkoalF1ZXJ5QXJndW1lbnQpO1xuXG4gICAgICAgIGlmIChkb21bMF0udGFnTmFtZSA9PT0gXCJURU1QTEFURVwiKSB7XG4gICAgICAgICAgICBkb20gPSBqUXVlcnkoalF1ZXJ5KGRvbVswXSkuaHRtbCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb21JZCkge1xuICAgICAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgICAgIGlmIChkb21bMF0ubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIiRkb20oI2lkKVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2l2ZW46IGRvbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJjYW5ub3Qgc2V0IHRoZSBkb20gaWQ6IHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBzZWxlY3Rpb24gaXNuJ3QgYW4gRUxFTUVOVF9OT0RFXCJcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb21bMF0uaWQgPSBpZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFwcGVuZFRvKSB7XG4gICAgICAgICAgICBkb20uYXBwZW5kVG8oYXBwZW5kVG8pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy4kLmRvbS4kcmVnaXN0ZXJTeW5jKGlkLCBkb20pLiR2YWx1ZTtcbiAgICB9XG5cbiAgICAkZG9tRmV0Y2goaWQsIHVybCwgZmV0Y2hPcHRpb25zLCBhcHBlbmRUbykge1xuICAgICAgICBpZiAoZmV0Y2hPcHRpb25zICYmICFoZWxwZXJfaXNQbGFpbk9iamVjdChmZXRjaE9wdGlvbnMpKSB7XG4gICAgICAgICAgICBbZmV0Y2hPcHRpb25zLCBhcHBlbmRUb10gPSBbe30sIGZldGNoT3B0aW9uc11cbiAgICAgICAgfVxuXG4gICAgICAgIGlkID0gdGhpcy4kLmRvbS4kaWRfcmVzb2x2ZShpZCk7XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJpZFwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJ1cmxcIiwgdXJsKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBhcHBlbmRUbyAmJiBKRmFjdG9yeUV4cGVjdChcImFwcGVuZFRvXCIsIGFwcGVuZFRvKS50eXBlKFN0cmluZywgT2JqZWN0KTtcbiAgICAgICAgICAgIGZldGNoT3B0aW9ucyAmJiBKRmFjdG9yeUV4cGVjdChcImZldGNoT3B0aW9uc1wiLCBmZXRjaE9wdGlvbnMpLnR5cGUoT2JqZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkb21JZDtcbiAgICAgICAgaWYgKGlkWzBdID09PSBcIiNcIikge1xuICAgICAgICAgICAgaWQgPSBpZC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICBkb21JZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYgJiYgdGhpcy4kLmRvbS5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkZG9tRmV0Y2goaWQpXCIsIGdpdmVuOiBpZCB9KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHByb21pc2UgPSB0aGlzLiRmZXRjaFRleHQoJyRkb21GZXRjaChcIicgKyBpZCArICdcIiknLCB1cmwsIGZldGNoT3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKHIgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBkb20gPSBqUXVlcnkocik7XG4gICAgICAgICAgICAgICAgaWYgKGRvbUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbVswXS5pZCA9IGlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcHBlbmRUbykge1xuICAgICAgICAgICAgICAgICAgICBkb20uYXBwZW5kVG8oYXBwZW5kVG8pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkb21cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuJC5kb20uJHJlZ2lzdGVyQXN5bmMoaWQsICckZG9tRmV0Y2goXCInICsgaWQgKyAnXCIpJywgcHJvbWlzZSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlXG4gICAgfVxuXG4gICAgJGRvbVJlbW92ZShpZCwgcmVhc29uKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiJGRvbVJlbW92ZShpZClcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIHJlYXNvbiAmJiBKRmFjdG9yeUV4cGVjdChcIiRkb21SZW1vdmUocmVhc29uKVwiLCByZWFzb24pLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLmRvbS5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX01JU1NJTkcoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiJGRvbVJlbW92ZShpZClcIixcbiAgICAgICAgICAgICAgICAgICAgZ2l2ZW46IGlkXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1kZWJ1Z2dlcixicmFjZS1zdHlsZVxuICAgICAgICAgICAgaWYgKHRoaXMuJC5kb20uZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLmRvbS5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGVudHJ5ID0gdGhpcy4kLmRvbS5nZXQoaWQpO1xuICAgICAgICBsZXQgdmFsdWUgPSBlbnRyeS4kdmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIGpRdWVyeSkge1xuICAgICAgICAgICAgdmFsdWUucmVtb3ZlKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW50cnkgaW5zdGFuY2VvZiBKRmFjdG9yeUZldGNoKSB7XG4gICAgICAgICAgICBlbnRyeS4kY2hhaW5BYm9ydChyZWFzb24gfHwgXCIkZG9tUmVtb3ZlKClcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kLmRvbS5kZWxldGUoaWQpXG4gICAgfVxuXG4gICAgJGRvbVJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQuZG9tO1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRkb21SZW1vdmUoa2V5KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgVHJhaXQgQ1NTXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0Q1NTIHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qga2VybmVsID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbDtcbiAgICAgICAga2VybmVsLm9uKFwiZGlzYWJsZVwiLCAoKSA9PiB0aGlzLiRjc3NSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLkRJU0FCTEUpKTtcbiAgICAgICAga2VybmVsLm9uKFwidW5pbnN0YWxsXCIsICgpID0+IHRoaXMuJGNzc1JlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJjc3NcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkY3NzKGlkLCBzdHlsZUJvZHkpIHtcbiAgICAgICAgaWQgPSB0aGlzLiQuY3NzLiRpZF9yZXNvbHZlKGlkKTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImNzc1wiLCBzdHlsZUJvZHkpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjc3NJZDtcbiAgICAgICAgaWYgKGlkWzBdID09PSBcIiNcIikge1xuICAgICAgICAgICAgaWQgPSBpZC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICBjc3NJZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYgJiYgdGhpcy4kLmNzcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkY3NzKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiQuY3NzLiRyZWdpc3RlclN5bmMoaWQsXG4gICAgICAgICAgICBqUXVlcnkoXCI8c3R5bGU+XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoY3NzSWQgPyB7IGlkIH0gOiB7fSlcbiAgICAgICAgICAgICAgICAuaHRtbChzdHlsZUJvZHkpXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKFwiaGVhZFwiKVxuICAgICAgICApLiR2YWx1ZTtcbiAgICB9XG5cbiAgICAkY3NzRmV0Y2goaWQsIHVybCwgYXBwZW5kVG8gPSBcImhlYWRcIikge1xuICAgICAgICBpZCA9IHRoaXMuJC5jc3MuJGlkX3Jlc29sdmUoaWQpO1xuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaWRcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwidXJsXCIsIHVybCkudHlwZVN0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNzc0lkO1xuICAgICAgICBpZiAoaWRbMF0gPT09IFwiI1wiKSB7XG4gICAgICAgICAgICBpZCA9IGlkLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIGNzc0lkID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiB0aGlzLiQuY3NzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLktFWV9EVVBMSUNBVEVEKHsgdGFyZ2V0OiBcIiRjc3NGZXRjaChpZClcIiwgZ2l2ZW46IGlkIH0pXG4gICAgICAgIH1cblxuICAgICAgICB1cmwgPSBoZWxwZXJfdXJsX2Ficyh1cmwpO1xuXG4gICAgICAgIGxldCBleGlzdCA9IGpRdWVyeShhcHBlbmRUbykuZmluZChgbGlua1tocmVmPVwiJHt1cmx9XCJdYClbMF07XG4gICAgICAgIGlmIChleGlzdCkge1xuICAgICAgICAgICAgZXhpc3QuZGF0YXNldC51c2FnZSA9IHBhcnNlSW50KGV4aXN0LmRhdGFzZXQudXNhZ2UpICsgMTtcbiAgICAgICAgICAgIGxldCBkb20gPSBqUXVlcnkoZXhpc3QpO1xuXG4gICAgICAgICAgICBsZXQgcHJvbWlzZSA9IEpGYWN0b3J5UHJvbWlzZS5yZXNvbHZlKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzogeyBjaGFpbkF1dG9Db21wbGV0ZTogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICB0cmFjZVNvdXJjZTogakZhY3RvcnlUcmFjZS50cmFjZXIuY2FwdHVyZVRyYWNlU291cmNlKFwiJGNzc0ZldGNoXCIpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkb21cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwcm9taXNlLiRjaGFpbi5kYXRhLmRvbSA9IGRvbTtcbiAgICAgICAgICAgIHRoaXMuJC5jc3MuJHJlZ2lzdGVyQXN5bmMoaWQsICckY3NzRmV0Y2goXCInICsgaWQgKyAnXCIpJywgcHJvbWlzZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgZG9tO1xuICAgICAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgSkZhY3RvcnlQcm9taXNlKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzogeyBjaGFpbkF1dG9Db21wbGV0ZTogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICB0cmFjZVNvdXJjZTogakZhY3RvcnlUcmFjZS50cmFjZXIuY2FwdHVyZVRyYWNlU291cmNlKFwiJGNzc0ZldGNoXCIpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXNvbHZlID0+IGRvbSA9IGpRdWVyeShcIjxsaW5rPlwiLFxuICAgICAgICAgICAgICAgICAgICB7IGlkOiBjc3NJZCA/IGlkIDogXCJcIiwgcmVsOiBcInN0eWxlc2hlZXRcIiwgdHlwZTogXCJ0ZXh0L2Nzc1wiLCBcImRhdGEtdXNhZ2VcIjogXCIxXCIgfSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKGFwcGVuZFRvKVxuICAgICAgICAgICAgICAgICAgICAub24oXCJsb2FkXCIsICgpID0+IHJlc29sdmUoZG9tKSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJocmVmXCIsIHVybClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHByb21pc2UuJGNoYWluLmRhdGEuZG9tID0gZG9tO1xuICAgICAgICAgICAgdGhpcy4kLmNzcy4kcmVnaXN0ZXJBc3luYyhpZCwgJyRjc3NGZXRjaChcIicgKyBpZCArICdcIiknLCBwcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkY3NzUmVtb3ZlKGlkLCByZWFzb24pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkY3NzUmVtb3ZlKGlkKVwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgcmVhc29uICYmIEpGYWN0b3J5RXhwZWN0KFwiJGNzc1JlbW92ZShyZWFzb24pXCIsIHJlYXNvbikudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiQuY3NzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkY3NzUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLmNzcy5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQuY3NzLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQuY3NzLmdldChpZCk7XG4gICAgICAgIGxldCB2YWx1ZSA9IGVudHJ5LiRjaGFpbiAmJiBlbnRyeS4kY2hhaW4uZGF0YS5kb20gfHwgZW50cnkuJHZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBqUXVlcnkpIHtcbiAgICAgICAgICAgIGxldCB1c2FnZSA9IHBhcnNlSW50KHZhbHVlWzBdLmRhdGFzZXQudXNhZ2UpIC0gMTtcbiAgICAgICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlWzBdLmRhdGFzZXQudXNhZ2UgPSB1c2FnZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS5yZW1vdmUoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlbnRyeSBpbnN0YW5jZW9mIEpGYWN0b3J5UHJvbWlzZSkge1xuICAgICAgICAgICAgZW50cnkuJGNoYWluQWJvcnQocmVhc29uIHx8IFwiJGNzc1JlbW92ZSgpXCIpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kLmNzcy5kZWxldGUoaWQpXG4gICAgfVxuXG4gICAgJGNzc1JlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQuY3NzO1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRjc3NSZW1vdmUoa2V5KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRyYWl0TGliVnVlIHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qga2VybmVsID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbDtcbiAgICAgICAga2VybmVsLm9uKFwiZGlzYWJsZVwiLCAoKSA9PiB0aGlzLiR2dWVSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLkRJU0FCTEUpKTtcbiAgICAgICAga2VybmVsLm9uKFwidW5pbnN0YWxsXCIsICgpID0+IHRoaXMuJHZ1ZVJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJ2dWVcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkdnVlKGlkLCB2dWUpIHtcbiAgICAgICAgaWQgPSB0aGlzLiQudnVlLiRpZF9yZXNvbHZlKGlkKTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInZ1ZVwiLCB2dWUpLnR5cGUoT2JqZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYgJiYgdGhpcy4kLnZ1ZS5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkdnVlKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiQudnVlLiRyZWdpc3RlclN5bmMoaWQsIHZ1ZSkuJHZhbHVlO1xuICAgIH1cblxuICAgICR2dWVSZW1vdmUoaWQpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkdnVlUmVtb3ZlKGlkKVwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiQudnVlLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkdnVlUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLnZ1ZS5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQudnVlLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQudnVlLmdldChpZCk7XG4gICAgICAgIGpRdWVyeShlbnRyeS4kdmFsdWUuJGVsKS5yZW1vdmUoKTtcbiAgICAgICAgZW50cnkuJHZhbHVlLiRkZXN0cm95KCk7XG4gICAgICAgIHRoaXMuJC52dWUuZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICR2dWVSZW1vdmVBbGwocmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJyZW1vdmVQaGFzZVwiLCByZW1vdmVQaGFzZSlcbiAgICAgICAgICAgICAgICAuZXF1YWxJbihUcmFpdFNlcnZpY2UuUEhBU0VTKVxuICAgICAgICB9XG4gICAgICAgIGxldCBzdWJzID0gdGhpcy4kLnZ1ZTtcbiAgICAgICAgaWYgKHN1YnMuc2l6ZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBzdWJdIG9mIHN1YnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3ViLiRwaGFzZVJlbW92ZSA9PT0gcmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdnVlUmVtb3ZlKGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUcmFpdExpYlJlYWN0IHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qga2VybmVsID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbDtcbiAgICAgICAga2VybmVsLm9uKFwiZGlzYWJsZVwiLCAoKSA9PiB0aGlzLiRyZWFjdFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSkpO1xuICAgICAgICBrZXJuZWwub24oXCJ1bmluc3RhbGxcIiwgKCkgPT4gdGhpcy4kcmVhY3RSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTCkpO1xuICAgICAgICB0aGlzLiQuYXNzaWduKFwicmVhY3RcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkcmVhY3QoaWQsIGNvbnRhaW5lciwgZWxlbWVudCwgLi4ucmVuZGVyT3RoZXJBcmd1bWVudHMpIHtcbiAgICAgICAgaWQgPSB0aGlzLiQucmVhY3QuJGlkX3Jlc29sdmUoaWQpO1xuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIGlmICghakZhY3RvcnkuUmVhY3RET00pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJqRmFjdG9yeS5SZWFjdERPTT1SZWFjdERPTSBtdXN0IGJlIHNldCBiZWZvcmUgdXNpbmcgdGhlIFJlYWN0IFRyYWl0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJpZFwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJjb250YWluZXJcIiwgY29udGFpbmVyKS50eXBlKEhUTUxFbGVtZW50LCBqUXVlcnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiB0aGlzLiQucmVhY3QuaGFzKGlkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX0RVUExJQ0FURUQoeyB0YXJnZXQ6IFwiJHJlYWN0KGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRhaW5lciA9IGpRdWVyeShjb250YWluZXIpWzBdO1xuICAgICAgICBsZXQgdmlldyA9IGpGYWN0b3J5LlJlYWN0RE9NLnJlbmRlcihlbGVtZW50LCBjb250YWluZXIsIC4uLnJlbmRlck90aGVyQXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuJC5yZWFjdC4kcmVnaXN0ZXJTeW5jKGlkLCB7IGNvbnRhaW5lciwgdmlldyB9KS4kdmFsdWUudmlldztcbiAgICB9XG5cbiAgICAkcmVhY3RSZW1vdmUoaWQpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkcmVhY3RSZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuJC5yZWFjdC5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX01JU1NJTkcoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiJHJlYWN0UmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLnJlYWN0LmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQpIHtkZWJ1Z2dlcn1cbiAgICAgICAgICAgIHRoaXMuJC5yZWFjdC5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy4kLnJlYWN0LmdldChpZCkuJHZhbHVlO1xuICAgICAgICBsZXQgZWwgPSB2YWx1ZS5jb250YWluZXI7XG4gICAgICAgIGlmIChlbCkge1xuICAgICAgICAgICAgaWYgKCFqRmFjdG9yeS5SZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKGVsKSkge1xuICAgICAgICAgICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbG9nV2FybihcInVubW91bnRDb21wb25lbnRBdE5vZGUgZmFpbGVkIHRvIHVubW91bnRcIiwgZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGpRdWVyeShlbCkucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kLnJlYWN0LmRlbGV0ZShpZClcbiAgICB9XG5cbiAgICAkcmVhY3RSZW1vdmVBbGwocmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJyZW1vdmVQaGFzZVwiLCByZW1vdmVQaGFzZSlcbiAgICAgICAgICAgICAgICAuZXF1YWxJbihUcmFpdFNlcnZpY2UuUEhBU0VTKVxuICAgICAgICB9XG4gICAgICAgIGxldCBzdWJzID0gdGhpcy4kLnJlYWN0O1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWFjdFJlbW92ZShrZXkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuakZhY3RvcnkuVHJhaXRGZXRjaCA9IFRyYWl0RmV0Y2g7XG5qRmFjdG9yeS5UcmFpdFRpbWVvdXQgPSBUcmFpdFRpbWVvdXQ7XG5qRmFjdG9yeS5UcmFpdEludGVydmFsID0gVHJhaXRJbnRlcnZhbDtcbmpGYWN0b3J5LlRyYWl0TXV0YXRpb24gPSBUcmFpdE11dGF0aW9uO1xuakZhY3RvcnkuVHJhaXRET00gPSBUcmFpdERPTTtcbmpGYWN0b3J5LlRyYWl0Q1NTID0gVHJhaXRDU1M7XG5qRmFjdG9yeS5UcmFpdExpYlZ1ZSA9IFRyYWl0TGliVnVlO1xuakZhY3RvcnkuVHJhaXRMaWJSZWFjdCA9IFRyYWl0TGliUmVhY3Q7IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnkgYnVuZGxlIGluZGV4IChzZWUgcGFja2FnZS5qc29uIHNjcmlwdHMgdG8gY29tcGlsZSB0aGUgL2Rpc3QpXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFVzZWQgYnkgdGhlIGJ1aWxkIHNjcmlwdHMgdG8gY29tcGlsZSBtb2R1bGVzIHRhcmdldGluZyB0aGUgY29uZmlndXJhdGlvbiAocHJvZHVjdGlvbiwgZGV2ZWxvcG1lbnQsIGRlYnVnLi4uKVxuLy8gQWxtb3N0IGV2ZXJ5dGhpbmcgaXMgZXhwb3J0ZWQ7IFRoZSByZXN1bHRpbmcgbW9kdWxlcyBzaG91bGQgYmUgaW1wb3J0ZWQgYnkgYSBidW5kbGVyIHRoYXQgc3VwcG9ydHMgVHJlZSBTaGFja2luZy5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5pbXBvcnQgeyBqRmFjdG9yeUxvYWRlciB9IGZyb20gXCIuL2pGYWN0b3J5LWxvYWRlclwiO1xuXG5leHBvcnQgKiBmcm9tIFwiLi9qRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5cbmV4cG9ydCAqIGZyb20gXCIuL2pGYWN0b3J5LXRyYWl0c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vakZhY3RvcnktbG9hZGVyXCI7XG5cbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5QWJvdXRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5RXJyb3JcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5RXZlbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9KRmFjdG9yeUV4cGVjdFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlGZXRjaFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlGdW5jdGlvblwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlMb2dnZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5T2JqZWN0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9KRmFjdG9yeVByb21pc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5VGltZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlUcmFjZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlUcmFpdHNcIjtcblxuZXhwb3J0ICogZnJvbSBcIi4vVHJhaXRzQ29yZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vVHJhaXRzQ29tcG9uZW50c1wiO1xuXG5pZiAodHlwZW9mIGpGYWN0b3J5T3ZlcnJpZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgIWpGYWN0b3J5T3ZlcnJpZGUpIHtcbiAgICBqRmFjdG9yeUxvYWRlci5pbml0KCk7XG59Il0sIm5hbWVzIjpbIkpGQUNUT1JZX0NMSSIsInByb2Nlc3MiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJqRmFjdG9yeUNvbmZpZyIsIlRyYWl0TG9nIiwiSkZhY3RvcnlFcnJvciIsImtleXMiLCJKRmFjdG9yeVRyYWNlIiwibGliT3B0aW9ucyIsIm9mZmxpbmUiLCJCb29sZWFuIiwiZ2xvYmFsVGhpcyIsImNocm9tZSIsImZpbHRlciIsInZhbHVlIiwibGluZU51bWJlciIsImpGYWN0b3J5RGV2IiwicmVxdWlyZUNvbXBhdGliaWxpdHkiLCJ0ZXN0IiwiaW5mbyIsImZldGNoIiwiUmVxdWVzdCIsIkFib3J0Q29udHJvbGxlciwgQWJvcnRTaWduYWwiLCJBYm9ydENvbnRyb2xsZXIiLCJzaWduYWwiLCJNdXRhdGlvbk9ic2VydmVyIiwiakZhY3RvcnlMb2FkZXIiLCJzZXEiLCJbb2JqZWN0IE9iamVjdF0iLCJ0aGlzIiwibW9kdWxlIiwiakZhY3RvcnlPdmVycmlkZSIsImhhbmRsZXIiLCJwdXNoIiwib25Jbml0IiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJlbnRyeSIsIk9iamVjdCIsImVudHJpZXMiLCJwYXNzIiwiaWdub3JlIiwid2FybiIsImpRdWVyeSIsIiQiLCJoZWxwZXJfaXNOYXRpdmUiLCJfIiwiaXNOYXRpdmUiLCJoZWxwZXJfaXNTdHJpbmciLCJpc1N0cmluZyIsImhlbHBlcl9pc051bWJlciIsImlzTnVtYmVyIiwiaGVscGVyX2lzUGxhaW5PYmplY3QiLCJpc1BsYWluT2JqZWN0IiwiaGVscGVyX2RlZmF1bHRzRGVlcCIsImRlZmF1bHRzRGVlcCIsImhlbHBlcl9sb3dlckZpcnN0IiwibG93ZXJGaXJzdCIsImhlbHBlcl9nZXQiLCJnZXQiLCJoZWxwZXJfdGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsImhlbHBlcl9jYW1lbENhc2UiLCJjYW1lbENhc2UiLCJOT09QIiwiaGVscGVyX3NldEZ1bmN0aW9uTmFtZSIsImYiLCJkZWZpbmVQcm9wZXJ0eSIsImhlbHBlcl91cmxfYWJzIiwidXJsIiwiYSIsImhyZWYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJKRmFjdG9yeVRyYWNlX05PRklMVEVSIiwibGFiZWwiLCJzdGFja1RyYWNlTGltaXQiLCJJbmZpbml0eSIsIm9taXRBYm92ZUZ1bmN0aW9uTmFtZSIsIm9taXRTZWxmIiwiX3N0YWNrVHJhY2VMaW1pdCIsIkVycm9yIiwidHJhY2VTb3VyY2UiLCJzb3VyY2UiLCJ0YXJnZXRPYmplY3QiLCJjYXB0dXJlVHJhY2VTb3VyY2UiLCJ0cmFjZSIsInRvUHJpbnRhYmxlVHJhY2UiLCJ0aGVuIiwiciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsIkpGYWN0b3J5VHJhY2VfTElCX1NUQUNLVFJBQ0UiLCJjb25maWciLCJzdXBlciIsIlN0YWNrVHJhY2UiLCJmcm9tRXJyb3IiLCJ0cmFjZUZyYW1lcyIsInNsaWNlIiwiZmluZEluZGV4IiwiZnVuY3Rpb25OYW1lIiwiZW5kc1dpdGgiLCJmb3JtYXRUcmFjZUZyYW1lcyIsImhlYWRlciIsImxpbmVQcmVmaXgiLCJ3aW5kb3ciLCJtYXAiLCJzZiIsInRvU3RyaW5nIiwiam9pbiIsImpGYWN0b3J5VHJhY2UiLCJ1c2UiLCJjb25zdHJ1Y3RvciIsInRyYWNlciIsImF0dGFjaFRyYWNlIiwibWVzc2FnZSIsImRhdGEiLCJhc3NpZ24iLCJjcmVhdGUiLCJ0b1ByaW50YWJsZSIsIiRkYXRhIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmplY3QiLCJERUZBVUxUX0tFWVMiLCJmaW5kIiwia2V5IiwidmFsIiwidGVtcGxhdGVEYXRhIiwibnYiLCJ1bmRlZmluZWQiLCJnZXRJZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJsZW5ndGgiLCJKU09OX01BWCIsInN1YnN0cmluZyIsImUiLCJTdHJpbmciLCJ0ZW1wbGF0ZU1lc3NhZ2UiLCJwYXJ0Iiwic3BsaXQiLCJwbGFjZWhvbGRlciIsIlJFX1BMQUNFSE9MREVSIiwibGFzdEluZGV4IiwiZXhlYyIsInRyaW0iLCJ0b1ByaW50YWJsZURhdGEiLCJqRmFjdG9yeUVycm9yIiwiUHJveHkiLCJzZXQiLCJ0YXJnZXQiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsIkpGYWN0b3J5RXhwZWN0IiwiSU5WQUxJRF9WQUxVRSIsIklOVkFMSURfQ0FMTCIsIlBST01JU0VfRVhQSVJFRCIsIlJFUVVFU1RfRVJST1IiLCJLRVlfRFVQTElDQVRFRCIsIktFWV9NSVNTSU5HIiwiZXJyb3IiLCJyZWFzb24iLCJnaXZlbiIsInN0YXRpY01ldGhvZHMiLCJub3RVbmRlZmluZWQiLCJub3RFbXB0eVN0cmluZyIsIm5vdEZhbHN5IiwidmFsaWRTcGFjZXMiLCJyZXBsYWNlIiwibWF0Y2hSZWciLCJyZWciLCJleHBlY3RlZCIsIm9rIiwidHlwZU51bGwiLCJ0eXBlQm9vbGVhbiIsInR5cGVTdHJpbmciLCJ0eXBlTnVtYmVyIiwidHlwZUZ1bmN0aW9uIiwidHlwZVBsYWluT2JqZWN0IiwiZXF1YWxJbiIsIkFycmF5IiwiaXNBcnJheSIsInZhbHVlcyIsImluY2x1ZGVzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsIndyaXRhYmxlIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwibm90V3JpdGFibGUiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImNhbGwiLCJub3RFbnVtZXJhYmxlIiwibm90Q29uZmlndXJhYmxlIiwicmVzZXJ2ZWRQcm9wZXJ0eSIsImFyZ3MiLCJKRmFjdG9yeVRyYWl0cyIsImNhbGxlckluc3RhbmNlIiwiY2FsbGVyQ29uc3RydWN0b3IiLCJvcHRpb25zIiwidHJhaXQiLCJ0cmFpdEFyZ3MiLCJjYWNoZSIsIkNBQ0hFIiwiaGFzIiwiYWRkIiwiV2Vha1NldCIsIkpGYWN0b3J5VHJhaXQiLCJleHBvcnQiLCJ0cmFpdEluc3RhbmNlIiwidHJhaXRfY29uc3RydWN0b3IiLCJhcHBseSIsImlzU3RhdGljIiwic291cmNlRGVzY3JpcHRvciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJwcm9wZXJ0eU5hbWUiLCJwcmVmaXgiLCJnZXRQcmVmaXgiLCJnZXRUYXJnZXQiLCJwcm9wZXJ0eURlc2NyaXB0b3IiLCJwYXJzZWQiLCJwYXJzZXIiLCJkZWZhdWx0UGFyc2VyIiwiRVhDTFVERVMiLCJXZWFrTWFwIiwiSkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyIiwiaGFuZGxlcnMiLCJoYW5kbGVyR3JvdXBzIiwiaGFuZGxlckdyb3VwIiwiYXJndW1lbnRzIiwidW5zaGlmdCIsImNvbXBvc2VyIiwiY29tcG9zaXRlIiwiY29udGV4dCIsImNhbmNlbGVkIiwicGFyYW1ldGVycyIsImZyb20iLCJyZXN1bHQiLCJpdGVyYXRpb24iLCJuZXh0IiwiY29tcG9zaXRlX2l0ZXJhdG9yIiwic2NvcGUiLCJkb25lIiwiSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZSIsIm9yaWdpbmFsSGFuZGxlciIsImV4cGlyZWRDYWxscyIsImV4cGlyZWQiLCJpc0V4cGlyZWQiLCJjb21wb3NlIiwiZXhwaXJhYmxlIiwic2V0RXhwaXJlZCIsImFkZEV4cGlyZUNvbmRpdGlvbiIsImNvbmRpdGlvbiIsImxhc3QiLCJ0eXBlIiwiYmluZCIsIm9uRXhwaXJlZCIsIm9uTm90RXhwaXJlZCIsIk1heFdhcm5pbmdFeHBpcmF0aW9uIiwiakZhY3RvcnlGdW5jdGlvbkNvbmRpdGlvbmFsIiwiSkZhY3RvcnlGdW5jdGlvbkNvbmRpdGlvbmFsIiwiZmlyc3QiLCJjb25kaXRpb25hbCIsImFkZENvbmRpdGlvbiIsImhhbmRsZSIsImpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUiLCJKRmFjdG9yeUZ1bmN0aW9uV3JhcHBhYmxlIiwid3JhcHBhYmxlIiwiYmVmb3JlQWxsIiwianVzdEJlZm9yZSIsImp1c3RBZnRlciIsImFmdGVyQWxsIiwiakZhY3RvcnlUcmFpdHMiLCJzdGF0ZXMiLCJlbmFibGVkIiwic2VydmljZSIsInBoYXNlIiwib3duZXIiLCIkbG9nRXJyIiwiSkZhY3RvcnlDb3JlT2JqZWN0IiwiaW5qZWN0IiwiakZhY3RvcnkiLCJUcmFpdENvcmUiLCJUcmFpdEFib3V0IiwiVHJhaXRFdmVudHMiLCJUcmFpdFN0YXRlIiwiVHJhaXRTZXJ2aWNlIiwiVHJhaXRUYXNrIiwiSkZhY3RvcnlDb21wb25lbnQiLCJUcmFpdEZldGNoIiwiVHJhaXRET00iLCJUcmFpdENTUyIsIlRyYWl0TXV0YXRpb24iLCJUcmFpdFRpbWVvdXQiLCJUcmFpdEludGVydmFsIiwiVHJhaXRMaWJWdWUiLCJUcmFpdExpYlJlYWN0IiwicHJvcGVydGllcyIsIkpGYWN0b3J5T2JqZWN0IiwiZGVzY3JpcHRvclByb3RvdHlwZSIsIkRFU0NSSVBUT1JTX1BST1RPVFlQRSIsIm8iLCJOT05FIiwiV1JJVEFCTEUiLCJFTlVNRVJBQkxFIiwiQ09ORklHVVJBQkxFIiwiQ09ORklHVVJBQkxFX1dSSVRBQkxFIiwiV1JJVEFCTEVfQ09ORklHVVJBQkxFIiwiQ09ORklHVVJBQkxFX0VOVU1FUkFCTEUiLCJFTlVNRVJBQkxFX0NPTkZJR1VSQUJMRSIsIkVOVU1FUkFCTEVfV1JJVEFCTEUiLCJXUklUQUJMRV9FTlVNRVJBQkxFIiwiV1JJVEFCTEVfRU5VTUVSQUJMRV9DT05GSUdVUkFCTEUiLCJXUklUQUJMRV9DT05GSUdVUkFCTEVfRU5VTUVSQUJMRSIsIkVOVU1FUkFCTEVfQ09ORklHVVJBQkxFX1dSSVRBQkxFIiwiRU5VTUVSQUJMRV9XUklUQUJMRV9DT05GSUdVUkFCTEUiLCJDT05GSUdVUkFCTEVfV1JJVEFCTEVfRU5VTUVSQUJMRSIsIkNPTkZJR1VSQUJMRV9FTlVNRVJBQkxFX1dSSVRBQkxFIiwiUkVBRE9OTFkiLCJkZXNjcmlwdG9yIiwiZGVzY3JpcHRvcnMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZmxhdCIsImRpc2luaGVyaXQiLCJjcmVhdGVEZXNjcmlwdG9ycyIsIm1vZHVsZUdlbklkIiwidWlkIiwiSkZhY3RvcnlBYm91dCIsImFib3V0IiwiZmluZ2VycHJpbnQiLCJ0b0xvd2VyQ2FzZSIsIkpGYWN0b3J5UHJvbWlzZSIsImV4ZWN1dG9yIiwiY2hhaW5JZCIsInJlamVjdCIsIkRFRkFVTFRfQ09ORklHIiwiTnVtYmVyIiwiX3Jlc29sdmUiLCJfcmVqZWN0IiwiY2hhaW4iLCJKRmFjdG9yeVByb21pc2VDaGFpbiIsIiRjaGFpbiIsIiR0eXBlIiwiJHZhbHVlIiwiJGlzU2V0dGxlZCIsIiRpc1JlamVjdGVkIiwiJGlzRnVsZmlsbGVkIiwiJGlzRXhwaXJlZCIsIiRpc0Fib3J0ZWQiLCIkZGV2X25hbWUiLCIkZGV2X3BhdGgiLCJKRmFjdG9yeVByb21pc2VQYXRoIiwiJGRldl9wb3NpdGlvbiIsIiRkZXZfc291cmNlIiwidHJ5QXV0b0NvbXBsZXRlIiwiaXNQZW5kaW5nIiwiJGNoYWluQ29tcGxldGUiLCJvblJlc29sdmUiLCJvblJlamVjdCIsIlR5cGVFcnJvciIsIngiLCJjYWxsZWQiLCJyZXNvbHZlUHJvbWlzZSIsInkiLCJyZWplY3RQcm9taXNlIiwiZXJyb3JFeHBpcmVkIiwib25TZXR0bGUiLCJjaGFpbk1hcCIsImNoYWluQ29uZmlnIiwiY2hhaW5BdXRvQ29tcGxldGUiLCJzaXplIiwiX2NoYWluQXV0b0NvbXBsZXRlIiwiX19yZXNvbHZlX18iLCJfX3JlamVjdF9fIiwib25GdWxmaWxsZWQiLCJvblJlamVjdGVkIiwiZm9yY2VUeXBlIiwid3JhcHBlZEZ1bGZpbGxlZCIsIndyYXBwZWRSZWplY3RlZCIsIm5ld1Byb21pc2UiLCJzdGFydHNXaXRoIiwiZk5hbWVzIiwiY2hhaW5OYW1lIiwiJGRldl9vbkZ1bGZpbGxlZCIsIiRkZXZfb25SZWplY3RlZCIsImNoYWluUm9vdCIsIm9wdGlvbmFsQXJncyIsImNvbXBsZXRlIiwicHJvbWlzZSIsImFib3J0Iiwic2lsZW50IiwiTWFwIiwiaXNDb21wbGV0ZWQiLCJfX2RlZmVycmVkX18iLCJEZWZlcnJlZCIsIml0ZW0iLCJpIiwicHJpbnRhYmxlIiwidiIsIkpGYWN0b3J5UHJvbWlzZVN5bmMiLCJKRmFjdG9yeUV2ZW50cyIsInJlZ2lzdHJ5Iiwib25MaXN0ZW5lclVwZGF0ZSIsIm9uT2JzZXJ2ZXJVcGRhdGUiLCJldmVudHMiLCJzZWxlY3RvciIsInZhbGlkYXRlU2VsZWN0b3IiLCJIVE1MRWxlbWVudCIsIndyYXBwZWRIYW5kbGVyIiwib24iLCJzdGFjayIsIm9mZiIsInBlbmRpbmciLCJldmVudCIsInRyaWdnZXIiLCJ0cmlnZ2VySGFuZGxlciIsImFsbCIsImFzeW5jIiwiSkZhY3RvcnlFdmVudHNNYW5hZ2VyIiwicGFyZW50IiwiYWZmaWxpYXRlUnVsZXMiLCJhZmZpbGlhdGVBZGRSdWxlIiwicnVsZV9uYW1lc3BhY2UiLCJuYW1lc3BhY2VzIiwiSkZhY3RvcnlFdmVudFNlbGVjdG9yUGFyc2VyIiwicGFyc2VkRXZlbnQiLCJuYW1lc3BhY2UiLCJhZGROYW1lc3BhY2UiLCJhZmZpbGlhdGUiLCJhcmdMIiwianF1ZXJ5IiwidHJpZ2dlclNlcmllcyIsInRyaWdnZXJQYXJhbGxlbCIsImVsbSIsIl9kYXRhIiwidHlwZXMiLCJKRmFjdG9yeUV2ZW50U2VsZWN0b3IiLCJoYXNOYW1lc3BhY2UiLCJfZXZlbnRzIiwiZXhwYW5kbyIsImsiLCJpbmRleE9mIiwiZXZlbnRUeXBlRW50cnkiLCJzZWxlY3RvcnMiLCJzIiwiU2V0IiwiZGVsZXRlIiwibnMiLCJzaGlmdCIsInZhbGlkYXRlRXZlbnQiLCJ2YWxpZGF0ZU5hbWVzcGFjZSIsIkpGYWN0b3J5RmV0Y2giLCJmZXRjaE9wdGlvbnMiLCJmZXRjaFJlcXVlc3QiLCJyZXNwb25zZSIsImZldGNoUmVzcG9uc2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiJHR5cGVUZXh0IiwidGV4dCIsInJlc3BvbnNlVGV4dCIsIiR0eXBlSlNPTiIsImpzb24iLCJyZXNwb25zZUpTT04iLCJjYXRjaCIsImFib3J0Q3RybCIsImFib3J0Q29udHJvbGxlciIsImZldGNoQWJvcnRDb250cm9sbGVyIiwiJGNoYWluQWJvcnQiLCJTWU1CT0xfRU5BQkxFRCIsIkpGYWN0b3J5TG9nZ2VyIiwiREVGQVVMVF9DT05ESVRJT04iLCJpbnN0YWxsQWNjZXNzb3IiLCJwYXJlbnRMb2dnZXIiLCJlbmFibGUiLCJkaXNhYmxlIiwibmF0aXZlTmFtZSIsImZpbHRlcnMiLCJ0YXJnZXROYW1lIiwiYWNjZXNzb3IiLCJmb3JtYXR0ZXIiLCJzdWIiLCJzdHlsZXNfY3NzIiwic3R5bGVzX2NsaSIsIkZPUk1BVFRFUl9OQVRJVkUiLCJsb2dnZXIiLCJGT1JNQVRURVJfQ0xJIiwiRk9STUFUVEVSX0JST1dTRVIiLCJlcXVhbCIsIkpGYWN0b3J5VGltZSIsIkRhdGUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJnZXRVVENNaWxsaXNlY29uZHMiLCJ2YWx1ZU9mIiwiaG91cnMiLCJnZXRVVENIb3VycyIsIm1pbnV0ZXMiLCJnZXRVVENNaW51dGVzIiwic2Vjb25kcyIsImdldFVUQ1NlY29uZHMiLCJtaWxsaXNlY29uZHMiLCJKRmFjdG9yeVRpbWVUcmFjZSIsImVsYXBzZWQiLCJ0MSIsInQwIiwiJHRvRHVyYXRpb25TdHJpbmciLCJTdWJNYXAiLCIkcGhhc2VSZW1vdmUiLCJnZXRDb250ZXh0dWFsUmVtb3ZlUGhhc2UiLCJ0YXNrTmFtZSIsInRhc2siLCIkdGFzayIsIiRjaGFpbkF1dG9Db21wbGV0ZSIsInN0ciIsImlkIiwiaWRfYXV0b2luYyIsInByb3RvIiwiU1lNQk9MX1BSSVZBVEUiLCJjcmVhdGVTdWJNYXAiLCJ0YXNrcyIsInJlcXVlc3RzIiwiZXhlY3V0b3JPclZhbHVlIiwiJGlkX3Jlc29sdmUiLCJtZXRyaWNzIiwiJHRhc2tNZXRyaWNzIiwiJGRldl90aW1pbmciLCJlbmQiLCIkdGFza1JlbW92ZSIsIl9jYWxsZWQiLCJyZW1vdmVQaGFzZSIsIlBIQVNFUyIsImF1dG9Db21wbGV0ZSIsImFzc2lnblByaXZhdGUiLCJjdXN0b20iLCJrZXJuZWwiLCJldmVudE1hbmFnZXIiLCJsaXN0ZW5lcnMiLCJnZXREb21MaXN0ZW5lcnMiLCJvYnNlcnZlcnMiLCJnZXRPYnNlcnZlcnMiLCIkdHJpZ2dlciIsInN0YXRlUm91dGVzIiwiJHN0YXRlIiwiaCIsImJlZm9yZSIsIiRub3RpZnkiLCJhZnRlciIsIm5vdGlmeSIsInByZXZpb3VzVmFsIiwiUEhBU0UiLCJwaGFzZVF1ZXVlIiwicGhhc2VUYXNrIiwicGhhc2VNYXAiLCJpbnN0YWxsIiwidW5pbnN0YWxsIiwiYXNzaWduUHJpdmF0ZU1lbWJlciIsImluc3RhbGxlZCIsInNldEV2ZW50TmFtZXNwYWNlUmVtb3ZlUGhhc2UiLCJwaGFzZVJlc29sdmUiLCIkdGFza1JlbW92ZUFsbCIsIiR0YXNrUHJvbWlzZUFsbCIsIm9uSW5zdGFsbCIsIm9uRW5hYmxlIiwib25EaXNhYmxlIiwib25Vbmluc3RhbGwiLCIkb2ZmIiwicmVtb3ZhbCIsIkRJU0FCTEUiLCJVTklOU1RBTEwiLCJwIiwiSU5TVEFMTCIsIiRlbmFibGUiLCJFTkFCTEUiLCJwaGFzZUtpbGwiLCIkZGlzYWJsZSIsImNvbXBvbmVudCIsImpGYWN0b3J5Q29yZU9iamVjdCIsIlBIQVNFX1JFVkVSVCIsImN1clJlbW92ZVBoYXNlIiwibmV3UmVtb3ZlUGhhc2UiLCJkZWxldGVOYW1lc3BhY2UiLCIkZmV0Y2hSZW1vdmVBbGwiLCIkcmVnaXN0ZXJBc3luYyIsIiRmZXRjaFJlbW92ZSIsIiRmZXRjaCIsIl9kZWJ1Z19yZW1vdmVfY2FsbGVkIiwic3VicyIsIiR0aW1lb3V0UmVtb3ZlQWxsIiwiZGVsYXkiLCJ0aW1lb3V0cyIsIkZ1bmN0aW9uIiwidGltZXIiLCJzZXRUaW1lb3V0IiwiJHRpbWVvdXRSZW1vdmUiLCJjbGVhclRpbWVvdXQiLCIkaW50ZXJ2YWxSZW1vdmVBbGwiLCJ0aW1laW50cyIsInNldEludGVydmFsIiwiJHJlZ2lzdGVyU3luYyIsImNsZWFySW50ZXJ2YWwiLCIkaW50ZXJ2YWxSZW1vdmUiLCIkbXV0YXRpb25SZW1vdmVBbGwiLCJtdXRhdGlvbnMiLCJEb2N1bWVudCIsIm9ic2VydmVyIiwib2JzZXJ2ZSIsImRpc2Nvbm5lY3QiLCIkbXV0YXRpb25SZW1vdmUiLCIkZG9tUmVtb3ZlQWxsIiwialF1ZXJ5QXJndW1lbnQiLCJhcHBlbmRUbyIsImRvbUlkIiwiZG9tIiwidGFnTmFtZSIsImh0bWwiLCJub2RlVHlwZSIsIk5vZGUiLCJFTEVNRU5UX05PREUiLCIkZmV0Y2hUZXh0IiwicmVtb3ZlIiwiJGRvbVJlbW92ZSIsIiRjc3NSZW1vdmVBbGwiLCJzdHlsZUJvZHkiLCJjc3NJZCIsImNzcyIsImF0dHIiLCJleGlzdCIsImRhdGFzZXQiLCJ1c2FnZSIsInBhcnNlSW50IiwicmVsIiwiZGF0YS11c2FnZSIsIiRjc3NSZW1vdmUiLCIkdnVlUmVtb3ZlQWxsIiwidnVlIiwiJGVsIiwiJGRlc3Ryb3kiLCIkdnVlUmVtb3ZlIiwiJHJlYWN0UmVtb3ZlQWxsIiwiY29udGFpbmVyIiwiZWxlbWVudCIsInJlbmRlck90aGVyQXJndW1lbnRzIiwicmVhY3QiLCJSZWFjdERPTSIsInZpZXciLCJyZW5kZXIiLCJlbCIsInVubW91bnRDb21wb25lbnRBdE5vZGUiLCIkbG9nV2FybiIsIiRyZWFjdFJlbW92ZSIsImluaXQiXSwibWFwcGluZ3MiOiI7Ozs7O0FBVVksTUFFQ0EsRUFDVSxvQkFBWkMsU0FBMkJBLFFBQVFDLFVBQVlELFFBQVFDLFNBQVNDLEtBRzlEQyxFQUFpQixDQUMxQkMsVUFBMkJMLEdBTitDLE1BTzFFTSxjQUFlLENBQ1hDLEtBQU0sQ0FBQyxlQUFnQixZQUFhLFFBQVMsT0FBUSxPQUV6REMsZUFBZ0NSLEdBQ3pCLENB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
