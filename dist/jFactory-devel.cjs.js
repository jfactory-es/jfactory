"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash"),t=require("jquery");
/*!
 * jFactory, Copyright (c) 2019, StÃ©phane Plazis
 * https://github.com/jfactory-es/jfactory/blob/master/LICENSE.txt
 */
const s="undefined"!=typeof process&&process.versions&&process.versions.node,r={TraitLog:!s||!1,JFactoryError:{keys:["$.about.name","$dev_name","$name","name","id"]},JFactoryTrace:!s&&{keys:["$dev_traceLog","$dev_traceSource"],libOptions:{offline:Boolean(globalThis.chrome),filter:function(e){return e.lineNumber}}},jFactoryDev:{requireCompatibility:{globalThis:{test:()=>globalThis,info:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/globalThis"},fetch:{test:()=>fetch,info:"https://developer.mozilla.org/docs/Web/API/Fetch_API/Using_Fetch"},Request:{test:()=>Request,info:"https://developer.mozilla.org/docs/Web/API/Request"},"AbortController, AbortSignal":{test:()=>(new AbortController).signal,info:"https://developer.mozilla.org/docs/Web/API/AbortController, https://developer.mozilla.org/docs/Web/API/AbortSignal"},MutationObserver:{test:()=>MutationObserver,info:"https://developer.mozilla.org/docs/Web/API/MutationObserver"}}}},i={seq:[],init(){if(this.seq){let e=this.seq;delete this.seq;for(let t of e)t();delete globalThis.jFactoryOverride}},onInit(e){this.seq.push(e)}};function a(){console.log("jFactory is running in development mode.\nPerformances will be affected.");for(let[e,t]of Object.entries(r.jFactoryDev.requireCompatibility)){let s;try{s=Boolean(t.test())}catch(e){}s||console.warn(`jFactory may require the support of "${e}", ${t.info}`)}}function n(){!r.TraitLog&&console.warn("jFactory: LOGS REMOVED")}i.onInit(a),i.onInit(n);const o=t,l=e.isNative,c=e.isString,h=e.isNumber,u=e.isPlainObject,p=e.defaultsDeep,d=e.lowerFirst,m=e.get,f=e.template,$=e.camelCase,g=()=>{},v=(e,t)=>Object.defineProperty(t,"name",{value:e});class b{constructor({label:e,stackTraceLimit:t,keys:s,libOptions:r}={}){this.label=e||"The stack has been printed in the console",this.stackTraceLimit=t||1/0,this.keys=s||["stackLog","stackSource"],this.libOptions=r||{}}captureTraceSource(e,t){let s;this.stackTraceLimit&&(s=Error.stackTraceLimit,Error.stackTraceLimit=this.stackTraceLimit),e||(e="captureTraceSource",t=!0);let r={source:new Error,omitAboveFunctionName:e,omitSelf:t};return this.stackTraceLimit&&(Error.stackTraceLimit=s),r}attachTrace(e,t){"object"!=typeof t&&(t=this.captureTraceSource(t||"attachTrace",!t));let s=t.source;this.toPrintableTrace(t).then(e=>s=e);let r=()=>console.log(s)||this.label;Object.defineProperty(e,this.keys[0],{enumerable:!1,configurable:!0,get:()=>r()}),Object.defineProperty(e,this.keys[1],{enumerable:!1,configurable:!0,get:()=>t})}toPrintableTrace(e){return Promise.resolve(e.source)}}class E extends b{constructor(e){super(e)}toPrintableTrace(e){return StackTrace.fromError(e.source,this.libOptions).then(t=>{if(e.omitAboveFunctionName){let s=t.findIndex(t=>t.functionName&&t.functionName.endsWith(e.omitAboveFunctionName));s>0&&(e.omitSelf&&s++,t=t.slice(s))}return t=t.filter(this.libOptions.filter),this.formatTraceFrames(t)})}formatTraceFrames(e){let t,s;return this.libOptions.offline&&window.chrome?(t="Error\n",s="\tat "):(t="",s=""),t+e.map(e=>s+e.toString()).join("\n")}}const y={};i.onInit((function(){let e=r.JFactoryTrace;if(e&&!1!==e.use){let t;t="function"==typeof e.use?e.use:"object"==typeof StackTrace?E:b,t===E&&console.warn("jFactory: Stack trace enabled; Performance will be affected"),y.tracer=new t(e)}else y.tracer={captureTraceSource:g,attachTrace:g}}));class A extends Error{constructor(e="unspecified error",t=null){t=Object.assign(Object.create(null),t),super(e=A.toPrintable(e,t)),this.$data=Object.assign(Object.create(null),t)}toString(){return this.message}*[Symbol.iterator](){yield this.message,yield this.$data}static getId(e){return e[(r.JFactoryError.keys||A.DEFAULT_KEYS).find(t=>{let s=m(e,t);return s||0===s})]}static toPrintableData(e){const t={};let s;for(let[r,i]of Object.entries(e)){switch(typeof i){case"function":i=i.name+"()";break;case"object":if(null===i){i="null";break}if(i instanceof Error){i=i.toString();break}if(void 0!==(s=A.getId(i)))i='"'+s+'"';else if(l(i.toString))try{s=JSON.stringify(i),i=s.length>A.JSON_MAX?s.substring(0,A.JSON_MAX)+"[...]":s}catch(e){i="[object "+i.constructor.name+"]"}else i=i.toString();break;case"string":i='"'+i+'"';break;default:i=String(i)}t[r]=i}return t}static toPrintable(e,t){const s=[];for(let r of e.split(";")){let e,i=A.RE_PLACEHOLDER;if(i.lastIndex=0,e=i.exec(r)){do{if(e[1]&&e[1]in t){s.push(r.trim());break}}while(null!==(e=i.exec(r)))}else s.push(r.trim())}return d(f(s.join("; "))(A.toPrintableData(t)))}}A.JSON_MAX=40,A.DEFAULT_KEYS=["name","id"],A.RE_PLACEHOLDER=/\${([^}]+)}/g;let S=new Proxy(A,{set:function(e,t,s){let{template:r}=s;if(e[t])throw new Error("already declared");return e[t]=class extends A{constructor(e,t){super(r,e),y.tracer.attachTrace(this.$data,t)}},e[t].prototype.name="Error jFactoryError."+t,!0}});function R(e,t){if(!new.target)return new R(e,t);this.label=e,this.value=t}S.INVALID_VALUE={template:"invalid value for ${target}; Reason: ${reason}; Given: ${given}"},S.INVALID_CALL={template:"invalid call ${target}; Reason: ${reason}; Owner: ${owner}"},S.PROMISE_EXPIRED={template:"expired promise ${target}; Reason: ${reason}"},S.REQUEST_ERROR={template:"error requesting ${target}; Reason: ${reason}; Owner: ${owner}"},S.KEY_DUPLICATED={template:"duplicated key for ${target}; Given: ${given}"},S.KEY_MISSING={template:"missing key for ${target}; Given: ${given}"};const _=function(e,t,s){throw new S.INVALID_VALUE({target:e,reason:s,given:t})},L={notUndefined:(e,t)=>(void 0===t&&_(e,t,"cannot be undefined"),!0),notEmptyString:(e,t)=>(""===t&&_(e,t,"cannot be empty string"),!0),notFalsy:(e,t)=>(t||_(e,t,'cannot be a falsy value (undefined, null, NaN, 0, "")'),!0),validSpaces:(e,t)=>(t.replace&&t.replace(/\s+/g," ").trim()===t||_(e,t,"invalid space delimiters"),!0),matchReg:(e,t,s)=>(s.test(t)||_(e,t,'string "'+t+'" must match '+s),!0),type(e,t,...s){let r,i=!1;for(let a of s){null===a?r="Null":"name"in a&&(r=a.name);let s=L["type"+r];if(s)try{i=s(e,t)}catch(e){}else i=t instanceof a;if(i)break}return i||_(e,t,"must be an instance of ["+s.map(e=>e.name).join(", ")+"]"),!0},typeNull:(e,t)=>(null!==t&&_(e,t,"must be null"),!0),typeBoolean:(e,t)=>(!0!==t&&!1!==t&&_(e,t,"must be a boolean"),!0),typeString:(e,t)=>(c(t)||_(e,t,"must be a string"),!0),typeNumber:(e,t)=>(h(t)||_(e,t,"must be a number"),!0),typeFunction:(e,t)=>("function"!=typeof t&&_(e,t,"must be a function"),!0),typePlainObject:(e,t)=>(u(t)||_(e,t,"must be a plain object"),!0),equal(e,t,...s){let r=!1;for(let e of s)if(r=t===e)break;return r||_(e,t,"must be one of ["+s+"]"),!0},equalIn:(e,t,s)=>(Array.isArray(s)||(s=Object.values(s)),s.includes(t)||_(e,t,"must be one from ["+s.join(", ")+"]"),!0),properties(e,t,s){for(let r of Object.getOwnPropertyNames(t))R(e+', property name "'+r+'"',r).equalIn(s);return!0},writable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).writable||_(e,t,"must be writable"),!0),notWritable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).writable&&_(e,t,"must not be writable"),!0),enumerable:(e,t,s)=>(Object.prototype.propertyIsEnumerable.call(t,s)||_(e,t,"must be enumerable"),!0),notEnumerable:(e,t,s)=>(Object.prototype.propertyIsEnumerable.call(t,s)&&_(e,t,"must not be enumerable"),!0),configurable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).configurable||_(e,t,"must be configurable"),!0),notConfigurable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).configurable&&_(e,t,"must not be configurable"),!0),reservedProperty:(e,t,s)=>(s in t&&_(e,t,"is a reserved property"),!0)};i.onInit((function(){Object.assign(R,L);for(const e of Object.getOwnPropertyNames(L))R.prototype[e]=function(...t){return R[e](this.label,this.value,...t),this}}));class T{constructor(e,t,s={}){this.callerInstance=e,this.callerConstructor=t,this.options=s}use(e,...t){R("JFactoryTraits(trait)",e).typeFunction();let{callerInstance:s,callerConstructor:i}=this,a=T.CACHE.get(s);if(a){if(a.has(e))return r.TraitLog&&console.warn(`${e.name} already called on`,s),this;a.add(e)}else T.CACHE.set(s,new WeakSet([e]));!i.JFactoryTrait&&(i.JFactoryTrait=new WeakSet),i.JFactoryTrait.has(e)||(i.JFactoryTrait.add(e),this.export(e.prototype,i.prototype),this.export(e,i,!0));let n=new e(s,...t);return n.trait_constructor&&n.trait_constructor.apply(s,t),this}export(e,t,s){let r=Object.getOwnPropertyDescriptors(e);for(let i of Object.keys(r)){let a=T.getPrefix(i);if(T.getTarget(i,t,a)){let a=r[i],n=(this.options.parser||T.defaultParser)(i,a,e,t,s);n&&(({propertyName:i,propertyDescriptor:a}=n),Object.defineProperty(t,i,a))}}}static defaultParser(e,t,s,i,a){let n=t.value;return a?null:e in i?(r.TraitLog&&console.warn(`${i.constructor.name}> skipping export of existing property "${e}"`,n),null):"object"==typeof n?(r.TraitLog&&console.warn(`${i.constructor.name}> skipping export of shared object "${e}"`,n),null):{propertyName:e,propertyDescriptor:t}}static getPrefix(e){let t=e.split("_");return t.length>1?t[0]:null}static getTarget(e,t,s){return T.EXCLUDES.includes(e)||"trait"===s?null:t}}T.CACHE=new WeakMap,T.EXCLUDES=["constructor","prototype","length","size"];class P{constructor(){this.handlers=Object.create(null)}*[Symbol.iterator](e=[]){e.length||(e=Object.keys(this.handlers)),e.length||(e=["default"]);for(let t of e)t in this.handlers&&(yield*this.handlers[t])}first(e,t){return 1===arguments.length&&([e,t]=["default",e]),(this.handlers[e]||(this.handlers[e]=[])).unshift(t),this}last(e,t){return 1===arguments.length&&([e,t]=["default",e]),(this.handlers[e]||(this.handlers[e]=[])).push(t),this}compose(...e){let t=this,s=function(){let s={canceled:!1,parameters:Array.from(arguments),result:void 0},r=t[Symbol.iterator](e),i=r.next();return P.composite_iterator(this,s,i,r)};return s.composer=t,s}static composite_iterator(e,t,s,r){let i,a;for(;!t.canceled&&!s.done;)if(i=s.value,a=e?i.call(e,t,...t.parameters):i(t,...t.parameters),s=r.next(),a instanceof Promise){if(!s.done||a.constructor===Promise)return a.then(v([i.name,"compositeAsyncHandler"].filter(Boolean).join(" "),(function(i){return t.result=i,P.composite_iterator(e,t,s,r)})));t.result=a}else t.result=a;return t.result}}class O{constructor(e){this.originalHandler=e,this.expiredCalls=0,this.composer=new P;let t,s=this.composer.compose("conditions"),r=this;this.isExpired=e=>t||s.call(e)||!1,this.setExpired=e=>t=e?e instanceof Error?e:new S.INVALID_CALL({target:this.originalHandler,reason:"manually expired"}):Boolean(this.expiredCalls=0),this.addExpireCondition=function(e){this.composer.last("conditions",(function(t){let s=function(s){return R("JFactoryFunctionExpirable.addExpireCondition(), result",s).type(Boolean,Error),r.setExpired(!!s&&((t.canceled=!0)&&(s instanceof Error?s:new S.INVALID_CALL({target:r.originalHandler,reason:"conditionally expired",condition:e}))))},i=e.apply(this,t.parameters);return i instanceof Promise?i.then(s):s(i)}))}}compose(){let e=this,t=function(){let t=e.isExpired(this),s=e.constructor.call.bind(void 0,e,this,arguments);return t instanceof Promise?t.then(s):s(t)};return Object.assign(t,{expirable:this,isExpired:e=>this.isExpired(e),setExpired:e=>this.setExpired(e),addExpireCondition:e=>(this.addExpireCondition(e),t)})}static call(e,t,s,r){return r?e.onExpired(r):e.onNotExpired(t,s)}onExpired(e){return this.expiredCalls<O.MaxWarningExpiration&&(this.expiredCalls++,r.TraitLog&&console.warn(...new S.INVALID_CALL({...e.$data,reason:e.$data.reason+"; expiredCalls="+this.expiredCalls+(this.expiredCalls===O.MaxWarningExpiration?"; Max Warning Exceeded":"")}))),e}onNotExpired(e,t){return this.originalHandler.apply(e,t)}}function w(e){return new I(e).compose()}O.MaxWarningExpiration=10;class I{constructor(e){this.originalHandler=e,this.composer=new P,this.composer.first("original",v([e.name,"condition"].filter(Boolean).join(" "),(function(t){return e.apply(this,t.parameters)})))}compose(){let e=this.composer.compose("conditions","original");return Object.assign(e,{conditional:this,addCondition:t=>(this.addCondition(t),e)})}addCondition(e){this.composer.last("conditions",(function(t){let s=function(e){R("JFactoryFunctionConditional.addCondition(), result",e).typeBoolean(),!e&&(t.canceled=!0)},r=e.apply(this,t.parameters);return r instanceof Promise?r.then(s):s(r)}))}}function N(e){return new j(e).compose()}class j{constructor(e){this.originalHandler=e,this.composer=new P,this.composer.first("original",v([e.name,"wrapped"].filter(Boolean).join(" "),(function(t){return e.apply(this,t.parameters)})))}compose(){let e=this.composer.compose("before","original","after");return Object.assign(e,{wrappable:this,beforeAll:t=>(this.beforeAll(t),e),justBefore:t=>(this.justBefore(t),e),justAfter:t=>(this.justAfter(t),e),afterAll:t=>(this.afterAll(t),e)})}beforeAll(e){this.composer.first("before",e)}justBefore(e){this.composer.last("before",e)}justAfter(e){this.composer.first("after",e)}afterAll(e){this.composer.last("after",e)}}function F(e,t){return new T(e,t,{parser(e,t){let s=T.defaultParser(...arguments);if(s){({propertyName:e,propertyDescriptor:t}=s);let r=t.value;if("function"==typeof r)switch(r.name){case"$install":case"$uninstall":case"$enable":case"$disable":case"$state":break;default:t.value=N(r).beforeAll((function(){if(!this.$.states.enabled&&"PHASE_NONE"===this.$.service.phase){let e=new S.INVALID_CALL({owner:this,target:r,reason:"component disabled"});throw this.$logErr(...e),e}}))}return{propertyName:e,propertyDescriptor:t}}}})}class C{constructor(e){F(this,C).use(k.TraitCore).use(k.TraitAbout,{name:e}).use(k.TraitLog).use(k.TraitEvents).use(k.TraitState).use(k.TraitService).use(k.TraitTask)}}class M extends C{constructor(e){super(e),F(this,M).use(k.TraitFetch).use(k.TraitDOM).use(k.TraitCSS).use(k.TraitMutation).use(k.TraitTimeout).use(k.TraitInterval).use(k.TraitLibVue).use(k.TraitLibReact)}}const k=(e,t)=>Object.assign(new M(e),t);class D{static createDescriptors(e=D.DESCRIPTORS_PROTOTYPE){let t=D.create(e,!0,!0),s=Object.create(null);return s.NONE=t(),s.WRITABLE=t({writable:!0}),s.ENUMERABLE=t({enumerable:!0}),s.CONFIGURABLE=t({configurable:!0}),s.CONFIGURABLE_WRITABLE=s.WRITABLE_CONFIGURABLE=t({writable:!0,configurable:!0}),s.CONFIGURABLE_ENUMERABLE=s.ENUMERABLE_CONFIGURABLE=t({enumerable:!0,configurable:!0}),s.ENUMERABLE_WRITABLE=s.WRITABLE_ENUMERABLE=t({writable:!0,enumerable:!0}),s.WRITABLE_ENUMERABLE_CONFIGURABLE=s.WRITABLE_CONFIGURABLE_ENUMERABLE=s.ENUMERABLE_CONFIGURABLE_WRITABLE=s.ENUMERABLE_WRITABLE_CONFIGURABLE=s.CONFIGURABLE_WRITABLE_ENUMERABLE=s.CONFIGURABLE_ENUMERABLE_WRITABLE=t({writable:!0,enumerable:!0,configurable:!0}),s.READONLY=t({writable:!1,enumerable:!1,configurable:!1}),s}static assign(e,t,s,r){let i={};switch(typeof t){case"string":case"symbol":if(!r)throw new Error("missing descriptor argument; use Object.assign instead");(r=Object.create(r)).value=s,Object.defineProperty(e,t,r);break;case"object":if([s,r]=[t,s],!r)throw new Error("missing descriptor argument; use Object.assign instead");for(let e of Object.getOwnPropertyNames(s))i[e]=Object.create(r),i[e].value=s[e];for(let e of Object.getOwnPropertySymbols(s))i[e]=Object.create(r),i[e].value=s[e];Object.defineProperties(e,i);break;default:throw new Error("invalid property argument")}return e}static create(e,t=!1,s=!1){return function(r){return t?Object.assign(s?Object.create(null):{},e,r):Object.assign(Object.create(s?Object.assign(Object.create(null),e):e),r)}}static disinherit(e){return Object.assign(Object.create(null),e)}}D.DESCRIPTORS_PROTOTYPE={writable:!1,enumerable:!1,configurable:!1},i.onInit((function(){D.descriptors=D.createDescriptors()}));const B=()=>++B.uid;B.uid=0;class U{constructor(e,t={}){let s,r;R("JFactoryAbout(owner)",e).type(Object),R("JFactoryAbout(about)",t).typePlainObject().reservedProperty("uid").reservedProperty("fingerprint"),"name"in t&&R("JFactoryAbout(about.name)",t.name).typeString().notEmptyString();let i=B();t.name?(s=t.name,delete t.name,r="jFactory_"+$(s.toLowerCase())+"_"+i):(delete t.name,s=`[${e.constructor.name}#${i}]`,r="jFactory_"+e.constructor.name+"_"+i),D.assign(this,{uid:i,name:s,fingerprint:r},D.descriptors.ENUMERABLE),Object.assign(this,t),R("JFactoryAbout.name",this.name).matchReg(/^[\w[\]#]+$/),R("JFactoryAbout.fingerprint",this.fingerprint).matchReg(/^[\w]+$/)}}const H=()=>++H.uid;H.uid=0;class J extends Promise{constructor({name:e,config:t,traceSource:s},r){1===arguments.length&&([e,t,r]=[null,null,arguments[0]]);const i=H();let a,n;t={...J.DEFAULT_CONFIG,...t},R("name",e=e||"unnamed").type(String,Number).matchReg(/^[^. ]+$/),R("config",t).typePlainObject(),R("executor",r).typeFunction(),super((e,t)=>{a=e,n=t});const o=new Y(this,i,e,t);Object.defineProperties(this,{$chain:{enumerable:!0,writable:!0,value:o},$type:{writable:!0,value:"promise"},$value:{writable:!0,value:void 0},$isSettled:{writable:!0,value:!1},$isRejected:{writable:!0,value:null},$isFulfilled:{writable:!0,value:null},$isExpired:{writable:!0,value:!1}}),Object.defineProperties(this,{$dev_name:{configurable:!0,value:e+"["+i+":0]"},$dev_path:{writable:!0,value:new V(this)},$dev_position:{writable:!0,value:0}}),l(r)||Object.defineProperties(this,{$dev_source:{value:r}}),y.tracer.attachTrace(this,s);const c=()=>{if(!this.$chain.isPending)try{this.$chainComplete("config.chainAutoComplete = true")}catch(e){console.error(e)}},h=e=>{if(!this.$isSettled){if(e===this)return void u(new TypeError("Chaining cycle detected for promise "+this.$dev_name));let t;if(null!==e&&("object"==typeof e||"function"==typeof x))try{t=e.then}catch(e){return void u(e)}if("function"==typeof t){let s=!1,r=function(e){s||(s=!0,h(e))},i=function(e){s||(s=!0,u(e))};try{t.call(e,r,i)}catch(e){s||u(e)}}else this.$isRejected=!1,this.$isFulfilled=!0,this.$isExpired&&(e=this.$chain.errorExpired),a(e),p(e)}},u=e=>{this.$isSettled||(this.$isRejected=!0,this.$isFulfilled=!1,n(e),p(e))},p=e=>{this.$value=e,this.$isSettled=!0,this.$chain.chainMap.set(this,!0),this.$chain.chainConfig.chainAutoComplete&&(1!==this.$chain.chainMap.size||this.$isExpired?c():this.then(c))};let d=t.chainAutoComplete;Object.defineProperty(t,"chainAutoComplete",{get:()=>d,set:e=>{d!==e&&(d=e,e&&c())}}),o.chainMap.set(this,!1),Object.defineProperties(this,{__resolve__:{value:h},__reject__:{value:u}});try{r(h,u)}catch(e){u(e)}}then(e,t,s){let r,i,a,n=l(e)&&!e.name.startsWith("bound ");e&&"function"==typeof e&&(r=function(s){return"await"===o&&!0===a.$isExpired&&a.$chain.errorExpired===s?t(s):a.$isSettled?void 0:e(s)}),t&&"function"==typeof t&&(i=function(e){if(!a.$isSettled)return t(e)});let o=s||(n?"await":void 0===e?"catch":"then");a=Object.assign(super.then(r,i),this),H.uid--,a.$type=o;{a.$dev_position=this.$chain.chainMap.size;let s="";e&&e.name&&(s+=e.name),t&&t.name&&(s+=","+t.name),Object.defineProperties(a,{$dev_name:{value:this.$chain.chainName+"["+this.$chain.chainId+":"+this.$dev_position+"]."+a.$type+(s?"("+s+")":"")+"["+a.$chain.chainId+":"+a.$dev_position+"]"},$dev_path:{value:new V(this.$dev_path,a)},$dev_onFulfilled:{value:e},$dev_onRejected:{value:t}})}return a.$chain.chainMap.set(a,!1),this.$isExpired&&J.forceExpire(a,this.$chain.errorExpired),a}$catchExpired(e){return this.then(t=>this.$chain.chainRoot.$isExpired?e(t):t,void 0,"$catchExpired")}static resolve(e,t){return 1===arguments.length&&([e,t]=[{},e]),e||(e={}),t instanceof this&&1===arguments.length?t:new this(e,(function(e){e(t)}))}static reject(e,t){return 1===arguments.length&&([e,t]=[{},e]),e||(e={}),new this(e,(function(e,s){s(t)}))}$toPromise(){return Promise.resolve(this)}$chainAbort(e="$chainAbort()"){return this.$chain.complete(e),this}$chainComplete(e="$chainComplete()"){return this.$chain.complete(e),this}$chainAutoComplete(){return this.$chain.chainConfig.chainAutoComplete=!0,this}static forceExpire(e,t){e.$isExpired=!0,e.$isSettled||"await"!==e.$type&&"$catchExpired"!==e.$type&&e.__resolve__(t)}}J.DEFAULT_CONFIG={chainAutoComplete:!1};class Y{constructor(e,t,s,r){Object.defineProperties(this,{chainConfig:{value:r},chainRoot:{value:e},chainId:{value:t},chainName:{value:s},chainMap:{value:new Map},isCompleted:{value:!1,configurable:!0},data:{value:{}},__deferred__:{value:o.Deferred()}})}get isPending(){return Array.from(this.chainMap.values()).includes(!1)}then(e){return this.__deferred__.done(e),this}complete(e="chain.complete()"){let t=this.chainRoot;if(!t.$isExpired){let s=t.$chain.errorExpired=new S.PROMISE_EXPIRED({target:t,reason:e}),r=this.chainMap;for(let e of r.keys())J.forceExpire(e,s);Object.defineProperty(this,"isCompleted",{value:!0}),this.__deferred__.resolve()}return this}}class V extends Array{constructor(){super();for(let e of arguments)Array.isArray(e)?this.push(...e):this.push(e)}get printable(){return this.map((e,t)=>0===t?e.$dev_name:e.$dev_name.split(".")[1]).join(".")}toString(){return this.printable}}class q extends Promise{constructor(e){let t={$isSettled:!1,$isRejected:null,$value:void 0};super((s,r)=>{let i=!1,a=e=>{e instanceof Promise?q.resolve(e).then(a,n):i||(i=!0,t.$isSettled=!0,t.$isRejected=!1,t.$value=e,s(e))},n=e=>{i||(i=!0,t.$isSettled=!0,t.$isRejected=!0,t.$value=e,r(e))};try{e(a,n)}catch(e){n(e)}}),Object.assign(this,t),t=this}then(e,t){if(this.$isSettled){let s=this.$value;try{if(this.$isRejected){if(super.then(void 0,()=>null),!t||"function"!=typeof t)return q.reject(s);s=t(s)}else e&&"function"==typeof e&&(s=e(s))}catch(e){return q.reject(e)}return q.resolve(s)}return super.then(e,t)}static resolve(e){return e instanceof q?e:new q(e instanceof Promise?e.then.bind(e):t=>t(e))}}class K{constructor(){Object.defineProperties(this,{registry:{value:o(Object.create(null))},handlers:{value:new WeakMap},onListenerUpdate:{value:null,writable:!0},onObserverUpdate:{value:null,writable:!0}})}on({events:e,handler:t,target:s,selector:r}){K.validateSelector(e),R("JFactoryEvents.on({handler})",t).typeFunction(),s&&R("JFactoryEvents.on({target})",s).type(String,o,HTMLElement),r&&R("JFactoryEvents.on({selector})",s).typeString();let i=this.handlers.get(t);s?(i||this.handlers.set(t,!0),r?o(s).on(e,r,t):o(s).on(e,t),this.onListenerUpdate&&this.onListenerUpdate(arguments)):(i||(this.handlers.set(t,i=function(e,{data:s,stack:r}){r.push(()=>t(e,s))}),i.originalHandler=t),this.registry.on(e,i),this.onObserverUpdate&&this.onObserverUpdate(arguments))}off({events:e,handler:t,target:s,selector:r}){if(void 0!==e&&(K.validateSelector(e),t&&R("JFactoryEvents.off({handler})",t).typeFunction(),s&&R("JFactoryEvents.off({target})",s).type(String,o,HTMLElement),r&&R("JFactoryEvents.off({selector})",s).typeString()),s)r?o(s).off(e,r,t):o(s).off(e,t);else{if(o("*").off(e,t),t&&!(t=this.handlers.get(t)))throw new S.INVALID_VALUE({target:"handler",reason:"not registered",given:t});this.registry.off(e,t)}this.onObserverUpdate&&this.onObserverUpdate(arguments),this.onListenerUpdate&&this.onListenerUpdate(arguments)}triggerParallel({events:e,data:t,target:s}){K.validateSelector(e),s&&R("JFactoryEvents.triggerParallel({target})",s).type(String,o,HTMLElement);const r=[],i=[];if(e=e.split(" "),s)for(let i of e)o(s).trigger(i,{data:t,stack:r});else for(let s of e)this.registry.triggerHandler(s,{data:t,stack:r});for(let e of r){let t=e();t instanceof Promise&&!t.$isSettled&&i.push(t)}return i.length?Promise.all(i):q.resolve()}triggerSeries({events:e,data:t,target:s}){return K.validateSelector(e),s&&R("JFactoryEvents.triggerSeries({target})",s).type(String,o,HTMLElement),new q(async r=>{const i=[];if(e=e.split(" "),s)for(let r of e)o(s).trigger(r,{data:t,stack:i});else for(let s of e)this.registry.triggerHandler(s,{data:t,stack:i});for(let e of i){let t=e();t instanceof Promise&&!t.$isSettled&&await t}r()})}}class W extends K{constructor(e){super(),Object.defineProperties(this,{parent:{value:e},affiliateRules:{value:(new P).compose()}}),this.affiliateAddRule(W.rule_namespace)}affiliate(e="",t="",s){let r=new G(e);for(let e of r.events)this.affiliateRules(e,t,s);return r.toString()}affiliateAddRule(e){this.affiliateRules.composer.last(e)}static rule_namespace(e,t,s){s=s.split(".");for(let e of s)e&&t.addNamespace(e)}on(e,t,s,r,i){switch(arguments.length){case 2:[r,t]=[t];break;case 3:"function"==typeof arguments[2]?[r,s]=[s]:[r,i,t,s]=[t,s];break;case 4:"object"==typeof arguments[3]&&([i,r,s]=[r,s])}e=this.affiliate(e,this.parent.$.about.fingerprint,i),void 0===t?super.on({events:e,handler:r}):super.on({events:e,target:t,selector:s,handler:r})}off(e,t,s,r,i){const a=arguments.length;switch(a){case 1:"object"==typeof arguments[0]&&([i,e]=[e]);break;case 2:"function"==typeof arguments[1]?[r,t]=[t]:u(arguments[1])&&([i,t]=[t]);break;case 3:"function"==typeof arguments[2]?[r,s]=[s]:"function"==typeof arguments[1]&&([r,i,t,s]=[t,s]);break;case 4:"object"==typeof arguments[3]&&([i,r,s]=[r,s])}e=this.affiliate(e,this.parent.$.about.fingerprint,i),a<2?super.off({events:e}):t?super.off({events:e,target:t,selector:s,handler:r}):super.off({events:e,handler:r})}trigger(e,t,s){switch(arguments.length){case 2:"object"!=typeof t||t.jquery||([s,t]=[t])}return t?super.triggerSeries({events:e,target:t,data:s}):super.triggerSeries({events:e,data:s})}triggerParallel(e,t,s){switch(arguments.length){case 2:"object"!=typeof t||t.jquery||([s,t]=[t])}return t?super.triggerParallel({events:e,target:t,data:s}):super.triggerParallel({events:e,data:s})}getDomListeners(e){let t=new Map;for(let s of o("*")){let r=o._data(s,"events");if(r)for(let i of Object.values(r))for(let r of i){let i;if(new z(r.namespace).hasNamespace(e)){(i=t.get(s))||t.set(s,i={}),(i[r.type]||(i[r.type]=[])).push({selector:r.selector||null,handler:r.handler,namespace:r.namespace})}}}return t}getObservers(){let e=new Map,t=this.registry._events;if(!t){let e=Object.values(this.registry)[0],s=Object.getOwnPropertyNames(e).find(e=>0===e.indexOf("jQuery"));e&&s&&(t=this.registry._events=e[s].events)}if(t)for(let[s,r]of Object.entries(t)){let t=e.get(s);t||(t=[],e.set(s,t));for(let e of r)t.push({handler:e.handler.originalHandler,namespace:e.namespace})}return e}}class G{constructor(e){K.validateSelector(e),this.events=e.split(" ").map(e=>new z(e))}toString(){let e=[];for(let t of this.events)e.push(t.toString());return e.join(" ")}}class z{constructor(e){let[t,...s]=e.split(".");this.event=t,this.namespace=new Set(s)}hasNamespace(e){Array.isArray(e)||(e=[e]);for(let t of e){if(!/^[\w:]+$/.test(t))throw new S.INVALID_VALUE({target:"namespace",reason:"must be alphanumeric, underscore and colon characters",given:t});if(t&&this.namespace.has(t))return t}return!1}addNamespace(e){if(!/^[\w:]+$/.test(e))throw new S.INVALID_VALUE({target:"namespace",reason:"must be alphanumeric, underscore and colon characters",given:e});this.namespace.add(e)}deleteNamespace(e){if(!/^[\w:]+$/.test(e))throw new S.INVALID_VALUE({target:"namespace",reason:"must be alphanumeric, underscore and colon characters",given:e});this.namespace.delete(e)}toString(){return this.namespace.size?this.event+"."+Array.from(this.namespace.values()).join("."):this.event}}K.validateSelector=function(e){R("JFactoryEvents.validateSelector(selector)",e).notUndefined().validSpaces();for(let[t,s]of e.split(" ").map(e=>e.split(".")).map(e=>[e.shift(),e.join(".")]))t&&K.validateEvent(t),s&&K.validateNamespace(s);return!0},K.validateEvent=function(e){if(R("JFactoryEvents.validateEvent(event)",e).notUndefined().notEmptyString().validSpaces(),!/^[\w:]+$/.test(e))throw new S.INVALID_VALUE({target:"JFactoryEvents.validateEvent(event)",reason:"must be alphanumeric, underscore and colon characters",given:e});return!0},K.validateNamespace=function(e){if(R("JFactoryEvents.validateNamespace(namespace)",e).notUndefined().notEmptyString().validSpaces(),!/^[\w:.]+$/.test(e))throw new S.INVALID_VALUE({target:"JFactoryEvents.validateNamespace(namespace)",reason:"must be alphanumeric, underscore, dot and colon characters",given:e});return!0};class Q extends J{constructor(e,t,s={}){if("function"==typeof e)super(e);else{"string"==typeof e&&([e,t,s]=[{},arguments[0],arguments[1]]);let r=new Request(t,s);super(e,(i,a)=>{let n=fetch(r).then(e=>{if(this.$chain.fetchResponse=e,!e.ok)throw Error(e.status+":"+e.statusText);return e});s.$typeText?n=n.then(e=>e.text()).then(e=>this.$chain.responseText=e):s.$typeJSON&&(n=n.then(e=>e.json()).then(e=>this.$chain.responseJSON=e)),n=n.catch(i=>{throw new S.REQUEST_ERROR({reason:i.message||i,target:this.$chain.fetchResponse&&this.$chain.fetchResponse.url||t,owner:this,fetchOptions:s,fetchRequest:r,fetchResponse:this.$chain.fetchResponse||null},e.traceSource)}),n.then(i,a)}),this.$chain.fetchOptions=s,this.$chain.fetchRequest=r;let i=s.abortController||new AbortController;s.signal=i.signal,this.$chain.fetchAbortController=i}}$chainAbort(e="request aborted"){return super.$chainAbort(e),this.$chain.fetchAbortController.abort(),this}}const X=Symbol();class Z{constructor(e){e&&R("JFactoryLogger(options)",e).properties(Object.getOwnPropertyNames(Z.DEFAULT_CONFIG)),p(this,e,Z.DEFAULT_CONFIG),this.condition=w(Z.DEFAULT_CONDITION),this.installAccessor("log"),this.installAccessor("warn"),this.installAccessor("error")}get enabled(){return this[X]&&(!this.parentLogger||this.parentLogger.enabled)}set enabled(e){e?this.enable():this.disable()}enable(){!0!==this[X]&&(this[X]=!0)}disable(){!1!==this[X]&&(this[X]=!1)}disallow(e,t=this.label){this.filters[t]||(this.filters[t]={}),this.filters[t][e]=!0}allow(e,t=this.label){this.filters[t]&&delete this.filters[t][e]}installAccessor(e,t=e,s=this){R("JFactoryLogger(nativeName)",e).equalIn(["log","warn","error"]),Object.defineProperties(s,{[t]:{get:this.accessor.bind(this,e),configurable:!0}})}accessor(e){return this[X]&&this.condition(e)&&this.formatter[e](this)||g}createSubLogger(e){let t=new Z({enabled:this.enabled,label:this.label+"."+e,styles_css:this.styles_css,styles_cli:this.styles_cli,console:this.console,formatter:this.formatter});return t.parentLogger=this,t.condition.addCondition(()=>this.enabled),t.filters=this.filters,t}}Z.FORMATTER_NATIVE={log:e=>e.console.log.bind(e.console,e.label+">"),warn:e=>e.console.warn.bind(e.console,e.label+">"),error:e=>e.console.error.bind(e.console,e.label+">")},Z.FORMATTER_CLI={log:e=>e.console.log.bind(e.console,e.styles_cli.label,e.label+">"),warn:e=>e.console.warn.bind(e.console,e.styles_cli.label,e.label+">"),error:e=>e.console.error.bind(e.console,e.styles_cli.label,e.label+">")},Z.FORMATTER_BROWSER={log:e=>e.console.log.bind(e.console,"%c"+e.label+">",e.styles_css.label),warn:e=>e.console.warn.bind(e.console,"%c"+e.label+">",e.styles_css.label),error:e=>e.console.error.bind(e.console,"%c"+e.label+">",e.styles_css.label)},Z.DEFAULT_CONDITION=function(e){return R("JFactoryLogger.condition(nativeName)",e).equalIn(["log","warn","error"]),R("JFactoryLogger.enabled",this.enabled).equal(!0),!(this.filters[this.label]&&this.filters[this.label][e])},Z.DEFAULT_CONFIG={label:"",enabled:!0,parentLogger:null,formatter:s?Z.FORMATTER_CLI:Z.FORMATTER_BROWSER,console:console,filters:{},styles_cli:{label:"[1;30m%s[0m"},styles_css:{label:"color: gray"}};class ee extends Date{toString(){return this.toLocaleTimeString()+", "+this.getUTCMilliseconds()+"ms ("+this.valueOf()+")"}$toDurationString(){let e=this.getUTCHours(),t=this.getUTCMinutes(),s=this.getUTCSeconds(),r=this.getUTCMilliseconds(),i=[];return e&&i.push(e+"h"),t&&i.push(t+"min"),s&&i.push(s+"s"),i.push(r+"ms"),1===i.length?i[0]:i.join(",")+" ("+this.valueOf()+")"}}class te extends Date{constructor(){super(),this.elapsed=null,Object.defineProperties(this,{t1:{value:null,writable:!0},t0:{value:new ee}})}end(){this.t1=new ee,this.elapsed=new ee(this.t1-this.t0).$toDurationString()}toString(){return this.elapsed}}class se{trait_constructor(){const e=this;class t extends Map{$registerSync(t,s){let r=Object.defineProperties({},{$value:{value:s},$phaseRemove:{value:le.getContextualRemovePhase(e)}});return this.set(t,r),r}$registerAsync(t,s,r){let i=e.$task(s,r.$chain);return r.$chain.then(()=>{i.$chainComplete("task completed")}),i.$chain.then(()=>{r.$chain.isCompleted||r.$chainAbort("aborted by task")}),Object.defineProperty(r,"$phaseRemove",{value:i.$phaseRemove}),this.set(t,r),i}}const s=Object.assign(Object.create(null),{[se.SYMBOL_PRIVATE]:Object.create(null),assign:function(e,t,s){D.assign(this,e,t,s)},createSubMap:()=>new t});Object.defineProperty(this,"$",{value:Object.create(s)}),this.$.assign({tasks:null,requests:null},D.descriptors.ENUMERABLE_WRITABLE)}}se.SYMBOL_PRIVATE=Symbol("_");class re{trait_constructor(e){D.assign(this.$,"about",new U(this,e),D.descriptors.READONLY)}}class ie{trait_constructor(){let e=Object.assign({label:this.$.about.name},r.TraitLog||{enabled:!1}),t=new Z(e);Object.defineProperty(this.$,"logger",{value:t}),t.installAccessor("log","$log",this),t.installAccessor("warn","$logWarn",this),t.installAccessor("error","$logErr",this)}}class ae{trait_constructor(){this.$.assign("tasks",new Map,D.descriptors.ENUMERABLE)}$task(e,t){if(R("$task(id)",e).typeString(),R("$task(executorOrValue)",t).notUndefined(),this.$.tasks.has(e))throw new S.KEY_DUPLICATED({target:"$task(id)",given:e});let s,r;return s="function"==typeof t?new J({name:e,owner:this},t):J.resolve({name:e,owner:this},t),s.$phaseRemove=le.getContextualRemovePhase(this),r=new te,s.$taskMetrics={$dev_timing:r},s.$chain.then(()=>{r.end(),this.$.tasks.get(e)&&this.$taskRemove(e)}),this.$.tasks.set(e,s),s}$taskRemove(e,t){if(R("$taskRemove(id)",e).typeString(),t&&R("$taskRemove(reason)",t).typeString(),!this.$.tasks.has(e))throw new S.KEY_MISSING({target:"$taskRemove(id)",given:e});this.$.tasks.get(e)._called,this.$.tasks.get(e)._called=!0;let s=this.$.tasks.get(e);this.$.tasks.delete(e),s.$chainAbort(t||"$taskRemove()")}$taskRemoveAll(e){R("$taskRemoveAll(removePhase)",e).equalIn(le.PHASES);let t=this.$.tasks;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$taskRemove(s,"$taskRemoveAll("+e+")")}$taskPromiseAll(e=!1){let t=[];if(this.$.tasks.size)for(let s of this.$.tasks.values())e&&(s.$chain.chainConfig.chainAutoComplete=!0),s.$chain.isPending&&t.push(s.$chain);return t.length?Promise.all(t):q.resolve()}}class ne{trait_constructor(){ce(this,"events",{custom:new W(this),kernel:new W(this)},D.descriptors.NONE);let e=this.$[se.SYMBOL_PRIVATE].events.custom;Object.defineProperties(this.$,{listeners:{get:e.getDomListeners.bind(e,this.$.about.fingerprint),enumerable:!0},observers:{get:e.getObservers.bind(e),enumerable:!0}})}$on(){this.$[se.SYMBOL_PRIVATE].events.custom.on(...arguments)}$off(){this.$[se.SYMBOL_PRIVATE].events.custom.off(...arguments)}$trigger(){return this.$[se.SYMBOL_PRIVATE].events.custom.trigger(...arguments)}$triggerParallel(){return this.$[se.SYMBOL_PRIVATE].events.custom.triggerParallel(...arguments)}$notify(e,t){return this.$trigger(e,t).then(()=>this.$[se.SYMBOL_PRIVATE].events.kernel.trigger(e,t))}}class oe{trait_constructor(){const e=Object.create(null),t=Object.create(null),s=this.$[se.SYMBOL_PRIVATE].events.kernel;ce(this,{states:e,stateRoutes:t},D.descriptors.READONLY),D.assign(this.$,"states",new Proxy(e,{set:(e,t,s)=>this.$state(t,s),get:(t,s)=>e[s]}),D.descriptors.READONLY),s.on("beforeStateChange",(e,s)=>{let r;if(t[s.key]&&t[s.key].before&&(r=t[s.key].before(s.val)))return this.$notify(r)}),s.on("afterStateChange",(e,s)=>{let r;if(t[s.key]&&t[s.key].after&&(r=t[s.key].after(s.val)))return this.$notify(r)})}$state(e,t,s=!0){return R("$state(key)",e).typeString(),R("$state(notify)",s).typeBoolean(),new q(async r=>{let i,a=this.$[se.SYMBOL_PRIVATE].states,n=a[e];e in a&&n===t||(i=s&&this.$notify("beforeStateChange",{key:e,val:t,previousVal:n}),i&&R("beforeStateChange result",i).type(q),i&&!i.$isSettled&&(a[e]=i,await i),void 0===t?delete a[e]:a[e]=t,i=s&&this.$notify("afterStateChange",{key:e,val:t,previousVal:n}),i&&R("afterStateChange result",i).type(q)),i?i.then(r):r()})}}class le{trait_constructor(){D.assign(this.$,"service",Object.create(null),D.descriptors.READONLY),this.$.service.phase=le.PHASE.NONE,this.$.service.phaseQueue=q.resolve(),this.$state("installed",!1,!1),this.$state("enabled",!1,!1),he(this,"stateRoutes",{installed:{after:e=>e?"install":"uninstall"},enabled:{after:e=>e?"enable":"disable"}},D.descriptors.NONE);let e=this.$[se.SYMBOL_PRIVATE].events.custom,t=this.$[se.SYMBOL_PRIVATE].events.kernel;e.affiliateAddRule((e,t,s,r)=>le.setEventNamespaceRemovePhase(this,t,r));let s=e=>{this.$.tasks.size&&this.$taskRemoveAll(this.$.service.phase);let t=q.resolve();return e&&(t=t.then(()=>e.call(this)).then(()=>this.$taskPromiseAll(!0))),t.catch(e=>{this.$.service.isPhaseKilling&&e instanceof S.PROMISE_EXPIRED||this.$logErr("unhandled promise rejection in "+this.$.service.phase+";",...e instanceof A?e:[e])})};t.on("install",()=>s(this.onInstall)),t.on("enable",()=>s(this.onEnable)),t.on("disable",()=>s(this.onDisable)),t.on("uninstall",()=>s(this.onUninstall)),t.on("disable",()=>this.$off({removal:le.PHASE.DISABLE})),t.on("uninstall",()=>this.$off({removal:le.PHASE.UNINSTALL}))}$install(e){return this.$.service.phaseQueue.$isSettled?(this.$.service.isPhaseKilling,this.$.service.phaseQueue=q.resolve().then(()=>{if(!this.$.states.installed)return this.$.service.phase=le.PHASE.INSTALL,this.$state("installed",!0)}).then(()=>{if(e&&this.$.states.installed&&!this.$.states.enabled)return this.$.service.phase=le.PHASE.ENABLE,this.$state("enabled",!0)}).then(()=>{this.$.service.phase=le.PHASE.NONE})):this.$.service.phaseQueue.then(()=>this.$install())}$enable(){return this.$.service.phaseQueue.$isSettled?(this.$.service.isPhaseKilling,this.$.service.phaseQueue=q.resolve().then(()=>{if(this.$.states.installed&&!this.$.states.enabled)return this.$.service.phase=le.PHASE.ENABLE,this.$state("enabled",!0)}).then(()=>{this.$.service.phase=le.PHASE.NONE})):this.$.service.phaseQueue.then(()=>this.$enable())}$disable(){return this.$.service.phaseQueue.$isSettled?(this.$.service.isPhaseKilling,this.$.service.phaseQueue=q.resolve().then(()=>{if(this.$.states.enabled)return this.$.service.phase=le.PHASE.DISABLE,this.$state("enabled",!1)}).then(()=>{this.$.service.phase=le.PHASE.NONE})):le.phaseKill(this).then(()=>this.$disable())}$uninstall(){return this.$.service.phaseQueue.$isSettled?(this.$.service.isPhaseKilling,this.$.service.phaseQueue=q.resolve().then(()=>{if(this.$.states.enabled)return this.$disable()}).then(()=>{if(this.$.states.installed)return this.$.service.phase=le.PHASE.UNINSTALL,this.$state("installed",!1)}).then(()=>{this.$.service.phase=le.PHASE.NONE})):le.phaseKill(this).then(()=>this.$uninstall())}static phaseKill(e){return new Promise(t=>{e.$.service.phaseQueue.$isSettled?(e.$.service.isPhaseKilling=!1,t()):(e.$.service.isPhaseKilling=!0,e.$.tasks.size&&e.$taskRemoveAll(le.getContextualRemovePhase(e),!0),setTimeout(()=>t(le.phaseKill(e)),50))})}static getContextualRemovePhase(e){return le.PHASE_REVERT[e.$.service.phase]}static setEventNamespaceRemovePhase(e,t,s){let r=t.hasNamespace(le.PHASES),i=s&&s.removal;i||(i=le.getContextualRemovePhase(e)),"uninstall"===t.event&&i===le.PHASE.DISABLE&&(i=le.PHASE.UNINSTALL),r!==i&&(t.deleteNamespace(r),t.addNamespace(i)),t.addNamespace(i)}}function ce(e,t,s,r){D.assign(e.$[se.SYMBOL_PRIVATE],t,s,r)}function he(e,t,s,r){D.assign(e.$[se.SYMBOL_PRIVATE][t],s,r)}le.PHASE={NONE:"PHASE_NONE",INSTALL:"PHASE_INSTALL",ENABLE:"PHASE_ENABLE",DISABLE:"PHASE_DISABLE",UNINSTALL:"PHASE_UNINSTALL"},le.PHASE_REVERT={[le.PHASE.INSTALL]:le.PHASE.UNINSTALL,[le.PHASE.UNINSTALL]:le.PHASE.INSTALL,[le.PHASE.DISABLE]:le.PHASE.ENABLE,[le.PHASE.ENABLE]:le.PHASE.DISABLE,[le.PHASE.NONE]:le.PHASE.DISABLE},le.PHASES=Object.values(le.PHASE),k.PHASE=D.disinherit(le.PHASE),k.TraitCore=se,k.TraitAbout=re,k.TraitLog=ie,k.TraitEvents=ne,k.TraitState=oe,k.TraitService=le,k.TraitTask=ae;class ue{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$fetchRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$fetchRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("requests",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$fetch(e,t,s={}){if(R("$fetch(id)",e).typeString(),R("$fetch(url)",t).typeString(),R("$fetch(fetchOptions)",s).typePlainObject(),this.$.requests.has(e))throw new S.KEY_DUPLICATED({target:"$fetch(id)",given:e});let r=new Q({name:e,traceSource:y.tracer.captureTraceSource("$fetch"),config:{chainAutoComplete:!0}},t,s);return this.$.requests.$registerAsync(e,'$fetch("'+e+'")',r),r.$chain.then(()=>{this.$.requests.has(e)&&this.$fetchRemove(e)}),r}$fetchText(e,t,s={}){return this.$fetch(e,t,{...s,$typeText:!0})}$fetchJSON(e,t,s={}){return this.$fetch(e,t,{...s,$typeJSON:!0})}$fetchRemove(e,t){if(R("$fetchRemove(id)",e).typeString(),t&&R("$fetchRemove(reason)",t).typeString(),!this.$.requests.has(e))throw new S.KEY_MISSING({target:"$fetchRemove(id)",given:e});this.$.requests.get(e)._debug_remove_called,this.$.requests.get(e)._debug_remove_called=!0;let s=this.$.requests.get(e);this.$.requests.delete(e),s.$chainAbort(t||"$fetchRemove()")}$fetchRemoveAll(e){R("removePhase",e).equalIn(le.PHASES);let t=this.$.requests;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$fetchRemove(s,"$fetchRemoveAll("+e+")")}}class pe{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$timeoutRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$timeoutRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("timeouts",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$timeout(e,t,s=null,...r){if(R("id",e).typeString(),R("delay",t).typeNumber(),R("handler",s).type(Function,null),this.$.timeouts.has(e))throw new S.KEY_DUPLICATED({target:"$timeout(id)",given:e});let i,a=new J({name:e,traceSource:y.tracer.captureTraceSource("$timeout"),config:{chainAutoComplete:!0}},e=>{i=setTimeout(()=>{a.$isExpired||e(s?s(...r):void 0)},t)});return this.$.timeouts.$registerAsync(e,'$timeout("'+e+'")',a),a.$chain.data.timer=i,a.$chain.then(()=>{this.$.timeouts.has(e)&&this.$timeoutRemove(e)}),a}$timeoutRemove(e,t){if(R("$timeoutRemove(id)",e).typeString(),t&&R("$timeoutRemove(reason)",t).typeString(),!this.$.timeouts.has(e))throw new S.KEY_MISSING({target:"$timeoutRemove(id)",given:e});this.$.timeouts.get(e)._debug_remove_called,this.$.timeouts.get(e)._debug_remove_called=!0;let s=this.$.timeouts.get(e);clearTimeout(s.$chain.data.timer),this.$.timeouts.delete(e),s.$chainAbort(t||"$timeoutRemove()")}$timeoutRemoveAll(e){R("removePhase",e).equalIn(le.PHASES);let t=this.$.timeouts;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$timeoutRemove(s,"$timeoutRemoveAll()")}}class de{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$intervalRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$intervalRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("timeints",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$interval(e,t,s,...r){if(R("id",e).typeString(),R("handler",s).typeFunction(),R("delay",t).typeNumber(),this.$.timeints.has(e))throw new S.KEY_DUPLICATED({target:"$interval(id)",given:e});let i=setInterval(s,t,...r);this.$.timeints.$registerSync(e,i)}$intervalRemove(e){if(R("$intervalRemove(id)",e).typeString(),!this.$.timeints.has(e))throw new S.KEY_MISSING({target:"$intervalRemove(id)",given:e});this.$.timeints.get(e)._debug_remove_called,this.$.timeints.get(e)._debug_remove_called=!0,clearInterval(this.$.timeints.get(e).$value),this.$.timeints.delete(e)}$intervalRemoveAll(e){R("removePhase",e).equalIn(le.PHASES);let t=this.$.timeints;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$intervalRemove(s)}}class me{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$mutationRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$mutationRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("mutations",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$mutation(e,t,s,r){if(R("id",e).typeString(),R("parent",t).type(HTMLElement,Document),R("config",s).typePlainObject(),R("handler",r).typeFunction(),this.$.mutations.has(e))throw new S.KEY_DUPLICATED({target:"$mutation(id)",given:e});let i=new MutationObserver(r);i.observe(t,s),this.$.mutations.$registerSync(e,i)}$mutationRemove(e,t){if(R("$mutationRemove(id)",e).typeString(),t&&R("$mutationRemove(reason)",t).typeString(),!this.$.mutations.has(e))throw new S.KEY_MISSING({target:"$mutationRemove(id)",given:e});this.$.mutations.get(e)._debug_remove_called,this.$.mutations.get(e)._debug_remove_called=!0,this.$.mutations.get(e).$value.disconnect(),this.$.mutations.delete(e)}$mutationRemoveAll(e){R("removePhase",e).equalIn(le.PHASES);let t=this.$.mutations;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$mutationRemove(s)}}class fe{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$domRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$domRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("dom",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$dom(e,t,s){let r;if(R("id",e).typeString(),R("jQueryArgument",t).type(String,Object),s&&R("appendTo",s).type(String,Object),"#"===e[0]&&(e=e.substring(1),r=!0),this.$.dom.has(e))throw new S.KEY_DUPLICATED({target:"$dom(id)",given:e});let i=o(t);return"TEMPLATE"===i[0].tagName&&(i=o(document.importNode(i[0].content,!0).children)),r&&(i[0].id=e),s&&i.appendTo(s),this.$.dom.$registerSync(e,i).$value}$domFetch(e,t,s,r){let i;if(s&&!u(s)&&([s,r]=[{},s]),R("id",e).typeString(),R("url",t).typeString(),r&&R("appendTo",r).type(String,Object),"#"===e[0]&&(e=e.substring(1),i=!0),this.$.dom.has(e))throw new S.KEY_DUPLICATED({target:"$domFetch(id)",given:e});let a=this.$fetchText('$domFetch("'+e+'")',t,s).then(t=>{let s=o(t);return i&&(s[0].id=e),r&&s.appendTo(r),s});return this.$.dom.$registerAsync(e,'$domFetch("'+e+'")',a),a}$domRemove(e,t){if(R("$domRemove(id)",e).typeString(),t&&R("$domRemove(reason)",t).typeString(),!this.$.dom.has(e))throw new S.KEY_MISSING({target:"$domRemove(id)",given:e});this.$.dom.get(e)._debug_remove_called,this.$.dom.get(e)._debug_remove_called=!0;let s=this.$.dom.get(e),r=s.$value;r instanceof o&&r.remove(),s instanceof Q&&s.$chainAbort(t||"$domRemove()"),this.$.dom.delete(e)}$domRemoveAll(e){R("removePhase",e).equalIn(le.PHASES);let t=this.$.dom;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$domRemove(s)}}class $e{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$cssRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$cssRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("css",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$css(e,t){let s;if(R("id",e).typeString(),R("css",t).typeString(),"#"===e[0]&&(e=e.substring(1),s=!0),this.$.css.has(e))throw new S.KEY_DUPLICATED({target:"$css(id)",given:e});return this.$.css.$registerSync(e,o("<style>").attr(s?{id:e}:{}).addClass("jFactory-css").html(t).appendTo("head")).$value}$cssFetch(e,t){let s,r;if(R("id",e).typeString(),R("url",t).typeString(),"#"===e[0]&&(e=e.substring(1),s=!0),this.$.css.has(e))throw new S.KEY_DUPLICATED({target:"$cssFetch(id)",given:e});let i=new J({name:e,config:{chainAutoComplete:!0},traceSource:y.tracer.captureTraceSource("$cssFetch")},i=>r=o("<link>",{id:s?e:"",rel:"stylesheet",type:"text/css"}).addClass("jFactory-css").appendTo("head").on("load",()=>{i(r)}).attr("href",t));return i.$chain.data.dom=r,this.$.css.$registerAsync(e,'$cssFetch("'+e+'")',i),i}$cssRemove(e,t){if(R("$cssRemove(id)",e).typeString(),t&&R("$cssRemove(reason)",t).typeString(),!this.$.css.has(e))throw new S.KEY_MISSING({target:"$cssRemove(id)",given:e});this.$.css.get(e)._debug_remove_called,this.$.css.get(e)._debug_remove_called=!0;let s=this.$.css.get(e),r=s.$value||s.$chain&&s.$chain.data.dom;r instanceof o&&r.remove(),s instanceof J&&s.$chainAbort(t||"$cssRemove()"),this.$.css.delete(e)}$cssRemoveAll(e){R("removePhase",e).equalIn(le.PHASES);let t=this.$.css;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$cssRemove(s)}}class ge{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$vueRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$vueRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("vue",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$vue(e,t){if(R("id",e).typeString(),R("vue",t).type(Object),this.$.vue.has(e))throw new S.KEY_DUPLICATED({target:"$vue(id)",given:e});return this.$.vue.$registerSync(e,t).$value}$vueRemove(e){if(R("$vueRemove(id)",e).typeString(),!this.$.vue.has(e))throw new S.KEY_MISSING({target:"$vueRemove(id)",given:e});this.$.vue.get(e)._debug_remove_called,this.$.vue.get(e)._debug_remove_called=!0;let t=this.$.vue.get(e);o(t.$value.$el).remove(),t.$value.$destroy(),this.$.vue.delete(e)}$vueRemoveAll(e){R("removePhase",e).equalIn(le.PHASES);let t=this.$.vue;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$vueRemove(s)}}class ve{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$reactRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$reactRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("react",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$react(e,t,s,...r){if(!k.ReactDOM)throw new Error("jFactory.ReactDOM=ReactDOM must be set before using the React Trait");if(R("id",e).typeString(),R("container",t).type(HTMLElement,o),this.$.react.has(e))throw new S.KEY_DUPLICATED({target:"$react(id)",given:e});t=o(t)[0];let i=k.ReactDOM.render(s,t,...r);return this.$.react.$registerSync(e,{container:t,view:i}).$value.view}$reactRemove(e){if(R("$reactRemove(id)",e).typeString(),!this.$.react.has(e))throw new S.KEY_MISSING({target:"$reactRemove(id)",given:e});this.$.react.get(e)._debug_remove_called,this.$.react.get(e)._debug_remove_called=!0;let t=this.$.react.get(e).$value.container;t&&(k.ReactDOM.unmountComponentAtNode(t)||this.$logWarn("unmountComponentAtNode failed to unmount",t),o(t).remove()),this.$.react.delete(e)}$reactRemoveAll(e){R("removePhase",e).equalIn(le.PHASES);let t=this.$.react;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$reactRemove(s)}}k.TraitFetch=ue,k.TraitTimeout=pe,k.TraitInterval=de,k.TraitMutation=me,k.TraitDOM=fe,k.TraitCSS=$e,k.TraitLibVue=ge,k.TraitLibReact=ve,"undefined"!=typeof jFactoryOverride&&jFactoryOverride||i.init(),exports.JFACTORY_CLI=s,exports.JFACTORY_DEBUG=!1,exports.JFACTORY_DEV=!0,exports.JFactoryAbout=U,exports.JFactoryComponent=M,exports.JFactoryCoreObject=C,exports.JFactoryError=A,exports.JFactoryEventSelector=z,exports.JFactoryEventSelectorParser=G,exports.JFactoryEvents=K,exports.JFactoryEventsManager=W,exports.JFactoryExpect=R,exports.JFactoryFetch=Q,exports.JFactoryFunctionComposer=P,exports.JFactoryFunctionConditional=I,exports.JFactoryFunctionExpirable=O,exports.JFactoryFunctionWrappable=j,exports.JFactoryLogger=Z,exports.JFactoryObject=D,exports.JFactoryPromise=J,exports.JFactoryPromiseChain=Y,exports.JFactoryPromisePath=V,exports.JFactoryPromiseSync=q,exports.JFactoryTime=ee,exports.JFactoryTimeTrace=te,exports.JFactoryTrace_LIB_STACKTRACE=E,exports.JFactoryTrace_NOFILTER=b,exports.JFactoryTraits=T,exports.TraitAbout=re,exports.TraitCSS=$e,exports.TraitCore=se,exports.TraitDOM=fe,exports.TraitEvents=ne,exports.TraitFetch=ue,exports.TraitInterval=de,exports.TraitLibReact=ve,exports.TraitLibVue=ge,exports.TraitLog=ie,exports.TraitMutation=me,exports.TraitService=le,exports.TraitState=oe,exports.TraitTask=ae,exports.TraitTimeout=pe,exports.assignPrivate=ce,exports.assignPrivateMember=he,exports.jFactory=k,exports.jFactoryConfig=r,exports.jFactoryDev=a,exports.jFactoryError=S,exports.jFactoryFunctionConditional=w,exports.jFactoryFunctionExpirable=function(e){return new O(e).compose()},exports.jFactoryFunctionWrappable=N,exports.jFactoryInit=n,exports.jFactoryLoader=i,exports.jFactoryTrace=y,exports.jFactoryTraits=F;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiakZhY3RvcnktZGV2ZWwuY2pzLmpzIiwic291cmNlcyI6WyIuLi9zcmMvakZhY3RvcnktZW52Lm1qcyIsIi4uL3NyYy9qRmFjdG9yeS1sb2FkZXIubWpzIiwiLi4vc3JjL2pGYWN0b3J5LWhlbHBlcnMubWpzIiwiLi4vc3JjL0pGYWN0b3J5VHJhY2UubWpzIiwiLi4vc3JjL0pGYWN0b3J5RXJyb3IubWpzIiwiLi4vc3JjL0pGYWN0b3J5RXhwZWN0Lm1qcyIsIi4uL3NyYy9KRmFjdG9yeVRyYWl0cy5tanMiLCIuLi9zcmMvSkZhY3RvcnlGdW5jdGlvbi5tanMiLCIuLi9zcmMvakZhY3RvcnktdHJhaXRzLm1qcyIsIi4uL3NyYy9qRmFjdG9yeS5tanMiLCIuLi9zcmMvSkZhY3RvcnlPYmplY3QubWpzIiwiLi4vc3JjL0pGYWN0b3J5QWJvdXQubWpzIiwiLi4vc3JjL0pGYWN0b3J5UHJvbWlzZS5tanMiLCIuLi9zcmMvSkZhY3RvcnlFdmVudHMubWpzIiwiLi4vc3JjL0pGYWN0b3J5RmV0Y2gubWpzIiwiLi4vc3JjL0pGYWN0b3J5TG9nZ2VyLm1qcyIsIi4uL3NyYy9KRmFjdG9yeVRpbWUubWpzIiwiLi4vc3JjL1RyYWl0c0NvcmUubWpzIiwiLi4vc3JjL1RyYWl0c0NvbXBvbmVudHMubWpzIiwiLi4vc3JjL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXNcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dFxuICovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnkgRW52XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gQ29tcGlsZS10aW1lIGltbXV0YWJsZSBFbnY7IHVzZWQgYnkgVHJlZSBTaGFraW5nIHRvIHJlbW92ZSB1bnVzZWQgY29kZVxuZXhwb3J0IGNvbnN0IEpGQUNUT1JZX0RFViA9IHR5cGVvZiBDT01QSUxFUl9ERVYgPT09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IENPTVBJTEVSX0RFVjsgLy8gRGV2ZWxvcGVyIE1vZGVcbmV4cG9ydCBjb25zdCBKRkFDVE9SWV9ERUJVRyA9IHR5cGVvZiBDT01QSUxFUl9ERUJVRyA9PT0gXCJ1bmRlZmluZWRcIiA/IGZhbHNlIDogQ09NUElMRVJfREVCVUc7IC8vIERlYnVnIHRoZSBsaWJyYXJ5XG5leHBvcnQgY29uc3QgSkZBQ1RPUllfQ0xJID0gdHlwZW9mIENPTVBJTEVSX0NMSSA9PT0gXCJ1bmRlZmluZWRcIiA/XG4gICAgdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy52ZXJzaW9ucyAmJiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgOiBDT01QSUxFUl9DTEk7XG5cbi8vIE11dGFibGUgY29uZmlndXJhdGlvblxuZXhwb3J0IGNvbnN0IGpGYWN0b3J5Q29uZmlnID0ge1xuICAgIFRyYWl0TG9nOiBKRkFDVE9SWV9ERVYgJiYgIUpGQUNUT1JZX0NMSSB8fCBKRkFDVE9SWV9ERUJVRyxcbiAgICBKRmFjdG9yeUVycm9yOiB7XG4gICAgICAgIGtleXM6IFtcIiQuYWJvdXQubmFtZVwiLCBcIiRkZXZfbmFtZVwiLCBcIiRuYW1lXCIsIFwibmFtZVwiLCBcImlkXCJdXG4gICAgfSxcbiAgICBKRmFjdG9yeVRyYWNlOiBKRkFDVE9SWV9ERVYgJiYgIUpGQUNUT1JZX0NMSVxuICAgICAgICAmJiB7XG4gICAgICAgICAgICBrZXlzOiBbXCIkZGV2X3RyYWNlTG9nXCIsIFwiJGRldl90cmFjZVNvdXJjZVwiXSxcbiAgICAgICAgICAgIGxpYk9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBvZmZsaW5lOiBCb29sZWFuKGdsb2JhbFRoaXMuY2hyb21lKSwgLy8gbG9hZGluZyBzb3VyY2VtYXBzIGlzIG5vdCByZXF1aXJlZCBpbiBjaHJvbWVcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5saW5lTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgIC8vICYmICh2YWx1ZS5maWxlTmFtZSArIHZhbHVlLmZ1bmN0aW9uTmFtZSkudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKCdqZmFjdG9yeScpIDwgMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICBqRmFjdG9yeURldjogSkZBQ1RPUllfREVWXG4gICAgICAgICYmIHtcbiAgICAgICAgICAgIHJlcXVpcmVDb21wYXRpYmlsaXR5OiB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpczoge1xuICAgICAgICAgICAgICAgICAgICB0ZXN0OiAoKSA9PiBnbG9iYWxUaGlzLFxuICAgICAgICAgICAgICAgICAgICBpbmZvOiBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL2dsb2JhbFRoaXNcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmV0Y2g6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVzdDogKCkgPT4gZmV0Y2gsXG4gICAgICAgICAgICAgICAgICAgIGluZm86IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0ZldGNoX0FQSS9Vc2luZ19GZXRjaFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBSZXF1ZXN0OiB7XG4gICAgICAgICAgICAgICAgICAgIHRlc3Q6ICgpID0+IFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIGluZm86IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL1JlcXVlc3RcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJBYm9ydENvbnRyb2xsZXIsIEFib3J0U2lnbmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVzdDogKCkgPT4gbmV3IEFib3J0Q29udHJvbGxlcigpLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgaW5mbzogXCJodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQWJvcnRDb250cm9sbGVyLCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9BYm9ydFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBNdXRhdGlvbk9ic2VydmVyOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlc3Q6ICgpID0+IE11dGF0aW9uT2JzZXJ2ZXIsXG4gICAgICAgICAgICAgICAgICAgIGluZm86IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL011dGF0aW9uT2JzZXJ2ZXJcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxufTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfQ0xJLCBKRkFDVE9SWV9ERVYsIGpGYWN0b3J5Q29uZmlnIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnkgTG9hZGVyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjb25zdCBqRmFjdG9yeUxvYWRlciA9IHtcbiAgICBzZXE6IFtdLFxuICAgIGluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlcSkge1xuICAgICAgICAgICAgbGV0IHNlcSA9IHRoaXMuc2VxO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2VxO1xuICAgICAgICAgICAgZm9yIChsZXQgbW9kdWxlIG9mIHNlcSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxldGUgZ2xvYmFsVGhpcy5qRmFjdG9yeU92ZXJyaWRlXG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uSW5pdChoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuc2VxLnB1c2goaGFuZGxlcilcbiAgICB9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gakZhY3RvcnlEZXYoKSB7XG4gICAgY29uc29sZS5sb2coXCJqRmFjdG9yeSBpcyBydW5uaW5nIGluIGRldmVsb3BtZW50IG1vZGUuXFxuUGVyZm9ybWFuY2VzIHdpbGwgYmUgYWZmZWN0ZWQuXCIpO1xuICAgIGZvciAobGV0IFtuYW1lLCBlbnRyeV0gb2YgT2JqZWN0LmVudHJpZXMoakZhY3RvcnlDb25maWcuakZhY3RvcnlEZXYucmVxdWlyZUNvbXBhdGliaWxpdHkpKSB7XG4gICAgICAgIGxldCBwYXNzO1xuICAgICAgICB0cnkge3Bhc3MgPSBCb29sZWFuKGVudHJ5LnRlc3QoKSl9IGNhdGNoIChpZ25vcmUpIHt9XG4gICAgICAgIGlmICghcGFzcykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBqRmFjdG9yeSBtYXkgcmVxdWlyZSB0aGUgc3VwcG9ydCBvZiBcIiR7bmFtZX1cIiwgJHtlbnRyeS5pbmZvfWApXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBqRmFjdG9yeUluaXQoKSB7XG4gICAgIWpGYWN0b3J5Q29uZmlnLlRyYWl0TG9nICYmIChKRkFDVE9SWV9ERVYgfHwgSkZBQ1RPUllfQ0xJKSAmJiBjb25zb2xlLndhcm4oXCJqRmFjdG9yeTogTE9HUyBSRU1PVkVEXCIpO1xufVxuXG5KRkFDVE9SWV9ERVYgJiYgakZhY3RvcnlMb2FkZXIub25Jbml0KGpGYWN0b3J5RGV2KTtcbmpGYWN0b3J5TG9hZGVyLm9uSW5pdChqRmFjdG9yeUluaXQpOyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgJCBmcm9tIFwianF1ZXJ5XCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnkgSGVscGVyc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBDZW50cmFsaXplIGhlbHBlcnMgYW5kIGV4dGVybmFscyBpbiBvbmUgbW9kdWxlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRoZSBqRmFjdG9yeSBidW5kbGVyIHNob3VsZCBleGNsdWRlIGV4dGVybmFsIGltcG9ydHMgdG8gbGV0IHRoZSBwcm9qZWN0IGRlYWxzIHdpdGggZXh0ZXJuYWwgbGlicmFyaWVzLFxuLy8gYWxsb3dpbmcgY3VzdG9taXplZCBpbXBvcnRzIChDRE4gc2NyaXB0cywgb3B0aW1pemVkIGNvbXBpbGVkIGltcG9ydHMsIG92ZXJyaWRlcy4uLilcbi8vIFNlZTogcm9sbHVwOiBcIm91dHB1dC5nbG9iYWxzXCIgYW5kIFwiZXh0ZXJuYWxcIjsgd2VicGFjazogXCJleHRlcm5hbHNcIlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY29uc3QgalF1ZXJ5ID0gJDtcblxuZXhwb3J0IGNvbnN0IGhlbHBlcl9pc05hdGl2ZSA9IF8uaXNOYXRpdmU7XG5leHBvcnQgY29uc3QgaGVscGVyX2lzU3RyaW5nID0gXy5pc1N0cmluZztcbmV4cG9ydCBjb25zdCBoZWxwZXJfaXNOdW1iZXIgPSBfLmlzTnVtYmVyO1xuZXhwb3J0IGNvbnN0IGhlbHBlcl9pc1BsYWluT2JqZWN0ID0gXy5pc1BsYWluT2JqZWN0O1xuZXhwb3J0IGNvbnN0IGhlbHBlcl9kZWZhdWx0c0RlZXAgPSBfLmRlZmF1bHRzRGVlcDtcbmV4cG9ydCBjb25zdCBoZWxwZXJfbG93ZXJGaXJzdCA9IF8ubG93ZXJGaXJzdDtcbmV4cG9ydCBjb25zdCBoZWxwZXJfZ2V0ID0gXy5nZXQ7XG5leHBvcnQgY29uc3QgaGVscGVyX3RlbXBsYXRlID0gXy50ZW1wbGF0ZTtcbmV4cG9ydCBjb25zdCBoZWxwZXJfY2FtZWxDYXNlID0gXy5jYW1lbENhc2U7XG5cbmV4cG9ydCBjb25zdCBOT09QID0gKCkgPT4ge307XG5leHBvcnQgY29uc3Qgc2V0RnVuY3Rpb25OYW1lID0gKG5hbWUsIGYpID0+IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyB2YWx1ZTogbmFtZSB9KTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgakZhY3RvcnlDb25maWcgfSBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcbmltcG9ydCB7IGpGYWN0b3J5TG9hZGVyIH0gZnJvbSBcIi4vakZhY3RvcnktbG9hZGVyXCI7XG5pbXBvcnQgeyBOT09QIH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5VHJhY2Vcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0gI2xpbWl0YXRpb24jIEVycm9yLnN0YWNrIGlzIG5vdCBzdGFuZGFyZGl6ZWRcbi8vIC0gI2xpbWl0YXRpb24jIEVycm9yLnN0YWNrIGlzIG5vdCBzb3VyY2UtbWFwcGVkXG4vLyAtICNsaW1pdGF0aW9uIyBidWcgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTU4NDI0NFxuLy8gLSAjbGltaXRhdGlvbiMgU3RhY2tUcmFjZS5qcyByZXNvbHZlcyBzb3VyY2VtYXBzLiBVbmZvcnR1bmF0ZWx5LCBpdCBkb2Vzbid0IHdvcmsgd2l0aCBcIndlYnBhY2s6XCIgcHJvdG9jb2xcbi8vICAgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9zdGFja3RyYWNlanMvc3RhY2t0cmFjZS5qcy9pc3N1ZXMvMjA5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL3NvdXJjZS1tYXAvXG4vLyBodHRwczovL3d3dy5zdGFja3RyYWNlanMuY29tL1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL25vdm9jYWluZS9zb3VyY2VtYXBwZWQtc3RhY2t0cmFjZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeVRyYWNlX05PRklMVEVSIHtcblxuICAgIGNvbnN0cnVjdG9yKHsgbGFiZWwsIHN0YWNrVHJhY2VMaW1pdCwga2V5cywgbGliT3B0aW9ucyB9ID0ge30pIHtcbiAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsIHx8IFwiVGhlIHN0YWNrIGhhcyBiZWVuIHByaW50ZWQgaW4gdGhlIGNvbnNvbGVcIjtcbiAgICAgICAgdGhpcy5zdGFja1RyYWNlTGltaXQgPSBzdGFja1RyYWNlTGltaXQgfHwgSW5maW5pdHk7XG4gICAgICAgIHRoaXMua2V5cyA9IGtleXMgfHwgW1wic3RhY2tMb2dcIiwgXCJzdGFja1NvdXJjZVwiXTtcbiAgICAgICAgdGhpcy5saWJPcHRpb25zID0gbGliT3B0aW9ucyB8fCB7fVxuICAgIH1cblxuICAgIGNhcHR1cmVUcmFjZVNvdXJjZShvbWl0QWJvdmVGdW5jdGlvbk5hbWUsIG9taXRTZWxmKSB7XG4gICAgICAgIGxldCBfc3RhY2tUcmFjZUxpbWl0O1xuICAgICAgICBpZiAodGhpcy5zdGFja1RyYWNlTGltaXQpIHtcbiAgICAgICAgICAgIF9zdGFja1RyYWNlTGltaXQgPSBFcnJvci5zdGFja1RyYWNlTGltaXQ7XG4gICAgICAgICAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgPSB0aGlzLnN0YWNrVHJhY2VMaW1pdFxuICAgICAgICB9XG4gICAgICAgIGlmICghb21pdEFib3ZlRnVuY3Rpb25OYW1lKSB7XG4gICAgICAgICAgICBvbWl0QWJvdmVGdW5jdGlvbk5hbWUgPSBcImNhcHR1cmVUcmFjZVNvdXJjZVwiO1xuICAgICAgICAgICAgb21pdFNlbGYgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRyYWNlU291cmNlID0ge1xuICAgICAgICAgICAgc291cmNlOiBuZXcgRXJyb3IoKSxcbiAgICAgICAgICAgIG9taXRBYm92ZUZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgIG9taXRTZWxmXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnN0YWNrVHJhY2VMaW1pdCkge1xuICAgICAgICAgICAgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID0gX3N0YWNrVHJhY2VMaW1pdFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFjZVNvdXJjZVxuICAgIH1cblxuICAgIGF0dGFjaFRyYWNlKHRhcmdldE9iamVjdCwgdHJhY2VTb3VyY2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0cmFjZVNvdXJjZSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdHJhY2VTb3VyY2UgPSB0aGlzLmNhcHR1cmVUcmFjZVNvdXJjZSh0cmFjZVNvdXJjZSB8fCBcImF0dGFjaFRyYWNlXCIsICF0cmFjZVNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdHJhY2UgPSB0cmFjZVNvdXJjZS5zb3VyY2U7XG4gICAgICAgIHRoaXMudG9QcmludGFibGVUcmFjZSh0cmFjZVNvdXJjZSlcbiAgICAgICAgICAgIC50aGVuKHIgPT4gdHJhY2UgPSByKTtcblxuICAgICAgICBsZXQgbG9nID0gKCkgPT4gY29uc29sZS5sb2codHJhY2UpIHx8IHRoaXMubGFiZWw7XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldE9iamVjdCwgdGhpcy5rZXlzWzBdIC8qIHRyYWNlTG9nICovLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIC8vIGhpZGUgdGhlIGZ1bmN0aW9uIGJvZHkgdG8gaW1wcm92ZSByZWFkYWJpbGl0eSBpbiBkZXZ0b29sXG4gICAgICAgICAgICBnZXQ6ICgpID0+IGxvZygpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0T2JqZWN0LCB0aGlzLmtleXNbMV0gLyogdHJhY2VTb3VyY2UgKi8sIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgLy8gaGlkZSB0aGUgdHJhY2VTb3VyY2UgRXJyb3IgdG8gaW1wcm92ZSByZWFkYWJpbGl0eSBpbiBkZXZ0b29sLCBzcGVjaWFsbHkgaW4gRmlyZWZveFxuICAgICAgICAgICAgZ2V0OiAoKSA9PiB0cmFjZVNvdXJjZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0b1ByaW50YWJsZVRyYWNlKHRyYWNlU291cmNlKSB7XG4gICAgICAgIC8vIFNQRUM6IHRoaXMgb3ZlcnJpZGFibGUgbWV0aG9kIHJldHVybnMgYSBwcm9taXNlXG4gICAgICAgIC8vIGJlY2F1c2Ugc3RhY2t0cmFjZSBwYXJzZXJzIG1heSBiZSBhc3luY2hyb25vdXNcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cmFjZVNvdXJjZS5zb3VyY2UpXG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlUcmFjZV9MSUJfU1RBQ0tUUkFDRSBleHRlbmRzIEpGYWN0b3J5VHJhY2VfTk9GSUxURVIge1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgfVxuXG4gICAgdG9QcmludGFibGVUcmFjZSh0cmFjZVNvdXJjZSkge1xuICAgICAgICByZXR1cm4gU3RhY2tUcmFjZS5mcm9tRXJyb3IodHJhY2VTb3VyY2Uuc291cmNlLCB0aGlzLmxpYk9wdGlvbnMpXG4gICAgICAgICAgICAudGhlbih0cmFjZUZyYW1lcyA9PiB7XG5cbiAgICAgICAgICAgICAgICBpZiAodHJhY2VTb3VyY2Uub21pdEFib3ZlRnVuY3Rpb25OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzbGljZSA9IHRyYWNlRnJhbWVzLmZpbmRJbmRleChcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuZnVuY3Rpb25OYW1lICYmIHZhbHVlLmZ1bmN0aW9uTmFtZS5lbmRzV2l0aCh0cmFjZVNvdXJjZS5vbWl0QWJvdmVGdW5jdGlvbk5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzbGljZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFjZVNvdXJjZS5vbWl0U2VsZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlKytcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlRnJhbWVzID0gdHJhY2VGcmFtZXMuc2xpY2Uoc2xpY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyYWNlRnJhbWVzID0gdHJhY2VGcmFtZXNcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih0aGlzLmxpYk9wdGlvbnMuZmlsdGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRUcmFjZUZyYW1lcyh0cmFjZUZyYW1lcylcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZvcm1hdFRyYWNlRnJhbWVzKHRyYWNlRnJhbWVzKSB7XG4gICAgICAgIGxldCBoZWFkZXI7XG4gICAgICAgIGxldCBsaW5lUHJlZml4O1xuICAgICAgICBpZiAodGhpcy5saWJPcHRpb25zLm9mZmxpbmUgJiYgd2luZG93LmNocm9tZSkge1xuICAgICAgICAgICAgLy8gaWYgdGhlIGZhbGxvd2luZyBzeW50YXggaXMgZGV0ZWN0ZWQgb24gQ2hyb21lLFxuICAgICAgICAgICAgLy8gdGhlIGNvbnNvbGUubG9nKCkgd2lsbCBjb252ZXJ0IHRoZSBmaWxlTmFtZXMgdXNpbmcgc291cmNlbWFwc1xuICAgICAgICAgICAgaGVhZGVyID0gXCJFcnJvclxcblwiOyAvLyBub3RlcyB0aGF0IGFueXRoaW5nIGFmdGVyIFwiRXJyb3JcIiBpcyB2YWxpZFxuICAgICAgICAgICAgbGluZVByZWZpeCA9IFwiXFx0YXQgXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoZWFkZXIgPSBcIlwiO1xuICAgICAgICAgICAgbGluZVByZWZpeCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlYWRlciArXG4gICAgICAgICAgICB0cmFjZUZyYW1lc1xuICAgICAgICAgICAgICAgIC5tYXAoc2YgPT4gbGluZVByZWZpeCArIHNmLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIik7XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGpGYWN0b3J5VHJhY2Vcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNvbnN0IGpGYWN0b3J5VHJhY2UgPSB7fTtcblxuakZhY3RvcnlMb2FkZXIub25Jbml0KGZ1bmN0aW9uKCkge1xuICAgIGxldCBjb25maWcgPSBqRmFjdG9yeUNvbmZpZy5KRmFjdG9yeVRyYWNlO1xuICAgIGlmIChjb25maWcgJiYgY29uZmlnLnVzZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgbGV0IGNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdHJ1Y3RvciA9IHR5cGVvZiBjb25maWcudXNlID09PSBcImZ1bmN0aW9uXCIgP1xuICAgICAgICAgICAgY29uZmlnLnVzZSA6XG4gICAgICAgICAgICB0eXBlb2YgU3RhY2tUcmFjZSA9PT0gXCJvYmplY3RcIiA/IEpGYWN0b3J5VHJhY2VfTElCX1NUQUNLVFJBQ0UgOiBKRmFjdG9yeVRyYWNlX05PRklMVEVSO1xuICAgICAgICBpZiAoY29uc3RydWN0b3IgPT09IEpGYWN0b3J5VHJhY2VfTElCX1NUQUNLVFJBQ0UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcImpGYWN0b3J5OiBTdGFjayB0cmFjZSBlbmFibGVkOyBQZXJmb3JtYW5jZSB3aWxsIGJlIGFmZmVjdGVkXCIpXG4gICAgICAgIH1cbiAgICAgICAgakZhY3RvcnlUcmFjZS50cmFjZXIgPSBuZXcgY29uc3RydWN0b3IoY29uZmlnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBqRmFjdG9yeVRyYWNlLnRyYWNlciA9IHtcbiAgICAgICAgICAgIGNhcHR1cmVUcmFjZVNvdXJjZTogTk9PUCxcbiAgICAgICAgICAgIGF0dGFjaFRyYWNlOiBOT09QXG4gICAgICAgIH07XG4gICAgfVxufSk7IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IEpGQUNUT1JZX0RFViwgakZhY3RvcnlDb25maWcgfSBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcbmltcG9ydCB7IGhlbHBlcl9nZXQsIGhlbHBlcl9pc05hdGl2ZSwgaGVscGVyX2xvd2VyRmlyc3QsIGhlbHBlcl90ZW1wbGF0ZSB9IGZyb20gXCIuL2pGYWN0b3J5LWhlbHBlcnNcIjtcbmltcG9ydCB7IGpGYWN0b3J5VHJhY2UgfSBmcm9tIFwiLi9KRmFjdG9yeVRyYWNlXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlFcnJvclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJ1bnNwZWNpZmllZCBlcnJvclwiLCBkYXRhID0gbnVsbCkge1xuICAgICAgICBkYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBkYXRhKTtcbiAgICAgICAgbWVzc2FnZSA9IEpGYWN0b3J5RXJyb3IudG9QcmludGFibGUobWVzc2FnZSwgZGF0YSk7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLiRkYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBkYXRhKTtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZVxuICAgIH1cblxuICAgICogW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIHlpZWxkIHRoaXMubWVzc2FnZTtcbiAgICAgICAgeWllbGQgdGhpcy4kZGF0YTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0SWQob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBvYmplY3RbKGpGYWN0b3J5Q29uZmlnLkpGYWN0b3J5RXJyb3Iua2V5cyB8fCBKRmFjdG9yeUVycm9yLkRFRkFVTFRfS0VZUykuZmluZChrZXkgPT4ge1xuICAgICAgICAgICAgbGV0IHZhbCA9IGhlbHBlcl9nZXQob2JqZWN0LCBrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbCB8fCB2YWwgPT09IDBcbiAgICAgICAgfSldXG4gICAgfVxuXG4gICAgc3RhdGljIHRvUHJpbnRhYmxlRGF0YShkYXRhKSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRGF0YSA9IHt9O1xuICAgICAgICBsZXQgbnY7XG4gICAgICAgIGZvciAobGV0IFtrZXksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHZhbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWwubmFtZSArIFwiKClcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBcIm51bGxcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWwudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKChudiA9IEpGYWN0b3J5RXJyb3IuZ2V0SWQodmFsKSkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gJ1wiJyArIG52ICsgJ1wiJ1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWxwZXJfaXNOYXRpdmUodmFsLnRvU3RyaW5nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG52ID0gSlNPTi5zdHJpbmdpZnkodmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gbnYubGVuZ3RoID4gSkZhY3RvcnlFcnJvci5KU09OX01BWFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudi5zdWJzdHJpbmcoMCwgSkZhY3RvcnlFcnJvci5KU09OX01BWCkgKyBcIlsuLi5dXCIgOiBudjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IFwiW29iamVjdCBcIiArIHZhbC5jb25zdHJ1Y3Rvci5uYW1lICsgXCJdXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgICAgICAgICB2YWwgPSAnXCInICsgdmFsICsgJ1wiJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gU3RyaW5nKHZhbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRlbXBsYXRlRGF0YVtrZXldID0gdmFsXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlRGF0YVxuICAgIH1cblxuICAgIHN0YXRpYyB0b1ByaW50YWJsZSh0ZW1wbGF0ZSwgZGF0YSkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZU1lc3NhZ2UgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgcGFydCBvZiB0ZW1wbGF0ZS5zcGxpdChcIjtcIikpIHtcbiAgICAgICAgICAgIGxldCBwbGFjZWhvbGRlcjtcbiAgICAgICAgICAgIGxldCBSRV9QTEFDRUhPTERFUiA9IEpGYWN0b3J5RXJyb3IuUkVfUExBQ0VIT0xERVI7XG4gICAgICAgICAgICBSRV9QTEFDRUhPTERFUi5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgaWYgKChwbGFjZWhvbGRlciA9IFJFX1BMQUNFSE9MREVSLmV4ZWMocGFydCkpKSB7XG4gICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGxhY2Vob2xkZXJbMV0gJiYgcGxhY2Vob2xkZXJbMV0gaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVNZXNzYWdlLnB1c2gocGFydC50cmltKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gd2hpbGUgKChwbGFjZWhvbGRlciA9IFJFX1BMQUNFSE9MREVSLmV4ZWMocGFydCkpICE9PSBudWxsKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU1lc3NhZ2UucHVzaChwYXJ0LnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlbHBlcl9sb3dlckZpcnN0KGhlbHBlcl90ZW1wbGF0ZSh0ZW1wbGF0ZU1lc3NhZ2Uuam9pbihcIjsgXCIpKShKRmFjdG9yeUVycm9yLnRvUHJpbnRhYmxlRGF0YShkYXRhKSkpO1xuICAgIH1cbn1cblxuSkZhY3RvcnlFcnJvci5KU09OX01BWCA9IDQwO1xuSkZhY3RvcnlFcnJvci5ERUZBVUxUX0tFWVMgPSBbXCJuYW1lXCIsIFwiaWRcIl07XG5KRmFjdG9yeUVycm9yLlJFX1BMQUNFSE9MREVSID0gL1xcJHsoW159XSspfS9nO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGpGYWN0b3J5RXJyb3Jcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGxldCBqRmFjdG9yeUVycm9yID0gbmV3IFByb3h5KEpGYWN0b3J5RXJyb3IsIHtcbiAgICBzZXQ6IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgICAgIGxldCB7IHRlbXBsYXRlIH0gPSB2YWx1ZTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWICYmIHRhcmdldFtwcm9wZXJ0eV0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImFscmVhZHkgZGVjbGFyZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXRbcHJvcGVydHldID0gY2xhc3MgZXh0ZW5kcyBKRmFjdG9yeUVycm9yIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGRhdGEsIHRyYWNlU291cmNlKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIodGVtcGxhdGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGpGYWN0b3J5VHJhY2UudHJhY2VyLmF0dGFjaFRyYWNlKHRoaXMuJGRhdGEsIHRyYWNlU291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2F1dGlvbjogQ2hyb21lIGF1dG9tYXRpY2FsbHkgcmVzb2x2ZXMgc291cmNlbWFwIHdoZW4gbG9nZ2luZyBlcnJvcnNcbiAgICAgICAgLy8gYnV0IG9ubHkgaWYgdGhlIGVycm9yIG5hbWUgc3RhcnRzIHdpdGggXCJFcnJvclwiXG4gICAgICAgIHRhcmdldFtwcm9wZXJ0eV0ucHJvdG90eXBlLm5hbWUgPSBcIkVycm9yIGpGYWN0b3J5RXJyb3IuXCIgKyBwcm9wZXJ0eTtcblxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbn0pO1xuXG5qRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUgPSB7IHRlbXBsYXRlOiBcImludmFsaWQgdmFsdWUgZm9yICR7dGFyZ2V0fTsgUmVhc29uOiAke3JlYXNvbn07IEdpdmVuOiAke2dpdmVufVwiIH07XG5qRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCA9IHsgdGVtcGxhdGU6IFwiaW52YWxpZCBjYWxsICR7dGFyZ2V0fTsgUmVhc29uOiAke3JlYXNvbn07IE93bmVyOiAke293bmVyfVwiIH07XG5qRmFjdG9yeUVycm9yLlBST01JU0VfRVhQSVJFRCA9IHsgdGVtcGxhdGU6IFwiZXhwaXJlZCBwcm9taXNlICR7dGFyZ2V0fTsgUmVhc29uOiAke3JlYXNvbn1cIiB9O1xuakZhY3RvcnlFcnJvci5SRVFVRVNUX0VSUk9SID0geyB0ZW1wbGF0ZTogXCJlcnJvciByZXF1ZXN0aW5nICR7dGFyZ2V0fTsgUmVhc29uOiAke3JlYXNvbn07IE93bmVyOiAke293bmVyfVwiIH07XG5qRmFjdG9yeUVycm9yLktFWV9EVVBMSUNBVEVEID0geyB0ZW1wbGF0ZTogXCJkdXBsaWNhdGVkIGtleSBmb3IgJHt0YXJnZXR9OyBHaXZlbjogJHtnaXZlbn1cIiB9O1xuakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyA9IHsgdGVtcGxhdGU6IFwibWlzc2luZyBrZXkgZm9yICR7dGFyZ2V0fTsgR2l2ZW46ICR7Z2l2ZW59XCIgfTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgakZhY3RvcnlFcnJvciB9IGZyb20gXCIuL0pGYWN0b3J5RXJyb3JcIjtcbmltcG9ydCB7IGhlbHBlcl9pc051bWJlciwgaGVscGVyX2lzUGxhaW5PYmplY3QsIGhlbHBlcl9pc1N0cmluZyB9IGZyb20gXCIuL2pGYWN0b3J5LWhlbHBlcnNcIjtcbmltcG9ydCB7IGpGYWN0b3J5TG9hZGVyIH0gZnJvbSBcIi4vakZhY3RvcnktbG9hZGVyXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlFeHBlY3Rcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQSBzbWFsbCBpbnB1dC9vdXRwdXQgdmFsaWRhdGlvbiB0b29sXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQWxwaGEsIERyYWZ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBAcmV0dXJuIHsqfEpGYWN0b3J5RXhwZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gSkZhY3RvcnlFeHBlY3QobGFiZWwsIHZhbHVlKSB7XG4gICAgaWYgKG5ldy50YXJnZXQpIHtcbiAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKRmFjdG9yeUV4cGVjdChsYWJlbCwgdmFsdWUpXG4gICAgfVxufVxuXG5jb25zdCBlcnJvciA9IGZ1bmN0aW9uIGpGYWN0b3J5VGhyb3cobGFiZWwsIHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuSU5WQUxJRF9WQUxVRSh7XG4gICAgICAgIHRhcmdldDogbGFiZWwsXG4gICAgICAgIHJlYXNvbjogbWVzc2FnZSxcbiAgICAgICAgZ2l2ZW46IHZhbHVlXG4gICAgfSlcbn07XG5cbmNvbnN0IHN0YXRpY01ldGhvZHMgPSB7XG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RVbmRlZmluZWRcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90VW5kZWZpbmVkXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgbm90VW5kZWZpbmVkKGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcImNhbm5vdCBiZSB1bmRlZmluZWRcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG5vdEVtcHR5U3RyaW5nXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG5vdEVtcHR5U3RyaW5nXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgbm90RW1wdHlTdHJpbmcobGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcImNhbm5vdCBiZSBlbXB0eSBzdHJpbmdcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG5vdEZhbHN5XG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG5vdEZhbHN5XG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgbm90RmFsc3kobGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgJ2Nhbm5vdCBiZSBhIGZhbHN5IHZhbHVlICh1bmRlZmluZWQsIG51bGwsIE5hTiwgMCwgXCJcIiknKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdmFsaWRTcGFjZXNcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdmFsaWRTcGFjZXNcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB2YWxpZFNwYWNlcyhsYWJlbCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZS5yZXBsYWNlIHx8IHZhbHVlLnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnRyaW0oKSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJpbnZhbGlkIHNwYWNlIGRlbGltaXRlcnNcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG1hdGNoUmVnXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7UmVnRXhwfSByZWdcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBtYXRjaFJlZ1xuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG1hdGNoUmVnKGxhYmVsLCB2YWx1ZSwgcmVnKSB7XG4gICAgICAgIGlmICghcmVnLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsICdzdHJpbmcgXCInICsgdmFsdWUgKyAnXCIgbXVzdCBtYXRjaCAnICsgcmVnKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0gey4uLip9IGV4cGVjdGVkXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIHR5cGUobGFiZWwsIHZhbHVlLCAuLi5leHBlY3RlZCkge1xuICAgICAgICBsZXQgbmFtZSwgb2sgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgY29uc3RydWN0b3Igb2YgZXhwZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChjb25zdHJ1Y3RvciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBcIk51bGxcIlxuICAgICAgICAgICAgfSBlbHNlIGlmIChcIm5hbWVcIiBpbiBjb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBjb25zdHJ1Y3Rvci5uYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdGVzdCA9IHN0YXRpY01ldGhvZHNbXCJ0eXBlXCIgKyBuYW1lXTtcbiAgICAgICAgICAgIGlmICh0ZXN0KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtvayA9IHRlc3QobGFiZWwsIHZhbHVlLyosIGUqLyl9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvayA9IHZhbHVlIGluc3RhbmNlb2YgY29uc3RydWN0b3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvaykgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9rKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBbXCIgKyBleHBlY3RlZC5tYXAoZSA9PiBlLm5hbWUpLmpvaW4oXCIsIFwiKSArIFwiXVwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZU51bGxcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZU51bGxcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlTnVsbChsYWJlbCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBiZSBudWxsXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlQm9vbGVhblxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlQm9vbGVhblxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIHR5cGVCb29sZWFuKGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgIT09IHRydWUgJiYgdmFsdWUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBiZSBhIGJvb2xlYW5cIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVTdHJpbmdcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZVN0cmluZ1xuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIHR5cGVTdHJpbmcobGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICghaGVscGVyX2lzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgYSBzdHJpbmdcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVOdW1iZXJcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZU51bWJlclxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIHR5cGVOdW1iZXIobGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICghaGVscGVyX2lzTnVtYmVyKHZhbHVlKSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgYSBudW1iZXJcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVGdW5jdGlvblxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlRnVuY3Rpb25cbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlRnVuY3Rpb24obGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICghKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgYSBmdW5jdGlvblwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZVBsYWluT2JqZWN0XG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVQbGFpbk9iamVjdFxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIHR5cGVQbGFpbk9iamVjdChsYWJlbCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCFoZWxwZXJfaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIGEgcGxhaW4gb2JqZWN0XCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBlcXVhbFxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0geyp9IGV4cGVjdGVkXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgZXF1YWxcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBlcXVhbChsYWJlbCwgdmFsdWUsIC4uLmV4cGVjdGVkKSB7XG4gICAgICAgIGxldCBvayA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBlIG9mIGV4cGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAoKG9rID0gdmFsdWUgPT09IGUpKSBicmVha1xuICAgICAgICB9XG4gICAgICAgIGlmICghb2spIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIG9uZSBvZiBbXCIgKyBleHBlY3RlZCArIFwiXVwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGVxdWFsSW5cbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGV4cGVjdGVkXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgZXF1YWxJblxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIGVxdWFsSW4obGFiZWwsIHZhbHVlLCBleHBlY3RlZCkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWQpKSB7XG4gICAgICAgICAgICBleHBlY3RlZCA9IE9iamVjdC52YWx1ZXMoZXhwZWN0ZWQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFleHBlY3RlZC5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIG9uZSBmcm9tIFtcIiArIGV4cGVjdGVkLmpvaW4oXCIsIFwiKSArIFwiXVwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgcHJvcGVydGllc1xuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBleHBlY3RlZFxuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHByb3BlcnRpZXNcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBwcm9wZXJ0aWVzKGxhYmVsLCB2YWx1ZSwgZXhwZWN0ZWQpIHtcbiAgICAgICAgZm9yIChsZXQgbmFtZSBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KGxhYmVsICsgJywgcHJvcGVydHkgbmFtZSBcIicgKyBuYW1lICsgJ1wiJywgbmFtZSkuZXF1YWxJbihleHBlY3RlZClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHdyaXRhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB3cml0YWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIHdyaXRhYmxlKGxhYmVsLCB2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmICghT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KS53cml0YWJsZSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgd3JpdGFibGVcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG5vdFdyaXRhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RXcml0YWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG5vdFdyaXRhYmxlKGxhYmVsLCB2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpLndyaXRhYmxlKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBub3QgYmUgd3JpdGFibGVcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGVudW1lcmFibGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGVudW1lcmFibGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBlbnVtZXJhYmxlKGxhYmVsLCB2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBiZSBlbnVtZXJhYmxlXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RFbnVtZXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RFbnVtZXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgbm90RW51bWVyYWJsZShsYWJlbCwgdmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBub3QgYmUgZW51bWVyYWJsZVwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgY29uZmlndXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBjb25maWd1cmFibGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBjb25maWd1cmFibGUobGFiZWwsIHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKCFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpLmNvbmZpZ3VyYWJsZSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgY29uZmlndXJhYmxlXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RDb25maWd1cmFibGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG5vdENvbmZpZ3VyYWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG5vdENvbmZpZ3VyYWJsZShsYWJlbCwgdmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KS5jb25maWd1cmFibGUpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IG5vdCBiZSBjb25maWd1cmFibGVcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHJlc2VydmVkUHJvcGVydHlcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHJlc2VydmVkUHJvcGVydHlcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICByZXNlcnZlZFByb3BlcnR5KGxhYmVsLCB2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmIChrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJpcyBhIHJlc2VydmVkIHByb3BlcnR5XCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG59O1xuXG5qRmFjdG9yeUxvYWRlci5vbkluaXQoZnVuY3Rpb24oKSB7XG4gICAgT2JqZWN0LmFzc2lnbihKRmFjdG9yeUV4cGVjdCwgc3RhdGljTWV0aG9kcyk7XG4gICAgLy8gR2VuZXJhdGUgbWVtYmVycyBmcm9tIHN0YXRpYyBtZXRob2RzXG4gICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHN0YXRpY01ldGhvZHMpKSB7XG4gICAgICAgIEpGYWN0b3J5RXhwZWN0LnByb3RvdHlwZVtuYW1lXSA9XG4gICAgICAgICAgICBmdW5jdGlvbiBjYWxsU3RhdGljKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBKRmFjdG9yeUV4cGVjdFtuYW1lXSh0aGlzLmxhYmVsLCB0aGlzLnZhbHVlLCAuLi5hcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICAgICAgfVxuICAgIH1cbn0pOyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRkFDVE9SWV9ERVYsIGpGYWN0b3J5Q29uZmlnIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlUcmFpdHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5VHJhaXRzIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0pGYWN0b3J5Q29yZU9iamVjdHxPYmplY3R9IGNhbGxlckluc3RhbmNlXG4gICAgICogQHBhcmFtIHtDbGFzc3xGdW5jdGlvbn0gY2FsbGVyQ29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNhbGxlckluc3RhbmNlLCBjYWxsZXJDb25zdHJ1Y3Rvciwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7SkZhY3RvcnlDb3JlT2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWxsZXJJbnN0YW5jZSA9IGNhbGxlckluc3RhbmNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q2xhc3N8RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhbGxlckNvbnN0cnVjdG9yID0gY2FsbGVyQ29uc3RydWN0b3I7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cblxuICAgIHVzZSh0cmFpdCwgLi4udHJhaXRBcmdzKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlUcmFpdHModHJhaXQpXCIsIHRyYWl0KS50eXBlRnVuY3Rpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNhbGxlckNvbnN0cnVjdG9yIGlzIG5vdCBhbHdheXMgdGhlIGNhbGxlckluc3RhbmNlLmNvbnN0cnVjdG9yOlxuICAgICAgICAvLyBUaGUgVHJhaXQgY2FuIGJlIGluamVjdGVkIGluIGFuIGluaGVyaXRlZCBjb25zdHJ1Y3RvciBmcm9tIHN1cGVyKCkgYXQgY2FsbCB0aW1lXG4gICAgICAgIGxldCB7IGNhbGxlckluc3RhbmNlLCBjYWxsZXJDb25zdHJ1Y3RvciB9ID0gdGhpcztcblxuICAgICAgICAvLyBEZXRlY3QgaW1wcm9wZXIgZHVwbGljYXRpb24gKGNhbiBiZSBhIHRyYWl0IGFscmVhZHkgY2FsbGVkIGJ5IGEgc3VwZXIgY2xhc3MpXG4gICAgICAgIGxldCBjYWNoZSA9IEpGYWN0b3J5VHJhaXRzLkNBQ0hFLmdldChjYWxsZXJJbnN0YW5jZSk7XG5cbiAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgICBpZiAoY2FjaGUuaGFzKHRyYWl0KSkge1xuICAgICAgICAgICAgICAgIGlmIChqRmFjdG9yeUNvbmZpZy5UcmFpdExvZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYCR7dHJhaXQubmFtZX0gYWxyZWFkeSBjYWxsZWQgb25gLCBjYWxsZXJJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWNoZS5hZGQodHJhaXQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBKRmFjdG9yeVRyYWl0cy5DQUNIRS5zZXQoY2FsbGVySW5zdGFuY2UsIG5ldyBXZWFrU2V0KFt0cmFpdF0pKVxuICAgICAgICB9XG5cbiAgICAgICAgIWNhbGxlckNvbnN0cnVjdG9yLkpGYWN0b3J5VHJhaXQgJiYgKGNhbGxlckNvbnN0cnVjdG9yLkpGYWN0b3J5VHJhaXQgPSBuZXcgV2Vha1NldCk7XG5cbiAgICAgICAgaWYgKCFjYWxsZXJDb25zdHJ1Y3Rvci5KRmFjdG9yeVRyYWl0Lmhhcyh0cmFpdCkpIHtcbiAgICAgICAgICAgIGNhbGxlckNvbnN0cnVjdG9yLkpGYWN0b3J5VHJhaXQuYWRkKHRyYWl0KTtcbiAgICAgICAgICAgIHRoaXMuZXhwb3J0KHRyYWl0LnByb3RvdHlwZSwgY2FsbGVyQ29uc3RydWN0b3IucHJvdG90eXBlKTtcbiAgICAgICAgICAgIHRoaXMuZXhwb3J0KHRyYWl0LCBjYWxsZXJDb25zdHJ1Y3RvciwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbiBhIFRyYWl0LmNvbnN0cnVjdG9yKGNhbGxlckluc3RhbmNlLCAuLi5hcmdzKSA6IHRoaXMgIT0gY2FsbGVySW5zdGFuY2VcbiAgICAgICAgLy8gSW4gYSBUcmFpdC50cmFpdF9jb25zdHJ1Y3RvciguLi5hcmdzKSA6IHRoaXMgPT0gY2FsbGVySW5zdGFuY2UgKHRyYWl0cyBpcyBpbmplY3RlZCBhbmQgYXZhaWxhYmxlKVxuXG4gICAgICAgIC8vIFRyYWl0cyBhcmUgaW5qZWN0aW9ucy4gVGhleSBhcmUgbm90IGR5bmFtaWMgaW5oZXJpdGFuY2UuXG4gICAgICAgIC8vIFNvIHRoZSBUcmFpdC5jb25zdHJ1Y3RvcigpIGRvZXNuJ3Qgc2hhcmUgdGhlIFwidGhpc1wiIGtleXdvcmQgd2l0aCBpdHMgY2FsbGVyLlxuXG4gICAgICAgIC8vICNsaW1pdGF0aW9uIyBObyB3YXkgdG8gYmluZCBhbiBFUzYgY2xhc3MgY29uc3RydWN0b3IgdG8gYW4gb2JqZWN0XG4gICAgICAgIC8vID0+IEltcGxlbWVudGVyIGNhbiBkZWZpbmUgYSBcInRyYWl0X2NvbnN0cnVjdG9yKClcIiB0aGF0IGlzIGF1dG9tYXRpY2FsbHkgYm91bmQgdG8gXCJjYWxsZXJJbnN0YW5jZVwiXG4gICAgICAgIC8vIGFuZCBjYWxsZWQgYWZ0ZXIgdGhlIG5hdGl2ZSB0cmFpdCBjb25zdHJ1Y3RvcigpLlxuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuZXctY2FwXG4gICAgICAgIGxldCB0cmFpdEluc3RhbmNlID0gbmV3IHRyYWl0KGNhbGxlckluc3RhbmNlLCAuLi50cmFpdEFyZ3MpO1xuICAgICAgICBpZiAodHJhaXRJbnN0YW5jZS50cmFpdF9jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgdHJhaXRJbnN0YW5jZS50cmFpdF9jb25zdHJ1Y3Rvci5hcHBseShjYWxsZXJJbnN0YW5jZSwgdHJhaXRBcmdzKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgZXhwb3J0KHNvdXJjZSwgdGFyZ2V0LCBpc1N0YXRpYykge1xuICAgICAgICBsZXQgc291cmNlRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSk7XG5cbiAgICAgICAgZm9yIChsZXQgcHJvcGVydHlOYW1lIG9mIE9iamVjdC5rZXlzKHNvdXJjZURlc2NyaXB0b3IpKSB7XG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gSkZhY3RvcnlUcmFpdHMuZ2V0UHJlZml4KHByb3BlcnR5TmFtZSk7XG5cbiAgICAgICAgICAgIGlmIChKRmFjdG9yeVRyYWl0cy5nZXRUYXJnZXQocHJvcGVydHlOYW1lLCB0YXJnZXQsIHByZWZpeCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgcHJvcGVydHlEZXNjcmlwdG9yID0gc291cmNlRGVzY3JpcHRvcltwcm9wZXJ0eU5hbWVdO1xuICAgICAgICAgICAgICAgIGxldCBwYXJzZWQgPSAodGhpcy5vcHRpb25zLnBhcnNlciB8fCBKRmFjdG9yeVRyYWl0cy5kZWZhdWx0UGFyc2VyKShcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eURlc2NyaXB0b3IsIHNvdXJjZSwgdGFyZ2V0LCBpc1N0YXRpY1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZCkge1xuICAgICAgICAgICAgICAgICAgICAoeyBwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvciB9ID0gcGFyc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eURlc2NyaXB0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UGFyc2VyKHByb3BlcnR5TmFtZSwgcHJvcGVydHlEZXNjcmlwdG9yLCBzb3VyY2UsIHRhcmdldCwgaXNTdGF0aWMpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gcHJvcGVydHlEZXNjcmlwdG9yLnZhbHVlO1xuXG4gICAgICAgIGlmIChpc1N0YXRpYykge3JldHVybiBudWxsfSAvLyBkb24ndCBleHBvcnQgc3RhdGljIG1lbWJlcnNcblxuICAgICAgICBpZiAocHJvcGVydHlOYW1lIGluIHRhcmdldCkgeyAvLyBza2lwIGV4aXN0aW5nIHByb3BlcnRpZXNcbiAgICAgICAgICAgIGlmIChqRmFjdG9yeUNvbmZpZy5UcmFpdExvZykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgYCR7dGFyZ2V0LmNvbnN0cnVjdG9yLm5hbWV9PiBza2lwcGluZyBleHBvcnQgb2YgZXhpc3RpbmcgcHJvcGVydHkgXCIke3Byb3BlcnR5TmFtZX1cImAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7IC8vIHByZXZlbnQgc2hhcmVkIG9iamVjdCBleHBvcnRhdGlvblxuICAgICAgICAgICAgaWYgKGpGYWN0b3J5Q29uZmlnLlRyYWl0TG9nKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICBgJHt0YXJnZXQuY29uc3RydWN0b3IubmFtZX0+IHNraXBwaW5nIGV4cG9ydCBvZiBzaGFyZWQgb2JqZWN0IFwiJHtwcm9wZXJ0eU5hbWV9XCJgLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHByb3BlcnR5TmFtZSwgcHJvcGVydHlEZXNjcmlwdG9yIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0UHJlZml4KGtleSkge1xuICAgICAgICBsZXQgc3BsaXQgPSBrZXkuc3BsaXQoXCJfXCIpO1xuICAgICAgICByZXR1cm4gc3BsaXQubGVuZ3RoID4gMSA/IHNwbGl0WzBdIDogbnVsbDtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0VGFyZ2V0KGtleSwgdGFyZ2V0LCBwcmVmaXgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgSkZhY3RvcnlUcmFpdHMuRVhDTFVERVMuaW5jbHVkZXMoa2V5KSB8fFxuICAgICAgICAgICAgcHJlZml4ID09PSBcInRyYWl0XCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRhcmdldFxuICAgIH1cbn1cblxuSkZhY3RvcnlUcmFpdHMuQ0FDSEUgPSBuZXcgV2Vha01hcDtcbkpGYWN0b3J5VHJhaXRzLkVYQ0xVREVTID0gW1wiY29uc3RydWN0b3JcIiwgXCJwcm90b3R5cGVcIiwgXCJsZW5ndGhcIiwgXCJzaXplXCJdOyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRkFDVE9SWV9ERVYsIGpGYWN0b3J5Q29uZmlnIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBqRmFjdG9yeUVycm9yIH0gZnJvbSBcIi4vSkZhY3RvcnlFcnJvclwiO1xuaW1wb3J0IHsgc2V0RnVuY3Rpb25OYW1lIH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RnVuY3Rpb25Db21wb3NlclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9XG5cbiAgICAqIFtTeW1ib2wuaXRlcmF0b3JdKGhhbmRsZXJHcm91cHMgPSBbXSkge1xuXG4gICAgICAgIGlmICghaGFuZGxlckdyb3Vwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGhhbmRsZXJHcm91cHMgPSBPYmplY3Qua2V5cyh0aGlzLmhhbmRsZXJzKVxuICAgICAgICB9XG4gICAgICAgIGlmICghaGFuZGxlckdyb3Vwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGhhbmRsZXJHcm91cHMgPSBbXCJkZWZhdWx0XCJdXG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBoYW5kbGVyR3JvdXAgb2YgaGFuZGxlckdyb3Vwcykge1xuICAgICAgICAgICAgaWYgKGhhbmRsZXJHcm91cCBpbiB0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgeWllbGQqIHRoaXMuaGFuZGxlcnNbaGFuZGxlckdyb3VwXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIEByZXR1cm4ge0pGYWN0b3J5RnVuY3Rpb25Db21wb3Nlcn0gKi9cbiAgICBmaXJzdChoYW5kbGVyR3JvdXAsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIFtoYW5kbGVyR3JvdXAsIGhhbmRsZXJdID0gW1wiZGVmYXVsdFwiLCBoYW5kbGVyR3JvdXBdXG4gICAgICAgIH1cbiAgICAgICAgKHRoaXMuaGFuZGxlcnNbaGFuZGxlckdyb3VwXSB8fCAodGhpcy5oYW5kbGVyc1toYW5kbGVyR3JvdXBdID0gW10pKS51bnNoaWZ0KGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIC8qKiBAcmV0dXJuIHtKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXJ9ICovXG4gICAgbGFzdChoYW5kbGVyR3JvdXAsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIFtoYW5kbGVyR3JvdXAsIGhhbmRsZXJdID0gW1wiZGVmYXVsdFwiLCBoYW5kbGVyR3JvdXBdXG4gICAgICAgIH1cbiAgICAgICAgKHRoaXMuaGFuZGxlcnNbaGFuZGxlckdyb3VwXSB8fCAodGhpcy5oYW5kbGVyc1toYW5kbGVyR3JvdXBdID0gW10pKS5wdXNoKGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIC8qKiBAcmV0dXJuIHsoZnVuY3Rpb24oKTogKikgJiB7Y29tcG9zZXI6IEpGYWN0b3J5RnVuY3Rpb25Db21wb3Nlcn19ICovXG4gICAgY29tcG9zZSguLi5oYW5kbGVyR3JvdXBzKSB7XG4gICAgICAgIGxldCBjb21wb3NlciA9IHRoaXM7XG4gICAgICAgIGxldCBjb21wb3NpdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICEhISEtLSEhISEtLSEhISEtLSEhISEtLSEhISEtLSEhISEtLSEhISEtLSEhISEgLy9cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIHdyYXBwZWQgZnVuY3Rpb24gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgIFlvdSBzaG91bGQgQmxhY2tib3ggSkZhY3RvcnlGdW5jdGlvbi5tanMgICAgLy9cbiAgICAgICAgICAgIC8vICAgIHRvIHNpbXBsaWZ5IGRlYnVnZ2luZyAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICEhISEtLSEhISEtLSEhISEtLSEhISEtLSEhISEtLSEhISEtLSEhISEtLSEhISEgLy9cbiAgICAgICAgICAgIGxldCBjb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgIGNhbmNlbGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBBcnJheS5mcm9tKGFyZ3VtZW50cyksXG4gICAgICAgICAgICAgICAgcmVzdWx0OiB1bmRlZmluZWRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQgaXRlcmF0b3IgPSBjb21wb3NlcltTeW1ib2wuaXRlcmF0b3JdKGhhbmRsZXJHcm91cHMpO1xuICAgICAgICAgICAgbGV0IGl0ZXJhdGlvbiA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgIHJldHVybiBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXIuY29tcG9zaXRlX2l0ZXJhdG9yKFxuICAgICAgICAgICAgICAgIHRoaXMgLyogcHJlc2VydmUgY2FsbCBzY29wZSAqLywgY29udGV4dCwgaXRlcmF0aW9uLCBpdGVyYXRvcilcbiAgICAgICAgfTtcbiAgICAgICAgY29tcG9zaXRlLmNvbXBvc2VyID0gY29tcG9zZXI7XG4gICAgICAgIHJldHVybiBjb21wb3NpdGU7XG4gICAgfVxuXG4gICAgLy8gU1BFQzogQ29tcG9zaXRlIGZ1bmN0aW9ucyByZXR1cm5zIHByb21pc2UgKm9ubHkqIGlmIGF0IGxlYXN0XG4gICAgLy8gb25lIGhhbmRsZXIgcmV0dXJucyBhIHByb21pc2UgKGFzeW5jIGZ1bmN0aW9uIG9yIHByb21pc2UgcmV0dXJuKVxuICAgIC8vIFNvIHdlIGNhbm5vdCBqdXN0IGl0ZXJhdGUgdXNpbmcgYW4gXCJhd2FpdCBmb3Igb2ZcIlxuICAgIHN0YXRpYyBjb21wb3NpdGVfaXRlcmF0b3Ioc2NvcGUsIGNvbnRleHQsIGl0ZXJhdGlvbiwgaGFuZGxlcnMpIHtcbiAgICAgICAgbGV0IGhhbmRsZXIsXG4gICAgICAgICAgICByZXN1bHQ7XG5cbiAgICAgICAgd2hpbGUgKCFjb250ZXh0LmNhbmNlbGVkICYmICFpdGVyYXRpb24uZG9uZSkge1xuICAgICAgICAgICAgaGFuZGxlciA9IGl0ZXJhdGlvbi52YWx1ZTtcbiAgICAgICAgICAgIGlmIChzY29wZSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIuY2FsbChzY29wZSwgY29udGV4dCwgLi4uY29udGV4dC5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBoYW5kbGVyKGNvbnRleHQsIC4uLmNvbnRleHQucGFyYW1ldGVycylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZXJhdGlvbiA9IGhhbmRsZXJzLm5leHQoKTsgLy8gcHJlcGFyZXMgbmV4dCBpdGVyYXRpb24gdG8ga25vdyBpZiBcImRvbmVcIlxuICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlcmF0aW9uLmRvbmVcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBvZiBsYXN0IGhhbmRsZXIgcmV0dXJuaW5nIGEgcHJvbWlzZVxuICAgICAgICAgICAgICAgICAgICAvLyAjbGltaXRhdGlvbiMgbm93IHdheSB0byBkZXRlY3QgaWYgdGhlIHByb21pc2UgaXMgdGhlIHJldHVybmVkIHZhbHVlIG9yIGFuIFwiYXdhaXRcIlxuICAgICAgICAgICAgICAgICAgICAvLyAod2UgZG9uJ3Qgd2FudCB0byBjaGFuZ2UgdGhlIHZhbHVlIG9mIGNvbnRleHQucmVzdWx0IGR1cmluZyBhIHBlbmRpbmcgaGFuZGxlcilcbiAgICAgICAgICAgICAgICAgICAgLy8gPT4gbmF0aXZlIFByb21pc2UgYXJlIGFsd2F5cyBjaGFpbmVkXG4gICAgICAgICAgICAgICAgICAgICYmIHJlc3VsdC5jb25zdHJ1Y3RvciAhPT0gUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnJlc3VsdCA9IHJlc3VsdCAvLyB3ZSBjYW4gc2FmZWx5IHNldCB0aGUgbmV3IHJlc3VsdFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbihcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZ1bmN0aW9uTmFtZShbaGFuZGxlci5uYW1lLCBcImNvbXBvc2l0ZUFzeW5jSGFuZGxlclwiXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpGYWN0b3J5RnVuY3Rpb25Db21wb3Nlci5jb21wb3NpdGVfaXRlcmF0b3Ioc2NvcGUsIGNvbnRleHQsIGl0ZXJhdGlvbiwgaGFuZGxlcnMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5yZXN1bHQgPSByZXN1bHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGV4dC5yZXN1bHRcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZSAtIEV4cGlyYWJsZSBGdW5jdGlvbiBQYXR0ZXJuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGZ1bmN0aW9uIGpGYWN0b3J5RnVuY3Rpb25FeHBpcmFibGUob3JpZ2luYWxIYW5kbGVyKSB7XG4gICAgcmV0dXJuIG5ldyBKRmFjdG9yeUZ1bmN0aW9uRXhwaXJhYmxlKG9yaWdpbmFsSGFuZGxlcikuY29tcG9zZSgpXG59XG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUZ1bmN0aW9uRXhwaXJhYmxlIHtcblxuICAgIGNvbnN0cnVjdG9yKG9yaWdpbmFsSGFuZGxlcikge1xuICAgICAgICB0aGlzLm9yaWdpbmFsSGFuZGxlciA9IG9yaWdpbmFsSGFuZGxlcjtcbiAgICAgICAgdGhpcy5leHBpcmVkQ2FsbHMgPSAwO1xuICAgICAgICB0aGlzLmNvbXBvc2VyID0gbmV3IEpGYWN0b3J5RnVuY3Rpb25Db21wb3NlcjtcblxuICAgICAgICBsZXQgaXNFeHBpcmVkID0gdGhpcy5jb21wb3Nlci5jb21wb3NlKFwiY29uZGl0aW9uc1wiKTtcbiAgICAgICAgbGV0IGV4cGlyYWJsZSA9IHRoaXM7XG4gICAgICAgIGxldCBleHBpcmVkO1xuXG4gICAgICAgIC8vIGNhbm5vdCB1c2UgYSByZWFsIGFjY2Vzc29yIGhlcmUgKGNvbmRpdGlvbnMgY2FuIGJlIHNjb3BlZCwgc28gaXNFeHBpcmVkIHRvbylcbiAgICAgICAgdGhpcy5pc0V4cGlyZWQgPSBzY29wZSA9PiBleHBpcmVkIHx8IGlzRXhwaXJlZC5jYWxsKHNjb3BlKSB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXRFeHBpcmVkID0gdmFsdWUgPT4gZXhwaXJlZCA9IHZhbHVlID9cbiAgICAgICAgICAgIHZhbHVlIGluc3RhbmNlb2YgRXJyb3IgPyB2YWx1ZSA6IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLm9yaWdpbmFsSGFuZGxlcixcbiAgICAgICAgICAgICAgICByZWFzb246IFwibWFudWFsbHkgZXhwaXJlZFwiXG4gICAgICAgICAgICB9KSA6IEJvb2xlYW4odGhpcy5leHBpcmVkQ2FsbHMgPSAwKTtcblxuICAgICAgICB0aGlzLmFkZEV4cGlyZUNvbmRpdGlvbiA9IGZ1bmN0aW9uKGNvbmRpdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jb21wb3Nlci5sYXN0KFwiY29uZGl0aW9uc1wiLCBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGRvbmUgPSBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUZ1bmN0aW9uRXhwaXJhYmxlLmFkZEV4cGlyZUNvbmRpdGlvbigpLCByZXN1bHRcIiwgcmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50eXBlKEJvb2xlYW4sIEVycm9yKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleHBpcmFibGUuc2V0RXhwaXJlZChyZXN1bHQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgKGNvbnRleHQuY2FuY2VsZWQgPSB0cnVlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogZXhwaXJhYmxlLm9yaWdpbmFsSGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcImNvbmRpdGlvbmFsbHkgZXhwaXJlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBjb25kaXRpb24uYXBwbHkodGhpcywgY29udGV4dC5wYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSA/IHJlc3VsdC50aGVuKGRvbmUpIDogZG9uZShyZXN1bHQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb3NlKCkge1xuICAgICAgICBsZXQgZXhwaXJhYmxlID0gdGhpcztcbiAgICAgICAgbGV0IGNvbXBvc2l0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGV0IGlzRXhwaXJlZCA9IGV4cGlyYWJsZS5pc0V4cGlyZWQodGhpcyk7XG4gICAgICAgICAgICBsZXQgY2FsbCA9IGV4cGlyYWJsZS5jb25zdHJ1Y3Rvci5jYWxsLmJpbmQodW5kZWZpbmVkLCBleHBpcmFibGUsIHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICByZXR1cm4gaXNFeHBpcmVkIGluc3RhbmNlb2YgUHJvbWlzZSA/IGlzRXhwaXJlZC50aGVuKGNhbGwpIDogY2FsbChpc0V4cGlyZWQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihjb21wb3NpdGUsIHtcbiAgICAgICAgICAgIGV4cGlyYWJsZTogdGhpcyxcbiAgICAgICAgICAgIGlzRXhwaXJlZDogZiA9PiB0aGlzLmlzRXhwaXJlZChmKSxcbiAgICAgICAgICAgIHNldEV4cGlyZWQ6IGYgPT4gdGhpcy5zZXRFeHBpcmVkKGYpLFxuICAgICAgICAgICAgYWRkRXhwaXJlQ29uZGl0aW9uOiBmID0+IHt0aGlzLmFkZEV4cGlyZUNvbmRpdGlvbihmKTsgcmV0dXJuIGNvbXBvc2l0ZX1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGNhbGwoZXhwaXJhYmxlLCBzY29wZSwgYXJncywgaXNFeHBpcmVkKSB7XG4gICAgICAgIHJldHVybiBpc0V4cGlyZWQgPyBleHBpcmFibGUub25FeHBpcmVkKGlzRXhwaXJlZCkgOiBleHBpcmFibGUub25Ob3RFeHBpcmVkKHNjb3BlLCBhcmdzKTtcbiAgICB9XG5cbiAgICBvbkV4cGlyZWQoZXhwaXJlZCkge1xuICAgICAgICBpZiAodGhpcy5leHBpcmVkQ2FsbHMgPCBKRmFjdG9yeUZ1bmN0aW9uRXhwaXJhYmxlLk1heFdhcm5pbmdFeHBpcmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGlyZWRDYWxscysrO1xuICAgICAgICAgICAgaWYgKGpGYWN0b3J5Q29uZmlnLlRyYWl0TG9nKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKC4uLm5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCh7XG4gICAgICAgICAgICAgICAgICAgIC4uLmV4cGlyZWQuJGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogZXhwaXJlZC4kZGF0YS5yZWFzb25cbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCI7IGV4cGlyZWRDYWxscz1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgKyB0aGlzLmV4cGlyZWRDYWxsc1xuICAgICAgICAgICAgICAgICAgICAgICAgKyAodGhpcy5leHBpcmVkQ2FsbHMgPT09IEpGYWN0b3J5RnVuY3Rpb25FeHBpcmFibGUuTWF4V2FybmluZ0V4cGlyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiOyBNYXggV2FybmluZyBFeGNlZWRlZFwiIDogXCJcIilcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4cGlyZWRcbiAgICB9XG5cbiAgICBvbk5vdEV4cGlyZWQoc2NvcGUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luYWxIYW5kbGVyLmFwcGx5KHNjb3BlLCBhcmdzKVxuICAgIH1cbn1cblxuSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZS5NYXhXYXJuaW5nRXhwaXJhdGlvbiA9IDEwO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RnVuY3Rpb25Db25kaXRpb25hbCAtIENvbmRpdGlvbmFsIEZ1bmN0aW9uIFBhdHRlcm5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgZnVuY3Rpb24gakZhY3RvcnlGdW5jdGlvbkNvbmRpdGlvbmFsKG9yaWdpbmFsSGFuZGxlcikge1xuICAgIHJldHVybiBuZXcgSkZhY3RvcnlGdW5jdGlvbkNvbmRpdGlvbmFsKG9yaWdpbmFsSGFuZGxlcikuY29tcG9zZSgpXG59XG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUZ1bmN0aW9uQ29uZGl0aW9uYWwge1xuXG4gICAgY29uc3RydWN0b3Iob3JpZ2luYWxIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxIYW5kbGVyID0gb3JpZ2luYWxIYW5kbGVyO1xuICAgICAgICB0aGlzLmNvbXBvc2VyID0gbmV3IEpGYWN0b3J5RnVuY3Rpb25Db21wb3NlcjtcbiAgICAgICAgdGhpcy5jb21wb3Nlci5maXJzdChcIm9yaWdpbmFsXCIsIHNldEZ1bmN0aW9uTmFtZShbb3JpZ2luYWxIYW5kbGVyLm5hbWUsIFwiY29uZGl0aW9uXCJdXG4gICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpLCBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxIYW5kbGVyLmFwcGx5KHRoaXMsIGNvbnRleHQucGFyYW1ldGVycyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBjb21wb3NlKCkge1xuICAgICAgICBsZXQgY29tcG9zaXRlID0gdGhpcy5jb21wb3Nlci5jb21wb3NlKFwiY29uZGl0aW9uc1wiLCBcIm9yaWdpbmFsXCIpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihjb21wb3NpdGUsIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbmFsOiB0aGlzLFxuICAgICAgICAgICAgYWRkQ29uZGl0aW9uOiBmID0+IHt0aGlzLmFkZENvbmRpdGlvbihmKTsgcmV0dXJuIGNvbXBvc2l0ZX1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkQ29uZGl0aW9uKGNvbmRpdGlvbikge1xuICAgICAgICB0aGlzLmNvbXBvc2VyLmxhc3QoXCJjb25kaXRpb25zXCIsIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICAgICAgICAgIGxldCBoYW5kbGUgPSBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlGdW5jdGlvbkNvbmRpdGlvbmFsLmFkZENvbmRpdGlvbigpLCByZXN1bHRcIiwgcmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnR5cGVCb29sZWFuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICFyZXN1bHQgJiYgKGNvbnRleHQuY2FuY2VsZWQgPSB0cnVlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gY29uZGl0aW9uLmFwcGx5KHRoaXMsIGNvbnRleHQucGFyYW1ldGVycyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSA/IHJlc3VsdC50aGVuKGhhbmRsZSkgOiBoYW5kbGUocmVzdWx0KTtcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlGdW5jdGlvbldyYXBwYWJsZSAtIFdyYXBwYWJsZSBGdW5jdGlvbiBQYXR0ZXJuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGZ1bmN0aW9uIGpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUob3JpZ2luYWxIYW5kbGVyKSB7XG4gICAgcmV0dXJuIG5ldyBKRmFjdG9yeUZ1bmN0aW9uV3JhcHBhYmxlKG9yaWdpbmFsSGFuZGxlcikuY29tcG9zZSgpXG59XG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUZ1bmN0aW9uV3JhcHBhYmxlIHtcblxuICAgIGNvbnN0cnVjdG9yKG9yaWdpbmFsSGFuZGxlcikge1xuICAgICAgICB0aGlzLm9yaWdpbmFsSGFuZGxlciA9IG9yaWdpbmFsSGFuZGxlcjtcbiAgICAgICAgdGhpcy5jb21wb3NlciA9IG5ldyBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXI7XG4gICAgICAgIHRoaXMuY29tcG9zZXIuZmlyc3QoXCJvcmlnaW5hbFwiLCBzZXRGdW5jdGlvbk5hbWUoW29yaWdpbmFsSGFuZGxlci5uYW1lLCBcIndyYXBwZWRcIl1cbiAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIiksIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbEhhbmRsZXIuYXBwbHkodGhpcywgY29udGV4dC5wYXJhbWV0ZXJzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGNvbXBvc2UoKSB7XG4gICAgICAgIGxldCBjb21wb3NpdGUgPSB0aGlzLmNvbXBvc2VyLmNvbXBvc2UoXCJiZWZvcmVcIiwgXCJvcmlnaW5hbFwiLCBcImFmdGVyXCIpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihjb21wb3NpdGUsIHtcbiAgICAgICAgICAgIHdyYXBwYWJsZTogdGhpcyxcbiAgICAgICAgICAgIGJlZm9yZUFsbDogZiA9PiB7dGhpcy5iZWZvcmVBbGwoZik7IHJldHVybiBjb21wb3NpdGV9LFxuICAgICAgICAgICAganVzdEJlZm9yZTogZiA9PiB7dGhpcy5qdXN0QmVmb3JlKGYpOyByZXR1cm4gY29tcG9zaXRlfSxcbiAgICAgICAgICAgIGp1c3RBZnRlcjogZiA9PiB7dGhpcy5qdXN0QWZ0ZXIoZik7IHJldHVybiBjb21wb3NpdGV9LFxuICAgICAgICAgICAgYWZ0ZXJBbGw6IGYgPT4ge3RoaXMuYWZ0ZXJBbGwoZik7IHJldHVybiBjb21wb3NpdGV9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGJlZm9yZUFsbChoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuY29tcG9zZXIuZmlyc3QoXCJiZWZvcmVcIiwgaGFuZGxlcik7XG4gICAgfVxuXG4gICAganVzdEJlZm9yZShoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuY29tcG9zZXIubGFzdChcImJlZm9yZVwiLCBoYW5kbGVyKTtcbiAgICB9XG5cbiAgICBqdXN0QWZ0ZXIoaGFuZGxlcikge1xuICAgICAgICB0aGlzLmNvbXBvc2VyLmZpcnN0KFwiYWZ0ZXJcIiwgaGFuZGxlcik7XG4gICAgfVxuXG4gICAgYWZ0ZXJBbGwoaGFuZGxlcikge1xuICAgICAgICB0aGlzLmNvbXBvc2VyLmxhc3QoXCJhZnRlclwiLCBoYW5kbGVyKTtcbiAgICB9XG59IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBKRmFjdG9yeVRyYWl0cyB9IGZyb20gXCIuL0pGYWN0b3J5VHJhaXRzXCI7XG5pbXBvcnQgeyBqRmFjdG9yeUZ1bmN0aW9uV3JhcHBhYmxlIH0gZnJvbSBcIi4vSkZhY3RvcnlGdW5jdGlvblwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGpGYWN0b3J5VHJhaXRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBmdW5jdGlvbiBqRmFjdG9yeVRyYWl0cyhjYWxsZXJJbnN0YW5jZSwgY2FsbGVyQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IEpGYWN0b3J5VHJhaXRzKGNhbGxlckluc3RhbmNlLCBjYWxsZXJDb25zdHJ1Y3Rvciwge1xuXG4gICAgICAgIHBhcnNlcihwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvci8qLCBzb3VyY2UsIHRhcmdldCwgaXNTdGF0aWMgKi8pIHtcbiAgICAgICAgICAgIGxldCBwYXJzZWQgPSBKRmFjdG9yeVRyYWl0cy5kZWZhdWx0UGFyc2VyKC4uLmFyZ3VtZW50cyk7XG5cbiAgICAgICAgICAgIGlmIChwYXJzZWQpIHtcbiAgICAgICAgICAgICAgICAoeyBwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvciB9ID0gcGFyc2VkKTtcblxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHByb3BlcnR5RGVzY3JpcHRvci52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2YWx1ZS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJGluc3RhbGxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIkdW5pbnN0YWxsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJGVuYWJsZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRkaXNhYmxlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJHN0YXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5RGVzY3JpcHRvci52YWx1ZSA9IGpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iZWZvcmVBbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuJC5zdGF0ZXMuZW5hYmxlZCAmJiB0aGlzLiQuc2VydmljZS5waGFzZSA9PT0gXCJQSEFTRV9OT05FXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiY29tcG9uZW50IGRpc2FibGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRsb2dFcnIoLi4uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eURlc2NyaXB0b3IgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn0iLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgakZhY3RvcnlUcmFpdHMgfSBmcm9tIFwiLi9qRmFjdG9yeS10cmFpdHNcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBQcmVkZWZpbmVkIENvbXBvbmVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBAbWl4ZXMgVHJhaXRDb3JlXG4gKiBAbWl4ZXMgVHJhaXRBYm91dFxuICogQG1peGVzIFRyYWl0TG9nXG4gKiBAbWl4ZXMgVHJhaXRFdmVudHNcbiAqIEBtaXhlcyBUcmFpdFN0YXRlXG4gKiBAbWl4ZXMgVHJhaXRTZXJ2aWNlXG4gKiBAbWl4ZXMgVHJhaXRUYXNrXG4gKi9cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUNvcmVPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgakZhY3RvcnlUcmFpdHModGhpcywgSkZhY3RvcnlDb3JlT2JqZWN0KVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdENvcmUpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0QWJvdXQsIHsgbmFtZSB9KVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdExvZylcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRFdmVudHMpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0U3RhdGUpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0U2VydmljZSlcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRUYXNrKTtcbiAgICB9XG59XG5cbi8qKlxuICogQG1peGVzIFRyYWl0RmV0Y2hcbiAqIEBtaXhlcyBUcmFpdERPTVxuICogQG1peGVzIFRyYWl0Q1NTXG4gKiBAbWl4ZXMgVHJhaXRNdXRhdGlvblxuICogQG1peGVzIFRyYWl0VGltZW91dFxuICogQG1peGVzIFRyYWl0SW50ZXJ2YWxcbiAqIEBtaXhlcyBUcmFpdExpYlZ1ZVxuICogQG1peGVzIFRyYWl0TGliUmVhY3RcbiAqL1xuZXhwb3J0IGNsYXNzIEpGYWN0b3J5Q29tcG9uZW50IGV4dGVuZHMgSkZhY3RvcnlDb3JlT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICAgIHN1cGVyKG5hbWUpO1xuXG4gICAgICAgIGpGYWN0b3J5VHJhaXRzKHRoaXMsIEpGYWN0b3J5Q29tcG9uZW50KVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdEZldGNoKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdERPTSlcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRDU1MpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0TXV0YXRpb24pXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0VGltZW91dClcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRJbnRlcnZhbClcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRMaWJWdWUpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0TGliUmVhY3QpO1xuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBqRmFjdG9yeVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKiBAcmV0dXJuIHtKRmFjdG9yeUNvbXBvbmVudH0gKi9cbmV4cG9ydCBjb25zdCBqRmFjdG9yeSA9IChuYW1lLCBwcm9wZXJ0aWVzKSA9PiBPYmplY3QuYXNzaWduKG5ldyBKRmFjdG9yeUNvbXBvbmVudChuYW1lKSwgcHJvcGVydGllcyk7IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IGpGYWN0b3J5TG9hZGVyIH0gZnJvbSBcIi4vakZhY3RvcnktbG9hZGVyXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnlPYmplY3Rcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBBbHBoYVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeU9iamVjdCB7XG5cbiAgICBzdGF0aWMgY3JlYXRlRGVzY3JpcHRvcnMoZGVzY3JpcHRvclByb3RvdHlwZSA9IEpGYWN0b3J5T2JqZWN0LkRFU0NSSVBUT1JTX1BST1RPVFlQRSkge1xuICAgICAgICBsZXQgY3JlYXRlID0gSkZhY3RvcnlPYmplY3QuY3JlYXRlKGRlc2NyaXB0b3JQcm90b3R5cGUsIHRydWUsIHRydWUpO1xuICAgICAgICBsZXQgbyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAgICAgby5OT05FID0gY3JlYXRlKCk7XG5cbiAgICAgICAgby5XUklUQUJMRSAgICAgPSBjcmVhdGUoeyB3cml0YWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgby5FTlVNRVJBQkxFICAgPSBjcmVhdGUoeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBvLkNPTkZJR1VSQUJMRSA9IGNyZWF0ZSh7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICBvLkNPTkZJR1VSQUJMRV9XUklUQUJMRSAgID1cbiAgICAgICAgby5XUklUQUJMRV9DT05GSUdVUkFCTEUgICA9IGNyZWF0ZSh7IHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgby5DT05GSUdVUkFCTEVfRU5VTUVSQUJMRSA9XG4gICAgICAgIG8uRU5VTUVSQUJMRV9DT05GSUdVUkFCTEUgPSBjcmVhdGUoeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgby5FTlVNRVJBQkxFX1dSSVRBQkxFICAgICA9XG4gICAgICAgIG8uV1JJVEFCTEVfRU5VTUVSQUJMRSAgICAgPSBjcmVhdGUoeyB3cml0YWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICBvLldSSVRBQkxFX0VOVU1FUkFCTEVfQ09ORklHVVJBQkxFID1cbiAgICAgICAgby5XUklUQUJMRV9DT05GSUdVUkFCTEVfRU5VTUVSQUJMRSA9XG4gICAgICAgIG8uRU5VTUVSQUJMRV9DT05GSUdVUkFCTEVfV1JJVEFCTEUgPVxuICAgICAgICBvLkVOVU1FUkFCTEVfV1JJVEFCTEVfQ09ORklHVVJBQkxFID1cbiAgICAgICAgby5DT05GSUdVUkFCTEVfV1JJVEFCTEVfRU5VTUVSQUJMRSA9XG4gICAgICAgIG8uQ09ORklHVVJBQkxFX0VOVU1FUkFCTEVfV1JJVEFCTEUgPSBjcmVhdGUoeyB3cml0YWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgICAgIC8vIFNob3J0Y3V0c1xuICAgICAgICBvLlJFQURPTkxZID0gY3JlYXRlKHsgd3JpdGFibGU6IGZhbHNlLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiBmYWxzZSB9KTtcblxuICAgICAgICByZXR1cm4gb1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYXNzaWduKG9iaiwgJ215UHJvcGVydHknLCAxMjMsIHt3cml0YWJsZTpmYWxzZX0pXG4gICAgICogYXNzaWduKG9iaiwge2E6MSwgYjoyfScsIHt3cml0YWJsZTpmYWxzZX0pXG4gICAgICpcbiAgICAgKiBkZXByZWNhdGVkXG4gICAgICogYXNzaWduKG9iaiwgJ215UHJvcGVydHknLCB7dmFsdWU6XCJva1wiLCB3cml0YWJsZTpmYWxzZX0pID0+IG5vdCBzdHJpY3RcbiAgICAgKiBhc3NpZ24ob2JqLCAnbXlQcm9wZXJ0eScsIDEyMykgPT4gdXNlIG5hdGl2ZSBpbnN0ZWFkXG4gICAgICogYXNzaWduKG9iaiwge2E6MSwgYjoyfSkgPT4gdXNlIG5hdGl2ZSBpbnN0ZWFkXG4gICAgICovXG4gICAgc3RhdGljIGFzc2lnbih0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgZGVzY3JpcHRvcikge1xuICAgICAgICBsZXQgZGVzY3JpcHRvcnMgPSB7fTtcblxuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBwcm9wZXJ0eSkge1xuXG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICBjYXNlIFwic3ltYm9sXCI6XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBhc3NpZ24ob2JqLCAnbXlQcm9wZXJ0eScsIDEyMywge3dyaXRhYmxlOmZhbHNlfSlcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgICAgICAgICAgICAgIGlmICghZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIGRlc2NyaXB0b3IgYXJndW1lbnQ7IHVzZSBPYmplY3QuYXNzaWduIGluc3RlYWRcIilcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yID0gT2JqZWN0LmNyZWF0ZShkZXNjcmlwdG9yKTsgLy8gYXZvaWQgZGVzY3JpcHRvciBjb3JydXB0aW9uXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IpO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcblxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIC8vIGFzc2lnbihvYmosIHthOjEsIGI6Mn0nLCB7d3JpdGFibGU6ZmFsc2V9KVxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAgICAgICAgICAgW3ZhbHVlLCBkZXNjcmlwdG9yXSA9IFtwcm9wZXJ0eSwgdmFsdWVdO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1pc3NpbmcgZGVzY3JpcHRvciBhcmd1bWVudDsgdXNlIE9iamVjdC5hc3NpZ24gaW5zdGVhZFwiKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAobGV0IG5hbWUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3JzW25hbWVdID0gT2JqZWN0LmNyZWF0ZShkZXNjcmlwdG9yKTsgLy8gYXZvaWQgZGVzY3JpcHRvciBjb3JydXB0aW9uXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3JzW25hbWVdLnZhbHVlID0gdmFsdWVbbmFtZV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yc1tuYW1lXSA9IE9iamVjdC5jcmVhdGUoZGVzY3JpcHRvcik7IC8vIGF2b2lkIGRlc2NyaXB0b3IgY29ycnVwdGlvblxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yc1tuYW1lXS52YWx1ZSA9IHZhbHVlW25hbWVdXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBkZXNjcmlwdG9ycyk7XG5cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHByb3BlcnR5IGFyZ3VtZW50XCIpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0XG4gICAgfVxuXG4gICAgc3RhdGljIGNyZWF0ZShwcm90b3R5cGUsIGZsYXQgPSBmYWxzZSwgZGlzaW5oZXJpdCA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKGZsYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihkaXNpbmhlcml0ID8gT2JqZWN0LmNyZWF0ZShudWxsKSA6IHt9LCBwcm90b3R5cGUsIHByb3BlcnRpZXMpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoXG4gICAgICAgICAgICAgICAgICAgIGRpc2luaGVyaXQgPyBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIHByb3RvdHlwZSkgOiBwcm90b3R5cGVcbiAgICAgICAgICAgICAgICApLCBwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGRpc2luaGVyaXQob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIG9iamVjdCk7XG4gICAgfVxufVxuXG5KRmFjdG9yeU9iamVjdC5ERVNDUklQVE9SU19QUk9UT1RZUEUgPSB7IHdyaXRhYmxlOiBmYWxzZSwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogZmFsc2UgfTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBqRmFjdG9yeU9iamVjdFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmpGYWN0b3J5TG9hZGVyLm9uSW5pdChmdW5jdGlvbigpIHtcbiAgICBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycyA9IEpGYWN0b3J5T2JqZWN0LmNyZWF0ZURlc2NyaXB0b3JzKClcbn0pOyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRkFDVE9SWV9ERVYgfSBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcbmltcG9ydCB7IEpGYWN0b3J5RXhwZWN0IH0gZnJvbSBcIi4vSkZhY3RvcnlFeHBlY3RcIjtcbmltcG9ydCB7IGhlbHBlcl9jYW1lbENhc2UgfSBmcm9tIFwiLi9qRmFjdG9yeS1oZWxwZXJzXCI7XG5pbXBvcnQgeyBKRmFjdG9yeU9iamVjdCB9IGZyb20gXCIuL0pGYWN0b3J5T2JqZWN0XCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlBYm91dFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5jb25zdCBtb2R1bGVHZW5JZCA9ICgpID0+ICsrbW9kdWxlR2VuSWQudWlkOyBtb2R1bGVHZW5JZC51aWQgPSAwO1xuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlBYm91dCB7XG4gICAgY29uc3RydWN0b3Iob3duZXIsIGFib3V0ID0ge30pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUFib3V0KG93bmVyKVwiLCBvd25lcikudHlwZShPYmplY3QpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUFib3V0KGFib3V0KVwiLCBhYm91dClcbiAgICAgICAgICAgICAgICAudHlwZVBsYWluT2JqZWN0KClcbiAgICAgICAgICAgICAgICAucmVzZXJ2ZWRQcm9wZXJ0eShcInVpZFwiKVxuICAgICAgICAgICAgICAgIC5yZXNlcnZlZFByb3BlcnR5KFwiZmluZ2VycHJpbnRcIik7XG4gICAgICAgICAgICBpZiAoXCJuYW1lXCIgaW4gYWJvdXQpIHtcbiAgICAgICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5QWJvdXQoYWJvdXQubmFtZSlcIiwgYWJvdXQubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgLnR5cGVTdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAubm90RW1wdHlTdHJpbmcoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG5hbWU7XG4gICAgICAgIGxldCBmaW5nZXJwcmludDtcbiAgICAgICAgbGV0IHVpZCA9IG1vZHVsZUdlbklkKCk7XG5cbiAgICAgICAgaWYgKGFib3V0Lm5hbWUpIHtcbiAgICAgICAgICAgIG5hbWUgPSBhYm91dC5uYW1lO1xuICAgICAgICAgICAgZGVsZXRlIGFib3V0Lm5hbWU7XG4gICAgICAgICAgICBmaW5nZXJwcmludCA9IFwiakZhY3RvcnlcIiArIFwiX1wiICsgaGVscGVyX2NhbWVsQ2FzZShuYW1lLnRvTG93ZXJDYXNlKCkpICsgXCJfXCIgKyB1aWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSBhYm91dC5uYW1lO1xuICAgICAgICAgICAgbmFtZSA9IGBbJHtvd25lci5jb25zdHJ1Y3Rvci5uYW1lfSMke3VpZH1dYDtcbiAgICAgICAgICAgIGZpbmdlcnByaW50ID0gXCJqRmFjdG9yeVwiICsgXCJfXCIgKyBvd25lci5jb25zdHJ1Y3Rvci5uYW1lICsgXCJfXCIgKyB1aWQ7XG4gICAgICAgIH1cblxuICAgICAgICBKRmFjdG9yeU9iamVjdC5hc3NpZ24odGhpcywgLyoqIEBsZW5kcyBKRmFjdG9yeUFib3V0IyAqLyB7XG4gICAgICAgICAgICB1aWQsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZmluZ2VycHJpbnRcbiAgICAgICAgfSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuRU5VTUVSQUJMRSk7XG5cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBhYm91dCk7XG5cbiAgICAgICAgLy8gLS0tXG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUFib3V0Lm5hbWVcIiwgdGhpcy5uYW1lKVxuICAgICAgICAgICAgICAgIC5tYXRjaFJlZygvXltcXHdbXFxdI10rJC8pO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUFib3V0LmZpbmdlcnByaW50XCIsIHRoaXMuZmluZ2VycHJpbnQpXG4gICAgICAgICAgICAgICAgLm1hdGNoUmVnKC9eW1xcd10rJC8pO1xuICAgICAgICB9XG4gICAgfVxufSIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRkFDVE9SWV9ERVYgfSBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcbmltcG9ydCB7IEpGYWN0b3J5RXhwZWN0IH0gZnJvbSBcIi4vSkZhY3RvcnlFeHBlY3RcIjtcbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBqRmFjdG9yeVRyYWNlIH0gZnJvbSBcIi4vSkZhY3RvcnlUcmFjZVwiO1xuaW1wb3J0IHsgalF1ZXJ5LCBoZWxwZXJfaXNOYXRpdmUgfSBmcm9tIFwiLi9qRmFjdG9yeS1oZWxwZXJzXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlQcm9taXNlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFByb3ZpZGVzIGF3YWl0YWJsZSwgZXhwaXJhYmxlLCBkZWJ1Z2dhYmxlIHByb21pc2UgY2hhaW5zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogRXhwZXJpbWVudGFsIERyYWZ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gI2xpbWl0YXRpb24jIGFzeW5jIGZ1bmN0aW9ucyBhbHdheXMgdXNlIHRoZSBuYXRpdmUgUHJvbWlzZSBjb25zdHJ1Y3RvciBldmVuIGlmIG5hdGl2ZSBQcm9taXNlIGNsYXNzIGlzIG92ZXJyaWRkZW5cbi8vICNsaW1pdGF0aW9uIyBhc3luYyBmdW5jdGlvbnMgYWx3YXlzIHJldHVybnMgYSBuYXRpdmUgUHJvbWlzZSBldmVuIGlmIHJldHVybmluZyBhbiBleHRlbmRlZCBQcm9taXNlXG4vLyAjbGltaXRhdGlvbiMgYXN5bmMgZnVuY3Rpb25zIGFsd2F5cyByZXR1cm5zIGEgcGVuZGluZyBQcm9taXNlIGV2ZW4gaWYgcmV0dXJuaW5nIGEgcmVzb2x2ZWQgUHJvbWlzZVxuXG5jb25zdCBtb2R1bGVHZW5JZCA9ICgpID0+ICsrbW9kdWxlR2VuSWQudWlkOyBtb2R1bGVHZW5JZC51aWQgPSAwO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5UHJvbWlzZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeVByb21pc2UgZXh0ZW5kcyBQcm9taXNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZSwgY29uZmlnLCB0cmFjZVNvdXJjZSB9LCBleGVjdXRvcikge1xuXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBbbmFtZSwgY29uZmlnLCBleGVjdXRvcl0gPSBbbnVsbCwgbnVsbCwgYXJndW1lbnRzWzBdXVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2hhaW5JZCA9IG1vZHVsZUdlbklkKCk7XG4gICAgICAgIGNvbmZpZyA9IHsgLi4uSkZhY3RvcnlQcm9taXNlLkRFRkFVTFRfQ09ORklHLCAuLi5jb25maWcgfTtcbiAgICAgICAgbmFtZSA9IG5hbWUgfHwgXCJ1bm5hbWVkXCI7XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJuYW1lXCIsIG5hbWUpXG4gICAgICAgICAgICAgICAgLnR5cGUoU3RyaW5nLCBOdW1iZXIpXG4gICAgICAgICAgICAgICAgLm1hdGNoUmVnKC9eW14uIF0rJC8pO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJjb25maWdcIiwgY29uZmlnKS50eXBlUGxhaW5PYmplY3QoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiZXhlY3V0b3JcIiwgZXhlY3V0b3IpLnR5cGVGdW5jdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc29sdmU7XG4gICAgICAgIGxldCByZWplY3Q7XG5cbiAgICAgICAgc3VwZXIoKF9yZXNvbHZlLCBfcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlID0gX3Jlc29sdmU7XG4gICAgICAgICAgICByZWplY3QgPSBfcmVqZWN0O1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjaGFpbiA9IG5ldyBKRmFjdG9yeVByb21pc2VDaGFpbih0aGlzLCBjaGFpbklkLCBuYW1lLCBjb25maWcpO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgICRjaGFpbjoge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGNoYWluXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJHR5cGU6IHtcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCJwcm9taXNlXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAkdmFsdWU6IHtcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJGlzU2V0dGxlZDoge1xuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICRpc1JlamVjdGVkOiB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAkaXNGdWxmaWxsZWQ6IHtcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICRpc0V4cGlyZWQ6IHtcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgICAgICRkZXZfbmFtZToge1xuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuYW1lICsgXCJbXCIgKyBjaGFpbklkICsgXCI6MF1cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJGRldl9wYXRoOiB7XG4gICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IEpGYWN0b3J5UHJvbWlzZVBhdGgodGhpcylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICRkZXZfcG9zaXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWhlbHBlcl9pc05hdGl2ZShleGVjdXRvcikpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICAgICAgICAgICRkZXZfc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZXhlY3V0b3JcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgakZhY3RvcnlUcmFjZS50cmFjZXIuYXR0YWNoVHJhY2UodGhpcywgdHJhY2VTb3VyY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHJ5QXV0b0NvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLiRjaGFpbi5pc1BlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRjaGFpbkNvbXBsZXRlKFwiY29uZmlnLmNoYWluQXV0b0NvbXBsZXRlID0gdHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENhc2Ugb2YgZXJyb3IgaW4gXCJjb21wbGV0ZVwiIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhdGNoIHRoZSBleGNlcHRpb24gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyBhbHJlYWR5IGZ1bGZpbGxlZFxuICAgICAgICAgICAgICAgICAgICAvLyBGdXJ0aGVybW9yZSB0aGlzIGlzc3VlIG11c3QgYmUgaGFuZGxlZCBieSB0aGUgY2hhaW4sIG5vdCB0aGUgY3VycmVudCBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSkgLy8gcHJpbnQgdGhlIGVycm9yIG90aGVyd2lzZSBub3RoaW5nIGhhcHBlbnNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgb25SZXNvbHZlID0gdmFsdWUgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ29uUmVzb2x2ZScsdGhpcy4kZGV2X25hbWUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICAvLyAyLjMuMS4gSWYgcHJvbWlzZSBhbmQgeCByZWZlciB0byB0aGUgc2FtZSBvYmplY3QsIHJlamVjdCBwcm9taXNlIHdpdGggYSBUeXBlRXJyb3IgYXMgdGhlIHJlYXNvbi5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgb25SZWplY3QobmV3IFR5cGVFcnJvcihcIkNoYWluaW5nIGN5Y2xlIGRldGVjdGVkIGZvciBwcm9taXNlIFwiICsgdGhpcy4kZGV2X25hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxldCB0aGVuO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiAodHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIgfHwgdHlwZW9mIHggPT0gXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAyLjMuMy4yLiBJZiByZXRyaWV2aW5nIHRoZSBwcm9wZXJ0eSB4LnRoZW4gcmVzdWx0cyBpbiBhIHRocm93biBleGNlcHRpb24gZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVqZWN0IHByb21pc2Ugd2l0aCBlIGFzIHRoZSByZWFzb24uXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25SZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc29sdmVQcm9taXNlID0gZnVuY3Rpb24oeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4zLjMuMy4xLiBJZi93aGVuIHJlc29sdmVQcm9taXNlIGlzIGNhbGxlZCB3aXRoIGEgdmFsdWUgeSwgcnVuIFtbUmVzb2x2ZV1dKHByb21pc2UsIHkpLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZSh5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlamVjdFByb21pc2UgPSBmdW5jdGlvbihyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyLjMuMy4zLjIuIElmL3doZW4gcmVqZWN0UHJvbWlzZSBpcyBjYWxsZWQgd2l0aCBhIHJlYXNvbiByLCByZWplY3QgcHJvbWlzZSB3aXRoIHIuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZWplY3Qocik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgcmVzb2x2ZVByb21pc2UsIHJlamVjdFByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IC8vIDIuMy4zLjMuNC4gSWYgY2FsbGluZyB0aGVuIHRocm93cyBhbiBleGNlcHRpb24gZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuMy4zLjMuNC4xLiBJZiByZXNvbHZlUHJvbWlzZSBvciByZWplY3RQcm9taXNlIGhhdmUgYmVlbiBjYWxsZWQsIGlnbm9yZSBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4zLjMuMy40LjIuIE90aGVyd2lzZSwgcmVqZWN0IHByb21pc2Ugd2l0aCBlIGFzIHRoZSByZWFzb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGlzUmVqZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaXNGdWxmaWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuJGNoYWluLmVycm9yRXhwaXJlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgb25TZXR0bGUodmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uUmVqZWN0ID0gcmVhc29uID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdvblJlamVjdCcsdGhpcy4kZGV2X25hbWUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRpc1JlamVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLiRpc0Z1bGZpbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJlamVjdChyZWFzb24pO1xuICAgICAgICAgICAgICAgIG9uU2V0dGxlKHJlYXNvbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvblNldHRsZSA9IHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuJHZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLiRpc1NldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy4kY2hhaW4uY2hhaW5NYXAuc2V0KHRoaXMsIHRydWUpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy4kY2hhaW4uY2hhaW5Db25maWcuY2hhaW5BdXRvQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kY2hhaW4uY2hhaW5NYXAuc2l6ZSA9PT0gMSAmJiAhdGhpcy4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB0cnlBdXRvQ29tcGxldGUoKSB3aWxsIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseSAodGhlbigpIGNhbGxiYWNrIGlzIGFzeW5jaHJvbm91cylcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBvZiBwcm9taXNlLnJlc29sdmUocHJpbWl0aXZlKSwgcHJldmVudHMgZm9sbG93aW5nIHRoZW4oKSBmcm9tIGJlaW5nIGltbWVkaWF0ZWx5IGxvY2tlZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRoZW4odHJ5QXV0b0NvbXBsZXRlKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeUF1dG9Db21wbGV0ZSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBfY2hhaW5BdXRvQ29tcGxldGUgPSBjb25maWcuY2hhaW5BdXRvQ29tcGxldGU7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb25maWcsIFwiY2hhaW5BdXRvQ29tcGxldGVcIiwge1xuICAgICAgICAgICAgZ2V0OiAoKSA9PiBfY2hhaW5BdXRvQ29tcGxldGUsXG4gICAgICAgICAgICBzZXQ6IHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoX2NoYWluQXV0b0NvbXBsZXRlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBfY2hhaW5BdXRvQ29tcGxldGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlBdXRvQ29tcGxldGUoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjaGFpbi5jaGFpbk1hcC5zZXQodGhpcywgZmFsc2UpO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgIF9fcmVzb2x2ZV9fOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG9uUmVzb2x2ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9fcmVqZWN0X186IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogb25SZWplY3RcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGV4ZWN1dG9yKG9uUmVzb2x2ZSwgb25SZWplY3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvblJlamVjdChlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgZm9yY2VUeXBlKSB7XG4gICAgICAgIGxldCB3cmFwcGVkRnVsZmlsbGVkO1xuICAgICAgICBsZXQgd3JhcHBlZFJlamVjdGVkO1xuICAgICAgICBsZXQgbmV3UHJvbWlzZTtcbiAgICAgICAgbGV0IGlzTmF0aXZlID0gaGVscGVyX2lzTmF0aXZlKG9uRnVsZmlsbGVkKSAmJiAhb25GdWxmaWxsZWQubmFtZS5zdGFydHNXaXRoKFwiYm91bmQgXCIpO1xuXG4gICAgICAgIGlmIChvbkZ1bGZpbGxlZCAmJiB0eXBlb2Ygb25GdWxmaWxsZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgd3JhcHBlZEZ1bGZpbGxlZCA9IGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICAvLyBTUEVDOiBcImF3YWl0XCIgdGhyb3dzIHRoZSBlcnJvckV4cGlyZWQgaWYgZXhwaXJlZFxuICAgICAgICAgICAgICAgIC8vIEFsbG93cyBhc3luYyBmdW5jdGlvbiB0byB0cnkgY2F0Y2ggdGhlIGF3YWl0ZWQgcHJvbWlzZVxuICAgICAgICAgICAgICAgIC8vIGFuZCBhbGxvd3Mgc3RhY2sgY2FsbCBleGl0IGlmIG5vdCBjYXVnaHRcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJhd2FpdFwiICYmIG5ld1Byb21pc2UuJGlzRXhwaXJlZCA9PT0gdHJ1ZSAmJiBuZXdQcm9taXNlLiRjaGFpbi5lcnJvckV4cGlyZWQgPT09IHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uUmVqZWN0ZWQocilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFuZXdQcm9taXNlLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRnVsZmlsbGVkKHIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvblJlamVjdGVkICYmIHR5cGVvZiBvblJlamVjdGVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHdyYXBwZWRSZWplY3RlZCA9IGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5ld1Byb21pc2UuJGlzU2V0dGxlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25SZWplY3RlZChyKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0eXBlID0gZm9yY2VUeXBlIHx8IChpc05hdGl2ZSA/IFwiYXdhaXRcIiA6IG9uRnVsZmlsbGVkID09PSB1bmRlZmluZWQgPyBcImNhdGNoXCIgOiBcInRoZW5cIik7XG4gICAgICAgIG5ld1Byb21pc2UgPSBPYmplY3QuYXNzaWduKHN1cGVyLnRoZW4od3JhcHBlZEZ1bGZpbGxlZCwgd3JhcHBlZFJlamVjdGVkKSwgdGhpcyk7XG4gICAgICAgIG1vZHVsZUdlbklkLnVpZC0tOyAvLyByZXZlcnNlIGJlY2F1c2Ugbm90IGEgbmV3IGNoYWluXG4gICAgICAgIG5ld1Byb21pc2UuJHR5cGUgPSB0eXBlO1xuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIG5ld1Byb21pc2UuJGRldl9wb3NpdGlvbiA9IHRoaXMuJGNoYWluLmNoYWluTWFwLnNpemU7XG4gICAgICAgICAgICBsZXQgZk5hbWVzID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChvbkZ1bGZpbGxlZCAmJiBvbkZ1bGZpbGxlZC5uYW1lKSB7XG4gICAgICAgICAgICAgICAgZk5hbWVzICs9IG9uRnVsZmlsbGVkLm5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvblJlamVjdGVkICYmIG9uUmVqZWN0ZWQubmFtZSkge1xuICAgICAgICAgICAgICAgIGZOYW1lcyArPSBcIixcIiArIG9uUmVqZWN0ZWQubmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobmV3UHJvbWlzZSwge1xuICAgICAgICAgICAgICAgICRkZXZfbmFtZToge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGNoYWluLmNoYWluTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcIltcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKyB0aGlzLiRjaGFpbi5jaGFpbklkXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwiOlwiXG4gICAgICAgICAgICAgICAgICAgICAgICArIHRoaXMuJGRldl9wb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcIl1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcIi5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgKyBuZXdQcm9taXNlLiR0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICArIChmTmFtZXMgPyBcIihcIiArIGZOYW1lcyArIFwiKVwiIDogXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCJbXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgbmV3UHJvbWlzZS4kY2hhaW4uY2hhaW5JZFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcIjpcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKyBuZXdQcm9taXNlLiRkZXZfcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCJdXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICRkZXZfcGF0aDogeyB2YWx1ZTogbmV3IEpGYWN0b3J5UHJvbWlzZVBhdGgodGhpcy4kZGV2X3BhdGgsIG5ld1Byb21pc2UpIH0sXG4gICAgICAgICAgICAgICAgJGRldl9vbkZ1bGZpbGxlZDogeyB2YWx1ZTogb25GdWxmaWxsZWQgfSxcbiAgICAgICAgICAgICAgICAkZGV2X29uUmVqZWN0ZWQ6IHsgdmFsdWU6IG9uUmVqZWN0ZWQgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBuZXdQcm9taXNlLiRjaGFpbi5jaGFpbk1hcC5zZXQobmV3UHJvbWlzZSwgZmFsc2UpO1xuXG4gICAgICAgIGlmICh0aGlzLiRpc0V4cGlyZWQpIHtcbiAgICAgICAgICAgIC8vIGNhc2U6IHAwLnRoZW4oKTsgY2hhaW5BYm9ydCgpOyBwMS50aGVuKClcbiAgICAgICAgICAgIC8vID0+IHRoZSBuZXcgcHJvbWlzZSBtdXN0IGJlIGV4cGlyZWRcbiAgICAgICAgICAgIEpGYWN0b3J5UHJvbWlzZS5mb3JjZUV4cGlyZShuZXdQcm9taXNlLCB0aGlzLiRjaGFpbi5lcnJvckV4cGlyZWQpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3UHJvbWlzZVxuICAgIH1cblxuICAgICRjYXRjaEV4cGlyZWQob25FeHBpcmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRoZW4ociA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4kY2hhaW4uY2hhaW5Sb290LiRpc0V4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb25FeHBpcmVkKHIpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHVuZGVmaW5lZCwgXCIkY2F0Y2hFeHBpcmVkXCIpXG4gICAgfVxuXG4gICAgc3RhdGljIHJlc29sdmUob3B0aW9uYWxBcmdzLCB2YWx1ZSkge1xuICAgICAgICAvLyByZXNvbHZlKClcbiAgICAgICAgLy8gcmVzb2x2ZShvcHRpb25hbEFyZ3MsIHZhbHVlKVxuICAgICAgICAvLyByZXNvbHZlKHZhbHVlKVxuXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBbb3B0aW9uYWxBcmdzLCB2YWx1ZV0gPSBbe30sIG9wdGlvbmFsQXJnc11cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbmFsQXJncykge1xuICAgICAgICAgICAgb3B0aW9uYWxBcmdzID0ge31cbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiB0aGlzICYmIGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIC8vIFJldHVybnMgdGhlIHByb21pc2UgYXMgaXMgKG5hdGl2ZSBzcGVjKVxuICAgICAgICAgICAgLy8gYnV0IG9ubHkgaWYgbm8gb3B0aW9uYWxBcmdzXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcyhvcHRpb25hbEFyZ3MsIGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgcmVqZWN0KG9wdGlvbmFsQXJncywgcmVhc29uKSB7XG4gICAgICAgIC8vIHJlamVjdCgpXG4gICAgICAgIC8vIHJlamVjdChvcHRpb25hbEFyZ3MsIHJlYXNvbilcbiAgICAgICAgLy8gcmVqZWN0KHJlYXNvbilcblxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgW29wdGlvbmFsQXJncywgcmVhc29uXSA9IFt7fSwgb3B0aW9uYWxBcmdzXVxuICAgICAgICB9XG4gICAgICAgIGlmICghb3B0aW9uYWxBcmdzKSB7XG4gICAgICAgICAgICBvcHRpb25hbEFyZ3MgPSB7fVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyhvcHRpb25hbEFyZ3MsIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgcmVqZWN0KHJlYXNvbilcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHRvUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzKVxuICAgIH1cblxuICAgIC8vIENvbXBsZXRlcyBhbiBleHBpcmVzIHRoZSB3aG9sZSBjaGFpbiBiZWZvcmUgaXRzIG5vcm1hbCBlbmRcbiAgICAkY2hhaW5BYm9ydChyZWFzb24gPSBcIiRjaGFpbkFib3J0KClcIikge1xuICAgICAgICB0aGlzLiRjaGFpbi5jb21wbGV0ZShyZWFzb24pO1xuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIC8vIE1hbnVhbGx5IGNvbXBsZXRlcyBhbiBleHBpcmVzIHRoZSB3aG9sZSBjaGFpblxuICAgIC8vIE9ubHkgcmVxdWlyZWQgaWYgYXdhaXRpbmcgXCJteVByb21pc2UuJGNoYWluXCJcbiAgICAvLyB3aGVuIHRoZSBhdXRvY29tcGxldGUgd2F0Y2hlciBpcyBub3QgdXNlZFxuICAgICRjaGFpbkNvbXBsZXRlKHJlYXNvbiA9IFwiJGNoYWluQ29tcGxldGUoKVwiKSB7XG4gICAgICAgIHRoaXMuJGNoYWluLmNvbXBsZXRlKHJlYXNvbik7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgJGNoYWluQXV0b0NvbXBsZXRlKCkge1xuICAgICAgICB0aGlzLiRjaGFpbi5jaGFpbkNvbmZpZy5jaGFpbkF1dG9Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgc3RhdGljIGZvcmNlRXhwaXJlKHByb21pc2UsIHJlYXNvbikge1xuICAgICAgICBwcm9taXNlLiRpc0V4cGlyZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIXByb21pc2UuJGlzU2V0dGxlZCkge1xuICAgICAgICAgICAgaWYgKHByb21pc2UuJHR5cGUgIT09IFwiYXdhaXRcIiAmJiBwcm9taXNlLiR0eXBlICE9PSBcIiRjYXRjaEV4cGlyZWRcIikge1xuICAgICAgICAgICAgICAgIHByb21pc2UuX19yZXNvbHZlX18ocmVhc29uKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5KRmFjdG9yeVByb21pc2UuREVGQVVMVF9DT05GSUcgPSB7XG4gICAgY2hhaW5BdXRvQ29tcGxldGU6IGZhbHNlXG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5UHJvbWlzZUNoYWluXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5UHJvbWlzZUNoYWluIHtcblxuICAgIGNvbnN0cnVjdG9yKGNoYWluUm9vdCwgY2hhaW5JZCwgY2hhaW5OYW1lLCBjaGFpbkNvbmZpZykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBjaGFpbkNvbmZpZzogeyB2YWx1ZTogY2hhaW5Db25maWcgfSxcbiAgICAgICAgICAgIGNoYWluUm9vdDogeyB2YWx1ZTogY2hhaW5Sb290IH0sXG4gICAgICAgICAgICBjaGFpbklkOiB7IHZhbHVlOiBjaGFpbklkIH0sXG4gICAgICAgICAgICBjaGFpbk5hbWU6IHsgdmFsdWU6IGNoYWluTmFtZSB9LFxuICAgICAgICAgICAgY2hhaW5NYXA6IHsgdmFsdWU6IG5ldyBNYXAgfSxcbiAgICAgICAgICAgIGlzQ29tcGxldGVkOiB7IHZhbHVlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlIH0sXG4gICAgICAgICAgICBkYXRhOiB7IHZhbHVlOiB7fSB9LFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXBcbiAgICAgICAgICAgIF9fZGVmZXJyZWRfXzogeyB2YWx1ZTogalF1ZXJ5LkRlZmVycmVkKCkgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldCBpc1BlbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY2hhaW5NYXAudmFsdWVzKCkpLmluY2x1ZGVzKGZhbHNlKVxuICAgIH1cblxuICAgIHRoZW4ob25SZXNvbHZlKSB7IC8vID0+IFwiYXdhaXQgY2hhaW5cIlxuICAgICAgICB0aGlzLl9fZGVmZXJyZWRfXy5kb25lKG9uUmVzb2x2ZSk7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgY29tcGxldGUocmVhc29uID0gXCJjaGFpbi5jb21wbGV0ZSgpXCIpIHtcbiAgICAgICAgbGV0IGNoYWluUm9vdCA9IHRoaXMuY2hhaW5Sb290O1xuICAgICAgICBpZiAoIWNoYWluUm9vdC4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3JFeHBpcmVkID0gY2hhaW5Sb290LiRjaGFpbi5lcnJvckV4cGlyZWQgPSBuZXcgakZhY3RvcnlFcnJvci5QUk9NSVNFX0VYUElSRUQoe1xuICAgICAgICAgICAgICAgIHRhcmdldDogY2hhaW5Sb290LFxuICAgICAgICAgICAgICAgIHJlYXNvblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBtYXAgPSB0aGlzLmNoYWluTWFwO1xuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBtYXAua2V5cygpKSB7XG4gICAgICAgICAgICAgICAgSkZhY3RvcnlQcm9taXNlLmZvcmNlRXhwaXJlKGl0ZW0sIGVycm9yRXhwaXJlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzQ29tcGxldGVkXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgICAgICAgICB0aGlzLl9fZGVmZXJyZWRfXy5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlQcm9taXNlUGF0aFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeVByb21pc2VQYXRoIGV4dGVuZHMgQXJyYXkge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGZvciAobGV0IGkgb2YgYXJndW1lbnRzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHVzaCguLi5pKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2goaSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBwcmludGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcCgodiwgaSkgPT4gaSA9PT0gMCA/IHYuJGRldl9uYW1lIDogdi4kZGV2X25hbWUuc3BsaXQoXCIuXCIpWzFdKS5qb2luKFwiLlwiKVxuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge3JldHVybiB0aGlzLnByaW50YWJsZX1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeVByb21pc2VTeW5jXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFByb21pc2UgdGhhdCB0cmllcyB0byByZXNvbHZlIHN5bmNocm9ub3VzbHlcbi8vIGFsbG93aW5nIHN5bmNocm9ub3VzIHN0YXRlcyBhbmQgcmVzdWx0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5UHJvbWlzZVN5bmMgZXh0ZW5kcyBQcm9taXNlIHtcblxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yKSB7XG5cbiAgICAgICAgbGV0IHN0YXRlcyA9IHtcbiAgICAgICAgICAgICRpc1NldHRsZWQ6IGZhbHNlLCAvLyB0cnVlID0gbm90IHBlbmRpbmdcbiAgICAgICAgICAgICRpc1JlamVjdGVkOiBudWxsLCAvLyB0cnVlID0gbm90IHBlbmRpbmcgKyByZWplY3RlZFxuICAgICAgICAgICAgJHZhbHVlOiB1bmRlZmluZWRcbiAgICAgICAgfTtcblxuICAgICAgICBzdXBlcigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgbGV0IG9uUmVzb2x2ZSA9IHIgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUocilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKG9uUmVzb2x2ZSwgb25SZWplY3QpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJGlzU2V0dGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJGlzUmVqZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlcy4kdmFsdWUgPSByO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IG9uUmVqZWN0ID0gciA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgcmVzb2x2ZSBwZW5kaW5nIHByb21pc2VcbiAgICAgICAgICAgICAgICAvLyB0byBrZWVwIG5hdGl2ZSBzcGVjaWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzLiRpc1NldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJGlzUmVqZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJHZhbHVlID0gcjtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBleGVjdXRvcihvblJlc29sdmUsIG9uUmVqZWN0KVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIG9uUmVqZWN0KGUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgc3RhdGVzKTtcbiAgICAgICAgc3RhdGVzID0gdGhpc1xuICAgIH1cblxuICAgIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcblxuICAgICAgICBpZiAodGhpcy4kaXNTZXR0bGVkKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLiR2YWx1ZTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kaXNSZWplY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjYW5jZWwgYW55IHVuY2F1Z2h0IHJlamVjdGVkIHJlc3VsdCBmcm9tIHRoaXMgcHJvbWlzZVxuICAgICAgICAgICAgICAgICAgICAvLyBiZWZvcmUgcmV0dXJuaW5nIHRoZSBuZXcgb25lXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyLnRoZW4odW5kZWZpbmVkLCAoKSA9PiBudWxsKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob25SZWplY3RlZCAmJiB0eXBlb2Ygb25SZWplY3RlZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG9uUmVqZWN0ZWQodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSkZhY3RvcnlQcm9taXNlU3luYy5yZWplY3QodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAob25GdWxmaWxsZWQgJiYgdHlwZW9mIG9uRnVsZmlsbGVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gb25GdWxmaWxsZWQodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpGYWN0b3J5UHJvbWlzZVN5bmMucmVqZWN0KGUpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUodmFsdWUpXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSkZhY3RvcnlQcm9taXNlU3luYykge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBKRmFjdG9yeVByb21pc2VTeW5jKHZhbHVlLnRoZW4uYmluZCh2YWx1ZSkpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSkZhY3RvcnlQcm9taXNlU3luYyhyID0+IHIodmFsdWUpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRkFDVE9SWV9ERVYgfSBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcbmltcG9ydCB7IEpGYWN0b3J5RXhwZWN0IH0gZnJvbSBcIi4vSkZhY3RvcnlFeHBlY3RcIjtcbmltcG9ydCB7IEpGYWN0b3J5UHJvbWlzZVN5bmMgfSBmcm9tIFwiLi9KRmFjdG9yeVByb21pc2VcIjtcbmltcG9ydCB7IEpGYWN0b3J5RnVuY3Rpb25Db21wb3NlciB9IGZyb20gXCIuL0pGYWN0b3J5RnVuY3Rpb25cIjtcbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBqUXVlcnksIGhlbHBlcl9pc1BsYWluT2JqZWN0IH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RXZlbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGh0dHBzOi8vbGVhcm4uanF1ZXJ5LmNvbS9ldmVudHMvZXZlbnQtZXh0ZW5zaW9ucy9cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5RXZlbnRzIHtcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIGpRdWVyeSBkb2Vzbid0IGhhbmRsZSBhc3luYyB0cmlnZ2VyIHNvIGpGYWN0b3J5IHByb3ZpZGVzIHRoZSBmb2xsb3dpbmcgOlxuICAgIC8vXG4gICAgLy8gLSB0cmlnZ2VyUGFyYWxsZWwoKTogdGhlIHRyaWdnZXIgZnVuY3Rpb24gcmV0dXJucyBhIFByb21pc2UuYWxsKHBlbmRpbmdBcnJheSlcbiAgICAvLyAgIHdoZXJlIHBlbmRpbmdBcnJheSBpcyBmaWxsZWQgYnkgYW55IGFzeW5jIHJ1bm5pbmcgaGFuZGxlci5cbiAgICAvLyAgIE5vdCByZWNvbW1lbmRlZCBiZWNhdXNlIGl0J3MgdGhlIGJlc3Qgd2F5IHRvIHByb2R1Y2UgdW5wcmVkaWN0YWJsZSBhc3luYyBzaWRlIGVmZmVjdHNcbiAgICAvL1xuICAgIC8vIC0gdHJpZ2dlclNlcmllcygpOiBoYW5kbGVycyBhcmUgcnVuIGluIGEgc3luY2hyb25vdXMgb3JkZXIsIHdpdGggXCJhd2FpdFwiXG4gICAgLy8gICBUaGlzIGF2b2lkcyB1bnByZWRpY3RhYmxlIGFzeW5jIHJhY2UgY29uZGl0aW9uXG4gICAgLy9cbiAgICAvLyAgQm90aCByZXR1cm5zIGEgSkZhY3RvcnlQcm9taXNlU3luYyB0aGF0IGNvbnRhaW5zIHRoZSBqRmFjdG9yeV9mdWxmaWxsZWQgZmxhZ1xuICAgIC8vICBUaGlzIGZsYWcgaXMgaW1tZWRpYXRlbHkgKG5vdCBhc3luYykgc2V0IHRvIHRydWUgaWYgbm8gYXN5bmMgaGFuZGxlciBpcyBzdGlsbCBwZW5kaW5nXG4gICAgLy9cbiAgICAvLyA9PiBoYW5kbGVycyBhcmUgd3JhcHBlZC4gT3JpZ2luYWxIYW5kbGVycyBhbmQgd3JhcHBlZEhhbmRsZXJzIHJlbGF0aW9ucyBhcmUgc3RvcmVkIGluIGEgV2Vha01hcFxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywgLyoqIEBsZW5kcyBKRmFjdG9yeUV2ZW50cyMgKi8ge1xuICAgICAgICAgICAgcmVnaXN0cnk6IHsgdmFsdWU6IGpRdWVyeShPYmplY3QuY3JlYXRlKG51bGwpKSB9LFxuICAgICAgICAgICAgaGFuZGxlcnM6IHsgdmFsdWU6IG5ldyBXZWFrTWFwIH0sXG4gICAgICAgICAgICBvbkxpc3RlbmVyVXBkYXRlOiB7IHZhbHVlOiBudWxsLCB3cml0YWJsZTogdHJ1ZSB9LFxuICAgICAgICAgICAgb25PYnNlcnZlclVwZGF0ZTogeyB2YWx1ZTogbnVsbCwgd3JpdGFibGU6IHRydWUgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbih7IGV2ZW50cywgaGFuZGxlciwgdGFyZ2V0LCBzZWxlY3RvciB9KSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlU2VsZWN0b3IoZXZlbnRzKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub24oe2hhbmRsZXJ9KVwiLCBoYW5kbGVyKS50eXBlRnVuY3Rpb24oKTtcbiAgICAgICAgICAgIHRhcmdldCAmJiBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLm9uKHt0YXJnZXR9KVwiLCB0YXJnZXQpLnR5cGUoU3RyaW5nLCBqUXVlcnksIEhUTUxFbGVtZW50KTtcbiAgICAgICAgICAgIHNlbGVjdG9yICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub24oe3NlbGVjdG9yfSlcIiwgdGFyZ2V0KS50eXBlU3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgd3JhcHBlZEhhbmRsZXIgPSB0aGlzLmhhbmRsZXJzLmdldChoYW5kbGVyKTtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgLy8gZG9uJ3QgbmVlZCB0byB3cmFwIERPTSBoYW5kbGVyc1xuICAgICAgICAgICAgaWYgKCF3cmFwcGVkSGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGhhbmRsZXIsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRhcmdldCkub24oZXZlbnRzLCBzZWxlY3RvciwgaGFuZGxlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGpRdWVyeSh0YXJnZXQpLm9uKGV2ZW50cywgaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vbkxpc3RlbmVyVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkxpc3RlbmVyVXBkYXRlKGFyZ3VtZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghd3JhcHBlZEhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChoYW5kbGVyLCB3cmFwcGVkSGFuZGxlciA9IGZ1bmN0aW9uKGUsIHsgZGF0YSwgc3RhY2sgfSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKCgpID0+IGhhbmRsZXIoZSwgZGF0YSkpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgd3JhcHBlZEhhbmRsZXIub3JpZ2luYWxIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVnaXN0cnkub24oZXZlbnRzLCB3cmFwcGVkSGFuZGxlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5vbk9ic2VydmVyVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbk9ic2VydmVyVXBkYXRlKGFyZ3VtZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9mZih7IGV2ZW50cywgaGFuZGxlciwgdGFyZ2V0LCBzZWxlY3RvciB9KSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkgeyAvLyBvZmYoKSBpcyB2YWxpZFxuICAgICAgICAgICAgICAgIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlU2VsZWN0b3IoZXZlbnRzKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVyICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub2ZmKHtoYW5kbGVyfSlcIiwgaGFuZGxlcikudHlwZUZ1bmN0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub2ZmKHt0YXJnZXR9KVwiLCB0YXJnZXQpLnR5cGUoU3RyaW5nLCBqUXVlcnksIEhUTUxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBzZWxlY3RvciAmJiBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLm9mZih7c2VsZWN0b3J9KVwiLCB0YXJnZXQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIGpRdWVyeSh0YXJnZXQpLm9mZihldmVudHMsIHNlbGVjdG9yLCBoYW5kbGVyKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkodGFyZ2V0KS5vZmYoZXZlbnRzLCBoYW5kbGVyKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgalF1ZXJ5KFwiKlwiKS5vZmYoZXZlbnRzLCBoYW5kbGVyKTtcblxuICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gdGhpcy5oYW5kbGVycy5nZXQoaGFuZGxlcik7XG4gICAgICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcImhhbmRsZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJub3QgcmVnaXN0ZXJlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2l2ZW46IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdHJ5Lm9mZihldmVudHMsIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9uT2JzZXJ2ZXJVcGRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMub25PYnNlcnZlclVwZGF0ZShhcmd1bWVudHMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub25MaXN0ZW5lclVwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5vbkxpc3RlbmVyVXBkYXRlKGFyZ3VtZW50cylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJ1biBpbiBwYXJhbGxlbC4gRG9uJ3QgXCJhd2FpdFwiIGZvciBhc3luYyBoYW5kbGVyc1xuICAgICAqIE9idmlvdXNseSBwcm9kdWNlcyB1bnByZWRpY3RhYmxlIHJhY2UgY29uZGl0aW9uc1xuICAgICAqL1xuICAgIHRyaWdnZXJQYXJhbGxlbCh7IGV2ZW50cywgZGF0YSwgdGFyZ2V0IH0pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvcihldmVudHMpO1xuICAgICAgICAgICAgdGFyZ2V0XG4gICAgICAgICAgICAgICAgJiYgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUV2ZW50cy50cmlnZ2VyUGFyYWxsZWwoe3RhcmdldH0pXCIsIHRhcmdldCkudHlwZShTdHJpbmcsIGpRdWVyeSwgSFRNTEVsZW1lbnQpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgICAgICBjb25zdCBwZW5kaW5nID0gW107XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cy5zcGxpdChcIiBcIik7XG5cbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgZm9yIChsZXQgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRhcmdldCkudHJpZ2dlcihldmVudCwgeyBkYXRhLCBzdGFjayB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGV2ZW50IG9mIGV2ZW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0cnkudHJpZ2dlckhhbmRsZXIoZXZlbnQsIHsgZGF0YSwgc3RhY2sgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGhhbmRsZXIgb2Ygc3RhY2spIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBoYW5kbGVyKCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZVxuICAgICAgICAgICAgICAgICYmICFyZXN1bHQuJGlzU2V0dGxlZCAvLyBkb24ndCBuZWVkIHRvIGF3YWl0XG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2gocmVzdWx0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBlbmRpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocGVuZGluZylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUnVuIGluIGRlY2xhcmF0aW9uIG9yZGVyIHN5bmNocm9ub3VzbHkuIFdpbGwgXCJhd2FpdFwiIGZvciBhc3luYyBoYW5kbGVyc1xuICAgICAqIFByZXZlbnRzIHVucHJlZGljdGFibGUgcmFjZSBjb25kaXRpb25zXG4gICAgICovXG4gICAgdHJpZ2dlclNlcmllcyh7IGV2ZW50cywgZGF0YSwgdGFyZ2V0IH0pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvcihldmVudHMpO1xuICAgICAgICAgICAgdGFyZ2V0ICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMudHJpZ2dlclNlcmllcyh7dGFyZ2V0fSlcIiwgdGFyZ2V0KS50eXBlKFN0cmluZywgalF1ZXJ5LCBIVE1MRWxlbWVudClcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgSkZhY3RvcnlQcm9taXNlU3luYyhhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgICAgICBldmVudHMgPSBldmVudHMuc3BsaXQoXCIgXCIpO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0YXJnZXQpLnRyaWdnZXIoZXZlbnQsIHsgZGF0YSwgc3RhY2sgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBldmVudCBvZiBldmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS50cmlnZ2VySGFuZGxlcihldmVudCwgeyBkYXRhLCBzdGFjayB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaGFuZGxlciBvZiBzdGFjaykge1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBoYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgJiYgIXJlc3VsdC4kaXNTZXR0bGVkIC8vIGRvbid0IG5lZWQgdG8gYXdhaXRcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlFdmVudHNNYW5hZ2VyIGV4dGVuZHMgSkZhY3RvcnlFdmVudHMge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBwYXJlbnQ6IHsgdmFsdWU6IHBhcmVudCB9LFxuICAgICAgICAgICAgYWZmaWxpYXRlUnVsZXM6IHsgdmFsdWU6IG5ldyBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXIoKS5jb21wb3NlKCkgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZmZpbGlhdGVBZGRSdWxlKEpGYWN0b3J5RXZlbnRzTWFuYWdlci5ydWxlX25hbWVzcGFjZSlcbiAgICB9XG5cbiAgICBhZmZpbGlhdGUoZXZlbnRzID0gXCJcIiwgbmFtZXNwYWNlcyA9IFwiXCIsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHBhcnNlciA9IG5ldyBKRmFjdG9yeUV2ZW50U2VsZWN0b3JQYXJzZXIoZXZlbnRzKTtcbiAgICAgICAgZm9yIChsZXQgcGFyc2VkRXZlbnQgb2YgcGFyc2VyLmV2ZW50cykge1xuICAgICAgICAgICAgdGhpcy5hZmZpbGlhdGVSdWxlcyhwYXJzZWRFdmVudCwgbmFtZXNwYWNlcywgb3B0aW9ucylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VyLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgYWZmaWxpYXRlQWRkUnVsZShoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuYWZmaWxpYXRlUnVsZXMuY29tcG9zZXIubGFzdChoYW5kbGVyKVxuICAgIH1cblxuICAgIHN0YXRpYyBydWxlX25hbWVzcGFjZShjb250ZXh0LCBwYXJzZWRFdmVudCwgbmFtZXNwYWNlcykge1xuICAgICAgICBuYW1lc3BhY2VzID0gbmFtZXNwYWNlcy5zcGxpdChcIi5cIik7XG4gICAgICAgIGZvciAobGV0IG5hbWVzcGFjZSBvZiBuYW1lc3BhY2VzKSB7XG4gICAgICAgICAgICBuYW1lc3BhY2UgJiYgcGFyc2VkRXZlbnQuYWRkTmFtZXNwYWNlKG5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbihldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gT2JzZXJ2ZXJzOlxuICAgICAgICAvLyBldmVudHMsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyLCBvcHRpb25zXG5cbiAgICAgICAgLy8gRE9NIEV2ZW50czpcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXIsIG9wdGlvbnNcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLFxuICAgICAgICAvLyBldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnNcblxuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAvLyBldmVudHMsIGhhbmRsZXJcbiAgICAgICAgICAgICAgICBbaGFuZGxlciwgdGFyZ2V0XSA9IFt0YXJnZXQvKiwgdW5kZWZpbmVkKi9dO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzJdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgW2hhbmRsZXIsIHNlbGVjdG9yXSA9IFtzZWxlY3Rvci8qLCB1bmRlZmluZWQqL107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyLCBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIFtoYW5kbGVyLCBvcHRpb25zLCB0YXJnZXQsIHNlbGVjdG9yXSA9IFt0YXJnZXQsIHNlbGVjdG9yLyosIHVuZGVmaW5lZCwgdW5kZWZpbmVkKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1szXSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldCwgaGFuZGxlciwgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBbb3B0aW9ucywgaGFuZGxlciwgc2VsZWN0b3JdID0gW2hhbmRsZXIsIHNlbGVjdG9yLyosIHVuZGVmaW5lZCovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBldmVudHMgPSB0aGlzLmFmZmlsaWF0ZShldmVudHMsIHRoaXMucGFyZW50LiQuYWJvdXQuZmluZ2VycHJpbnQsIG9wdGlvbnMpO1xuXG4gICAgICAgIHRhcmdldCA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIHN1cGVyLm9uKHsgZXZlbnRzLCBoYW5kbGVyIH0pIDpcbiAgICAgICAgICAgIHN1cGVyLm9uKHsgZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLyosIG9wdGlvbnMqLyB9KVxuICAgIH1cblxuICAgIG9mZihldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQm90aDpcbiAgICAgICAgLy8gZXZlbnRzIChjYW4gYmUgbmFtZXNwYWNlcylcbiAgICAgICAgLy8gZXZlbnRzLCBvcHRpb25zXG4gICAgICAgIC8vIG9wdGlvbnMgKGNhbiBiZSByZW1vdmFsKVxuXG4gICAgICAgIC8vIE9ic2VydmVyOlxuICAgICAgICAvLyBldmVudHMsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyLCBvcHRpb25zXG5cbiAgICAgICAgLy8gRE9NIEV2ZW50czpcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXIsIG9wdGlvbnNcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yXG4gICAgICAgIC8vIGV2ZW50cywgdGFyZ2V0LCBzZWxlY3RvciwgaGFuZGxlcixcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLCBvcHRpb25zXG5cbiAgICAgICAgY29uc3QgYXJnTCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIHN3aXRjaCAoYXJnTCkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgW29wdGlvbnMsIGV2ZW50c10gPSBbZXZlbnRzLyosIHVuZGVmaW5lZCovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZWxzZSBldmVudHMgKGNhbiBuYW1lc3BhY2VzKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzFdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgIFtoYW5kbGVyLCB0YXJnZXRdID0gW3RhcmdldC8qLCB1bmRlZmluZWQqL107XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoZWxwZXJfaXNQbGFpbk9iamVjdChhcmd1bWVudHNbMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cywgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBbb3B0aW9ucywgdGFyZ2V0XSA9IFt0YXJnZXQvKiwgdW5kZWZpbmVkKi9dXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVsc2UgZXZlbnRzLCB0YXJnZXRcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1syXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cywgdGFyZ2V0LCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgIFtoYW5kbGVyLCBzZWxlY3Rvcl0gPSBbc2VsZWN0b3IvKiwgdW5kZWZpbmVkKi9dO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cywgaGFuZGxlciwgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBbaGFuZGxlciwgb3B0aW9ucywgdGFyZ2V0LCBzZWxlY3Rvcl0gPSBbdGFyZ2V0LCBzZWxlY3Rvci8qLCB1bmRlZmluZWQsIHVuZGVmaW5lZCovXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldCwgc2VsZWN0b3JcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbM10gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXIsIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgW29wdGlvbnMsIGhhbmRsZXIsIHNlbGVjdG9yXSA9IFtoYW5kbGVyLCBzZWxlY3Rvci8qLCB1bmRlZmluZWQqL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnRzID0gdGhpcy5hZmZpbGlhdGUoZXZlbnRzLCB0aGlzLnBhcmVudC4kLmFib3V0LmZpbmdlcnByaW50LCBvcHRpb25zKTtcblxuICAgICAgICBpZiAoYXJnTCA8IDIpIHtcbiAgICAgICAgICAgIHN1cGVyLm9mZih7IGV2ZW50cyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldCA/XG4gICAgICAgICAgICAgICAgc3VwZXIub2ZmKHsgZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLyosIG9wdGlvbnMqLyB9KSA6XG4gICAgICAgICAgICAgICAgc3VwZXIub2ZmKHsgZXZlbnRzLCBoYW5kbGVyIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0cmlnZ2VyKGV2ZW50cywgdGFyZ2V0LCBkYXRhKSB7XG4gICAgICAgIC8vIGV2ZW50c1xuICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGRhdGFcblxuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJvYmplY3RcIiAmJiAhdGFyZ2V0LmpxdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgW2RhdGEsIHRhcmdldF0gPSBbdGFyZ2V0XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0ID9cbiAgICAgICAgICAgIHN1cGVyLnRyaWdnZXJTZXJpZXMoeyBldmVudHMsIHRhcmdldCwgZGF0YSB9KSA6XG4gICAgICAgICAgICBzdXBlci50cmlnZ2VyU2VyaWVzKHsgZXZlbnRzLCBkYXRhIH0pXG4gICAgfVxuXG4gICAgdHJpZ2dlclBhcmFsbGVsKGV2ZW50cywgdGFyZ2V0LCBkYXRhKSB7XG4gICAgICAgIC8vIGV2ZW50c1xuICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGRhdGFcblxuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJvYmplY3RcIiAmJiAhdGFyZ2V0LmpxdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgW2RhdGEsIHRhcmdldF0gPSBbdGFyZ2V0XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0ID9cbiAgICAgICAgICAgIHN1cGVyLnRyaWdnZXJQYXJhbGxlbCh7IGV2ZW50cywgdGFyZ2V0LCBkYXRhIH0pIDpcbiAgICAgICAgICAgIHN1cGVyLnRyaWdnZXJQYXJhbGxlbCh7IGV2ZW50cywgZGF0YSB9KVxuICAgIH1cblxuICAgIC8vICN1bm9wdGltaXplZCBkcmFmdCNcbiAgICAvLyBJdCdzIG5vdCBlYXN5IHRvIGtlZXAgdGhpcyBsaXN0IHVwIHRvIGRhdGUgYmVjYXVzZTpcbiAgICAvLyAtIGxpc3RlbmVycyBjYW4gYmUgcmVtb3ZlZCBieSBleHRlcm5hbCBkb20gbXV0YXRpb25zXG4gICAgLy8gLSBsaXN0ZW5lcnMgY2FuIGJlIGRlbGVnYXRlZFxuICAgIC8vIC0gb2ZmKCkgbWV0aG9kIGNhbiByZW1vdmUgbGlzdGVuZXJzIGdsb2JhbGx5XG4gICAgZ2V0RG9tTGlzdGVuZXJzKG5hbWVzcGFjZSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGxldCBlbG0gb2YgalF1ZXJ5KFwiKlwiKSkge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBqUXVlcnkuX2RhdGEoZWxtLCBcImV2ZW50c1wiKTtcbiAgICAgICAgICAgIGlmIChkYXRhKSB7Ly8gZGF0YSA9IHtjbGljazogW3t9XSwgLi4uIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlbnRyaWVzIG9mIE9iamVjdC52YWx1ZXMoZGF0YSkpIHsvLyBlbnRyaWVzID0gW3t0eXBlOi4uLn1dXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIGVudHJpZXMpIHsvLyBlbnRyeSA9IHt0eXBlLCBuYW1lc3BhY2UsIGhhbmRsZXIsIC4uLn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJzZXIgPSBuZXcgSkZhY3RvcnlFdmVudFNlbGVjdG9yKGVudHJ5Lm5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLmhhc05hbWVzcGFjZShuYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZXMgPSByZXN1bHQuZ2V0KGVsbSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXQoZWxtLCB0eXBlcyA9IHt9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2VudHJ5LnR5cGVdIHx8ICh0eXBlc1tlbnRyeS50eXBlXSA9IFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IGVudHJ5LnNlbGVjdG9yIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IGVudHJ5LmhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogZW50cnkubmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cblxuICAgIC8vICN1bm9wdGltaXplZCBkcmFmdCNcbiAgICBnZXRPYnNlcnZlcnMoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgTWFwKCk7XG4gICAgICAgIGxldCBldmVudHMgPSB0aGlzLnJlZ2lzdHJ5Ll9ldmVudHM7XG5cbiAgICAgICAgaWYgKCFldmVudHMpIHtcbiAgICAgICAgICAgIGxldCByZWdpc3RyeSA9IE9iamVjdC52YWx1ZXModGhpcy5yZWdpc3RyeSlbMF07XG4gICAgICAgICAgICBsZXQgZXhwYW5kbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHJlZ2lzdHJ5KS5maW5kKGsgPT4gay5pbmRleE9mKFwialF1ZXJ5XCIpID09PSAwKTtcbiAgICAgICAgICAgIGlmIChyZWdpc3RyeSAmJiBleHBhbmRvKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzID0gdGhpcy5yZWdpc3RyeS5fZXZlbnRzID0gcmVnaXN0cnlbZXhwYW5kb10uZXZlbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50cykge1xuICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhldmVudHMpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGV2ZW50ID0gcmVzdWx0LmdldChrZXkpO1xuICAgICAgICAgICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldChrZXksIGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZXZlbnRUeXBlRW50cnkgb2YgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogZXZlbnRUeXBlRW50cnkuaGFuZGxlci5vcmlnaW5hbEhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IGV2ZW50VHlwZUVudHJ5Lm5hbWVzcGFjZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUV2ZW50U2VsZWN0b3JQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9ycykge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV2ZW50cy52YWxpZGF0ZVNlbGVjdG9yKHNlbGVjdG9ycyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIEFycmF5PEpGYWN0b3J5RXZlbnRTZWxlY3Rvcj5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXZlbnRzID0gc2VsZWN0b3JzLnNwbGl0KFwiIFwiKS5tYXAoc2VsZWN0b3IgPT4gbmV3IEpGYWN0b3J5RXZlbnRTZWxlY3RvcihzZWxlY3RvcikpXG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCBzID0gW107XG4gICAgICAgIGZvciAobGV0IGV2ZW50IG9mIHRoaXMuZXZlbnRzKSB7XG4gICAgICAgICAgICBzLnB1c2goZXZlbnQudG9TdHJpbmcoKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcy5qb2luKFwiIFwiKVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5RXZlbnRTZWxlY3RvciB7XG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgbGV0IFtldmVudCwgLi4ubmFtZXNwYWNlXSA9IHNlbGVjdG9yLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgdGhpcy5ldmVudCA9IGV2ZW50O1xuICAgICAgICB0aGlzLm5hbWVzcGFjZSA9IG5ldyBTZXQobmFtZXNwYWNlKVxuICAgIH1cblxuICAgIC8qKiBAcmV0dXJuIHtCb29sZWFufFN0cmluZ30gKi9cbiAgICBoYXNOYW1lc3BhY2UobmFtZXNwYWNlcykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobmFtZXNwYWNlcykpIHtcbiAgICAgICAgICAgIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc11cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBuYW1lc3BhY2Ugb2YgbmFtZXNwYWNlcykge1xuICAgICAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgICAgIGlmICghL15bXFx3Ol0rJC8udGVzdChuYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIm5hbWVzcGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIm11c3QgYmUgYWxwaGFudW1lcmljLCB1bmRlcnNjb3JlIGFuZCBjb2xvbiBjaGFyYWN0ZXJzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBnaXZlbjogbmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5hbWVzcGFjZSAmJiB0aGlzLm5hbWVzcGFjZS5oYXMobmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lc3BhY2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBhZGROYW1lc3BhY2UobmFtZXNwYWNlKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIGlmICghL15bXFx3Ol0rJC8udGVzdChuYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuSU5WQUxJRF9WQUxVRSh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJuYW1lc3BhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIm11c3QgYmUgYWxwaGFudW1lcmljLCB1bmRlcnNjb3JlIGFuZCBjb2xvbiBjaGFyYWN0ZXJzXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBuYW1lc3BhY2VcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZXNwYWNlLmFkZChuYW1lc3BhY2UpXG4gICAgfVxuXG4gICAgZGVsZXRlTmFtZXNwYWNlKG5hbWVzcGFjZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBpZiAoIS9eW1xcdzpdKyQvLnRlc3QobmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwibmFtZXNwYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJtdXN0IGJlIGFscGhhbnVtZXJpYywgdW5kZXJzY29yZSBhbmQgY29sb24gY2hhcmFjdGVyc1wiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogbmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWVzcGFjZS5kZWxldGUobmFtZXNwYWNlKVxuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lc3BhY2Uuc2l6ZSA/IHRoaXMuZXZlbnQgKyBcIi5cIiArIEFycmF5LmZyb20odGhpcy5uYW1lc3BhY2UudmFsdWVzKCkpLmpvaW4oXCIuXCIpIDogdGhpcy5ldmVudDtcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5pZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvciA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvcihzZWxlY3RvcilcIiwgc2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgLm5vdFVuZGVmaW5lZCgpXG4gICAgICAgICAgICAgICAgLnZhbGlkU3BhY2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBbZXZlbnQsIG5zXSBvZiBzZWxlY3Rvci5zcGxpdChcIiBcIilcbiAgICAgICAgICAgIC5tYXAodiA9PiB2LnNwbGl0KFwiLlwiKSlcbiAgICAgICAgICAgIC5tYXAodiA9PiBbdi5zaGlmdCgpLCB2LmpvaW4oXCIuXCIpXSkpIHtcbiAgICAgICAgICAgIGV2ZW50ICYmIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgbnMgJiYgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVOYW1lc3BhY2UobnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfTtcblxuICAgIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlRXZlbnQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlRXZlbnQoZXZlbnQpXCIsIGV2ZW50KVxuICAgICAgICAgICAgICAgIC5ub3RVbmRlZmluZWQoKVxuICAgICAgICAgICAgICAgIC5ub3RFbXB0eVN0cmluZygpXG4gICAgICAgICAgICAgICAgLnZhbGlkU3BhY2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIS9eW1xcdzpdKyQvLnRlc3QoZXZlbnQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5JTlZBTElEX1ZBTFVFKHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiSkZhY3RvcnlFdmVudHMudmFsaWRhdGVFdmVudChldmVudClcIixcbiAgICAgICAgICAgICAgICByZWFzb246IFwibXVzdCBiZSBhbHBoYW51bWVyaWMsIHVuZGVyc2NvcmUgYW5kIGNvbG9uIGNoYXJhY3RlcnNcIixcbiAgICAgICAgICAgICAgICBnaXZlbjogZXZlbnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH07XG5cbiAgICBKRmFjdG9yeUV2ZW50cy52YWxpZGF0ZU5hbWVzcGFjZSA9IGZ1bmN0aW9uKG5hbWVzcGFjZSkgeyAvLyBleDogbnMubnMyLm5zM1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlTmFtZXNwYWNlKG5hbWVzcGFjZSlcIiwgbmFtZXNwYWNlKVxuICAgICAgICAgICAgICAgIC5ub3RVbmRlZmluZWQoKVxuICAgICAgICAgICAgICAgIC5ub3RFbXB0eVN0cmluZygpXG4gICAgICAgICAgICAgICAgLnZhbGlkU3BhY2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIS9eW1xcdzouXSskLy50ZXN0KG5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgIHRhcmdldDogXCJKRmFjdG9yeUV2ZW50cy52YWxpZGF0ZU5hbWVzcGFjZShuYW1lc3BhY2UpXCIsXG4gICAgICAgICAgICAgICAgcmVhc29uOiBcIm11c3QgYmUgYWxwaGFudW1lcmljLCB1bmRlcnNjb3JlLCBkb3QgYW5kIGNvbG9uIGNoYXJhY3RlcnNcIixcbiAgICAgICAgICAgICAgICBnaXZlbjogbmFtZXNwYWNlXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9O1xufSIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRmFjdG9yeVByb21pc2UgfSBmcm9tIFwiLi9KRmFjdG9yeVByb21pc2VcIjtcbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlGZXRjaFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlGZXRjaCBleHRlbmRzIEpGYWN0b3J5UHJvbWlzZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25hbEFyZ3MsIHVybCwgZmV0Y2hPcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25hbEFyZ3MgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgc3VwZXIob3B0aW9uYWxBcmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uYWxBcmdzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgW29wdGlvbmFsQXJncywgdXJsLCBmZXRjaE9wdGlvbnNdID0gW3t9LCBhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXV1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGZldGNoUmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHVybCwgZmV0Y2hPcHRpb25zKTtcblxuICAgICAgICAgICAgc3VwZXIob3B0aW9uYWxBcmdzLCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHByb21pc2UgPSBmZXRjaChmZXRjaFJlcXVlc3QpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGNoYWluLmZldGNoUmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihyZXNwb25zZS5zdGF0dXMgKyBcIjpcIiArIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZldGNoT3B0aW9ucy4kdHlwZVRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHIgPT4gdGhpcy4kY2hhaW4ucmVzcG9uc2VUZXh0ID0gcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZldGNoT3B0aW9ucy4kdHlwZUpTT04pIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHIgPT4gdGhpcy4kY2hhaW4ucmVzcG9uc2VKU09OID0gcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2UuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuUkVRVUVTVF9FUlJPUih7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IHJlYXNvbi5tZXNzYWdlIHx8IHJlYXNvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy4kY2hhaW4uZmV0Y2hSZXNwb25zZSAmJiB0aGlzLiRjaGFpbi5mZXRjaFJlc3BvbnNlLnVybCB8fCB1cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoUmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoUmVzcG9uc2U6IHRoaXMuJGNoYWluLmZldGNoUmVzcG9uc2UgfHwgbnVsbFxuICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25hbEFyZ3MudHJhY2VTb3VyY2UpXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuJGNoYWluLmZldGNoT3B0aW9ucyA9IGZldGNoT3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMuJGNoYWluLmZldGNoUmVxdWVzdCA9IGZldGNoUmVxdWVzdDtcblxuICAgICAgICAgICAgbGV0IGFib3J0Q3RybCA9IGZldGNoT3B0aW9ucy5hYm9ydENvbnRyb2xsZXIgfHwgbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgICAgZmV0Y2hPcHRpb25zLnNpZ25hbCA9IGFib3J0Q3RybC5zaWduYWw7XG4gICAgICAgICAgICB0aGlzLiRjaGFpbi5mZXRjaEFib3J0Q29udHJvbGxlciA9IGFib3J0Q3RybDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRjaGFpbkFib3J0KHJlYXNvbiA9IFwicmVxdWVzdCBhYm9ydGVkXCIpIHtcbiAgICAgICAgc3VwZXIuJGNoYWluQWJvcnQocmVhc29uKTtcbiAgICAgICAgdGhpcy4kY2hhaW4uZmV0Y2hBYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG59IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IEpGQUNUT1JZX0RFViwgSkZBQ1RPUllfQ0xJIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBqRmFjdG9yeUZ1bmN0aW9uQ29uZGl0aW9uYWwgfSBmcm9tIFwiLi9KRmFjdG9yeUZ1bmN0aW9uXCI7XG5pbXBvcnQgeyBoZWxwZXJfZGVmYXVsdHNEZWVwLCBOT09QIH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5TG9nZ2VyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEEgY29udGV4dHVhbCBsb2dnZXIgdGhhdCBwcmVwZW5kcyBhIGxhYmVsIGFuZCBhbGxvd3MgcnVudGltZSBmaWx0ZXJpbmcgd2hpbGUgcHJlc2VydmluZyB0aGUgY2FsbGVyIGxpbmUgbnVtYmVyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxvZ2dlci5jcmVhdGVTdWJMb2dnZXIobGFiZWwpIGNyZWF0ZSBhIHN1Yi1sb2dnZXIgb2YgbG9nZ2VyOyBcImxvZ2dlclwiIGNhbiBiZSBhIHN1Yi1sb2dnZXIuXG4vLyBsb2dnZXIuZGlzYWJsZSgpIGRpc2FibGUgY29uc29sZSBmb3IgaXRzZWxmIGFuZCBzdWItbG9nZ2Vyc1xuLy8gbG9nZ2VyLmRpc2FsbG93KCdsb2cnKSBkaXNhbGxvdyBsb2dnZXIubG9nKCkgb25seVxuLy8gbG9nZ2VyLmRpc2FsbG93KCdsb2cnLCBzdWJMb2dnZXIubGFiZWwpIGRpc2FsbG93IHN1Yi1sb2dnZXIubG9nKCkgb25seS4gVGhpcyBpcyBjYWxsYWJsZSBmcm9tIGFueSBsb2dnZXIvc3ViLWxvZ2dlclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXMgOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgU1lNQk9MX0VOQUJMRUQgPSBTeW1ib2woKTtcblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5TG9nZ2VyIHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiBvcHRpb25zKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5TG9nZ2VyKG9wdGlvbnMpXCIsIG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgLnByb3BlcnRpZXMoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05GSUcpKVxuICAgICAgICB9XG4gICAgICAgIGhlbHBlcl9kZWZhdWx0c0RlZXAodGhpcywgb3B0aW9ucywgSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05GSUcpO1xuICAgICAgICB0aGlzLmNvbmRpdGlvbiA9IGpGYWN0b3J5RnVuY3Rpb25Db25kaXRpb25hbChKRmFjdG9yeUxvZ2dlci5ERUZBVUxUX0NPTkRJVElPTik7XG4gICAgICAgIHRoaXMuaW5zdGFsbEFjY2Vzc29yKFwibG9nXCIpO1xuICAgICAgICB0aGlzLmluc3RhbGxBY2Nlc3NvcihcIndhcm5cIik7XG4gICAgICAgIHRoaXMuaW5zdGFsbEFjY2Vzc29yKFwiZXJyb3JcIilcbiAgICB9XG5cbiAgICBnZXQgZW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbU1lNQk9MX0VOQUJMRURdICYmICh0aGlzLnBhcmVudExvZ2dlciA/IHRoaXMucGFyZW50TG9nZ2VyLmVuYWJsZWQgOiB0cnVlKVxuICAgIH1cblxuICAgIHNldCBlbmFibGVkKHYpIHtcbiAgICAgICAgdiA/IHRoaXMuZW5hYmxlKCkgOiB0aGlzLmRpc2FibGUoKVxuICAgIH1cblxuICAgIGVuYWJsZSgpIHtcbiAgICAgICAgaWYgKHRoaXNbU1lNQk9MX0VOQUJMRURdICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzW1NZTUJPTF9FTkFCTEVEXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNhYmxlKCkge1xuICAgICAgICBpZiAodGhpc1tTWU1CT0xfRU5BQkxFRF0gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzW1NZTUJPTF9FTkFCTEVEXSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzYWxsb3cobmF0aXZlTmFtZSwgbGFiZWwgPSB0aGlzLmxhYmVsKSB7XG4gICAgICAgIGlmICghdGhpcy5maWx0ZXJzW2xhYmVsXSkge3RoaXMuZmlsdGVyc1tsYWJlbF0gPSB7fX1cbiAgICAgICAgdGhpcy5maWx0ZXJzW2xhYmVsXVtuYXRpdmVOYW1lXSA9IHRydWVcbiAgICB9XG5cbiAgICBhbGxvdyhuYXRpdmVOYW1lLCBsYWJlbCA9IHRoaXMubGFiZWwpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyc1tsYWJlbF0pIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmZpbHRlcnNbbGFiZWxdW25hdGl2ZU5hbWVdXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbnN0YWxsQWNjZXNzb3IobmF0aXZlTmFtZSwgdGFyZ2V0TmFtZSA9IG5hdGl2ZU5hbWUsIHRhcmdldCA9IHRoaXMpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUxvZ2dlcihuYXRpdmVOYW1lKVwiLCBuYXRpdmVOYW1lKS5lcXVhbEluKFtcImxvZ1wiLCBcIndhcm5cIiwgXCJlcnJvclwiXSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCB7XG4gICAgICAgICAgICBbdGFyZ2V0TmFtZV06IHtcbiAgICAgICAgICAgICAgICBnZXQ6IHRoaXMuYWNjZXNzb3IuYmluZCh0aGlzLCBuYXRpdmVOYW1lLyosIHRhcmdldCovKSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBhY2Nlc3NvcihuYXRpdmVOYW1lLyosIHRhcmdldCovKSB7XG4gICAgICAgIGlmICghdGhpc1tTWU1CT0xfRU5BQkxFRF0pIHtcbiAgICAgICAgICAgIHJldHVybiBOT09QO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvbihuYXRpdmVOYW1lKSAmJiB0aGlzLmZvcm1hdHRlcltuYXRpdmVOYW1lXSh0aGlzKSB8fCBOT09QXG4gICAgfVxuXG4gICAgY3JlYXRlU3ViTG9nZ2VyKGxhYmVsKSB7XG4gICAgICAgIC8qKiBAdHlwZSBKRmFjdG9yeUxvZ2dlciAqL1xuICAgICAgICBsZXQgc3ViID0gbmV3IEpGYWN0b3J5TG9nZ2VyKHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRoaXMuZW5hYmxlZCxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsICsgXCIuXCIgKyBsYWJlbCxcbiAgICAgICAgICAgIHN0eWxlc19jc3M6IHRoaXMuc3R5bGVzX2NzcyxcbiAgICAgICAgICAgIHN0eWxlc19jbGk6IHRoaXMuc3R5bGVzX2NsaSxcbiAgICAgICAgICAgIGNvbnNvbGU6IHRoaXMuY29uc29sZSxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogdGhpcy5mb3JtYXR0ZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHN1Yi5wYXJlbnRMb2dnZXIgPSB0aGlzO1xuICAgICAgICBzdWIuY29uZGl0aW9uLmFkZENvbmRpdGlvbigoKSA9PiB0aGlzLmVuYWJsZWQpO1xuICAgICAgICBzdWIuZmlsdGVycyA9IHRoaXMuZmlsdGVyczsgLy8gc2hhcmVkIHRvIGFsbG93L2Rpc2FsbG93IGZyb20gYW55d2hlcmVcbiAgICAgICAgcmV0dXJuIHN1YlxuICAgIH1cbn1cblxuLy8gI2xpbWl0YXRpb24jIFRvIHByZXNlcnZlIHRoZSBsaW5lIG51bWJlciwgd2UgY2FuIG9ubHkgdXNlIG5hdGl2ZSBmdW5jdGlvbnMsIGxpa2UgYmluZFxuLy8gI2xpbWl0YXRpb24jIEJlY2F1c2Ugd2UgdXNlIGJpbmQoKSwgb25seSB0aGUgc3R5bGUgb2YgdGhlIGZpcnN0IGVsZW1lbnQgY2FuIGJlIGVmZmljaWVudGx5IGRlZmluZWRcblxuSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX05BVElWRSA9IHtcbiAgICBsb2c6IGxvZ2dlciA9PiBsb2dnZXIuY29uc29sZS5sb2cuYmluZChsb2dnZXIuY29uc29sZSwgbG9nZ2VyLmxhYmVsICsgXCI+XCIpLFxuICAgIHdhcm46IGxvZ2dlciA9PiBsb2dnZXIuY29uc29sZS53YXJuLmJpbmQobG9nZ2VyLmNvbnNvbGUsIGxvZ2dlci5sYWJlbCArIFwiPlwiKSxcbiAgICBlcnJvcjogbG9nZ2VyID0+IGxvZ2dlci5jb25zb2xlLmVycm9yLmJpbmQobG9nZ2VyLmNvbnNvbGUsIGxvZ2dlci5sYWJlbCArIFwiPlwiKVxufTtcblxuSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX0NMSSA9IHtcbiAgICBsb2c6IGxvZ2dlciA9PiBsb2dnZXIuY29uc29sZS5sb2cuYmluZChsb2dnZXIuY29uc29sZSwgbG9nZ2VyLnN0eWxlc19jbGkubGFiZWwsIGxvZ2dlci5sYWJlbCArIFwiPlwiKSxcbiAgICB3YXJuOiBsb2dnZXIgPT4gbG9nZ2VyLmNvbnNvbGUud2Fybi5iaW5kKGxvZ2dlci5jb25zb2xlLCBsb2dnZXIuc3R5bGVzX2NsaS5sYWJlbCwgbG9nZ2VyLmxhYmVsICsgXCI+XCIpLFxuICAgIGVycm9yOiBsb2dnZXIgPT4gbG9nZ2VyLmNvbnNvbGUuZXJyb3IuYmluZChsb2dnZXIuY29uc29sZSwgbG9nZ2VyLnN0eWxlc19jbGkubGFiZWwsIGxvZ2dlci5sYWJlbCArIFwiPlwiKVxufTtcblxuSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX0JST1dTRVIgPSB7XG4gICAgbG9nOiBsb2dnZXIgPT4gbG9nZ2VyLmNvbnNvbGUubG9nLmJpbmQobG9nZ2VyLmNvbnNvbGUsIFwiJWNcIiArIGxvZ2dlci5sYWJlbCArIFwiPlwiLCBsb2dnZXIuc3R5bGVzX2Nzcy5sYWJlbCksXG4gICAgd2FybjogbG9nZ2VyID0+IGxvZ2dlci5jb25zb2xlLndhcm4uYmluZChsb2dnZXIuY29uc29sZSwgXCIlY1wiICsgbG9nZ2VyLmxhYmVsICsgXCI+XCIsIGxvZ2dlci5zdHlsZXNfY3NzLmxhYmVsKSxcbiAgICBlcnJvcjogbG9nZ2VyID0+IGxvZ2dlci5jb25zb2xlLmVycm9yLmJpbmQobG9nZ2VyLmNvbnNvbGUsIFwiJWNcIiArIGxvZ2dlci5sYWJlbCArIFwiPlwiLCBsb2dnZXIuc3R5bGVzX2Nzcy5sYWJlbClcbn07XG5cbi8qKiBAcmV0dXJuIHtib29sZWFufSAqL1xuSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05ESVRJT04gPSBmdW5jdGlvbihuYXRpdmVOYW1lKSB7XG4gICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5TG9nZ2VyLmNvbmRpdGlvbihuYXRpdmVOYW1lKVwiLCBuYXRpdmVOYW1lKS5lcXVhbEluKFtcImxvZ1wiLCBcIndhcm5cIiwgXCJlcnJvclwiXSk7XG4gICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlMb2dnZXIuZW5hYmxlZFwiLCB0aGlzLmVuYWJsZWQpLmVxdWFsKHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gISh0aGlzLmZpbHRlcnNbdGhpcy5sYWJlbF0gJiYgdGhpcy5maWx0ZXJzW3RoaXMubGFiZWxdW25hdGl2ZU5hbWVdKVxufTtcblxuSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05GSUcgPSAvKiogQGxlbmRzIEpGYWN0b3J5TG9nZ2VyIyAqLyB7XG4gICAgbGFiZWw6IFwiXCIsXG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBwYXJlbnRMb2dnZXI6IG51bGwsXG4gICAgZm9ybWF0dGVyOiBKRkFDVE9SWV9DTEkgP1xuICAgICAgICBKRmFjdG9yeUxvZ2dlci5GT1JNQVRURVJfQ0xJIDpcbiAgICAgICAgSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX0JST1dTRVIsXG4gICAgY29uc29sZSxcbiAgICBmaWx0ZXJzOiB7XG4gICAgfSxcbiAgICBzdHlsZXNfY2xpOiB7XG4gICAgICAgIGxhYmVsOiBcIlxceDFiWzE7MzBtJXNcXHgxYlswbVwiXG4gICAgfSxcbiAgICBzdHlsZXNfY3NzOiB7XG4gICAgICAgIGxhYmVsOiBcImNvbG9yOiBncmF5XCJcbiAgICB9XG59OyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5VGltZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlUaW1lIGV4dGVuZHMgRGF0ZSB7XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvTG9jYWxlVGltZVN0cmluZygpICsgXCIsIFwiICsgdGhpcy5nZXRVVENNaWxsaXNlY29uZHMoKSArIFwibXMgKFwiICsgdGhpcy52YWx1ZU9mKCkgKyBcIilcIlxuICAgIH1cbiAgICAkdG9EdXJhdGlvblN0cmluZygpIHtcbiAgICAgICAgbGV0IGhvdXJzID0gdGhpcy5nZXRVVENIb3VycygpO1xuICAgICAgICBsZXQgbWludXRlcyA9IHRoaXMuZ2V0VVRDTWludXRlcygpO1xuICAgICAgICBsZXQgc2Vjb25kcyA9IHRoaXMuZ2V0VVRDU2Vjb25kcygpO1xuICAgICAgICBsZXQgbWlsbGlzZWNvbmRzID0gdGhpcy5nZXRVVENNaWxsaXNlY29uZHMoKTtcblxuICAgICAgICBsZXQgYSA9IFtdO1xuICAgICAgICBpZiAoaG91cnMpIHtcbiAgICAgICAgICAgIGEucHVzaChob3VycyArIFwiaFwiKVxuICAgICAgICB9XG4gICAgICAgIGlmIChtaW51dGVzKSB7XG4gICAgICAgICAgICBhLnB1c2gobWludXRlcyArIFwibWluXCIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlY29uZHMpIHtcbiAgICAgICAgICAgIGEucHVzaChzZWNvbmRzICsgXCJzXCIpXG4gICAgICAgIH1cbiAgICAgICAgYS5wdXNoKG1pbGxpc2Vjb25kcyArIFwibXNcIik7XG4gICAgICAgIGlmIChhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYS5qb2luKFwiLFwiKSArIFwiIChcIiArIHRoaXMudmFsdWVPZigpICsgXCIpXCI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeVRpbWVUcmFjZSBleHRlbmRzIERhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmVsYXBzZWQgPSBudWxsO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICB0MTogeyB2YWx1ZTogbnVsbCwgd3JpdGFibGU6IHRydWUgfSxcbiAgICAgICAgICAgIHQwOiB7IHZhbHVlOiBuZXcgSkZhY3RvcnlUaW1lKCkgfVxuICAgICAgICB9KVxuICAgIH1cbiAgICBlbmQoKSB7XG4gICAgICAgIHRoaXMudDEgPSBuZXcgSkZhY3RvcnlUaW1lKCk7XG4gICAgICAgIHRoaXMuZWxhcHNlZCA9IG5ldyBKRmFjdG9yeVRpbWUodGhpcy50MSAtIHRoaXMudDApLiR0b0R1cmF0aW9uU3RyaW5nKClcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsYXBzZWRcbiAgICB9XG59IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdENvcmVcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmltcG9ydCB7IEpGQUNUT1JZX0RFViwgakZhY3RvcnlDb25maWcgfSBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IsIEpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBqRmFjdG9yeSB9IGZyb20gXCIuL2pGYWN0b3J5XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUFib3V0IH0gZnJvbSBcIi4vSkZhY3RvcnlBYm91dFwiO1xuaW1wb3J0IHsgSkZhY3RvcnlMb2dnZXIgfSBmcm9tIFwiLi9KRmFjdG9yeUxvZ2dlclwiO1xuaW1wb3J0IHsgSkZhY3RvcnlQcm9taXNlLCBKRmFjdG9yeVByb21pc2VTeW5jIH0gZnJvbSBcIi4vSkZhY3RvcnlQcm9taXNlXCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV2ZW50c01hbmFnZXIgfSBmcm9tIFwiLi9KRmFjdG9yeUV2ZW50c1wiO1xuaW1wb3J0IHsgSkZhY3RvcnlPYmplY3QgfSBmcm9tIFwiLi9KRmFjdG9yeU9iamVjdFwiO1xuaW1wb3J0IHsgSkZhY3RvcnlUaW1lVHJhY2UgfSBmcm9tIFwiLi9KRmFjdG9yeVRpbWVcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBPYmplY3Rcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgVHJhaXRDb3JlIHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qgb3duZXIgPSB0aGlzO1xuXG4gICAgICAgIGNsYXNzIFN1Yk1hcCBleHRlbmRzIE1hcCB7XG4gICAgICAgICAgICAkcmVnaXN0ZXJTeW5jKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3ViID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe30sIHtcbiAgICAgICAgICAgICAgICAgICAgJHZhbHVlOiB7IHZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICRwaGFzZVJlbW92ZTogeyB2YWx1ZTogVHJhaXRTZXJ2aWNlLmdldENvbnRleHR1YWxSZW1vdmVQaGFzZShvd25lcikgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0KGtleSwgc3ViKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3ViXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkcmVnaXN0ZXJBc3luYyhrZXksIHRhc2tOYW1lLCBwcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRhc2sgPSBvd25lci4kdGFzayh0YXNrTmFtZSwgcHJvbWlzZS4kY2hhaW4pO1xuXG4gICAgICAgICAgICAgICAgLy8gRW5kIG9mIHByb21pc2UgY2hhaW4gbXVzdCBjb21wbGV0ZSB0aGUgdGFza1xuICAgICAgICAgICAgICAgIC8vIHRhc2suJGNoYWluQXV0b0NvbXBsZXRlKClcbiAgICAgICAgICAgICAgICBwcm9taXNlLiRjaGFpbi50aGVuKCgpID0+IHsgLy8gc3luY2hyb25vdXMgdGhlblxuICAgICAgICAgICAgICAgICAgICB0YXNrLiRjaGFpbkNvbXBsZXRlKFwidGFzayBjb21wbGV0ZWRcIilcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIEFib3J0ZWQgdGFzayBtdXN0IGFib3J0IHRoZSBwcm9taXNlIGlmIHN0aWxsIHJ1bm5pbmdcbiAgICAgICAgICAgICAgICB0YXNrLiRjaGFpbi50aGVuKCgpID0+IHsvLyBzeW5jaHJvbm91cyB0aGVuXG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJvbWlzZS4kY2hhaW4uaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UuJGNoYWluQWJvcnQoXCJhYm9ydGVkIGJ5IHRhc2tcIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb21pc2UsIFwiJHBoYXNlUmVtb3ZlXCIsIHsgdmFsdWU6IHRhc2suJHBoYXNlUmVtb3ZlIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0KGtleSwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2tcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB7XG4gICAgICAgICAgICBbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXTogT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgICAgICAgIGFzc2lnbjogZnVuY3Rpb24ocHJvcGVydHksIHZhbHVlLCBkZXNjcmlwdG9yKSB7SkZhY3RvcnlPYmplY3QuYXNzaWduKHRoaXMsIHByb3BlcnR5LCB2YWx1ZSwgZGVzY3JpcHRvcil9LFxuICAgICAgICAgICAgY3JlYXRlU3ViTWFwOiAoKSA9PiBuZXcgU3ViTWFwKClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiJFwiLCB7IHZhbHVlOiBPYmplY3QuY3JlYXRlKHByb3RvKSB9KTtcblxuICAgICAgICAvLyBwcmUtZGVmaW5lIG1vc3QgaW1wb3J0YW50IHByb3BlcnRpZXNcbiAgICAgICAgLy8gdG8gb3JkZXIgdGhlbSBmaXJzdCBpbiBkZXZ0b29sIChyZWR1Y2VkIGZvcm0gb25seSlcbiAgICAgICAgdGhpcy4kLmFzc2lnbih7XG4gICAgICAgICAgICB0YXNrczogbnVsbCxcbiAgICAgICAgICAgIHJlcXVlc3RzOiBudWxsXG4gICAgICAgIH0sIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEVfV1JJVEFCTEUpO1xuICAgIH1cbn1cblxuVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFID0gU3ltYm9sKFwiX1wiKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBBYm91dFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdEFib3V0IHtcblxuICAgIHRyYWl0X2NvbnN0cnVjdG9yKGFib3V0KSB7XG4gICAgICAgIEpGYWN0b3J5T2JqZWN0LmFzc2lnbih0aGlzLiQsIFwiYWJvdXRcIixcbiAgICAgICAgICAgIG5ldyBKRmFjdG9yeUFib3V0KHRoaXMsIGFib3V0KSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuUkVBRE9OTFkpXG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IExvZ1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdExvZyB7XG5cbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgbGFiZWw6IHRoaXMuJC5hYm91dC5uYW1lXG4gICAgICAgIH0sIGpGYWN0b3J5Q29uZmlnLlRyYWl0TG9nIHx8IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBsb2dnZXIgPSBuZXcgSkZhY3RvcnlMb2dnZXIoY29uZmlnKTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy4kLCBcImxvZ2dlclwiLCB7IHZhbHVlOiBsb2dnZXIgfSk7XG5cbiAgICAgICAgbG9nZ2VyLmluc3RhbGxBY2Nlc3NvcihcImxvZ1wiLCAgIFwiJGxvZ1wiLCAgICAgdGhpcyk7XG4gICAgICAgIGxvZ2dlci5pbnN0YWxsQWNjZXNzb3IoXCJ3YXJuXCIsICBcIiRsb2dXYXJuXCIsIHRoaXMpO1xuICAgICAgICBsb2dnZXIuaW5zdGFsbEFjY2Vzc29yKFwiZXJyb3JcIiwgXCIkbG9nRXJyXCIsICB0aGlzKTtcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVHJhaXQgVGFza3Ncbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgVHJhaXRUYXNrIHtcblxuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBjb25zdCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuICAgICAgICAvLyBrZXJuZWwub24oXCJkaXNhYmxlXCIsICgpID0+IHtcbiAgICAgICAgLy8gICAgIGlmICh0aGlzLiQudGFza3Muc2l6ZSkge2RlYnVnZ2VyfVxuICAgICAgICAvLyAgICAgLy8gdGhpcy4kdGFza1JlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSlcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB7XG4gICAgICAgIC8vICAgICBpZiAodGhpcy4kLnRhc2tzLnNpemUpIHtkZWJ1Z2dlcn1cbiAgICAgICAgLy8gICAgIC8vIHRoaXMuJHRhc2tSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTClcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJ0YXNrc1wiLCBuZXcgTWFwLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkdGFzayhpZCwgZXhlY3V0b3JPclZhbHVlKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiJHRhc2soaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiR0YXNrKGV4ZWN1dG9yT3JWYWx1ZSlcIiwgZXhlY3V0b3JPclZhbHVlKS5ub3RVbmRlZmluZWQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiQudGFza3MuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLktFWV9EVVBMSUNBVEVEKHsgdGFyZ2V0OiBcIiR0YXNrKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0YXNrO1xuXG4gICAgICAgIGlmICh0eXBlb2YgZXhlY3V0b3JPclZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRhc2sgID0gbmV3IEpGYWN0b3J5UHJvbWlzZSh7IG5hbWU6IGlkLCBvd25lcjogdGhpcyB9LCBleGVjdXRvck9yVmFsdWUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXNrID0gSkZhY3RvcnlQcm9taXNlLnJlc29sdmUoeyBuYW1lOiBpZCwgb3duZXI6IHRoaXMgfSwgZXhlY3V0b3JPclZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRhc2suJHBoYXNlUmVtb3ZlID0gVHJhaXRTZXJ2aWNlLmdldENvbnRleHR1YWxSZW1vdmVQaGFzZSh0aGlzKTtcblxuICAgICAgICBsZXQgbWV0cmljcztcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgbWV0cmljcyA9IG5ldyBKRmFjdG9yeVRpbWVUcmFjZSgpO1xuICAgICAgICAgICAgdGFzay4kdGFza01ldHJpY3MgPSB7ICRkZXZfdGltaW5nOiBtZXRyaWNzIH07XG4gICAgICAgIH1cblxuICAgICAgICB0YXNrLiRjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgICAgICBtZXRyaWNzLmVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuJC50YXNrcy5nZXQoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdGFza1JlbW92ZShpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuJC50YXNrcy5zZXQoaWQsIHRhc2spO1xuICAgICAgICByZXR1cm4gdGFza1xuICAgIH1cblxuICAgICR0YXNrUmVtb3ZlKGlkLCByZWFzb24pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkdGFza1JlbW92ZShpZClcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIHJlYXNvbiAmJiBKRmFjdG9yeUV4cGVjdChcIiR0YXNrUmVtb3ZlKHJlYXNvbilcIiwgcmVhc29uKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuJC50YXNrcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX01JU1NJTkcoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiJHRhc2tSZW1vdmUoaWQpXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBpZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZGVidWdnZXJcbiAgICAgICAgICAgIGlmICh0aGlzLiQudGFza3MuZ2V0KGlkKS5fY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQudGFza3MuZ2V0KGlkKS5fY2FsbGVkID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGVudHJ5ID0gdGhpcy4kLnRhc2tzLmdldChpZCk7XG4gICAgICAgIC8vIGRlbGV0aW5nIGJlZm9yZSBjaGFpbkFib3J0KCkgdG8gcHJldmVudCByZW1vdmUoKSByZWNhbGxcbiAgICAgICAgdGhpcy4kLnRhc2tzLmRlbGV0ZShpZCk7XG4gICAgICAgIGVudHJ5LiRjaGFpbkFib3J0KHJlYXNvbiB8fCBcIiR0YXNrUmVtb3ZlKClcIik7XG4gICAgfVxuXG4gICAgJHRhc2tSZW1vdmVBbGwocmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkdGFza1JlbW92ZUFsbChyZW1vdmVQaGFzZSlcIiwgcmVtb3ZlUGhhc2UpXG4gICAgICAgICAgICAgICAgLmVxdWFsSW4oVHJhaXRTZXJ2aWNlLlBIQVNFUylcbiAgICAgICAgfVxuICAgICAgICBsZXQgdGFza3MgPSB0aGlzLiQudGFza3M7XG4gICAgICAgIGlmICh0YXNrcy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHRhc2tdIG9mIHRhc2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2suJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiR0YXNrUmVtb3ZlKGtleSwgXCIkdGFza1JlbW92ZUFsbChcIiArIHJlbW92ZVBoYXNlICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHRhc2tQcm9taXNlQWxsKGF1dG9Db21wbGV0ZSA9IGZhbHNlKSB7XG4gICAgICAgIGxldCBwZW5kaW5nID0gW107XG4gICAgICAgIGlmICh0aGlzLiQudGFza3Muc2l6ZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgdGFzayBvZiB0aGlzLiQudGFza3MudmFsdWVzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBjaGFpbiBhcyBzb29uIGFzIG5vIG1vcmUgcGVuZGluZyBwcm9taXNlIGluIHRoZSBjaGFpblxuICAgICAgICAgICAgICAgICAgICB0YXNrLiRjaGFpbi5jaGFpbkNvbmZpZy5jaGFpbkF1dG9Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHN0aWxsIHBlbmRpbmcgP1xuICAgICAgICAgICAgICAgIGlmICh0YXNrLiRjaGFpbi5pc1BlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZy5wdXNoKHRhc2suJGNoYWluKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGVuZGluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwZW5kaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUoKVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IEV2ZW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdEV2ZW50cyB7XG5cbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgYXNzaWduUHJpdmF0ZSh0aGlzLCBcImV2ZW50c1wiLCB7XG4gICAgICAgICAgICBjdXN0b206IG5ldyBKRmFjdG9yeUV2ZW50c01hbmFnZXIodGhpcyksXG4gICAgICAgICAgICBrZXJuZWw6IG5ldyBKRmFjdG9yeUV2ZW50c01hbmFnZXIodGhpcylcbiAgICAgICAgfSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuTk9ORSk7XG5cbiAgICAgICAgbGV0IGV2ZW50TWFuYWdlciA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5jdXN0b207XG5cbiAgICAgICAgLy8gaWYgKEpGQUNUT1JZX0RFVikgeyAvLyB2ZXJ5IHNsb3c7IHJlcXVpcmVzIG9wdGltaXphdGlvblxuICAgICAgICAvLyAgICAgLy8gcmVnaXN0cnkgYXJlIGF1dG8gdXBkYXRlZCBpbiBkZXYgbW9kZSAodW5vcHRpbWl6ZWQgaW1wbGVtZW50YXRpb24pXG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICBsZXQgbGlzdGVuZXJVcGRhdGUgPSAoKSA9PiB7XG4gICAgICAgIC8vICAgICAgICAgdGhpcy4kLmxpc3RlbmVycyA9IGV2ZW50TWFuYWdlci5nZXREb21MaXN0ZW5lcnModGhpcy4kLmFib3V0LmZpbmdlcnByaW50KTtcbiAgICAgICAgLy8gICAgIH07XG4gICAgICAgIC8vICAgICBsZXQgb2JzZXJ2ZXJVcGRhdGUgPSAoKSA9PiB7XG4gICAgICAgIC8vICAgICAgICAgdGhpcy4kLm9ic2VydmVycyA9IGV2ZW50TWFuYWdlci5nZXRPYnNlcnZlcnMoKTtcbiAgICAgICAgLy8gICAgIH07XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICBldmVudE1hbmFnZXIub25MaXN0ZW5lclVwZGF0ZSA9IGxpc3RlbmVyVXBkYXRlO1xuICAgICAgICAvLyAgICAgZXZlbnRNYW5hZ2VyLm9uT2JzZXJ2ZXJVcGRhdGUgPSBvYnNlcnZlclVwZGF0ZTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGxpc3RlbmVyVXBkYXRlKTtcbiAgICAgICAgLy8gICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB7Y2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlfSk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICBsaXN0ZW5lclVwZGF0ZSgpO1xuICAgICAgICAvLyAgICAgb2JzZXJ2ZXJVcGRhdGUoKTtcbiAgICAgICAgLy8gfSBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMuJCwge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyczoge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGV2ZW50TWFuYWdlci5nZXREb21MaXN0ZW5lcnMuYmluZChldmVudE1hbmFnZXIsIHRoaXMuJC5hYm91dC5maW5nZXJwcmludCksXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9ic2VydmVyczoge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGV2ZW50TWFuYWdlci5nZXRPYnNlcnZlcnMuYmluZChldmVudE1hbmFnZXIpLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRvbigvKiBldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnMgKi8pIHtcbiAgICAgICAgdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmN1c3RvbS5vbiguLi5hcmd1bWVudHMpXG4gICAgfVxuXG4gICAgJG9mZigvKiBldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnMgKi8pIHtcbiAgICAgICAgdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmN1c3RvbS5vZmYoLi4uYXJndW1lbnRzKVxuICAgIH1cblxuICAgICR0cmlnZ2VyKC8qIGV2ZW50cywgdGFyZ2V0LCBkYXRhICovKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMuY3VzdG9tLnRyaWdnZXIoLi4uYXJndW1lbnRzKVxuICAgIH1cblxuICAgICR0cmlnZ2VyUGFyYWxsZWwoLyogZXZlbnRzLCB0YXJnZXQsIGRhdGEgKi8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5jdXN0b20udHJpZ2dlclBhcmFsbGVsKC4uLmFyZ3VtZW50cylcbiAgICB9XG5cbiAgICAkbm90aWZ5KGV2ZW50cywgZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy4kdHJpZ2dlcihldmVudHMsIGRhdGEpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsLnRyaWdnZXIoZXZlbnRzLCBkYXRhKSlcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVHJhaXQgU3RhdGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0U3RhdGUge1xuXG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGNvbnN0IHN0YXRlUm91dGVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgY29uc3Qga2VybmVsID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbDtcblxuICAgICAgICBhc3NpZ25Qcml2YXRlKHRoaXMsIHsgc3RhdGVzLCBzdGF0ZVJvdXRlcyB9LCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5SRUFET05MWSk7XG5cbiAgICAgICAgSkZhY3RvcnlPYmplY3QuYXNzaWduKHRoaXMuJCwgXCJzdGF0ZXNcIiwgbmV3IFByb3h5KHN0YXRlcywge1xuICAgICAgICAgICAgc2V0OiAodGFyZ2V0LCBrZXksIHZhbCkgPT4gdGhpcy4kc3RhdGUoa2V5LCB2YWwpLFxuICAgICAgICAgICAgZ2V0OiAodGFyZ2V0LCBrZXkpID0+IHN0YXRlc1trZXldXG4gICAgICAgIH0pLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5SRUFET05MWSk7XG5cbiAgICAgICAga2VybmVsLm9uKFwiYmVmb3JlU3RhdGVDaGFuZ2VcIiwgKGUsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIGxldCBoO1xuICAgICAgICAgICAgaWYgKHN0YXRlUm91dGVzW2RhdGEua2V5XSAmJiBzdGF0ZVJvdXRlc1tkYXRhLmtleV0uYmVmb3JlXG4gICAgICAgICAgICAgICAgJiYgKGggPSBzdGF0ZVJvdXRlc1tkYXRhLmtleV0uYmVmb3JlKGRhdGEudmFsKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbm90aWZ5KGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBrZXJuZWwub24oXCJhZnRlclN0YXRlQ2hhbmdlXCIsIChlLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBsZXQgaDtcbiAgICAgICAgICAgIGlmIChzdGF0ZVJvdXRlc1tkYXRhLmtleV0gJiYgc3RhdGVSb3V0ZXNbZGF0YS5rZXldLmFmdGVyXG4gICAgICAgICAgICAgICAgJiYgKGggPSBzdGF0ZVJvdXRlc1tkYXRhLmtleV0uYWZ0ZXIoZGF0YS52YWwpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRub3RpZnkoaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICRzdGF0ZShrZXksIHZhbCwgbm90aWZ5ID0gdHJ1ZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiRzdGF0ZShrZXkpXCIsIGtleSkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkc3RhdGUobm90aWZ5KVwiLCBub3RpZnkpLnR5cGVCb29sZWFuKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IEpGYWN0b3J5UHJvbWlzZVN5bmMoYXN5bmMgcmVzb2x2ZSA9PiB7XG5cbiAgICAgICAgICAgIGxldCBzdGF0ZXMgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5zdGF0ZXM7XG4gICAgICAgICAgICBsZXQgcHJldmlvdXNWYWwgPSBzdGF0ZXNba2V5XTtcbiAgICAgICAgICAgIGxldCBwZW5kaW5nO1xuXG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gc3RhdGVzKSB8fCBwcmV2aW91c1ZhbCAhPT0gdmFsKSB7XG5cbiAgICAgICAgICAgICAgICBwZW5kaW5nID0gbm90aWZ5ICYmIHRoaXMuJG5vdGlmeShcImJlZm9yZVN0YXRlQ2hhbmdlXCIsIHsga2V5LCB2YWwsIHByZXZpb3VzVmFsIH0pO1xuICAgICAgICAgICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZyAmJiBKRmFjdG9yeUV4cGVjdChcImJlZm9yZVN0YXRlQ2hhbmdlIHJlc3VsdFwiLCBwZW5kaW5nKS50eXBlKEpGYWN0b3J5UHJvbWlzZVN5bmMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nICYmICFwZW5kaW5nLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzW2tleV0gPSBwZW5kaW5nO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZW5kaW5nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3RhdGVzW2tleV1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXNba2V5XSA9IHZhbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBwZW5kaW5nID0gbm90aWZ5ICYmIHRoaXMuJG5vdGlmeShcImFmdGVyU3RhdGVDaGFuZ2VcIiwgeyBrZXksIHZhbCwgcHJldmlvdXNWYWwgfSk7XG4gICAgICAgICAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nICYmIEpGYWN0b3J5RXhwZWN0KFwiYWZ0ZXJTdGF0ZUNoYW5nZSByZXN1bHRcIiwgcGVuZGluZykudHlwZShKRmFjdG9yeVByb21pc2VTeW5jKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgcGVuZGluZy50aGVuKHJlc29sdmUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IFNlcnZpY2Vcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgVHJhaXRTZXJ2aWNlIHtcblxuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG5hbWUgdGhpcy4kLnNlcnZpY2VcbiAgICAgICAgICogQHR5cGUge29iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIEpGYWN0b3J5T2JqZWN0LmFzc2lnbih0aGlzLiQsIFwic2VydmljZVwiLCBPYmplY3QuY3JlYXRlKG51bGwpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5SRUFET05MWSk7XG4gICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkU7XG4gICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlUXVldWUgPSBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUoKTtcblxuICAgICAgICAvLyBTZXQgaW5pdGlhbCBzdGF0ZXMgYnV0IGRvbid0IHRyaWdnZXIgZXZlbnRzXG4gICAgICAgIHRoaXMuJHN0YXRlKFwiaW5zdGFsbGVkXCIsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuJHN0YXRlKFwiZW5hYmxlZFwiLCBmYWxzZSwgZmFsc2UpO1xuXG4gICAgICAgIC8vIERlZmluZSB0aGUgZXZlbnRzIHRvIG5vdGlmeSBiZWZvcmUvYWZ0ZXIgYSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgLy8gc3RhdGVOYW1lIDoge2JlZm9yZSA6IGV2ZW50TmFtZSwgYWZ0ZXIgOiBldmVudE5hbWV9XG5cbiAgICAgICAgLy8gU1BFQ1xuICAgICAgICAvLyBzdGF0IGlzIGNoYW5nZWQgYmVmb3JlIGNhbGxpbmcgaGFuZGxlcnMgZXZlbiBpZiBwZW5kaW5nXG5cbiAgICAgICAgYXNzaWduUHJpdmF0ZU1lbWJlcih0aGlzLCBcInN0YXRlUm91dGVzXCIsIHtcbiAgICAgICAgICAgIGluc3RhbGxlZDogeyBhZnRlcjogdmFsID0+IHZhbCA/IFwiaW5zdGFsbFwiIDogXCJ1bmluc3RhbGxcIiB9LFxuICAgICAgICAgICAgZW5hYmxlZDogeyBhZnRlcjogdmFsID0+IHZhbCA/IFwiZW5hYmxlXCIgIDogXCJkaXNhYmxlXCIgfVxuICAgICAgICB9LCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5OT05FKTtcblxuICAgICAgICBsZXQgY3VzdG9tID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmN1c3RvbTtcbiAgICAgICAgbGV0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG5cbiAgICAgICAgLy8gQXR0YWNoIGEgcmVtb3ZlIHBoYXNlIG5hbWVzcGFjZXMgb24gZXZlbnRzXG4gICAgICAgIGN1c3RvbS5hZmZpbGlhdGVBZGRSdWxlKChjb250ZXh0LCBwYXJzZWRFdmVudCwgbmFtZXNwYWNlcywgb3B0aW9ucykgPT5cbiAgICAgICAgICAgIFRyYWl0U2VydmljZS5zZXRFdmVudE5hbWVzcGFjZVJlbW92ZVBoYXNlKHRoaXMsIHBhcnNlZEV2ZW50LCBvcHRpb25zKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEF0dGFjaCBtb2R1bGUgZXZlbnQgaGFuZGxlcnNcblxuICAgICAgICAvKiogQG5hbWUgSkZhY3RvcnlDb3JlT2JqZWN0I29uSW5zdGFsbCAqL1xuICAgICAgICAvKiogQG5hbWUgSkZhY3RvcnlDb3JlT2JqZWN0I29uRW5hYmxlICovXG4gICAgICAgIC8qKiBAbmFtZSBKRmFjdG9yeUNvcmVPYmplY3Qjb25EaXNhYmxlICovXG4gICAgICAgIC8qKiBAbmFtZSBKRmFjdG9yeUNvcmVPYmplY3Qjb25Vbmluc3RhbGwgKi9cblxuICAgICAgICBsZXQgcmVzb2x2ZVByb21pc2VzID0gaGFuZGxlciA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4kLnRhc2tzLnNpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiR0YXNrUmVtb3ZlQWxsKHRoaXMuJC5zZXJ2aWNlLnBoYXNlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHByb21pc2UgPSBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUoKTsgLy8gdGhpcy4kdGFza1Byb21pc2VBbGwodHJ1ZSk7XG4gICAgICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IGhhbmRsZXIuY2FsbCh0aGlzKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy4kdGFza1Byb21pc2VBbGwodHJ1ZSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZVxuICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy4kLnNlcnZpY2UuaXNQaGFzZUtpbGxpbmcgJiYgZSBpbnN0YW5jZW9mIGpGYWN0b3J5RXJyb3IuUFJPTUlTRV9FWFBJUkVEKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbG9nRXJyKFwidW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIGluIFwiICsgdGhpcy4kLnNlcnZpY2UucGhhc2UgKyBcIjtcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5lIGluc3RhbmNlb2YgSkZhY3RvcnlFcnJvciA/IGUgOiBbZV0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBrZXJuZWwub24oXCJpbnN0YWxsXCIsICgpID0+IHJlc29sdmVQcm9taXNlcyh0aGlzLm9uSW5zdGFsbCkpO1xuICAgICAgICBrZXJuZWwub24oXCJlbmFibGVcIiwgKCkgPT4gcmVzb2x2ZVByb21pc2VzKHRoaXMub25FbmFibGUpKTtcbiAgICAgICAga2VybmVsLm9uKFwiZGlzYWJsZVwiLCAoKSA9PiByZXNvbHZlUHJvbWlzZXModGhpcy5vbkRpc2FibGUpKTtcbiAgICAgICAga2VybmVsLm9uKFwidW5pbnN0YWxsXCIsICgpID0+IHJlc29sdmVQcm9taXNlcyh0aGlzLm9uVW5pbnN0YWxsKSk7XG5cbiAgICAgICAga2VybmVsLm9uKFwiZGlzYWJsZVwiLCAgICgpID0+IHRoaXMuJG9mZih7IHJlbW92YWw6IFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFIH0pKTtcbiAgICAgICAga2VybmVsLm9uKFwidW5pbnN0YWxsXCIsICgpID0+IHRoaXMuJG9mZih7IHJlbW92YWw6IFRyYWl0U2VydmljZS5QSEFTRS5VTklOU1RBTEwgfSkpO1xuICAgIH1cblxuICAgICRpbnN0YWxsKGVuYWJsZSkge1xuICAgICAgICBpZiAoIXRoaXMuJC5zZXJ2aWNlLnBoYXNlUXVldWUuJGlzU2V0dGxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJC5zZXJ2aWNlLnBoYXNlUXVldWVcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLiRpbnN0YWxsKCkpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZGVidWdnZXJcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge2lmICh0aGlzLiQuc2VydmljZS5pc1BoYXNlS2lsbGluZykge2RlYnVnZ2VyfX1cblxuICAgICAgICByZXR1cm4gdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZSA9IEpGYWN0b3J5UHJvbWlzZVN5bmMucmVzb2x2ZSgpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLiQuc3RhdGVzLmluc3RhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZSA9IFRyYWl0U2VydmljZS5QSEFTRS5JTlNUQUxMO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RhdGUoXCJpbnN0YWxsZWRcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbmFibGUgJiYgdGhpcy4kLnN0YXRlcy5pbnN0YWxsZWQgJiYgIXRoaXMuJC5zdGF0ZXMuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZSA9IFRyYWl0U2VydmljZS5QSEFTRS5FTkFCTEU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdGF0ZShcImVuYWJsZWRcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkU7XG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgICRlbmFibGUoKSB7XG4gICAgICAgIGlmICghdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZS4kaXNTZXR0bGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuJGVuYWJsZSgpKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtpZiAodGhpcy4kLnNlcnZpY2UuaXNQaGFzZUtpbGxpbmcpIHtkZWJ1Z2dlcn19XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuJC5zZXJ2aWNlLnBoYXNlUXVldWUgPSBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUoKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiQuc3RhdGVzLmluc3RhbGxlZCAmJiAhdGhpcy4kLnN0YXRlcy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLkVOQUJMRTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0YXRlKFwiZW5hYmxlZFwiLCB0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2UgPSBUcmFpdFNlcnZpY2UuUEhBU0UuTk9ORTtcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgJGRpc2FibGUoKSB7XG4gICAgICAgIGlmICghdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZS4kaXNTZXR0bGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gVHJhaXRTZXJ2aWNlLnBoYXNlS2lsbCh0aGlzKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuJGRpc2FibGUoKSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1kZWJ1Z2dlclxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7aWYgKHRoaXMuJC5zZXJ2aWNlLmlzUGhhc2VLaWxsaW5nKSB7ZGVidWdnZXJ9fVxuXG4gICAgICAgIHJldHVybiB0aGlzLiQuc2VydmljZS5waGFzZVF1ZXVlID0gSkZhY3RvcnlQcm9taXNlU3luYy5yZXNvbHZlKClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kLnN0YXRlcy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLkRJU0FCTEU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdGF0ZShcImVuYWJsZWRcIiwgZmFsc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZSA9IFRyYWl0U2VydmljZS5QSEFTRS5OT05FO1xuICAgICAgICAgICAgfSlcbiAgICB9XG5cbiAgICAkdW5pbnN0YWxsKCkge1xuICAgICAgICBpZiAoIXRoaXMuJC5zZXJ2aWNlLnBoYXNlUXVldWUuJGlzU2V0dGxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIFRyYWl0U2VydmljZS5waGFzZUtpbGwodGhpcylcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLiR1bmluc3RhbGwoKSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1kZWJ1Z2dlclxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7aWYgKHRoaXMuJC5zZXJ2aWNlLmlzUGhhc2VLaWxsaW5nKSB7ZGVidWdnZXJ9fVxuXG4gICAgICAgIHJldHVybiB0aGlzLiQuc2VydmljZS5waGFzZVF1ZXVlID0gSkZhY3RvcnlQcm9taXNlU3luYy5yZXNvbHZlKClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kLnN0YXRlcy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNhYmxlKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiQuc3RhdGVzLmluc3RhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZSA9IFRyYWl0U2VydmljZS5QSEFTRS5VTklOU1RBTEw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdGF0ZShcImluc3RhbGxlZFwiLCBmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkU7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcGhhc2VLaWxsKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWNvbXBvbmVudC4kLnNlcnZpY2UucGhhc2VRdWV1ZS4kaXNTZXR0bGVkKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LiQuc2VydmljZS5pc1BoYXNlS2lsbGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gY29tcG9uZW50LiRsb2dXYXJuKFwicGhhc2Uga2lsbCBbXCIgKyBjb21wb25lbnQuJC5zZXJ2aWNlLnBoYXNlICsgXCJdLi4uXCIpO1xuICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnQuJC50YXNrcy5zaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC4kdGFza1JlbW92ZUFsbChUcmFpdFNlcnZpY2UuZ2V0Q29udGV4dHVhbFJlbW92ZVBoYXNlKGNvbXBvbmVudCksIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoVHJhaXRTZXJ2aWNlLnBoYXNlS2lsbChjb21wb25lbnQpKSwgNTApXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC4kLnNlcnZpY2UuaXNQaGFzZUtpbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0Q29udGV4dHVhbFJlbW92ZVBoYXNlKGpGYWN0b3J5Q29yZU9iamVjdCkge1xuICAgICAgICByZXR1cm4gVHJhaXRTZXJ2aWNlLlBIQVNFX1JFVkVSVFtqRmFjdG9yeUNvcmVPYmplY3QuJC5zZXJ2aWNlLnBoYXNlXVxuICAgIH1cblxuICAgIHN0YXRpYyBzZXRFdmVudE5hbWVzcGFjZVJlbW92ZVBoYXNlKGpGYWN0b3J5Q29yZU9iamVjdCwgcGFyc2VkRXZlbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGN1clJlbW92ZVBoYXNlID0gcGFyc2VkRXZlbnQuaGFzTmFtZXNwYWNlKFRyYWl0U2VydmljZS5QSEFTRVMpO1xuICAgICAgICBsZXQgbmV3UmVtb3ZlUGhhc2UgPSBvcHRpb25zICYmIG9wdGlvbnMucmVtb3ZhbDtcblxuICAgICAgICBpZiAoIW5ld1JlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICBuZXdSZW1vdmVQaGFzZSA9IFRyYWl0U2VydmljZS5nZXRDb250ZXh0dWFsUmVtb3ZlUGhhc2UoakZhY3RvcnlDb3JlT2JqZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNwZWNpYWwgY2FzZSA6IG9uKFwidW5pbnN0YWxsXCIpIHdpdGggcmVtb3ZhbCA9IERJU0FCTEUgKHRoZSBkZWZhdWx0IHZhbHVlKVxuICAgICAgICAvLyA9PiBkaXNhYmxlKCkgaXMgYWx3YXlzIGNhbGxlZCBiZWZvcmUgdW5pbnN0YWxsKCkgY2F1c2luZyB0aGUgZXZlbnQgdG8gYmUgcmVtb3ZlZCB0b28gZWFybHlcbiAgICAgICAgaWYgKHBhcnNlZEV2ZW50LmV2ZW50ID09PSBcInVuaW5zdGFsbFwiICYmIG5ld1JlbW92ZVBoYXNlID09PSBUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSkge1xuICAgICAgICAgICAgbmV3UmVtb3ZlUGhhc2UgPSBUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VyUmVtb3ZlUGhhc2UgIT09IG5ld1JlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICBwYXJzZWRFdmVudC5kZWxldGVOYW1lc3BhY2UoY3VyUmVtb3ZlUGhhc2UpO1xuICAgICAgICAgICAgcGFyc2VkRXZlbnQuYWRkTmFtZXNwYWNlKG5ld1JlbW92ZVBoYXNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnNlZEV2ZW50LmFkZE5hbWVzcGFjZShuZXdSZW1vdmVQaGFzZSk7XG4gICAgfVxufVxuXG5UcmFpdFNlcnZpY2UuUEhBU0UgPSB7XG4gICAgTk9ORTogXCJQSEFTRV9OT05FXCIsXG4gICAgSU5TVEFMTDogXCJQSEFTRV9JTlNUQUxMXCIsXG4gICAgRU5BQkxFOiBcIlBIQVNFX0VOQUJMRVwiLFxuICAgIERJU0FCTEU6IFwiUEhBU0VfRElTQUJMRVwiLFxuICAgIFVOSU5TVEFMTDogXCJQSEFTRV9VTklOU1RBTExcIlxufTtcblxuVHJhaXRTZXJ2aWNlLlBIQVNFX1JFVkVSVCA9IHtcbiAgICBbVHJhaXRTZXJ2aWNlLlBIQVNFLklOU1RBTExdOiBUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMLFxuICAgIFtUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMXTogVHJhaXRTZXJ2aWNlLlBIQVNFLklOU1RBTEwsXG4gICAgW1RyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFXTogVHJhaXRTZXJ2aWNlLlBIQVNFLkVOQUJMRSxcbiAgICBbVHJhaXRTZXJ2aWNlLlBIQVNFLkVOQUJMRV06IFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFLFxuICAgIFtUcmFpdFNlcnZpY2UuUEhBU0UuTk9ORV06IFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFXG59O1xuXG5UcmFpdFNlcnZpY2UuUEhBU0VTID0gT2JqZWN0LnZhbHVlcyhUcmFpdFNlcnZpY2UuUEhBU0UpO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduUHJpdmF0ZShzY29wZSwgcHJvcGVydHksIHZhbHVlLCBkZXNjcmlwdG9yKSB7XG4gICAgSkZhY3RvcnlPYmplY3QuYXNzaWduKHNjb3BlLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXSwgcHJvcGVydHksIHZhbHVlLCBkZXNjcmlwdG9yKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduUHJpdmF0ZU1lbWJlcihzY29wZSwgcHJvcGVydHksIHZhbHVlLCBkZXNjcmlwdG9yKSB7XG4gICAgSkZhY3RvcnlPYmplY3QuYXNzaWduKHNjb3BlLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXVtwcm9wZXJ0eV0sIHZhbHVlLCBkZXNjcmlwdG9yKVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuakZhY3RvcnkuUEhBU0UgPSBKRmFjdG9yeU9iamVjdC5kaXNpbmhlcml0KFRyYWl0U2VydmljZS5QSEFTRSk7XG5cbmpGYWN0b3J5LlRyYWl0Q29yZSA9IFRyYWl0Q29yZTtcbmpGYWN0b3J5LlRyYWl0QWJvdXQgPSBUcmFpdEFib3V0O1xuakZhY3RvcnkuVHJhaXRMb2cgPSBUcmFpdExvZztcbmpGYWN0b3J5LlRyYWl0RXZlbnRzID0gVHJhaXRFdmVudHM7XG5qRmFjdG9yeS5UcmFpdFN0YXRlID0gVHJhaXRTdGF0ZTtcbmpGYWN0b3J5LlRyYWl0U2VydmljZSA9IFRyYWl0U2VydmljZTtcbmpGYWN0b3J5LlRyYWl0VGFzayA9IFRyYWl0VGFzazsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0Q29tcG9uZW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuaW1wb3J0IHsgakZhY3RvcnkgfSBmcm9tIFwiLi9qRmFjdG9yeVwiO1xuaW1wb3J0IHsgSkZBQ1RPUllfREVWIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBqRmFjdG9yeUVycm9yIH0gZnJvbSBcIi4vSkZhY3RvcnlFcnJvclwiO1xuaW1wb3J0IHsgSkZhY3RvcnlFeHBlY3QgfSBmcm9tIFwiLi9KRmFjdG9yeUV4cGVjdFwiO1xuaW1wb3J0IHsgVHJhaXRDb3JlLCBUcmFpdFNlcnZpY2UgfSBmcm9tIFwiLi9UcmFpdHNDb3JlXCI7XG5pbXBvcnQgeyBKRmFjdG9yeUZldGNoIH0gZnJvbSBcIi4vSkZhY3RvcnlGZXRjaFwiO1xuaW1wb3J0IHsgSkZhY3RvcnlQcm9taXNlIH0gZnJvbSBcIi4vSkZhY3RvcnlQcm9taXNlXCI7XG5pbXBvcnQgeyBKRmFjdG9yeU9iamVjdCB9IGZyb20gXCIuL0pGYWN0b3J5T2JqZWN0XCI7XG5pbXBvcnQgeyBqRmFjdG9yeVRyYWNlIH0gZnJvbSBcIi4vSkZhY3RvcnlUcmFjZVwiO1xuaW1wb3J0IHsgaGVscGVyX2lzUGxhaW5PYmplY3QsIGpRdWVyeSB9IGZyb20gXCIuL2pGYWN0b3J5LWhlbHBlcnNcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBGZXRjaFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdEZldGNoIHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qga2VybmVsID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbDtcbiAgICAgICAga2VybmVsLm9uKFwiZGlzYWJsZVwiLCAoKSA9PiB0aGlzLiRmZXRjaFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSkpO1xuICAgICAgICBrZXJuZWwub24oXCJ1bmluc3RhbGxcIiwgKCkgPT4gdGhpcy4kZmV0Y2hSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTCkpO1xuICAgICAgICB0aGlzLiQuYXNzaWduKFwicmVxdWVzdHNcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkZmV0Y2goaWQsIHVybCwgZmV0Y2hPcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2goaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiRmZXRjaCh1cmwpXCIsIHVybCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2goZmV0Y2hPcHRpb25zKVwiLCBmZXRjaE9wdGlvbnMpLnR5cGVQbGFpbk9iamVjdCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuJC5yZXF1ZXN0cy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX0RVUExJQ0FURUQoeyB0YXJnZXQ6IFwiJGZldGNoKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcm9taXNlID0gbmV3IEpGYWN0b3J5RmV0Y2goe1xuICAgICAgICAgICAgbmFtZTogaWQsXG4gICAgICAgICAgICB0cmFjZVNvdXJjZTogakZhY3RvcnlUcmFjZS50cmFjZXIuY2FwdHVyZVRyYWNlU291cmNlKFwiJGZldGNoXCIpLFxuICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgY2hhaW5BdXRvQ29tcGxldGU6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdXJsLCBmZXRjaE9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuJC5yZXF1ZXN0cy4kcmVnaXN0ZXJBc3luYyhpZCwgJyRmZXRjaChcIicgKyBpZCArICdcIiknLCBwcm9taXNlKTtcblxuICAgICAgICBwcm9taXNlLiRjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiQucmVxdWVzdHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGZldGNoUmVtb3ZlKGlkKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICAkZmV0Y2hUZXh0KGlkLCB1cmwsIGZldGNoT3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRmZXRjaChpZCwgdXJsLCB7IC4uLmZldGNoT3B0aW9ucywgJHR5cGVUZXh0OiB0cnVlIH0pO1xuICAgIH1cblxuICAgICRmZXRjaEpTT04oaWQsIHVybCwgZmV0Y2hPcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZldGNoKGlkLCB1cmwsIHsgLi4uZmV0Y2hPcHRpb25zLCAkdHlwZUpTT046IHRydWUgfSk7XG4gICAgfVxuXG4gICAgJGZldGNoUmVtb3ZlKGlkLCByZWFzb24pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2hSZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICByZWFzb24gJiYgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2hSZW1vdmUocmVhc29uKVwiLCByZWFzb24pLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLnJlcXVlc3RzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkZmV0Y2hSZW1vdmUoaWQpXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBpZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZGVidWdnZXIsYnJhY2Utc3R5bGVcbiAgICAgICAgICAgIGlmICh0aGlzLiQucmVxdWVzdHMuZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLnJlcXVlc3RzLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQucmVxdWVzdHMuZ2V0KGlkKTtcbiAgICAgICAgdGhpcy4kLnJlcXVlc3RzLmRlbGV0ZShpZCk7XG4gICAgICAgIGVudHJ5LiRjaGFpbkFib3J0KHJlYXNvbiB8fCBcIiRmZXRjaFJlbW92ZSgpXCIpO1xuICAgIH1cblxuICAgICRmZXRjaFJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQucmVxdWVzdHM7XG4gICAgICAgIGlmIChzdWJzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgc3ViXSBvZiBzdWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yi4kcGhhc2VSZW1vdmUgPT09IHJlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGZldGNoUmVtb3ZlKGtleSwgXCIkZmV0Y2hSZW1vdmVBbGwoXCIgKyByZW1vdmVQaGFzZSArIFwiKVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBUaW1lb3V0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0VGltZW91dCB7XG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgKCkgPT4gdGhpcy4kdGltZW91dFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSkpO1xuICAgICAgICBrZXJuZWwub24oXCJ1bmluc3RhbGxcIiwgKCkgPT4gdGhpcy4kdGltZW91dFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJ0aW1lb3V0c1wiLCB0aGlzLiQuY3JlYXRlU3ViTWFwKCksIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEUpO1xuICAgIH1cblxuICAgICR0aW1lb3V0KGlkLCBkZWxheSwgaGFuZGxlciA9IG51bGwsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gaWRcbiAgICAgICAgLy8gaWQsIGRlbGF5XG4gICAgICAgIC8vIGlkLCBkZWxheSwgaGFuZGxlciwgLi4uYXJnc1xuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaWRcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiZGVsYXlcIiwgZGVsYXkpLnR5cGVOdW1iZXIoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaGFuZGxlclwiLCBoYW5kbGVyKS50eXBlKEZ1bmN0aW9uLCBudWxsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiQudGltZW91dHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLktFWV9EVVBMSUNBVEVEKHsgdGFyZ2V0OiBcIiR0aW1lb3V0KGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0aW1lcjtcbiAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgSkZhY3RvcnlQcm9taXNlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IGlkLFxuICAgICAgICAgICAgICAgIHRyYWNlU291cmNlOiBqRmFjdG9yeVRyYWNlLnRyYWNlci5jYXB0dXJlVHJhY2VTb3VyY2UoXCIkdGltZW91dFwiKSxcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5BdXRvQ29tcGxldGU6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcm9taXNlLiRpc0V4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaGFuZGxlciA/IGhhbmRsZXIoLi4uYXJncykgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgZGVsYXkpXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy4kLnRpbWVvdXRzLiRyZWdpc3RlckFzeW5jKGlkLCAnJHRpbWVvdXQoXCInICsgaWQgKyAnXCIpJywgcHJvbWlzZSk7XG4gICAgICAgIHByb21pc2UuJGNoYWluLmRhdGEudGltZXIgPSB0aW1lcjtcblxuICAgICAgICBwcm9taXNlLiRjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiQudGltZW91dHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHRpbWVvdXRSZW1vdmUoaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICAkdGltZW91dFJlbW92ZShpZCwgcmVhc29uKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiJHRpbWVvdXRSZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICByZWFzb24gJiYgSkZhY3RvcnlFeHBlY3QoXCIkdGltZW91dFJlbW92ZShyZWFzb24pXCIsIHJlYXNvbikudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiQudGltZW91dHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLktFWV9NSVNTSU5HKHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIiR0aW1lb3V0UmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLnRpbWVvdXRzLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQpIHtkZWJ1Z2dlcn1cbiAgICAgICAgICAgIHRoaXMuJC50aW1lb3V0cy5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbnRyeSA9IHRoaXMuJC50aW1lb3V0cy5nZXQoaWQpO1xuICAgICAgICBjbGVhclRpbWVvdXQoZW50cnkuJGNoYWluLmRhdGEudGltZXIpO1xuICAgICAgICAvLyBkZWxldGluZyBiZWZvcmUgY2hhaW5BYm9ydCgpIHRvIHByZXZlbnQgcmVtb3ZlKCkgcmVjYWxsXG4gICAgICAgIHRoaXMuJC50aW1lb3V0cy5kZWxldGUoaWQpO1xuICAgICAgICBlbnRyeS4kY2hhaW5BYm9ydChyZWFzb24gfHwgXCIkdGltZW91dFJlbW92ZSgpXCIpO1xuICAgIH1cblxuICAgICR0aW1lb3V0UmVtb3ZlQWxsKHJlbW92ZVBoYXNlKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwicmVtb3ZlUGhhc2VcIiwgcmVtb3ZlUGhhc2UpXG4gICAgICAgICAgICAgICAgLmVxdWFsSW4oVHJhaXRTZXJ2aWNlLlBIQVNFUyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQudGltZW91dHM7XG4gICAgICAgIGlmIChzdWJzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgc3ViXSBvZiBzdWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yi4kcGhhc2VSZW1vdmUgPT09IHJlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHRpbWVvdXRSZW1vdmUoa2V5LCBcIiR0aW1lb3V0UmVtb3ZlQWxsKClcIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVHJhaXQgSW50ZXJ2YWxcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgVHJhaXRJbnRlcnZhbCB7XG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgKCkgPT4gdGhpcy4kaW50ZXJ2YWxSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLkRJU0FCTEUpKTtcbiAgICAgICAga2VybmVsLm9uKFwidW5pbnN0YWxsXCIsICgpID0+IHRoaXMuJGludGVydmFsUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5VTklOU1RBTEwpKTtcbiAgICAgICAgdGhpcy4kLmFzc2lnbihcInRpbWVpbnRzXCIsIHRoaXMuJC5jcmVhdGVTdWJNYXAoKSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuRU5VTUVSQUJMRSk7XG4gICAgfVxuXG4gICAgJGludGVydmFsKGlkLCBkZWxheSwgaGFuZGxlciwgLi4uYXJncykge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImhhbmRsZXJcIiwgaGFuZGxlcikudHlwZUZ1bmN0aW9uKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImRlbGF5XCIsIGRlbGF5KS50eXBlTnVtYmVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kLnRpbWVpbnRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkaW50ZXJ2YWwoaWQpXCIsIGdpdmVuOiBpZCB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKGhhbmRsZXIsIGRlbGF5LCAuLi5hcmdzKTtcbiAgICAgICAgdGhpcy4kLnRpbWVpbnRzLiRyZWdpc3RlclN5bmMoaWQsIHRpbWVyKVxuICAgIH1cblxuICAgICRpbnRlcnZhbFJlbW92ZShpZCkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiRpbnRlcnZhbFJlbW92ZShpZClcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLnRpbWVpbnRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkaW50ZXJ2YWxSZW1vdmUoaWQpXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBpZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZGVidWdnZXIsYnJhY2Utc3R5bGVcbiAgICAgICAgICAgIGlmICh0aGlzLiQudGltZWludHMuZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLnRpbWVpbnRzLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLiQudGltZWludHMuZ2V0KGlkKS4kdmFsdWUpO1xuICAgICAgICB0aGlzLiQudGltZWludHMuZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICRpbnRlcnZhbFJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQudGltZWludHM7XG4gICAgICAgIGlmIChzdWJzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgc3ViXSBvZiBzdWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yi4kcGhhc2VSZW1vdmUgPT09IHJlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGludGVydmFsUmVtb3ZlKGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVHJhaXQgTXV0YXRpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0TXV0YXRpb24ge1xuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuICAgICAgICBrZXJuZWwub24oXCJkaXNhYmxlXCIsICgpID0+IHRoaXMuJG11dGF0aW9uUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRtdXRhdGlvblJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJtdXRhdGlvbnNcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkbXV0YXRpb24oaWQsIHBhcmVudCwgY29uZmlnLCBoYW5kbGVyKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaWRcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwicGFyZW50XCIsIHBhcmVudCkudHlwZShIVE1MRWxlbWVudCwgRG9jdW1lbnQpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJjb25maWdcIiwgY29uZmlnKS50eXBlUGxhaW5PYmplY3QoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaGFuZGxlclwiLCBoYW5kbGVyKS50eXBlRnVuY3Rpb24oKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiQubXV0YXRpb25zLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkbXV0YXRpb24oaWQpXCIsIGdpdmVuOiBpZCB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGhhbmRsZXIpO1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHBhcmVudCwgY29uZmlnKTtcbiAgICAgICAgdGhpcy4kLm11dGF0aW9ucy4kcmVnaXN0ZXJTeW5jKGlkLCBvYnNlcnZlcik7XG4gICAgfVxuXG4gICAgJG11dGF0aW9uUmVtb3ZlKGlkLCByZWFzb24pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkbXV0YXRpb25SZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICByZWFzb24gJiYgSkZhY3RvcnlFeHBlY3QoXCIkbXV0YXRpb25SZW1vdmUocmVhc29uKVwiLCByZWFzb24pLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLm11dGF0aW9ucy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX01JU1NJTkcoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiJG11dGF0aW9uUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLm11dGF0aW9ucy5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQubXV0YXRpb25zLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kLm11dGF0aW9ucy5nZXQoaWQpLiR2YWx1ZS5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMuJC5tdXRhdGlvbnMuZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICRtdXRhdGlvblJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQubXV0YXRpb25zO1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRtdXRhdGlvblJlbW92ZShrZXkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IERPTVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdERPTSB7XG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgKCkgPT4gdGhpcy4kZG9tUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRkb21SZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTCkpO1xuICAgICAgICB0aGlzLiQuYXNzaWduKFwiZG9tXCIsIHRoaXMuJC5jcmVhdGVTdWJNYXAoKSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuRU5VTUVSQUJMRSk7XG4gICAgfVxuXG4gICAgJGRvbShpZCwgalF1ZXJ5QXJndW1lbnQsIGFwcGVuZFRvKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaWRcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwialF1ZXJ5QXJndW1lbnRcIiwgalF1ZXJ5QXJndW1lbnQpLnR5cGUoU3RyaW5nLCBPYmplY3QpO1xuICAgICAgICAgICAgYXBwZW5kVG8gJiYgSkZhY3RvcnlFeHBlY3QoXCJhcHBlbmRUb1wiLCBhcHBlbmRUbykudHlwZShTdHJpbmcsIE9iamVjdCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZG9tSWQ7XG4gICAgICAgIGlmIChpZFswXSA9PT0gXCIjXCIpIHtcbiAgICAgICAgICAgIGlkID0gaWQuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgZG9tSWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWICYmIHRoaXMuJC5kb20uaGFzKGlkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX0RVUExJQ0FURUQoeyB0YXJnZXQ6IFwiJGRvbShpZClcIiwgZ2l2ZW46IGlkIH0pXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZG9tID0galF1ZXJ5KGpRdWVyeUFyZ3VtZW50KTtcblxuICAgICAgICBpZiAoZG9tWzBdLnRhZ05hbWUgPT09IFwiVEVNUExBVEVcIikge1xuICAgICAgICAgICAgZG9tID0galF1ZXJ5KGRvY3VtZW50LmltcG9ydE5vZGUoZG9tWzBdLmNvbnRlbnQsIHRydWUpLmNoaWxkcmVuKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvbUlkKSB7XG4gICAgICAgICAgICBkb21bMF0uaWQgPSBpZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFwcGVuZFRvKSB7XG4gICAgICAgICAgICBkb20uYXBwZW5kVG8oYXBwZW5kVG8pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy4kLmRvbS4kcmVnaXN0ZXJTeW5jKGlkLCBkb20pLiR2YWx1ZTtcbiAgICB9XG5cbiAgICAkZG9tRmV0Y2goaWQsIHVybCwgZmV0Y2hPcHRpb25zLCBhcHBlbmRUbykge1xuICAgICAgICBpZiAoZmV0Y2hPcHRpb25zICYmICFoZWxwZXJfaXNQbGFpbk9iamVjdChmZXRjaE9wdGlvbnMpKSB7XG4gICAgICAgICAgICBbZmV0Y2hPcHRpb25zLCBhcHBlbmRUb10gPSBbe30sIGZldGNoT3B0aW9uc11cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaWRcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwidXJsXCIsIHVybCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgYXBwZW5kVG8gJiYgSkZhY3RvcnlFeHBlY3QoXCJhcHBlbmRUb1wiLCBhcHBlbmRUbykudHlwZShTdHJpbmcsIE9iamVjdCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZG9tSWQ7XG4gICAgICAgIGlmIChpZFswXSA9PT0gXCIjXCIpIHtcbiAgICAgICAgICAgIGlkID0gaWQuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgZG9tSWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWICYmIHRoaXMuJC5kb20uaGFzKGlkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX0RVUExJQ0FURUQoeyB0YXJnZXQ6IFwiJGRvbUZldGNoKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcm9taXNlID0gdGhpcy4kZmV0Y2hUZXh0KCckZG9tRmV0Y2goXCInICsgaWQgKyAnXCIpJywgdXJsLCBmZXRjaE9wdGlvbnMpXG4gICAgICAgICAgICAudGhlbihyID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZG9tID0galF1ZXJ5KHIpO1xuICAgICAgICAgICAgICAgIGlmIChkb21JZCkge1xuICAgICAgICAgICAgICAgICAgICBkb21bMF0uaWQgPSBpZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXBwZW5kVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tLmFwcGVuZFRvKGFwcGVuZFRvKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZG9tXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiQuZG9tLiRyZWdpc3RlckFzeW5jKGlkLCAnJGRvbUZldGNoKFwiJyArIGlkICsgJ1wiKScsIHByb21pc2UpO1xuICAgICAgICByZXR1cm4gcHJvbWlzZVxuICAgIH1cblxuICAgICRkb21SZW1vdmUoaWQsIHJlYXNvbikge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiRkb21SZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICByZWFzb24gJiYgSkZhY3RvcnlFeHBlY3QoXCIkZG9tUmVtb3ZlKHJlYXNvbilcIiwgcmVhc29uKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuJC5kb20uaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLktFWV9NSVNTSU5HKHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIiRkb21SZW1vdmUoaWQpXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBpZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZGVidWdnZXIsYnJhY2Utc3R5bGVcbiAgICAgICAgICAgIGlmICh0aGlzLiQuZG9tLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQpIHtkZWJ1Z2dlcn1cbiAgICAgICAgICAgIHRoaXMuJC5kb20uZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbnRyeSA9IHRoaXMuJC5kb20uZ2V0KGlkKTtcbiAgICAgICAgbGV0IHZhbHVlID0gZW50cnkuJHZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBqUXVlcnkpIHtcbiAgICAgICAgICAgIHZhbHVlLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVudHJ5IGluc3RhbmNlb2YgSkZhY3RvcnlGZXRjaCkge1xuICAgICAgICAgICAgZW50cnkuJGNoYWluQWJvcnQocmVhc29uIHx8IFwiJGRvbVJlbW92ZSgpXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJC5kb20uZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICRkb21SZW1vdmVBbGwocmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJyZW1vdmVQaGFzZVwiLCByZW1vdmVQaGFzZSlcbiAgICAgICAgICAgICAgICAuZXF1YWxJbihUcmFpdFNlcnZpY2UuUEhBU0VTKVxuICAgICAgICB9XG4gICAgICAgIGxldCBzdWJzID0gdGhpcy4kLmRvbTtcbiAgICAgICAgaWYgKHN1YnMuc2l6ZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBzdWJdIG9mIHN1YnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3ViLiRwaGFzZVJlbW92ZSA9PT0gcmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZG9tUmVtb3ZlKGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gIFRyYWl0IENTU1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdENTUyB7XG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgKCkgPT4gdGhpcy4kY3NzUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRjc3NSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTCkpO1xuICAgICAgICB0aGlzLiQuYXNzaWduKFwiY3NzXCIsIHRoaXMuJC5jcmVhdGVTdWJNYXAoKSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuRU5VTUVSQUJMRSk7XG4gICAgfVxuXG4gICAgJGNzcyhpZCwgc3R5bGVCb2R5KSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaWRcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiY3NzXCIsIHN0eWxlQm9keSkudHlwZVN0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNzc0lkO1xuICAgICAgICBpZiAoaWRbMF0gPT09IFwiI1wiKSB7XG4gICAgICAgICAgICBpZCA9IGlkLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIGNzc0lkID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiB0aGlzLiQuY3NzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLktFWV9EVVBMSUNBVEVEKHsgdGFyZ2V0OiBcIiRjc3MoaWQpXCIsIGdpdmVuOiBpZCB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuJC5jc3MuJHJlZ2lzdGVyU3luYyhpZCxcbiAgICAgICAgICAgIGpRdWVyeShcIjxzdHlsZT5cIilcbiAgICAgICAgICAgICAgICAuYXR0cihjc3NJZCA/IHsgaWQgfSA6IHt9KVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImpGYWN0b3J5LWNzc1wiKVxuICAgICAgICAgICAgICAgIC5odG1sKHN0eWxlQm9keSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oXCJoZWFkXCIpXG4gICAgICAgICkuJHZhbHVlO1xuICAgIH1cblxuICAgICRjc3NGZXRjaChpZCwgdXJsKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaWRcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwidXJsXCIsIHVybCkudHlwZVN0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNzc0lkO1xuICAgICAgICBpZiAoaWRbMF0gPT09IFwiI1wiKSB7XG4gICAgICAgICAgICBpZCA9IGlkLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIGNzc0lkID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiB0aGlzLiQuY3NzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLktFWV9EVVBMSUNBVEVEKHsgdGFyZ2V0OiBcIiRjc3NGZXRjaChpZClcIiwgZ2l2ZW46IGlkIH0pXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZG9tO1xuICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBKRmFjdG9yeVByb21pc2UoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogaWQsXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHByb21pc2VSZWplY3RJZkV4cGlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoYWluQXV0b0NvbXBsZXRlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0cmFjZVNvdXJjZTogakZhY3RvcnlUcmFjZS50cmFjZXIuY2FwdHVyZVRyYWNlU291cmNlKFwiJGNzc0ZldGNoXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzb2x2ZSA9PiBkb20gPSBqUXVlcnkoXCI8bGluaz5cIiwgeyBpZDogY3NzSWQgPyBpZCA6IFwiXCIsIHJlbDogXCJzdHlsZXNoZWV0XCIsIHR5cGU6IFwidGV4dC9jc3NcIiB9KVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImpGYWN0b3J5LWNzc1wiKVxuICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhcImhlYWRcIilcbiAgICAgICAgICAgICAgICAub24oXCJsb2FkXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkb20pXG4gICAgICAgICAgICAgICAgfSkuYXR0cihcImhyZWZcIiwgdXJsKVxuICAgICAgICApO1xuICAgICAgICBwcm9taXNlLiRjaGFpbi5kYXRhLmRvbSA9IGRvbTtcbiAgICAgICAgdGhpcy4kLmNzcy4kcmVnaXN0ZXJBc3luYyhpZCwgJyRjc3NGZXRjaChcIicgKyBpZCArICdcIiknLCBwcm9taXNlKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2VcbiAgICB9XG5cbiAgICAkY3NzUmVtb3ZlKGlkLCByZWFzb24pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkY3NzUmVtb3ZlKGlkKVwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgcmVhc29uICYmIEpGYWN0b3J5RXhwZWN0KFwiJGNzc1JlbW92ZShyZWFzb24pXCIsIHJlYXNvbikudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiQuY3NzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkY3NzUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLmNzcy5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQuY3NzLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQuY3NzLmdldChpZCk7XG4gICAgICAgIGxldCB2YWx1ZSA9IGVudHJ5LiR2YWx1ZSB8fCBlbnRyeS4kY2hhaW4gJiYgZW50cnkuJGNoYWluLmRhdGEuZG9tO1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBqUXVlcnkpIHtcbiAgICAgICAgICAgIHZhbHVlLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVudHJ5IGluc3RhbmNlb2YgSkZhY3RvcnlQcm9taXNlKSB7XG4gICAgICAgICAgICBlbnRyeS4kY2hhaW5BYm9ydChyZWFzb24gfHwgXCIkY3NzUmVtb3ZlKClcIilcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiQuY3NzLmRlbGV0ZShpZClcbiAgICB9XG5cbiAgICAkY3NzUmVtb3ZlQWxsKHJlbW92ZVBoYXNlKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwicmVtb3ZlUGhhc2VcIiwgcmVtb3ZlUGhhc2UpXG4gICAgICAgICAgICAgICAgLmVxdWFsSW4oVHJhaXRTZXJ2aWNlLlBIQVNFUylcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3VicyA9IHRoaXMuJC5jc3M7XG4gICAgICAgIGlmIChzdWJzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgc3ViXSBvZiBzdWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yi4kcGhhc2VSZW1vdmUgPT09IHJlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGNzc1JlbW92ZShrZXkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVHJhaXRMaWJWdWUge1xuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuICAgICAgICBrZXJuZWwub24oXCJkaXNhYmxlXCIsICgpID0+IHRoaXMuJHZ1ZVJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSkpO1xuICAgICAgICBrZXJuZWwub24oXCJ1bmluc3RhbGxcIiwgKCkgPT4gdGhpcy4kdnVlUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5VTklOU1RBTEwpKTtcbiAgICAgICAgdGhpcy4kLmFzc2lnbihcInZ1ZVwiLCB0aGlzLiQuY3JlYXRlU3ViTWFwKCksIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEUpO1xuICAgIH1cblxuICAgICR2dWUoaWQsIHZ1ZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInZ1ZVwiLCB2dWUpLnR5cGUoT2JqZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYgJiYgdGhpcy4kLnZ1ZS5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkdnVlKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiQudnVlLiRyZWdpc3RlclN5bmMoaWQsIHZ1ZSkuJHZhbHVlO1xuICAgIH1cblxuICAgICR2dWVSZW1vdmUoaWQpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkdnVlUmVtb3ZlKGlkKVwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiQudnVlLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkdnVlUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLnZ1ZS5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQudnVlLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQudnVlLmdldChpZCk7XG4gICAgICAgIGpRdWVyeShlbnRyeS4kdmFsdWUuJGVsKS5yZW1vdmUoKTtcbiAgICAgICAgZW50cnkuJHZhbHVlLiRkZXN0cm95KCk7XG4gICAgICAgIHRoaXMuJC52dWUuZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICR2dWVSZW1vdmVBbGwocmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJyZW1vdmVQaGFzZVwiLCByZW1vdmVQaGFzZSlcbiAgICAgICAgICAgICAgICAuZXF1YWxJbihUcmFpdFNlcnZpY2UuUEhBU0VTKVxuICAgICAgICB9XG4gICAgICAgIGxldCBzdWJzID0gdGhpcy4kLnZ1ZTtcbiAgICAgICAgaWYgKHN1YnMuc2l6ZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBzdWJdIG9mIHN1YnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3ViLiRwaGFzZVJlbW92ZSA9PT0gcmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdnVlUmVtb3ZlKGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUcmFpdExpYlJlYWN0IHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qga2VybmVsID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbDtcbiAgICAgICAga2VybmVsLm9uKFwiZGlzYWJsZVwiLCAoKSA9PiB0aGlzLiRyZWFjdFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSkpO1xuICAgICAgICBrZXJuZWwub24oXCJ1bmluc3RhbGxcIiwgKCkgPT4gdGhpcy4kcmVhY3RSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTCkpO1xuICAgICAgICB0aGlzLiQuYXNzaWduKFwicmVhY3RcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkcmVhY3QoaWQsIGNvbnRhaW5lciwgZWxlbWVudCwgLi4ucmVuZGVyT3RoZXJBcmd1bWVudHMpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgaWYgKCFqRmFjdG9yeS5SZWFjdERPTSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImpGYWN0b3J5LlJlYWN0RE9NPVJlYWN0RE9NIG11c3QgYmUgc2V0IGJlZm9yZSB1c2luZyB0aGUgUmVhY3QgVHJhaXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImNvbnRhaW5lclwiLCBjb250YWluZXIpLnR5cGUoSFRNTEVsZW1lbnQsIGpRdWVyeSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWICYmIHRoaXMuJC5yZWFjdC5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkcmVhY3QoaWQpXCIsIGdpdmVuOiBpZCB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGFpbmVyID0galF1ZXJ5KGNvbnRhaW5lcilbMF07XG4gICAgICAgIGxldCB2aWV3ID0gakZhY3RvcnkuUmVhY3RET00ucmVuZGVyKGVsZW1lbnQsIGNvbnRhaW5lciwgLi4ucmVuZGVyT3RoZXJBcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy4kLnJlYWN0LiRyZWdpc3RlclN5bmMoaWQsIHsgY29udGFpbmVyLCB2aWV3IH0pLiR2YWx1ZS52aWV3O1xuICAgIH1cblxuICAgICRyZWFjdFJlbW92ZShpZCkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiRyZWFjdFJlbW92ZShpZClcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLnJlYWN0LmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkcmVhY3RSZW1vdmUoaWQpXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBpZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZGVidWdnZXIsYnJhY2Utc3R5bGVcbiAgICAgICAgICAgIGlmICh0aGlzLiQucmVhY3QuZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLnJlYWN0LmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLiQucmVhY3QuZ2V0KGlkKS4kdmFsdWU7XG4gICAgICAgIGxldCBlbCA9IHZhbHVlLmNvbnRhaW5lcjtcbiAgICAgICAgaWYgKGVsKSB7XG4gICAgICAgICAgICBpZiAoIWpGYWN0b3J5LlJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUoZWwpKSB7XG4gICAgICAgICAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRsb2dXYXJuKFwidW5tb3VudENvbXBvbmVudEF0Tm9kZSBmYWlsZWQgdG8gdW5tb3VudFwiLCBlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgalF1ZXJ5KGVsKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiQucmVhY3QuZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICRyZWFjdFJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQucmVhY3Q7XG4gICAgICAgIGlmIChzdWJzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgc3ViXSBvZiBzdWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yi4kcGhhc2VSZW1vdmUgPT09IHJlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlYWN0UmVtb3ZlKGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5qRmFjdG9yeS5UcmFpdEZldGNoID0gVHJhaXRGZXRjaDtcbmpGYWN0b3J5LlRyYWl0VGltZW91dCA9IFRyYWl0VGltZW91dDtcbmpGYWN0b3J5LlRyYWl0SW50ZXJ2YWwgPSBUcmFpdEludGVydmFsO1xuakZhY3RvcnkuVHJhaXRNdXRhdGlvbiA9IFRyYWl0TXV0YXRpb247XG5qRmFjdG9yeS5UcmFpdERPTSA9IFRyYWl0RE9NO1xuakZhY3RvcnkuVHJhaXRDU1MgPSBUcmFpdENTUztcbmpGYWN0b3J5LlRyYWl0TGliVnVlID0gVHJhaXRMaWJWdWU7XG5qRmFjdG9yeS5UcmFpdExpYlJlYWN0ID0gVHJhaXRMaWJSZWFjdDsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBqRmFjdG9yeSBidW5kbGUgaW5kZXggKHNlZSBwYWNrYWdlLmpzb24gc2NyaXB0cyB0byBjb21waWxlIHRoZSAvZGlzdClcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVXNlZCBieSB0aGUgYnVpbGQgc2NyaXB0cyB0byBjb21waWxlIG1vZHVsZXMgdGFyZ2V0aW5nIHRoZSBjb25maWd1cmF0aW9uIChwcm9kdWN0aW9uLCBkZXZlbG9wbWVudCwgZGVidWcuLi4pXG4vLyBBbG1vc3QgZXZlcnl0aGluZyBpcyBleHBvcnRlZDsgVGhlIHJlc3VsdGluZyBtb2R1bGVzIHNob3VsZCBiZSBpbXBvcnRlZCBieSBhIGJ1bmRsZXIgdGhhdCBzdXBwb3J0cyBUcmVlIFNoYWNraW5nLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmltcG9ydCB7IGpGYWN0b3J5TG9hZGVyIH0gZnJvbSBcIi4vakZhY3RvcnktbG9hZGVyXCI7XG5cbmV4cG9ydCAqIGZyb20gXCIuL2pGYWN0b3J5XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcblxuZXhwb3J0ICogZnJvbSBcIi4vakZhY3RvcnktdHJhaXRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9qRmFjdG9yeS1sb2FkZXJcIjtcblxuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlBYm91dFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlFcnJvclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlFdmVudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9KRmFjdG9yeUZldGNoXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9KRmFjdG9yeUZ1bmN0aW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9KRmFjdG9yeUxvZ2dlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlPYmplY3RcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5UHJvbWlzZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlUaW1lXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9KRmFjdG9yeVRyYWNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9KRmFjdG9yeVRyYWl0c1wiO1xuXG5leHBvcnQgKiBmcm9tIFwiLi9UcmFpdHNDb3JlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9UcmFpdHNDb21wb25lbnRzXCI7XG5cbi8vIG5vaW5zcGVjdGlvbiBKU1VucmVzb2x2ZWRWYXJpYWJsZVxuaWYgKHR5cGVvZiBqRmFjdG9yeU92ZXJyaWRlID09PSBcInVuZGVmaW5lZFwiIHx8ICFqRmFjdG9yeU92ZXJyaWRlKSB7XG4gICAgakZhY3RvcnlMb2FkZXIuaW5pdCgpO1xufSJdLCJuYW1lcyI6WyJKRkFDVE9SWV9DTEkiLCJwcm9jZXNzIiwidmVyc2lvbnMiLCJub2RlIiwiakZhY3RvcnlDb25maWciLCJUcmFpdExvZyIsIkpGYWN0b3J5RXJyb3IiLCJrZXlzIiwiSkZhY3RvcnlUcmFjZSIsImxpYk9wdGlvbnMiLCJvZmZsaW5lIiwiQm9vbGVhbiIsImdsb2JhbFRoaXMiLCJjaHJvbWUiLCJmaWx0ZXIiLCJ2YWx1ZSIsImxpbmVOdW1iZXIiLCJqRmFjdG9yeURldiIsInJlcXVpcmVDb21wYXRpYmlsaXR5IiwidGVzdCIsImluZm8iLCJmZXRjaCIsIlJlcXVlc3QiLCJBYm9ydENvbnRyb2xsZXIsIEFib3J0U2lnbmFsIiwiQWJvcnRDb250cm9sbGVyIiwic2lnbmFsIiwiTXV0YXRpb25PYnNlcnZlciIsImpGYWN0b3J5TG9hZGVyIiwic2VxIiwiW29iamVjdCBPYmplY3RdIiwidGhpcyIsIm1vZHVsZSIsImpGYWN0b3J5T3ZlcnJpZGUiLCJoYW5kbGVyIiwicHVzaCIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwiZW50cnkiLCJPYmplY3QiLCJlbnRyaWVzIiwicGFzcyIsImlnbm9yZSIsIndhcm4iLCJqRmFjdG9yeUluaXQiLCJvbkluaXQiLCJqUXVlcnkiLCIkIiwiaGVscGVyX2lzTmF0aXZlIiwiXyIsImlzTmF0aXZlIiwiaGVscGVyX2lzU3RyaW5nIiwiaXNTdHJpbmciLCJoZWxwZXJfaXNOdW1iZXIiLCJpc051bWJlciIsImhlbHBlcl9pc1BsYWluT2JqZWN0IiwiaXNQbGFpbk9iamVjdCIsImhlbHBlcl9kZWZhdWx0c0RlZXAiLCJkZWZhdWx0c0RlZXAiLCJoZWxwZXJfbG93ZXJGaXJzdCIsImxvd2VyRmlyc3QiLCJoZWxwZXJfZ2V0IiwiZ2V0IiwiaGVscGVyX3RlbXBsYXRlIiwidGVtcGxhdGUiLCJoZWxwZXJfY2FtZWxDYXNlIiwiY2FtZWxDYXNlIiwiTk9PUCIsInNldEZ1bmN0aW9uTmFtZSIsImYiLCJkZWZpbmVQcm9wZXJ0eSIsIkpGYWN0b3J5VHJhY2VfTk9GSUxURVIiLCJsYWJlbCIsInN0YWNrVHJhY2VMaW1pdCIsIkluZmluaXR5Iiwib21pdEFib3ZlRnVuY3Rpb25OYW1lIiwib21pdFNlbGYiLCJfc3RhY2tUcmFjZUxpbWl0IiwiRXJyb3IiLCJ0cmFjZVNvdXJjZSIsInNvdXJjZSIsInRhcmdldE9iamVjdCIsImNhcHR1cmVUcmFjZVNvdXJjZSIsInRyYWNlIiwidG9QcmludGFibGVUcmFjZSIsInRoZW4iLCJyIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiSkZhY3RvcnlUcmFjZV9MSUJfU1RBQ0tUUkFDRSIsImNvbmZpZyIsInN1cGVyIiwiU3RhY2tUcmFjZSIsImZyb21FcnJvciIsInRyYWNlRnJhbWVzIiwic2xpY2UiLCJmaW5kSW5kZXgiLCJmdW5jdGlvbk5hbWUiLCJlbmRzV2l0aCIsImZvcm1hdFRyYWNlRnJhbWVzIiwiaGVhZGVyIiwibGluZVByZWZpeCIsIndpbmRvdyIsIm1hcCIsInNmIiwidG9TdHJpbmciLCJqb2luIiwiakZhY3RvcnlUcmFjZSIsInVzZSIsImNvbnN0cnVjdG9yIiwidHJhY2VyIiwiYXR0YWNoVHJhY2UiLCJtZXNzYWdlIiwiZGF0YSIsImFzc2lnbiIsImNyZWF0ZSIsInRvUHJpbnRhYmxlIiwiJGRhdGEiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm9iamVjdCIsIkRFRkFVTFRfS0VZUyIsImZpbmQiLCJrZXkiLCJ2YWwiLCJ0ZW1wbGF0ZURhdGEiLCJudiIsInVuZGVmaW5lZCIsImdldElkIiwiSlNPTiIsInN0cmluZ2lmeSIsImxlbmd0aCIsIkpTT05fTUFYIiwic3Vic3RyaW5nIiwiZSIsIlN0cmluZyIsInRlbXBsYXRlTWVzc2FnZSIsInBhcnQiLCJzcGxpdCIsInBsYWNlaG9sZGVyIiwiUkVfUExBQ0VIT0xERVIiLCJsYXN0SW5kZXgiLCJleGVjIiwidHJpbSIsInRvUHJpbnRhYmxlRGF0YSIsImpGYWN0b3J5RXJyb3IiLCJQcm94eSIsInNldCIsInRhcmdldCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiSkZhY3RvcnlFeHBlY3QiLCJJTlZBTElEX1ZBTFVFIiwiSU5WQUxJRF9DQUxMIiwiUFJPTUlTRV9FWFBJUkVEIiwiUkVRVUVTVF9FUlJPUiIsIktFWV9EVVBMSUNBVEVEIiwiS0VZX01JU1NJTkciLCJlcnJvciIsInJlYXNvbiIsImdpdmVuIiwic3RhdGljTWV0aG9kcyIsIm5vdFVuZGVmaW5lZCIsIm5vdEVtcHR5U3RyaW5nIiwibm90RmFsc3kiLCJ2YWxpZFNwYWNlcyIsInJlcGxhY2UiLCJtYXRjaFJlZyIsInJlZyIsImV4cGVjdGVkIiwib2siLCJ0eXBlTnVsbCIsInR5cGVCb29sZWFuIiwidHlwZVN0cmluZyIsInR5cGVOdW1iZXIiLCJ0eXBlRnVuY3Rpb24iLCJ0eXBlUGxhaW5PYmplY3QiLCJlcXVhbEluIiwiQXJyYXkiLCJpc0FycmF5IiwidmFsdWVzIiwiaW5jbHVkZXMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwid3JpdGFibGUiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJub3RXcml0YWJsZSIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiY2FsbCIsIm5vdEVudW1lcmFibGUiLCJub3RDb25maWd1cmFibGUiLCJyZXNlcnZlZFByb3BlcnR5IiwiYXJncyIsIkpGYWN0b3J5VHJhaXRzIiwiY2FsbGVySW5zdGFuY2UiLCJjYWxsZXJDb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJ0cmFpdCIsInRyYWl0QXJncyIsImNhY2hlIiwiQ0FDSEUiLCJoYXMiLCJhZGQiLCJXZWFrU2V0IiwiSkZhY3RvcnlUcmFpdCIsImV4cG9ydCIsInRyYWl0SW5zdGFuY2UiLCJ0cmFpdF9jb25zdHJ1Y3RvciIsImFwcGx5IiwiaXNTdGF0aWMiLCJzb3VyY2VEZXNjcmlwdG9yIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsInByb3BlcnR5TmFtZSIsInByZWZpeCIsImdldFByZWZpeCIsImdldFRhcmdldCIsInByb3BlcnR5RGVzY3JpcHRvciIsInBhcnNlZCIsInBhcnNlciIsImRlZmF1bHRQYXJzZXIiLCJFWENMVURFUyIsIldlYWtNYXAiLCJKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXIiLCJoYW5kbGVycyIsImhhbmRsZXJHcm91cHMiLCJoYW5kbGVyR3JvdXAiLCJhcmd1bWVudHMiLCJ1bnNoaWZ0IiwiY29tcG9zZXIiLCJjb21wb3NpdGUiLCJjb250ZXh0IiwiY2FuY2VsZWQiLCJwYXJhbWV0ZXJzIiwiZnJvbSIsInJlc3VsdCIsIml0ZXJhdGlvbiIsIm5leHQiLCJjb21wb3NpdGVfaXRlcmF0b3IiLCJzY29wZSIsImRvbmUiLCJKRmFjdG9yeUZ1bmN0aW9uRXhwaXJhYmxlIiwib3JpZ2luYWxIYW5kbGVyIiwiZXhwaXJlZENhbGxzIiwiZXhwaXJlZCIsImlzRXhwaXJlZCIsImNvbXBvc2UiLCJleHBpcmFibGUiLCJzZXRFeHBpcmVkIiwiYWRkRXhwaXJlQ29uZGl0aW9uIiwiY29uZGl0aW9uIiwibGFzdCIsInR5cGUiLCJiaW5kIiwib25FeHBpcmVkIiwib25Ob3RFeHBpcmVkIiwiTWF4V2FybmluZ0V4cGlyYXRpb24iLCJqRmFjdG9yeUZ1bmN0aW9uQ29uZGl0aW9uYWwiLCJKRmFjdG9yeUZ1bmN0aW9uQ29uZGl0aW9uYWwiLCJmaXJzdCIsImNvbmRpdGlvbmFsIiwiYWRkQ29uZGl0aW9uIiwiaGFuZGxlIiwiakZhY3RvcnlGdW5jdGlvbldyYXBwYWJsZSIsIkpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUiLCJ3cmFwcGFibGUiLCJiZWZvcmVBbGwiLCJqdXN0QmVmb3JlIiwianVzdEFmdGVyIiwiYWZ0ZXJBbGwiLCJqRmFjdG9yeVRyYWl0cyIsInN0YXRlcyIsImVuYWJsZWQiLCJzZXJ2aWNlIiwicGhhc2UiLCJvd25lciIsIiRsb2dFcnIiLCJKRmFjdG9yeUNvcmVPYmplY3QiLCJqRmFjdG9yeSIsIlRyYWl0Q29yZSIsIlRyYWl0QWJvdXQiLCJUcmFpdEV2ZW50cyIsIlRyYWl0U3RhdGUiLCJUcmFpdFNlcnZpY2UiLCJUcmFpdFRhc2siLCJKRmFjdG9yeUNvbXBvbmVudCIsIlRyYWl0RmV0Y2giLCJUcmFpdERPTSIsIlRyYWl0Q1NTIiwiVHJhaXRNdXRhdGlvbiIsIlRyYWl0VGltZW91dCIsIlRyYWl0SW50ZXJ2YWwiLCJUcmFpdExpYlZ1ZSIsIlRyYWl0TGliUmVhY3QiLCJwcm9wZXJ0aWVzIiwiSkZhY3RvcnlPYmplY3QiLCJkZXNjcmlwdG9yUHJvdG90eXBlIiwiREVTQ1JJUFRPUlNfUFJPVE9UWVBFIiwibyIsIk5PTkUiLCJXUklUQUJMRSIsIkVOVU1FUkFCTEUiLCJDT05GSUdVUkFCTEUiLCJDT05GSUdVUkFCTEVfV1JJVEFCTEUiLCJXUklUQUJMRV9DT05GSUdVUkFCTEUiLCJDT05GSUdVUkFCTEVfRU5VTUVSQUJMRSIsIkVOVU1FUkFCTEVfQ09ORklHVVJBQkxFIiwiRU5VTUVSQUJMRV9XUklUQUJMRSIsIldSSVRBQkxFX0VOVU1FUkFCTEUiLCJXUklUQUJMRV9FTlVNRVJBQkxFX0NPTkZJR1VSQUJMRSIsIldSSVRBQkxFX0NPTkZJR1VSQUJMRV9FTlVNRVJBQkxFIiwiRU5VTUVSQUJMRV9DT05GSUdVUkFCTEVfV1JJVEFCTEUiLCJFTlVNRVJBQkxFX1dSSVRBQkxFX0NPTkZJR1VSQUJMRSIsIkNPTkZJR1VSQUJMRV9XUklUQUJMRV9FTlVNRVJBQkxFIiwiQ09ORklHVVJBQkxFX0VOVU1FUkFCTEVfV1JJVEFCTEUiLCJSRUFET05MWSIsImRlc2NyaXB0b3IiLCJkZXNjcmlwdG9ycyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImRlZmluZVByb3BlcnRpZXMiLCJmbGF0IiwiZGlzaW5oZXJpdCIsImNyZWF0ZURlc2NyaXB0b3JzIiwibW9kdWxlR2VuSWQiLCJ1aWQiLCJKRmFjdG9yeUFib3V0IiwiYWJvdXQiLCJmaW5nZXJwcmludCIsInRvTG93ZXJDYXNlIiwiSkZhY3RvcnlQcm9taXNlIiwiZXhlY3V0b3IiLCJjaGFpbklkIiwicmVqZWN0IiwiREVGQVVMVF9DT05GSUciLCJOdW1iZXIiLCJfcmVzb2x2ZSIsIl9yZWplY3QiLCJjaGFpbiIsIkpGYWN0b3J5UHJvbWlzZUNoYWluIiwiJGNoYWluIiwiJHR5cGUiLCIkdmFsdWUiLCIkaXNTZXR0bGVkIiwiJGlzUmVqZWN0ZWQiLCIkaXNGdWxmaWxsZWQiLCIkaXNFeHBpcmVkIiwiJGRldl9uYW1lIiwiJGRldl9wYXRoIiwiSkZhY3RvcnlQcm9taXNlUGF0aCIsIiRkZXZfcG9zaXRpb24iLCIkZGV2X3NvdXJjZSIsInRyeUF1dG9Db21wbGV0ZSIsImlzUGVuZGluZyIsIiRjaGFpbkNvbXBsZXRlIiwib25SZXNvbHZlIiwib25SZWplY3QiLCJUeXBlRXJyb3IiLCJ4IiwiY2FsbGVkIiwicmVzb2x2ZVByb21pc2UiLCJ5IiwicmVqZWN0UHJvbWlzZSIsImVycm9yRXhwaXJlZCIsIm9uU2V0dGxlIiwiY2hhaW5NYXAiLCJjaGFpbkNvbmZpZyIsImNoYWluQXV0b0NvbXBsZXRlIiwic2l6ZSIsIl9jaGFpbkF1dG9Db21wbGV0ZSIsIl9fcmVzb2x2ZV9fIiwiX19yZWplY3RfXyIsIm9uRnVsZmlsbGVkIiwib25SZWplY3RlZCIsImZvcmNlVHlwZSIsIndyYXBwZWRGdWxmaWxsZWQiLCJ3cmFwcGVkUmVqZWN0ZWQiLCJuZXdQcm9taXNlIiwic3RhcnRzV2l0aCIsImZOYW1lcyIsImNoYWluTmFtZSIsIiRkZXZfb25GdWxmaWxsZWQiLCIkZGV2X29uUmVqZWN0ZWQiLCJmb3JjZUV4cGlyZSIsImNoYWluUm9vdCIsIm9wdGlvbmFsQXJncyIsImNvbXBsZXRlIiwicHJvbWlzZSIsIk1hcCIsImlzQ29tcGxldGVkIiwiX19kZWZlcnJlZF9fIiwiRGVmZXJyZWQiLCJpdGVtIiwiaSIsInByaW50YWJsZSIsInYiLCJKRmFjdG9yeVByb21pc2VTeW5jIiwiSkZhY3RvcnlFdmVudHMiLCJyZWdpc3RyeSIsIm9uTGlzdGVuZXJVcGRhdGUiLCJvbk9ic2VydmVyVXBkYXRlIiwiZXZlbnRzIiwic2VsZWN0b3IiLCJ2YWxpZGF0ZVNlbGVjdG9yIiwiSFRNTEVsZW1lbnQiLCJ3cmFwcGVkSGFuZGxlciIsIm9uIiwic3RhY2siLCJvZmYiLCJwZW5kaW5nIiwiZXZlbnQiLCJ0cmlnZ2VyIiwidHJpZ2dlckhhbmRsZXIiLCJhbGwiLCJhc3luYyIsIkpGYWN0b3J5RXZlbnRzTWFuYWdlciIsInBhcmVudCIsImFmZmlsaWF0ZVJ1bGVzIiwiYWZmaWxpYXRlQWRkUnVsZSIsInJ1bGVfbmFtZXNwYWNlIiwibmFtZXNwYWNlcyIsIkpGYWN0b3J5RXZlbnRTZWxlY3RvclBhcnNlciIsInBhcnNlZEV2ZW50IiwibmFtZXNwYWNlIiwiYWRkTmFtZXNwYWNlIiwiYWZmaWxpYXRlIiwiYXJnTCIsImpxdWVyeSIsInRyaWdnZXJTZXJpZXMiLCJ0cmlnZ2VyUGFyYWxsZWwiLCJlbG0iLCJfZGF0YSIsInR5cGVzIiwiSkZhY3RvcnlFdmVudFNlbGVjdG9yIiwiaGFzTmFtZXNwYWNlIiwiX2V2ZW50cyIsImV4cGFuZG8iLCJrIiwiaW5kZXhPZiIsImV2ZW50VHlwZUVudHJ5Iiwic2VsZWN0b3JzIiwicyIsIlNldCIsImRlbGV0ZSIsIm5zIiwic2hpZnQiLCJ2YWxpZGF0ZUV2ZW50IiwidmFsaWRhdGVOYW1lc3BhY2UiLCJKRmFjdG9yeUZldGNoIiwidXJsIiwiZmV0Y2hPcHRpb25zIiwiZmV0Y2hSZXF1ZXN0IiwicmVzcG9uc2UiLCJmZXRjaFJlc3BvbnNlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIiR0eXBlVGV4dCIsInRleHQiLCJyZXNwb25zZVRleHQiLCIkdHlwZUpTT04iLCJqc29uIiwicmVzcG9uc2VKU09OIiwiY2F0Y2giLCJhYm9ydEN0cmwiLCJhYm9ydENvbnRyb2xsZXIiLCJmZXRjaEFib3J0Q29udHJvbGxlciIsIiRjaGFpbkFib3J0IiwiYWJvcnQiLCJTWU1CT0xfRU5BQkxFRCIsIkpGYWN0b3J5TG9nZ2VyIiwiREVGQVVMVF9DT05ESVRJT04iLCJpbnN0YWxsQWNjZXNzb3IiLCJwYXJlbnRMb2dnZXIiLCJlbmFibGUiLCJkaXNhYmxlIiwibmF0aXZlTmFtZSIsImZpbHRlcnMiLCJ0YXJnZXROYW1lIiwiYWNjZXNzb3IiLCJmb3JtYXR0ZXIiLCJzdWIiLCJzdHlsZXNfY3NzIiwic3R5bGVzX2NsaSIsIkZPUk1BVFRFUl9OQVRJVkUiLCJsb2dnZXIiLCJGT1JNQVRURVJfQ0xJIiwiRk9STUFUVEVSX0JST1dTRVIiLCJlcXVhbCIsIkpGYWN0b3J5VGltZSIsIkRhdGUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJnZXRVVENNaWxsaXNlY29uZHMiLCJ2YWx1ZU9mIiwiaG91cnMiLCJnZXRVVENIb3VycyIsIm1pbnV0ZXMiLCJnZXRVVENNaW51dGVzIiwic2Vjb25kcyIsImdldFVUQ1NlY29uZHMiLCJtaWxsaXNlY29uZHMiLCJhIiwiSkZhY3RvcnlUaW1lVHJhY2UiLCJlbGFwc2VkIiwidDEiLCJ0MCIsIiR0b0R1cmF0aW9uU3RyaW5nIiwiU3ViTWFwIiwiJHBoYXNlUmVtb3ZlIiwiZ2V0Q29udGV4dHVhbFJlbW92ZVBoYXNlIiwidGFza05hbWUiLCJ0YXNrIiwiJHRhc2siLCJwcm90byIsIlNZTUJPTF9QUklWQVRFIiwiY3JlYXRlU3ViTWFwIiwidGFza3MiLCJyZXF1ZXN0cyIsImlkIiwiZXhlY3V0b3JPclZhbHVlIiwibWV0cmljcyIsIiR0YXNrTWV0cmljcyIsIiRkZXZfdGltaW5nIiwiZW5kIiwiJHRhc2tSZW1vdmUiLCJfY2FsbGVkIiwicmVtb3ZlUGhhc2UiLCJQSEFTRVMiLCJhdXRvQ29tcGxldGUiLCJhc3NpZ25Qcml2YXRlIiwiY3VzdG9tIiwia2VybmVsIiwiZXZlbnRNYW5hZ2VyIiwibGlzdGVuZXJzIiwiZ2V0RG9tTGlzdGVuZXJzIiwib2JzZXJ2ZXJzIiwiZ2V0T2JzZXJ2ZXJzIiwiJHRyaWdnZXIiLCJzdGF0ZVJvdXRlcyIsIiRzdGF0ZSIsImgiLCJiZWZvcmUiLCIkbm90aWZ5IiwiYWZ0ZXIiLCJub3RpZnkiLCJwcmV2aW91c1ZhbCIsIlBIQVNFIiwicGhhc2VRdWV1ZSIsImFzc2lnblByaXZhdGVNZW1iZXIiLCJpbnN0YWxsZWQiLCJzZXRFdmVudE5hbWVzcGFjZVJlbW92ZVBoYXNlIiwicmVzb2x2ZVByb21pc2VzIiwiJHRhc2tSZW1vdmVBbGwiLCIkdGFza1Byb21pc2VBbGwiLCJpc1BoYXNlS2lsbGluZyIsIm9uSW5zdGFsbCIsIm9uRW5hYmxlIiwib25EaXNhYmxlIiwib25Vbmluc3RhbGwiLCIkb2ZmIiwicmVtb3ZhbCIsIkRJU0FCTEUiLCJVTklOU1RBTEwiLCJJTlNUQUxMIiwiRU5BQkxFIiwiJGluc3RhbGwiLCIkZW5hYmxlIiwicGhhc2VLaWxsIiwiJGRpc2FibGUiLCIkdW5pbnN0YWxsIiwiY29tcG9uZW50Iiwic2V0VGltZW91dCIsImpGYWN0b3J5Q29yZU9iamVjdCIsIlBIQVNFX1JFVkVSVCIsImN1clJlbW92ZVBoYXNlIiwibmV3UmVtb3ZlUGhhc2UiLCJkZWxldGVOYW1lc3BhY2UiLCIkZmV0Y2hSZW1vdmVBbGwiLCIkcmVnaXN0ZXJBc3luYyIsIiRmZXRjaFJlbW92ZSIsIiRmZXRjaCIsIl9kZWJ1Z19yZW1vdmVfY2FsbGVkIiwic3VicyIsIiR0aW1lb3V0UmVtb3ZlQWxsIiwiZGVsYXkiLCJGdW5jdGlvbiIsInRpbWVvdXRzIiwidGltZXIiLCIkdGltZW91dFJlbW92ZSIsImNsZWFyVGltZW91dCIsIiRpbnRlcnZhbFJlbW92ZUFsbCIsInRpbWVpbnRzIiwic2V0SW50ZXJ2YWwiLCIkcmVnaXN0ZXJTeW5jIiwiY2xlYXJJbnRlcnZhbCIsIiRpbnRlcnZhbFJlbW92ZSIsIiRtdXRhdGlvblJlbW92ZUFsbCIsIkRvY3VtZW50IiwibXV0YXRpb25zIiwib2JzZXJ2ZXIiLCJvYnNlcnZlIiwiZGlzY29ubmVjdCIsIiRtdXRhdGlvblJlbW92ZSIsIiRkb21SZW1vdmVBbGwiLCJqUXVlcnlBcmd1bWVudCIsImFwcGVuZFRvIiwiZG9tSWQiLCJkb20iLCJ0YWdOYW1lIiwiZG9jdW1lbnQiLCJpbXBvcnROb2RlIiwiY29udGVudCIsImNoaWxkcmVuIiwiJGZldGNoVGV4dCIsInJlbW92ZSIsIiRkb21SZW1vdmUiLCIkY3NzUmVtb3ZlQWxsIiwic3R5bGVCb2R5IiwiY3NzSWQiLCJjc3MiLCJhdHRyIiwiYWRkQ2xhc3MiLCJodG1sIiwicmVsIiwiJGNzc1JlbW92ZSIsIiR2dWVSZW1vdmVBbGwiLCJ2dWUiLCIkZWwiLCIkZGVzdHJveSIsIiR2dWVSZW1vdmUiLCIkcmVhY3RSZW1vdmVBbGwiLCJjb250YWluZXIiLCJlbGVtZW50IiwicmVuZGVyT3RoZXJBcmd1bWVudHMiLCJSZWFjdERPTSIsInJlYWN0IiwidmlldyIsInJlbmRlciIsImVsIiwidW5tb3VudENvbXBvbmVudEF0Tm9kZSIsIiRsb2dXYXJuIiwiJHJlYWN0UmVtb3ZlIiwiaW5pdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFVWSxNQUVDQSxFQUNVLG9CQUFaQyxTQUEyQkEsUUFBUUMsVUFBWUQsUUFBUUMsU0FBU0MsS0FHOURDLEVBQWlCLENBQzFCQyxVQUEyQkwsSUFOK0MsRUFPMUVN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
