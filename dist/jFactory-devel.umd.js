var e,t;e=this,t=function(e,t,s){"use strict";
/*!
     * jFactory, Copyright (c) 2019, StÃ©phane Plazis
     * https://github.com/jfactory-es/jfactory/blob/master/LICENSE.txt
     */const r="undefined"!=typeof process&&process.versions&&process.versions.node,i={TraitLog:!r||!1,JFactoryError:{keys:["$.about.name","$dev_name","$name","name","id"]},JFactoryTrace:!r&&{keys:["$dev_traceLog","$dev_traceSource"],libOptions:{offline:Boolean(globalThis.chrome),filter:function(e){return e.lineNumber}}},jFactoryDev:{requireCompatibility:{globalThis:{test:()=>globalThis,info:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/globalThis"},fetch:{test:()=>fetch,info:"https://developer.mozilla.org/docs/Web/API/Fetch_API/Using_Fetch"},Request:{test:()=>Request,info:"https://developer.mozilla.org/docs/Web/API/Request"},"AbortController, AbortSignal":{test:()=>(new AbortController).signal,info:"https://developer.mozilla.org/docs/Web/API/AbortController, https://developer.mozilla.org/docs/Web/API/AbortSignal"},MutationObserver:{test:()=>MutationObserver,info:"https://developer.mozilla.org/docs/Web/API/MutationObserver"}}}},a={seq:[],init(){if(this.seq){let e=this.seq;delete this.seq;for(let t of e)t();delete globalThis.jFactoryOverride}},onInit(e){this.seq.push(e)}};a.onInit((function(){console.log("jFactory is running in development mode; performances will be affected");for(let[e,t]of Object.entries(i.jFactoryDev.requireCompatibility)){let s;try{s=Boolean(t.test())}catch(e){}s||console.warn(`jFactory may require the support of "${e}", ${t.info}`)}})),a.onInit((function(){!i.TraitLog&&console.warn("jFactory logs disabled")}));const n=s,o=t.isNative,l=t.isString,c=t.isNumber,h=t.isPlainObject,u=t.defaultsDeep,d=t.lowerFirst,p=t.get,m=t.template,$=t.camelCase,f=()=>{},g=(e,t)=>Object.defineProperty(t,"name",{value:e}),v=e=>(v.a.href=e,v.a.href);v.a=document.createElement("a");class b{constructor({label:e,stackTraceLimit:t,keys:s,libOptions:r}={}){this.label=e||"The stack has been printed in the console",this.stackTraceLimit=t||1/0,this.keys=s||["stackLog","stackSource"],this.libOptions=r||{}}captureTraceSource(e,t){let s;this.stackTraceLimit&&(s=Error.stackTraceLimit,Error.stackTraceLimit=this.stackTraceLimit),e||(e="captureTraceSource",t=!0);let r={source:new Error,omitAboveFunctionName:e,omitSelf:t};return this.stackTraceLimit&&(Error.stackTraceLimit=s),r}attachTrace(e,t){"object"!=typeof t&&(t=this.captureTraceSource(t||"attachTrace",!t));let s=t.source;this.toPrintableTrace(t).then(e=>s=e);let r=()=>console.log(s)||this.label;Object.defineProperty(e,this.keys[0],{enumerable:!1,configurable:!0,get:()=>r()}),Object.defineProperty(e,this.keys[1],{enumerable:!1,configurable:!0,get:()=>t})}toPrintableTrace(e){return Promise.resolve(e.source)}}class E extends b{constructor(e){super(e)}toPrintableTrace(e){return StackTrace.fromError(e.source,this.libOptions).then(t=>{if(e.omitAboveFunctionName){let s=t.findIndex(t=>t.functionName&&t.functionName.endsWith(e.omitAboveFunctionName));s>0&&(e.omitSelf&&s++,t=t.slice(s))}return t=t.filter(this.libOptions.filter),this.formatTraceFrames(t)})}formatTraceFrames(e){let t,s;return this.libOptions.offline&&window.chrome?(t="Error\n",s="\tat "):(t="",s=""),t+e.map(e=>s+e.toString()).join("\n")}}const A={};a.onInit((function(){let e=i.JFactoryTrace;if(e&&!1!==e.use){let t;t="function"==typeof e.use?e.use:"object"==typeof StackTrace?E:b,t===E&&console.warn("jFactory: Stack trace enabled; Performance will be affected"),A.tracer=new t(e)}else A.tracer={captureTraceSource:f,attachTrace:f}}));class y extends Error{constructor(e="unspecified error",t=null){t=Object.assign(Object.create(null),t),super(e=y.toPrintable(e,t)),this.$data=Object.assign(Object.create(null),t)}toString(){return this.message}*[Symbol.iterator](){yield this.message,yield this.$data}static getId(e){return e[(i.JFactoryError.keys||y.DEFAULT_KEYS).find(t=>{let s=p(e,t);return s||0===s})]}static toPrintableData(e){const t={};let s;for(let[r,i]of Object.entries(e)){switch(typeof i){case"function":i=i.name+"()";break;case"object":if(null===i){i="null";break}if(i instanceof Error){i=i.toString();break}if(void 0!==(s=y.getId(i)))i='"'+s+'"';else if(o(i.toString))try{s=JSON.stringify(i),i=s.length>y.JSON_MAX?s.substring(0,y.JSON_MAX)+"[...]":s}catch(e){i="[object "+i.constructor.name+"]"}else i=i.toString();break;case"string":i='"'+i+'"';break;default:i=String(i)}t[r]=i}return t}static toPrintable(e,t){const s=[];for(let r of e.split(";")){let e,i=y.RE_PLACEHOLDER;if(i.lastIndex=0,e=i.exec(r)){do{if(e[1]&&e[1]in t){s.push(r.trim());break}}while(null!==(e=i.exec(r)))}else s.push(r.trim())}return d(m(s.join("; "))(y.toPrintableData(t)))}}y.JSON_MAX=40,y.DEFAULT_KEYS=["name","id"],y.RE_PLACEHOLDER=/\${([^}]+)}/g;let S=new Proxy(y,{set:function(e,t,s){let{template:r}=s;if(e[t])throw new Error("already declared");return e[t]=class extends y{constructor(e,t){super(r,e),A.tracer.attachTrace(this.$data,t)}},e[t].prototype.name="Error jFactoryError."+t,!0}});function _(e,t){if(!new.target)return new _(e,t);this.label=e,this.value=t}S.INVALID_VALUE={template:"invalid value for ${target}; Reason: ${reason}; Given: ${given}"},S.INVALID_CALL={template:"invalid call ${target}; Reason: ${reason}; Owner: ${owner}"},S.PROMISE_EXPIRED={template:"expired promise ${target}; Reason: ${reason}"},S.REQUEST_ERROR={template:"error requesting ${target}; Reason: ${reason}; Owner: ${owner}"},S.KEY_DUPLICATED={template:"duplicated key for ${target}; Given: ${given}"},S.KEY_MISSING={template:"missing key for ${target}; Given: ${given}"};const R=function(e,t,s){throw new S.INVALID_VALUE({target:e,reason:s,given:t})},L={notUndefined:(e,t)=>(void 0===t&&R(e,t,"cannot be undefined"),!0),notEmptyString:(e,t)=>(""===t&&R(e,t,"cannot be empty string"),!0),notFalsy:(e,t)=>(t||R(e,t,'cannot be a falsy value (undefined, null, NaN, 0, "")'),!0),validSpaces:(e,t)=>(t.replace&&t.replace(/\s+/g," ").trim()===t||R(e,t,"invalid space delimiters"),!0),matchReg:(e,t,s)=>(s.test(t)||R(e,t,'string "'+t+'" must match '+s),!0),type(e,t,...s){let r,i=!1;for(let a of s){null===a?r="Null":"name"in a&&(r=a.name);let s=L["type"+r];if(s)try{i=s(e,t)}catch(e){}else i=t instanceof a;if(i)break}return i||R(e,t,"must be an instance of ["+s.map(e=>e.name).join(", ")+"]"),!0},typeNull:(e,t)=>(null!==t&&R(e,t,"must be null"),!0),typeBoolean:(e,t)=>(!0!==t&&!1!==t&&R(e,t,"must be a boolean"),!0),typeString:(e,t)=>(l(t)||R(e,t,"must be a string"),!0),typeNumber:(e,t)=>(c(t)||R(e,t,"must be a number"),!0),typeFunction:(e,t)=>("function"!=typeof t&&R(e,t,"must be a function"),!0),typePlainObject:(e,t)=>(h(t)||R(e,t,"must be a plain object"),!0),equal(e,t,...s){let r=!1;for(let e of s)if(r=t===e)break;return r||R(e,t,"must be one of ["+s+"]"),!0},equalIn:(e,t,s)=>(Array.isArray(s)||(s=Object.values(s)),s.includes(t)||R(e,t,"must be one from ["+s.join(", ")+"]"),!0),properties(e,t,s){for(let r of Object.getOwnPropertyNames(t))_(e+', property name "'+r+'"',r).equalIn(s);return!0},writable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).writable||R(e,t,"must be writable"),!0),notWritable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).writable&&R(e,t,"must not be writable"),!0),enumerable:(e,t,s)=>(Object.prototype.propertyIsEnumerable.call(t,s)||R(e,t,"must be enumerable"),!0),notEnumerable:(e,t,s)=>(Object.prototype.propertyIsEnumerable.call(t,s)&&R(e,t,"must not be enumerable"),!0),configurable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).configurable||R(e,t,"must be configurable"),!0),notConfigurable:(e,t,s)=>(Object.getOwnPropertyDescriptor(t,s).configurable&&R(e,t,"must not be configurable"),!0),reservedProperty:(e,t,s)=>(s in t&&R(e,t,"is a reserved property"),!0)};a.onInit((function(){Object.assign(_,L);for(const e of Object.getOwnPropertyNames(L))_.prototype[e]=function(...t){return _[e](this.label,this.value,...t),this}}));class T{constructor(e,t,s={}){this.callerInstance=e,this.callerConstructor=t,this.options=s}use(e,...t){_("JFactoryTraits(trait)",e).typeFunction();let{callerInstance:s,callerConstructor:r}=this,a=T.CACHE.get(s);if(a){if(a.has(e))return i.TraitLog&&console.warn(e.name+" already called on",s),this;a.add(e)}else T.CACHE.set(s,new WeakSet([e]));!r.JFactoryTrait&&(r.JFactoryTrait=new WeakSet),r.JFactoryTrait.has(e)||(r.JFactoryTrait.add(e),this.export(e.prototype,r.prototype),this.export(e,r,!0));let n=new e(s,...t);return n.trait_constructor&&n.trait_constructor.apply(s,t),this}export(e,t,s){let r=Object.getOwnPropertyDescriptors(e);for(let i of Object.keys(r)){let a=T.getPrefix(i);if(T.getTarget(i,t,a)){let a=r[i],n=(this.options.parser||T.defaultParser)(i,a,e,t,s);n&&(({propertyName:i,propertyDescriptor:a}=n),Object.defineProperty(t,i,a))}}}static defaultParser(e,t,s,r,a){let n=t.value;return a?null:e in r?(i.TraitLog&&console.warn(`${r.constructor.name}> skipping export of existing property "${e}"`,n),null):"object"==typeof n?(i.TraitLog&&console.warn(`${r.constructor.name}> skipping export of shared object "${e}"`,n),null):{propertyName:e,propertyDescriptor:t}}static getPrefix(e){let t=e.split("_");return t.length>1?t[0]:null}static getTarget(e,t,s){return T.EXCLUDES.includes(e)||"trait"===s?null:t}}T.CACHE=new WeakMap,T.EXCLUDES=["constructor","prototype","length","size"];class O{constructor(){this.handlers=Object.create(null)}*[Symbol.iterator](e=[]){e.length||(e=Object.keys(this.handlers)),e.length||(e=["default"]);for(let t of e)t in this.handlers&&(yield*this.handlers[t])}first(e,t){return 1===arguments.length&&([e,t]=["default",e]),(this.handlers[e]||(this.handlers[e]=[])).unshift(t),this}last(e,t){return 1===arguments.length&&([e,t]=["default",e]),(this.handlers[e]||(this.handlers[e]=[])).push(t),this}compose(...e){let t=this,s=function(){let s={canceled:!1,parameters:Array.from(arguments),result:void 0},r=t[Symbol.iterator](e),i=r.next();return O.composite_iterator(this,s,i,r)};return s.composer=t,s}static composite_iterator(e,t,s,r){let i,a;for(;!t.canceled&&!s.done;)if(i=s.value,a=e?i.call(e,t,...t.parameters):i(t,...t.parameters),s=r.next(),a instanceof Promise){if(!s.done||a.constructor===Promise)return a.then(g([i.name,"[compositeAsyncHandler]"].filter(Boolean).join(" "),(function(i){return t.result=i,O.composite_iterator(e,t,s,r)})));t.result=a}else t.result=a;return t.result}}class w{constructor(e){this.originalHandler=e,this.expiredCalls=0,this.composer=new O;let t,s=this.composer.compose("conditions"),r=this;this.isExpired=e=>t||s.call(e)||!1,this.setExpired=e=>t=e?e instanceof Error?e:new S.INVALID_CALL({target:this.originalHandler,reason:"manually expired"}):Boolean(this.expiredCalls=0),this.addExpireCondition=function(e){this.composer.last("conditions",(function(t){let s=function(s){return _("JFactoryFunctionExpirable.addExpireCondition(), result",s).type(Boolean,Error),r.setExpired(!!s&&(t.canceled=!0)&&(s instanceof Error?s:new S.INVALID_CALL({target:r.originalHandler,reason:"conditionally expired",condition:e})))},i=e.apply(this,t.parameters);return i instanceof Promise?i.then(s):s(i)}))}}compose(){let e=this,t=function(){let t=e.isExpired(this),s=e.constructor.call.bind(void 0,e,this,arguments);return t instanceof Promise?t.then(s):s(t)};return Object.assign(t,{expirable:this,isExpired:e=>this.isExpired(e),setExpired:e=>this.setExpired(e),addExpireCondition:e=>(this.addExpireCondition(e),t)})}static call(e,t,s,r){return r?e.onExpired(r):e.onNotExpired(t,s)}onExpired(e){return this.expiredCalls<w.MaxWarningExpiration&&(this.expiredCalls++,i.TraitLog&&console.warn(...new S.INVALID_CALL({...e.$data,reason:e.$data.reason+"; expiredCalls="+this.expiredCalls+(this.expiredCalls===w.MaxWarningExpiration?"; Max Warning Exceeded":"")}))),e}onNotExpired(e,t){return this.originalHandler.apply(e,t)}}function P(e){return new I(e).compose()}w.MaxWarningExpiration=10;class I{constructor(e){this.originalHandler=e,this.composer=new O,this.composer.first("original",g([e.name,"[condition]"].filter(Boolean).join(" "),(function(t){return e.apply(this,t.parameters)})))}compose(){let e=this.composer.compose("conditions","original");return Object.assign(e,{conditional:this,addCondition:t=>(this.addCondition(t),e)})}addCondition(e){this.composer.last("conditions",(function(t){let s=function(e){_("JFactoryFunctionConditional.addCondition(), result",e).typeBoolean(),!e&&(t.canceled=!0)},r=e.apply(this,t.parameters);return r instanceof Promise?r.then(s):s(r)}))}}function N(e){return new j(e).compose()}class j{constructor(e){this.originalHandler=e,this.composer=new O,this.composer.first("original",g([e.name,"[wrapped]"].filter(Boolean).join(" "),(function(t){return e.apply(this,t.parameters)})))}compose(){let e=this.composer.compose("before","original","after");return Object.assign(e,{wrappable:this,beforeAll:t=>(this.beforeAll(t),e),justBefore:t=>(this.justBefore(t),e),justAfter:t=>(this.justAfter(t),e),afterAll:t=>(this.afterAll(t),e)})}beforeAll(e){this.composer.first("before",e)}justBefore(e){this.composer.last("before",e)}justAfter(e){this.composer.first("after",e)}afterAll(e){this.composer.last("after",e)}}function F(e,t){return new T(e,t,{parser(e,t){let s=T.defaultParser(...arguments);if(s){({propertyName:e,propertyDescriptor:t}=s);let r=t.value;if("function"==typeof r)switch(r.name){case"$install":case"$uninstall":case"$enable":case"$disable":case"$state":break;default:t.value=N(r).beforeAll((function(){if(!this.$.states.enabled&&"PHASE_NONE"===this.$.service.phase){let e=new S.INVALID_CALL({owner:this,target:r,reason:"component disabled"});throw this.$logErr(...e),e}}))}return{propertyName:e,propertyDescriptor:t}}}})}class C{constructor(e){C.inject(this,C,e)}static inject(e,t,s){F(e,t).use(k.TraitCore).use(k.TraitAbout,{name:s}).use(k.TraitLog).use(k.TraitEvents).use(k.TraitState).use(k.TraitService).use(k.TraitTask)}}class M extends C{constructor(e){super(e),M.inject(this,M)}static inject(e,t){F(e,t).use(k.TraitFetch).use(k.TraitDOM).use(k.TraitCSS).use(k.TraitMutation).use(k.TraitTimeout).use(k.TraitInterval).use(k.TraitLibVue).use(k.TraitLibReact)}}const k=(e,t)=>Object.assign(new M(e),t);class D{static createDescriptors(e=D.DESCRIPTORS_PROTOTYPE){let t=D.create(e,!0,!0),s=Object.create(null);return s.NONE=t(),s.WRITABLE=t({writable:!0}),s.ENUMERABLE=t({enumerable:!0}),s.CONFIGURABLE=t({configurable:!0}),s.CONFIGURABLE_WRITABLE=s.WRITABLE_CONFIGURABLE=t({writable:!0,configurable:!0}),s.CONFIGURABLE_ENUMERABLE=s.ENUMERABLE_CONFIGURABLE=t({enumerable:!0,configurable:!0}),s.ENUMERABLE_WRITABLE=s.WRITABLE_ENUMERABLE=t({writable:!0,enumerable:!0}),s.WRITABLE_ENUMERABLE_CONFIGURABLE=s.WRITABLE_CONFIGURABLE_ENUMERABLE=s.ENUMERABLE_CONFIGURABLE_WRITABLE=s.ENUMERABLE_WRITABLE_CONFIGURABLE=s.CONFIGURABLE_WRITABLE_ENUMERABLE=s.CONFIGURABLE_ENUMERABLE_WRITABLE=t({writable:!0,enumerable:!0,configurable:!0}),s.READONLY=t({writable:!1,enumerable:!1,configurable:!1}),s}static assign(e,t,s,r){let i={};switch(typeof t){case"string":case"symbol":if(!r)throw new Error("missing descriptor argument; use Object.assign instead");(r=Object.create(r)).value=s,Object.defineProperty(e,t,r);break;case"object":if([s,r]=[t,s],!r)throw new Error("missing descriptor argument; use Object.assign instead");for(let e of Object.getOwnPropertyNames(s))i[e]=Object.create(r),i[e].value=s[e];for(let e of Object.getOwnPropertySymbols(s))i[e]=Object.create(r),i[e].value=s[e];Object.defineProperties(e,i);break;default:throw new Error("invalid property argument")}return e}static create(e,t=!1,s=!1){return function(r){return t?Object.assign(s?Object.create(null):{},e,r):Object.assign(Object.create(s?Object.assign(Object.create(null),e):e),r)}}static disinherit(e){return Object.assign(Object.create(null),e)}}D.DESCRIPTORS_PROTOTYPE={writable:!1,enumerable:!1,configurable:!1},a.onInit((function(){D.descriptors=D.createDescriptors()}));const U=()=>++U.uid;U.uid=0;class B{constructor(e,t={}){let s,r;_("JFactoryAbout(owner)",e).type(Object),_("JFactoryAbout(about)",t).typePlainObject().reservedProperty("uid").reservedProperty("fingerprint"),"name"in t&&_("JFactoryAbout(about.name)",t.name).typeString().notEmptyString();let i=U();t.name?(s=t.name,delete t.name,r="jFactory_"+$(s.toLowerCase())+"_"+i):(delete t.name,s=`[${e.constructor.name}#${i}]`,r="jFactory_"+e.constructor.name+"_"+i),D.assign(this,{uid:i,name:s,fingerprint:r},D.descriptors.ENUMERABLE),Object.assign(this,t),_("JFactoryAbout.name",this.name).matchReg(/^[\w[\]#]+$/),_("JFactoryAbout.fingerprint",this.fingerprint).matchReg(/^[\w]+$/)}}const H=()=>++H.uid;H.uid=0;class J extends Promise{constructor({name:e,config:t,traceSource:s},r){1===arguments.length&&([e,t,r]=[null,null,arguments[0]]);const i=H();let a,n;t={...J.DEFAULT_CONFIG,...t},_("name",e=e||"unnamed").type(String,Number).matchReg(/^[^. ]+$/),_("config",t).typePlainObject(),_("executor",r).typeFunction(),super((e,t)=>{a=e,n=t});const l=new V(this,i,e,t);Object.defineProperties(this,{$chain:{enumerable:!0,writable:!0,value:l},$type:{writable:!0,value:"promise"},$value:{writable:!0,value:void 0},$isSettled:{writable:!0,value:!1},$isRejected:{writable:!0,value:null},$isFulfilled:{writable:!0,value:null},$isExpired:{writable:!0,value:!1},$isAborted:{writable:!0,value:!1}}),Object.defineProperties(this,{$dev_name:{configurable:!0,value:e+"["+i+":0]"},$dev_path:{writable:!0,value:new Y(this)},$dev_position:{writable:!0,value:0}}),o(r)||Object.defineProperties(this,{$dev_source:{value:r}}),A.tracer.attachTrace(this,s);const c=()=>{if(!this.$chain.isPending)try{this.$chainComplete("auto-completed")}catch(e){console.error(e)}},h=e=>{if(!this.$isSettled){if(e===this)return void u(new TypeError("Chaining cycle detected for promise "+this.$dev_name));let t;if(null!==e&&("object"==typeof e||"function"==typeof x))try{t=e.then}catch(e){return void u(e)}if("function"==typeof t){let s=!1,r=function(e){s||(s=!0,h(e))},i=function(e){s||(s=!0,u(e))};try{t.call(e,r,i)}catch(e){s||u(e)}}else this.$isRejected=!1,this.$isFulfilled=!0,this.$isExpired&&(e=this.$chain.errorExpired),a(e),d(e)}},u=e=>{this.$isSettled||(this.$isRejected=!0,this.$isFulfilled=!1,n(e),d(e))},d=e=>{this.$value=e,this.$isSettled=!0,this.$chain.chainMap.set(this,!0),this.$chain.chainConfig.chainAutoComplete&&(1!==this.$chain.chainMap.size||this.$isExpired?c():this.then(c))};let p=t.chainAutoComplete;Object.defineProperty(t,"chainAutoComplete",{get:()=>p,set:e=>{p!==e&&(p=e,e&&c())}}),l.chainMap.set(this,!1),Object.defineProperties(this,{__resolve__:{value:h},__reject__:{value:u}});try{r(h,u)}catch(e){u(e)}}then(e,t,s){let r,i,a,n=o(e)&&!e.name.startsWith("bound ");e&&"function"==typeof e&&(r=function(s){return"await"===l?a.$isAborted?t(a.$chain.errorExpired):e(s):a.$isExpired?void 0:(a.$isSettled,e(s))}),t&&"function"==typeof t&&(i=function(e){return a.$isSettled,t(e)});let l=s||(n?"await":void 0===e?"catch":"then");a=Object.assign(super.then(r,i),this),H.uid--,a.$type=l;{a.$dev_position=this.$chain.chainMap.size;let s="";e&&e.name&&(s+=e.name),t&&t.name&&(s+=","+t.name),Object.defineProperties(a,{$dev_name:{value:this.$chain.chainName+"["+this.$chain.chainId+":"+this.$dev_position+"]."+a.$type+(s?"("+s+")":"")+"["+a.$chain.chainId+":"+a.$dev_position+"]"},$dev_path:{value:new Y(this.$dev_path,a)},$dev_onFulfilled:{value:e},$dev_onRejected:{value:t}})}return a.$chain.chainMap.set(a,!1),this.$isExpired&&J.setExpired(a,!0,!this.$isAborted,this.$chain.errorExpired),a}$catchExpired(e){return this.then(t=>this.$chain.chainRoot.$isExpired?e(t):t,void 0,"$catchExpired")}static resolve(e,t){return 1===arguments.length&&([e,t]=[{},e]),e||(e={}),t instanceof this&&1===arguments.length?t:new this(e,(function(e){e(t)}))}static reject(e,t){return 1===arguments.length&&([e,t]=[{},e]),e||(e={}),new this(e,(function(e,s){s(t)}))}$toPromise(){return Promise.resolve(this)}$chainAbort(e="$chainAbort()"){return this.$chain.complete(e,!0),this}$chainComplete(e="$chainComplete()"){try{this.$chain.complete(e,!1)}catch(e){throw e instanceof S.INVALID_CALL?new S.INVALID_CALL({target:e.$data.target,reason:"Trying to complete a pending chain. Use $chainAbort() if you want to stop it."}):e}return this}$chainAutoComplete(){return this.$chain.chainConfig.chainAutoComplete=!0,this}static setExpired(e,t,s,r){if(!e.$isSettled){if(!t)throw new S.INVALID_CALL({target:e,reason:"promise must be aborted or settled before setting it to expired."});e.$isAborted=!s,e.__resolve__(r)}e.$isExpired=!0}}J.DEFAULT_CONFIG={chainAutoComplete:!1};class V{constructor(e,t,s,r){Object.defineProperties(this,{chainConfig:{value:r},chainRoot:{value:e},chainId:{value:t},chainName:{value:s},chainMap:{value:new Map},isCompleted:{value:!1,configurable:!0},data:{value:{}},__deferred__:{value:n.Deferred()}})}get isPending(){return Array.from(this.chainMap.values()).includes(!1)}then(e){return this.__deferred__.done(e),this}complete(e="chain.complete()",t){let s=this.chainRoot;if(!s.$isExpired){let r=s.$chain.errorExpired=new S.PROMISE_EXPIRED({target:s,reason:e}),i=this.chainMap;for(let e of i.keys())J.setExpired(e,t,!1,r);Object.defineProperty(this,"isCompleted",{value:!0}),this.__deferred__.resolve()}return this}}class Y extends Array{constructor(){super();for(let e of arguments)Array.isArray(e)?this.push(...e):this.push(e)}get printable(){return this.map((e,t)=>0===t?e.$dev_name:e.$dev_name.split(".")[1]).join(".")}toString(){return this.printable}}class q extends Promise{constructor(e){let t={$isSettled:!1,$isRejected:null,$value:void 0};super((s,r)=>{let i=!1,a=e=>{e instanceof Promise?q.resolve(e).then(a,n):i||(i=!0,t.$isSettled=!0,t.$isRejected=!1,t.$value=e,s(e))},n=e=>{i||(i=!0,t.$isSettled=!0,t.$isRejected=!0,t.$value=e,r(e))};try{e(a,n)}catch(e){n(e)}}),Object.assign(this,t),t=this}then(e,t){if(this.$isSettled){let s=this.$value;try{if(this.$isRejected){if(super.then(void 0,()=>null),!t||"function"!=typeof t)return q.reject(s);s=t(s)}else e&&"function"==typeof e&&(s=e(s))}catch(e){return q.reject(e)}return q.resolve(s)}return super.then(e,t)}static resolve(e){return e instanceof q?e:new q(e instanceof Promise?e.then.bind(e):t=>t(e))}}class W{constructor(){Object.defineProperties(this,{registry:{value:n(Object.create(null))},handlers:{value:new WeakMap},onListenerUpdate:{value:null,writable:!0},onObserverUpdate:{value:null,writable:!0}})}on({events:e,handler:t,target:s,selector:r}){W.validateSelector(e),_("JFactoryEvents.on({handler})",t).typeFunction(),s&&_("JFactoryEvents.on({target})",s).type(String,n,HTMLElement),r&&_("JFactoryEvents.on({selector})",s).typeString();let i=this.handlers.get(t);s?(i||this.handlers.set(t,!0),r?n(s).on(e,r,t):n(s).on(e,t),this.onListenerUpdate&&this.onListenerUpdate(arguments)):(i||(this.handlers.set(t,i=function(e,{data:s,stack:r}){r.push(()=>t(e,s))}),i.originalHandler=t),this.registry.on(e,i),this.onObserverUpdate&&this.onObserverUpdate(arguments))}off({events:e,handler:t,target:s,selector:r}){if(void 0!==e&&(W.validateSelector(e),t&&_("JFactoryEvents.off({handler})",t).typeFunction(),s&&_("JFactoryEvents.off({target})",s).type(String,n,HTMLElement),r&&_("JFactoryEvents.off({selector})",s).typeString()),s)r?n(s).off(e,r,t):n(s).off(e,t);else{if(n("*").off(e,t),t&&!(t=this.handlers.get(t)))throw new S.INVALID_VALUE({target:"handler",reason:"not registered",given:t});this.registry.off(e,t)}this.onObserverUpdate&&this.onObserverUpdate(arguments),this.onListenerUpdate&&this.onListenerUpdate(arguments)}triggerParallel({events:e,data:t,target:s}){W.validateSelector(e),s&&_("JFactoryEvents.triggerParallel({target})",s).type(String,n,HTMLElement);const r=[],i=[];if(e=e.split(" "),s)for(let i of e)n(s).trigger(i,{data:t,stack:r});else for(let s of e)this.registry.triggerHandler(s,{data:t,stack:r});for(let e of r){let t=e();t instanceof Promise&&!t.$isSettled&&i.push(t)}return i.length?Promise.all(i):q.resolve()}triggerSeries({events:e,data:t,target:s}){return W.validateSelector(e),s&&_("JFactoryEvents.triggerSeries({target})",s).type(String,n,HTMLElement),new q(async r=>{const i=[];if(e=e.split(" "),s)for(let r of e)n(s).trigger(r,{data:t,stack:i});else for(let s of e)this.registry.triggerHandler(s,{data:t,stack:i});for(let e of i){let t=e();t instanceof Promise&&!t.$isSettled&&await t}r()})}}class G extends W{constructor(e){super(),Object.defineProperties(this,{parent:{value:e},affiliateRules:{value:(new O).compose()}}),this.affiliateAddRule(G.rule_namespace)}affiliate(e="",t="",s){let r=new K(e);for(let e of r.events)this.affiliateRules(e,t,s);return r.toString()}affiliateAddRule(e){this.affiliateRules.composer.last(e)}static rule_namespace(e,t,s){s=s.split(".");for(let e of s)e&&t.addNamespace(e)}on(e,t,s,r,i){switch(arguments.length){case 2:[r,t]=[t];break;case 3:"function"==typeof arguments[2]?[r,s]=[s]:[r,i,t,s]=[t,s];break;case 4:"object"==typeof arguments[3]&&([i,r,s]=[r,s])}e=this.affiliate(e,this.parent.$.about.fingerprint,i),void 0===t?super.on({events:e,handler:r}):super.on({events:e,target:t,selector:s,handler:r})}off(e,t,s,r,i){const a=arguments.length;switch(a){case 1:"object"==typeof arguments[0]&&([i,e]=[e]);break;case 2:"function"==typeof arguments[1]?[r,t]=[t]:h(arguments[1])&&([i,t]=[t]);break;case 3:"function"==typeof arguments[2]?[r,s]=[s]:"function"==typeof arguments[1]&&([r,i,t,s]=[t,s]);break;case 4:"object"==typeof arguments[3]&&([i,r,s]=[r,s])}e=this.affiliate(e,this.parent.$.about.fingerprint,i),a<2?super.off({events:e}):t?super.off({events:e,target:t,selector:s,handler:r}):super.off({events:e,handler:r})}trigger(e,t,s){switch(arguments.length){case 2:"object"!=typeof t||t.jquery||([s,t]=[t])}return t?super.triggerSeries({events:e,target:t,data:s}):super.triggerSeries({events:e,data:s})}triggerParallel(e,t,s){switch(arguments.length){case 2:"object"!=typeof t||t.jquery||([s,t]=[t])}return t?super.triggerParallel({events:e,target:t,data:s}):super.triggerParallel({events:e,data:s})}getDomListeners(e){let t=new Map;for(let s of n("*")){let r=n._data(s,"events");if(r)for(let i of Object.values(r))for(let r of i){let i;new z(r.namespace).hasNamespace(e)&&((i=t.get(s))||t.set(s,i={}),(i[r.type]||(i[r.type]=[])).push({selector:r.selector||null,handler:r.handler,namespace:r.namespace}))}}return t}getObservers(){let e=new Map,t=this.registry._events;if(!t){let e=Object.values(this.registry)[0],s=Object.getOwnPropertyNames(e).find(e=>0===e.indexOf("jQuery"));e&&s&&(t=this.registry._events=e[s].events)}if(t)for(let[s,r]of Object.entries(t)){let t=e.get(s);t||(t=[],e.set(s,t));for(let e of r)t.push({handler:e.handler.originalHandler,namespace:e.namespace})}return e}}class K{constructor(e){W.validateSelector(e),this.events=e.split(" ").map(e=>new z(e))}toString(){let e=[];for(let t of this.events)e.push(t.toString());return e.join(" ")}}class z{constructor(e){let[t,...s]=e.split(".");this.event=t,this.namespace=new Set(s)}hasNamespace(e){Array.isArray(e)||(e=[e]);for(let t of e){if(!/^[\w:]+$/.test(t))throw new S.INVALID_VALUE({target:"namespace",reason:"must be alphanumeric, underscore and colon characters",given:t});if(t&&this.namespace.has(t))return t}return!1}addNamespace(e){if(!/^[\w:]+$/.test(e))throw new S.INVALID_VALUE({target:"namespace",reason:"must be alphanumeric, underscore and colon characters",given:e});this.namespace.add(e)}deleteNamespace(e){if(!/^[\w:]+$/.test(e))throw new S.INVALID_VALUE({target:"namespace",reason:"must be alphanumeric, underscore and colon characters",given:e});this.namespace.delete(e)}toString(){return this.namespace.size?this.event+"."+Array.from(this.namespace.values()).join("."):this.event}}W.validateSelector=function(e){_("JFactoryEvents.validateSelector(selector)",e).notUndefined().validSpaces();for(let[t,s]of e.split(" ").map(e=>e.split(".")).map(e=>[e.shift(),e.join(".")]))t&&W.validateEvent(t),s&&W.validateNamespace(s);return!0},W.validateEvent=function(e){if(_("JFactoryEvents.validateEvent(event)",e).notUndefined().notEmptyString().validSpaces(),!/^[\w:]+$/.test(e))throw new S.INVALID_VALUE({target:"JFactoryEvents.validateEvent(event)",reason:"must be alphanumeric, underscore and colon characters",given:e});return!0},W.validateNamespace=function(e){if(_("JFactoryEvents.validateNamespace(namespace)",e).notUndefined().notEmptyString().validSpaces(),!/^[\w:.]+$/.test(e))throw new S.INVALID_VALUE({target:"JFactoryEvents.validateNamespace(namespace)",reason:"must be alphanumeric, underscore, dot and colon characters",given:e});return!0};class Q extends J{constructor(e,t,s={}){if("function"==typeof e)super(e);else{"string"==typeof e&&([e,t,s]=[{},arguments[0],arguments[1]]);let r=new Request(t,s);super(e,(i,a)=>{let n=fetch(r).then(e=>{if(this.$chain.fetchResponse=e,!e.ok)throw Error(e.status+":"+e.statusText);return e});s.$typeText?n=n.then(e=>e.text()).then(e=>this.$chain.responseText=e):s.$typeJSON&&(n=n.then(e=>e.json()).then(e=>this.$chain.responseJSON=e)),n=n.catch(i=>{throw new S.REQUEST_ERROR({reason:i.message||i,target:this.$chain.fetchResponse&&this.$chain.fetchResponse.url||t,owner:this,fetchOptions:s,fetchRequest:r,fetchResponse:this.$chain.fetchResponse||null},e.traceSource)}),n.then(i,a)}),this.$chain.fetchOptions=s,this.$chain.fetchRequest=r;let i=s.abortController||new AbortController;s.signal=i.signal,this.$chain.fetchAbortController=i}}$chainAbort(e="request aborted"){return super.$chainAbort(e),this.$chain.fetchAbortController.abort(),this}}const X=Symbol();class Z{constructor(e){e&&_("JFactoryLogger(options)",e).properties(Object.getOwnPropertyNames(Z.DEFAULT_CONFIG)),u(this,e,Z.DEFAULT_CONFIG),this.condition=P(Z.DEFAULT_CONDITION),this.installAccessor("log"),this.installAccessor("warn"),this.installAccessor("error")}get enabled(){return this[X]&&(!this.parentLogger||this.parentLogger.enabled)}set enabled(e){e?this.enable():this.disable()}enable(){!0!==this[X]&&(this[X]=!0)}disable(){!1!==this[X]&&(this[X]=!1)}disallow(e,t=this.label){this.filters[t]||(this.filters[t]={}),this.filters[t][e]=!0}allow(e,t=this.label){this.filters[t]&&delete this.filters[t][e]}installAccessor(e,t=e,s=this){_("JFactoryLogger(nativeName)",e).equalIn(["log","warn","error"]),Object.defineProperties(s,{[t]:{get:this.accessor.bind(this,e),configurable:!0}})}accessor(e){return this[X]&&this.condition(e)&&this.formatter[e](this)||f}createSubLogger(e){let t=new Z({enabled:this.enabled,label:this.label+"."+e,styles_css:this.styles_css,styles_cli:this.styles_cli,console:this.console,formatter:this.formatter});return t.parentLogger=this,t.condition.addCondition(()=>this.enabled),t.filters=this.filters,t}}Z.FORMATTER_NATIVE={log:e=>e.console.log.bind(e.console,e.label+">"),warn:e=>e.console.warn.bind(e.console,e.label+">"),error:e=>e.console.error.bind(e.console,e.label+">")},Z.FORMATTER_CLI={log:e=>e.console.log.bind(e.console,e.styles_cli.label,e.label+">"),warn:e=>e.console.warn.bind(e.console,e.styles_cli.label,e.label+">"),error:e=>e.console.error.bind(e.console,e.styles_cli.label,e.label+">")},Z.FORMATTER_BROWSER={log:e=>e.console.log.bind(e.console,"%c"+e.label+">",e.styles_css.label),warn:e=>e.console.warn.bind(e.console,"%c"+e.label+">",e.styles_css.label),error:e=>e.console.error.bind(e.console,"%c"+e.label+">",e.styles_css.label)},Z.DEFAULT_CONDITION=function(e){return _("JFactoryLogger.condition(nativeName)",e).equalIn(["log","warn","error"]),_("JFactoryLogger.enabled",this.enabled).equal(!0),!(this.filters[this.label]&&this.filters[this.label][e])},Z.DEFAULT_CONFIG={label:"",enabled:!0,parentLogger:null,formatter:r?Z.FORMATTER_CLI:Z.FORMATTER_BROWSER,console:console,filters:{},styles_cli:{label:"[1;30m%s[0m"},styles_css:{label:"color: gray"}};class ee extends Date{toString(){return this.toLocaleTimeString()+", "+this.getUTCMilliseconds()+"ms ("+this.valueOf()+")"}$toDurationString(){let e=this.getUTCHours(),t=this.getUTCMinutes(),s=this.getUTCSeconds(),r=this.getUTCMilliseconds(),i=[];return e&&i.push(e+"h"),t&&i.push(t+"min"),s&&i.push(s+"s"),i.push(r+"ms"),1===i.length?i[0]:i.join(",")+" ("+this.valueOf()+")"}}class te extends Date{constructor(){super(),this.elapsed=null,Object.defineProperties(this,{t1:{value:null,writable:!0},t0:{value:new ee}})}end(){this.t1=new ee,this.elapsed=new ee(this.t1-this.t0).$toDurationString()}toString(){return this.elapsed}}class se{trait_constructor(){const e=this;class t extends Map{constructor(...e){super(...e),Object.defineProperty(this,"id_autoinc",{value:0,writable:!0})}$registerSync(t,s){let r=Object.defineProperties({},{$value:{value:s},$phaseRemove:{value:le.getContextualRemovePhase(e)}});return this.set(t,r),r}$registerAsync(t,s,r){let i=e.$task(s,r.$chain);return r.$chain.then(()=>{i.$chainAutoComplete()}),i.$chain.then(()=>{r.$chain.isCompleted||r.$chainAbort("aborted by task")}),Object.defineProperty(r,"$phaseRemove",{value:i.$phaseRemove}),this.set(t,r),i}$id_resolve(e){if(e.indexOf("?")>=0){let t=++this.id_autoinc;e=e.replace(/\?/g,t)}return e}}const s=Object.assign(Object.create(null),{[se.SYMBOL_PRIVATE]:Object.create(null),assign:function(e,t,s){D.assign(this,e,t,s)},createSubMap:()=>new t});Object.defineProperty(this,"$",{value:Object.create(s)}),this.$.assign({tasks:null,requests:null},D.descriptors.ENUMERABLE_WRITABLE)}}se.SYMBOL_PRIVATE=Symbol("_");class re{trait_constructor(e){D.assign(this.$,"about",new B(this,e),D.descriptors.READONLY)}}class ie{trait_constructor(){let e=Object.assign({label:this.$.about.name},i.TraitLog||{enabled:!1}),t=new Z(e);Object.defineProperty(this.$,"logger",{value:t}),t.installAccessor("log","$log",this),t.installAccessor("warn","$logWarn",this),t.installAccessor("error","$logErr",this)}}class ae{trait_constructor(){this.$.assign("tasks",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$task(e,t){if(_("$task(id)",e=this.$.tasks.$id_resolve(e)).typeString(),_("$task(executorOrValue)",t).notUndefined(),this.$.tasks.has(e))throw new S.KEY_DUPLICATED({target:"$task(id)",given:e});let s,r;return s="function"==typeof t?new J({name:e,owner:this},t):J.resolve({name:e,owner:this},t),s.$phaseRemove=le.getContextualRemovePhase(this),r=new te,s.$taskMetrics={$dev_timing:r},s.$chain.then(()=>{r.end(),this.$.tasks.get(e)&&this.$taskRemove(e)}),this.$.tasks.set(e,s),s}$taskRemove(e,t){if(_("$taskRemove(id)",e).typeString(),t&&_("$taskRemove(reason)",t).typeString(),!this.$.tasks.has(e))throw new S.KEY_MISSING({target:"$taskRemove(id)",given:e});this.$.tasks.get(e)._called,this.$.tasks.get(e)._called=!0;let s=this.$.tasks.get(e);this.$.tasks.delete(e),s.$chainAbort(t||"$taskRemove()")}$taskRemoveAll(e){_("$taskRemoveAll(removePhase)",e).equalIn(le.PHASES);let t=this.$.tasks;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$taskRemove(s,"$taskRemoveAll("+e+")")}$taskPromiseAll(e=!1){let t=[];if(this.$.tasks.size)for(let s of this.$.tasks.values())e&&(s.$chain.chainConfig.chainAutoComplete=!0),s.$chain.isPending&&t.push(s.$chain);return t.length?Promise.all(t):q.resolve()}}class ne{trait_constructor(){ce(this,"events",{custom:new G(this),kernel:new G(this)},D.descriptors.NONE);let e=this.$[se.SYMBOL_PRIVATE].events.custom;Object.defineProperties(this.$,{listeners:{get:e.getDomListeners.bind(e,this.$.about.fingerprint),enumerable:!0},observers:{get:e.getObservers.bind(e),enumerable:!0}})}$on(){this.$[se.SYMBOL_PRIVATE].events.custom.on(...arguments)}$off(){this.$[se.SYMBOL_PRIVATE].events.custom.off(...arguments)}$trigger(){return this.$[se.SYMBOL_PRIVATE].events.custom.trigger(...arguments)}$triggerParallel(){return this.$[se.SYMBOL_PRIVATE].events.custom.triggerParallel(...arguments)}$notify(e,t){return this.$trigger(e,t).then(()=>this.$[se.SYMBOL_PRIVATE].events.kernel.trigger(e,t))}}class oe{trait_constructor(){const e=Object.create(null),t=Object.create(null),s=this.$[se.SYMBOL_PRIVATE].events.kernel;ce(this,{states:e,stateRoutes:t},D.descriptors.READONLY),D.assign(this.$,"states",new Proxy(e,{set:(e,t,s)=>this.$state(t,s),get:(t,s)=>e[s]}),D.descriptors.READONLY),s.on("beforeStateChange",(e,s)=>{let r;if(t[s.key]&&t[s.key].before&&(r=t[s.key].before(s.val)))return this.$notify(r)}),s.on("afterStateChange",(e,s)=>{let r;if(t[s.key]&&t[s.key].after&&(r=t[s.key].after(s.val)))return this.$notify(r)})}$state(e,t,s=!0){return _("$state(key)",e).typeString(),_("$state(notify)",s).typeBoolean(),new q(async r=>{let i,a=this.$[se.SYMBOL_PRIVATE].states,n=a[e];e in a&&n===t||(i=s&&this.$notify("beforeStateChange",{key:e,val:t,previousVal:n}),i&&_("beforeStateChange result",i).type(q),i&&!i.$isSettled&&(a[e]=i,await i),void 0===t?delete a[e]:a[e]=t,i=s&&this.$notify("afterStateChange",{key:e,val:t,previousVal:n}),i&&_("afterStateChange result",i).type(q)),i?i.then(r):r()})}}class le{trait_constructor(){D.assign(this.$,"service",Object.create(null),D.descriptors.READONLY),this.$.service.phase=le.PHASE.NONE,this.$.service.phaseQueue=J.resolve({name:"phaseQueue"},null),this.$.service.phaseTask=null,this.$.service.phaseMap={install:new Set,enable:new Set,disable:new Set,uninstall:new Set},this.$state("installed",!1,!1),this.$state("enabled",!1,!1),he(this,"stateRoutes",{installed:{after:e=>e?"install":"uninstall"},enabled:{after:e=>e?"enable":"disable"}},D.descriptors.NONE);let e=this.$[se.SYMBOL_PRIVATE].events.custom,t=this.$[se.SYMBOL_PRIVATE].events.kernel;e.affiliateAddRule((e,t,s,r)=>le.setEventNamespaceRemovePhase(this,t,r));let s=e=>{this.$.tasks.size&&this.$taskRemoveAll(this.$.service.phase);let t=q.resolve();return e&&(t=t.then(()=>e.call(this)).then(()=>this.$taskPromiseAll(!0))),t.catch(e=>{e instanceof S.PROMISE_EXPIRED||this.$logErr("unhandled promise rejection in "+this.$.service.phase+";",...e instanceof y?e:[e])})};t.on("install",()=>s(this.onInstall)),t.on("enable",()=>s(this.onEnable)),t.on("disable",()=>s(this.onDisable)),t.on("uninstall",()=>s(this.onUninstall)),t.on("disable",()=>this.$off({removal:le.PHASE.DISABLE})),t.on("uninstall",()=>this.$off({removal:le.PHASE.UNINSTALL}))}$install(e){let t;const s=new J({name:"install",config:{chainAutoComplete:!0}},e=>t=e).then(()=>{if(!this.$.states.installed)return this.$.service.phase=le.PHASE.INSTALL,this.$state("installed",!0)});return this.$.service.phaseMap.install.add(s),s.$chain.then(()=>{this.$.service.phaseTask=null,this.$.service.phaseMap.install.delete(s),this.$.service.phase=le.PHASE.NONE}),this.$.service.phaseQueue=this.$.service.phaseQueue.then(()=>(this.$.service.phaseTask=s,t(),s.$chain)),e?this.$enable():s}$enable(){let e;const t=new J({name:"enable",config:{chainAutoComplete:!0}},t=>e=t).then(()=>{if(this.$.states.installed&&!this.$.states.enabled)return this.$.service.phase=le.PHASE.ENABLE,this.$state("enabled",!0)});return this.$.service.phaseMap.enable.add(t),t.$chain.then(()=>{this.$.service.phaseTask=null,this.$.service.phaseMap.enable.delete(t),this.$.service.phase=le.PHASE.NONE}),this.$.service.phaseQueue=this.$.service.phaseQueue.then(()=>(this.$.service.phaseTask=t,e(),t.$chain)),t}$disable(){let e;const t=new J({name:"disable",config:{chainAutoComplete:!0}},t=>e=t).then(()=>{if(this.$.states.enabled)return this.$.service.phase=le.PHASE.DISABLE,this.$state("enabled",!1)});this.$.service.phaseMap.disable.add(t),t.$chain.then(()=>{this.$.service.phaseTask=null,this.$.service.phaseMap.disable.delete(t),this.$.service.phase=le.PHASE.NONE});for(let[e,t]of this.$.service.phaseMap.enable.entries())t===this.$.service.phaseTask&&le.phaseKill(this),t.$chainAbort(),this.$.service.phaseMap.enable.delete(e);return this.$.service.phaseQueue=this.$.service.phaseQueue.then(()=>(this.$.service.phaseTask=t,e(),t.$chain)),t}$uninstall(){let e;const t=new J({name:"uninstall",config:{chainAutoComplete:!0}},t=>e=t).then(()=>{if(this.$.states.installed)return this.$.service.phase=le.PHASE.UNINSTALL,this.$state("installed",!1)});this.$.service.phaseMap.uninstall.add(t),t.$chain.then(()=>{this.$.service.phaseTask=null,this.$.service.phaseMap.uninstall.delete(t),this.$.service.phase=le.PHASE.NONE});for(let[e,t]of this.$.service.phaseMap.install.entries())t===this.$.service.phaseTask&&le.phaseKill(this),t.$chainAbort(),this.$.service.phaseMap.install.delete(e);return this.$disable(),this.$.service.phaseQueue=this.$.service.phaseQueue.then(()=>(this.$.service.phaseTask=t,e(),t.$chain)),t}static phaseKill(e){e.$.tasks.size&&e.$taskRemoveAll(le.getContextualRemovePhase(e)),e.$.service.phase=le.PHASE.NONE}static getContextualRemovePhase(e){return le.PHASE_REVERT[e.$.service.phase]}static setEventNamespaceRemovePhase(e,t,s){let r=t.hasNamespace(le.PHASES),i=s&&s.removal;i||(i=le.getContextualRemovePhase(e)),"uninstall"===t.event&&i===le.PHASE.DISABLE&&(i=le.PHASE.UNINSTALL),r!==i&&(t.deleteNamespace(r),t.addNamespace(i)),t.addNamespace(i)}}function ce(e,t,s,r){D.assign(e.$[se.SYMBOL_PRIVATE],t,s,r)}function he(e,t,s,r){D.assign(e.$[se.SYMBOL_PRIVATE][t],s,r)}le.PHASE={NONE:"PHASE_NONE",INSTALL:"PHASE_INSTALL",ENABLE:"PHASE_ENABLE",DISABLE:"PHASE_DISABLE",UNINSTALL:"PHASE_UNINSTALL"},le.PHASE_REVERT={[le.PHASE.INSTALL]:le.PHASE.UNINSTALL,[le.PHASE.UNINSTALL]:le.PHASE.INSTALL,[le.PHASE.DISABLE]:le.PHASE.ENABLE,[le.PHASE.ENABLE]:le.PHASE.DISABLE,[le.PHASE.NONE]:le.PHASE.DISABLE},le.PHASES=Object.values(le.PHASE),k.PHASE=D.disinherit(le.PHASE),k.TraitCore=se,k.TraitAbout=re,k.TraitLog=ie,k.TraitEvents=ne,k.TraitState=oe,k.TraitService=le,k.TraitTask=ae;class ue{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$fetchRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$fetchRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("requests",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$fetch(e,t,s={}){if(_("$fetch(id)",e=this.$.requests.$id_resolve(e)).typeString(),_("$fetch(url)",t).typeString(),_("$fetch(fetchOptions)",s).typePlainObject(),this.$.requests.has(e))throw new S.KEY_DUPLICATED({target:"$fetch(id)",given:e});let r=new Q({name:e,traceSource:A.tracer.captureTraceSource("$fetch"),config:{chainAutoComplete:!0}},t,s);return this.$.requests.$registerAsync(e,'$fetch("'+e+'")',r),r.$chain.then(()=>{this.$.requests.has(e)&&this.$fetchRemove(e)}),r}$fetchText(e,t,s={}){return this.$fetch(e,t,{...s,$typeText:!0})}$fetchJSON(e,t,s={}){return this.$fetch(e,t,{...s,$typeJSON:!0})}$fetchRemove(e,t){if(_("$fetchRemove(id)",e).typeString(),t&&_("$fetchRemove(reason)",t).typeString(),!this.$.requests.has(e))throw new S.KEY_MISSING({target:"$fetchRemove(id)",given:e});this.$.requests.get(e)._debug_remove_called,this.$.requests.get(e)._debug_remove_called=!0;let s=this.$.requests.get(e);this.$.requests.delete(e),s.$chainAbort(t||"$fetchRemove()")}$fetchRemoveAll(e){_("removePhase",e).equalIn(le.PHASES);let t=this.$.requests;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$fetchRemove(s,"$fetchRemoveAll("+e+")")}}class de{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$timeoutRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$timeoutRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("timeouts",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$timeout(e,t,s=null,...r){if(_("id",e=this.$.timeouts.$id_resolve(e)).typeString(),_("delay",t).typeNumber(),_("handler",s).type(Function,null),this.$.timeouts.has(e))throw new S.KEY_DUPLICATED({target:"$timeout(id)",given:e});let i,a=new J({name:e,traceSource:A.tracer.captureTraceSource("$timeout"),config:{chainAutoComplete:!0}},e=>{i=setTimeout(()=>{a.$isExpired||e(s?s(...r):void 0)},t)});return a.$chain.data.timer=i,this.$.timeouts.$registerAsync(e,'$timeout("'+e+'")',a),a.$chain.then(()=>{this.$.timeouts.has(e)&&this.$timeoutRemove(e)}),a}$timeoutRemove(e,t){if(_("$timeoutRemove(id)",e).typeString(),t&&_("$timeoutRemove(reason)",t).typeString(),!this.$.timeouts.has(e))throw new S.KEY_MISSING({target:"$timeoutRemove(id)",given:e});this.$.timeouts.get(e)._debug_remove_called,this.$.timeouts.get(e)._debug_remove_called=!0;let s=this.$.timeouts.get(e);clearTimeout(s.$chain.data.timer),this.$.timeouts.delete(e),s.$chainAbort(t||"$timeoutRemove()")}$timeoutRemoveAll(e){_("removePhase",e).equalIn(le.PHASES);let t=this.$.timeouts;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$timeoutRemove(s,"$timeoutRemoveAll()")}}class pe{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$intervalRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$intervalRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("timeints",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$interval(e,t,s,...r){if(_("id",e=this.$.timeints.$id_resolve(e)).typeString(),_("handler",s).typeFunction(),_("delay",t).typeNumber(),this.$.timeints.has(e))throw new S.KEY_DUPLICATED({target:"$interval(id)",given:e});let i=setInterval(s,t,...r);this.$.timeints.$registerSync(e,i)}$intervalRemove(e){if(_("$intervalRemove(id)",e).typeString(),!this.$.timeints.has(e))throw new S.KEY_MISSING({target:"$intervalRemove(id)",given:e});this.$.timeints.get(e)._debug_remove_called,this.$.timeints.get(e)._debug_remove_called=!0,clearInterval(this.$.timeints.get(e).$value),this.$.timeints.delete(e)}$intervalRemoveAll(e){_("removePhase",e).equalIn(le.PHASES);let t=this.$.timeints;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$intervalRemove(s)}}class me{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$mutationRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$mutationRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("mutations",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$mutation(e,t,s,r){if(_("id",e=this.$.mutations.$id_resolve(e)).typeString(),_("parent",t).type(HTMLElement,Document),_("config",s).typePlainObject(),_("handler",r).typeFunction(),this.$.mutations.has(e))throw new S.KEY_DUPLICATED({target:"$mutation(id)",given:e});let i=new MutationObserver(r);i.observe(t,s),this.$.mutations.$registerSync(e,i)}$mutationRemove(e,t){if(_("$mutationRemove(id)",e).typeString(),t&&_("$mutationRemove(reason)",t).typeString(),!this.$.mutations.has(e))throw new S.KEY_MISSING({target:"$mutationRemove(id)",given:e});this.$.mutations.get(e)._debug_remove_called,this.$.mutations.get(e)._debug_remove_called=!0,this.$.mutations.get(e).$value.disconnect(),this.$.mutations.delete(e)}$mutationRemoveAll(e){_("removePhase",e).equalIn(le.PHASES);let t=this.$.mutations;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$mutationRemove(s)}}class $e{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$domRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$domRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("dom",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$dom(e,t,s){let r;if(_("id",e=this.$.dom.$id_resolve(e)).typeString(),_("jQueryArgument",t).type(String,Object),s&&_("appendTo",s).type(String,Object),"#"===e[0]&&(e=e.substring(1),r=!0),this.$.dom.has(e))throw new S.KEY_DUPLICATED({target:"$dom(id)",given:e});let i=n(t);if("TEMPLATE"===i[0].tagName&&(i=n(n(i[0]).html())),r){if(i[0].nodeType!==Node.ELEMENT_NODE)throw new S.INVALID_VALUE({target:"$dom(#id)",given:i,reason:"cannot set the dom id: the first element of the selection isn't an ELEMENT_NODE"});i[0].id=e}return s&&i.appendTo(s),this.$.dom.$registerSync(e,i).$value}$domFetch(e,t,s,r){let i;if(s&&!h(s)&&([s,r]=[{},s]),_("id",e=this.$.dom.$id_resolve(e)).typeString(),_("url",t).typeString(),r&&_("appendTo",r).type(String,Object),s&&_("fetchOptions",s).type(Object),"#"===e[0]&&(e=e.substring(1),i=!0),this.$.dom.has(e))throw new S.KEY_DUPLICATED({target:"$domFetch(id)",given:e});let a=this.$fetchText('$domFetch("'+e+'")',t,s).then(t=>{let s=n(t);return i&&(s[0].id=e),r&&s.appendTo(r),s});return this.$.dom.$registerAsync(e,'$domFetch("'+e+'")',a),a}$domRemove(e,t){if(_("$domRemove(id)",e).typeString(),t&&_("$domRemove(reason)",t).typeString(),!this.$.dom.has(e))throw new S.KEY_MISSING({target:"$domRemove(id)",given:e});this.$.dom.get(e)._debug_remove_called,this.$.dom.get(e)._debug_remove_called=!0;let s=this.$.dom.get(e),r=s.$value;r instanceof n&&r.remove(),s instanceof Q&&s.$chainAbort(t||"$domRemove()"),this.$.dom.delete(e)}$domRemoveAll(e){_("removePhase",e).equalIn(le.PHASES);let t=this.$.dom;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$domRemove(s)}}class fe{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$cssRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$cssRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("css",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$css(e,t){let s;if(_("id",e=this.$.css.$id_resolve(e)).typeString(),_("css",t).typeString(),"#"===e[0]&&(e=e.substring(1),s=!0),this.$.css.has(e))throw new S.KEY_DUPLICATED({target:"$css(id)",given:e});return this.$.css.$registerSync(e,n("<style>").attr(s?{id:e}:{}).html(t).appendTo("head")).$value}$cssFetch(e,t,s="head"){let r;if(_("id",e=this.$.css.$id_resolve(e)).typeString(),_("url",t).typeString(),"#"===e[0]&&(e=e.substring(1),r=!0),this.$.css.has(e))throw new S.KEY_DUPLICATED({target:"$cssFetch(id)",given:e});t=v(t);let i=n(s).find(`link[href="${t}"]`)[0];if(i){i.dataset.usage=parseInt(i.dataset.usage)+1;let t=n(i),s=J.resolve({name:e,config:{chainAutoComplete:!0},traceSource:A.tracer.captureTraceSource("$cssFetch")},t);return s.$chain.data.dom=t,this.$.css.$registerAsync(e,'$cssFetch("'+e+'")',s),s}{let i,a=new J({name:e,config:{chainAutoComplete:!0},traceSource:A.tracer.captureTraceSource("$cssFetch")},a=>i=n("<link>",{id:r?e:"",rel:"stylesheet",type:"text/css","data-usage":"1"}).appendTo(s).on("load",()=>a(i)).attr("href",t));return a.$chain.data.dom=i,this.$.css.$registerAsync(e,'$cssFetch("'+e+'")',a),a}}$cssRemove(e,t){if(_("$cssRemove(id)",e).typeString(),t&&_("$cssRemove(reason)",t).typeString(),!this.$.css.has(e))throw new S.KEY_MISSING({target:"$cssRemove(id)",given:e});this.$.css.get(e)._debug_remove_called,this.$.css.get(e)._debug_remove_called=!0;let s=this.$.css.get(e),r=s.$chain&&s.$chain.data.dom||s.$value;if(r instanceof n){let e=parseInt(r[0].dataset.usage)-1;e?r[0].dataset.usage=e:r.remove()}s instanceof J&&s.$chainAbort(t||"$cssRemove()"),this.$.css.delete(e)}$cssRemoveAll(e){_("removePhase",e).equalIn(le.PHASES);let t=this.$.css;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$cssRemove(s)}}class ge{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$vueRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$vueRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("vue",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$vue(e,t){if(_("id",e=this.$.vue.$id_resolve(e)).typeString(),_("vue",t).type(Object),this.$.vue.has(e))throw new S.KEY_DUPLICATED({target:"$vue(id)",given:e});return this.$.vue.$registerSync(e,t).$value}$vueRemove(e){if(_("$vueRemove(id)",e).typeString(),!this.$.vue.has(e))throw new S.KEY_MISSING({target:"$vueRemove(id)",given:e});this.$.vue.get(e)._debug_remove_called,this.$.vue.get(e)._debug_remove_called=!0;let t=this.$.vue.get(e);n(t.$value.$el).remove(),t.$value.$destroy(),this.$.vue.delete(e)}$vueRemoveAll(e){_("removePhase",e).equalIn(le.PHASES);let t=this.$.vue;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$vueRemove(s)}}class ve{trait_constructor(){const e=this.$[se.SYMBOL_PRIVATE].events.kernel;e.on("disable",()=>this.$reactRemoveAll(le.PHASE.DISABLE)),e.on("uninstall",()=>this.$reactRemoveAll(le.PHASE.UNINSTALL)),this.$.assign("react",this.$.createSubMap(),D.descriptors.ENUMERABLE)}$react(e,t,s,...r){if(e=this.$.react.$id_resolve(e),!k.ReactDOM)throw new Error("jFactory.ReactDOM=ReactDOM must be set before using the React Trait");if(_("id",e).typeString(),_("container",t).type(HTMLElement,n),this.$.react.has(e))throw new S.KEY_DUPLICATED({target:"$react(id)",given:e});t=n(t)[0];let i=k.ReactDOM.render(s,t,...r);return this.$.react.$registerSync(e,{container:t,view:i}).$value.view}$reactRemove(e){if(_("$reactRemove(id)",e).typeString(),!this.$.react.has(e))throw new S.KEY_MISSING({target:"$reactRemove(id)",given:e});this.$.react.get(e)._debug_remove_called,this.$.react.get(e)._debug_remove_called=!0;let t=this.$.react.get(e).$value.container;t&&(k.ReactDOM.unmountComponentAtNode(t)||this.$logWarn("unmountComponentAtNode failed to unmount",t),n(t).remove()),this.$.react.delete(e)}$reactRemoveAll(e){_("removePhase",e).equalIn(le.PHASES);let t=this.$.react;if(t.size)for(const[s,r]of t)r.$phaseRemove===e&&this.$reactRemove(s)}}k.TraitFetch=ue,k.TraitTimeout=de,k.TraitInterval=pe,k.TraitMutation=me,k.TraitDOM=$e,k.TraitCSS=fe,k.TraitLibVue=ge,k.TraitLibReact=ve,"undefined"!=typeof jFactoryOverride&&jFactoryOverride||a.init(),e.JFACTORY_CLI=r,e.JFACTORY_DEBUG=!1,e.JFACTORY_DEV=!0,e.JFactoryAbout=B,e.JFactoryComponent=M,e.JFactoryCoreObject=C,e.JFactoryError=y,e.JFactoryEventSelector=z,e.JFactoryEventSelectorParser=K,e.JFactoryEvents=W,e.JFactoryEventsManager=G,e.JFactoryExpect=_,e.JFactoryFetch=Q,e.JFactoryFunctionComposer=O,e.JFactoryFunctionConditional=I,e.JFactoryFunctionExpirable=w,e.JFactoryFunctionWrappable=j,e.JFactoryLogger=Z,e.JFactoryObject=D,e.JFactoryPromise=J,e.JFactoryPromiseChain=V,e.JFactoryPromisePath=Y,e.JFactoryPromiseSync=q,e.JFactoryTime=ee,e.JFactoryTimeTrace=te,e.JFactoryTrace_LIB_STACKTRACE=E,e.JFactoryTrace_NOFILTER=b,e.JFactoryTraits=T,e.TraitAbout=re,e.TraitCSS=fe,e.TraitCore=se,e.TraitDOM=$e,e.TraitEvents=ne,e.TraitFetch=ue,e.TraitInterval=pe,e.TraitLibReact=ve,e.TraitLibVue=ge,e.TraitLog=ie,e.TraitMutation=me,e.TraitService=le,e.TraitState=oe,e.TraitTask=ae,e.TraitTimeout=de,e.assignPrivate=ce,e.assignPrivateMember=he,e.jFactory=k,e.jFactoryConfig=i,e.jFactoryError=S,e.jFactoryFunctionConditional=P,e.jFactoryFunctionExpirable=function(e){return new w(e).compose()},e.jFactoryFunctionWrappable=N,e.jFactoryLoader=a,e.jFactoryTrace=A,e.jFactoryTraits=F,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash"),require("jquery")):"function"==typeof define&&define.amd?define(["exports","lodash","jquery"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).jFactoryModule={},e._,e.$);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiakZhY3RvcnktZGV2ZWwudW1kLmpzIiwic291cmNlcyI6WyIuLi9zcmMvakZhY3RvcnktZW52Lm1qcyIsIi4uL3NyYy9qRmFjdG9yeS1sb2FkZXIubWpzIiwiLi4vc3JjL2pGYWN0b3J5LWhlbHBlcnMubWpzIiwiLi4vc3JjL0pGYWN0b3J5VHJhY2UubWpzIiwiLi4vc3JjL0pGYWN0b3J5RXJyb3IubWpzIiwiLi4vc3JjL0pGYWN0b3J5RXhwZWN0Lm1qcyIsIi4uL3NyYy9KRmFjdG9yeVRyYWl0cy5tanMiLCIuLi9zcmMvSkZhY3RvcnlGdW5jdGlvbi5tanMiLCIuLi9zcmMvakZhY3RvcnktdHJhaXRzLm1qcyIsIi4uL3NyYy9qRmFjdG9yeS5tanMiLCIuLi9zcmMvSkZhY3RvcnlPYmplY3QubWpzIiwiLi4vc3JjL0pGYWN0b3J5QWJvdXQubWpzIiwiLi4vc3JjL0pGYWN0b3J5UHJvbWlzZS5tanMiLCIuLi9zcmMvSkZhY3RvcnlFdmVudHMubWpzIiwiLi4vc3JjL0pGYWN0b3J5RmV0Y2gubWpzIiwiLi4vc3JjL0pGYWN0b3J5TG9nZ2VyLm1qcyIsIi4uL3NyYy9KRmFjdG9yeVRpbWUubWpzIiwiLi4vc3JjL1RyYWl0c0NvcmUubWpzIiwiLi4vc3JjL1RyYWl0c0NvbXBvbmVudHMubWpzIiwiLi4vc3JjL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXNcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dFxuICovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnkgRW52XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gQ29tcGlsZS10aW1lIGltbXV0YWJsZSBFbnY7IHVzZWQgYnkgVHJlZSBTaGFraW5nIHRvIHJlbW92ZSB1bnVzZWQgY29kZVxuZXhwb3J0IGNvbnN0IEpGQUNUT1JZX0RFViA9IHR5cGVvZiBDT01QSUxFUl9ERVYgPT09IFwidW5kZWZpbmVkXCIgPyBmYWxzZSA6IENPTVBJTEVSX0RFVjsgLy8gRGV2ZWxvcGVyIE1vZGVcbmV4cG9ydCBjb25zdCBKRkFDVE9SWV9ERUJVRyA9IHR5cGVvZiBDT01QSUxFUl9ERUJVRyA9PT0gXCJ1bmRlZmluZWRcIiA/IGZhbHNlIDogQ09NUElMRVJfREVCVUc7IC8vIERlYnVnIHRoZSBsaWJyYXJ5XG5leHBvcnQgY29uc3QgSkZBQ1RPUllfQ0xJID0gdHlwZW9mIENPTVBJTEVSX0NMSSA9PT0gXCJ1bmRlZmluZWRcIiA/XG4gICAgdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy52ZXJzaW9ucyAmJiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgOiBDT01QSUxFUl9DTEk7XG5cbi8vIE11dGFibGUgY29uZmlndXJhdGlvblxuZXhwb3J0IGNvbnN0IGpGYWN0b3J5Q29uZmlnID0ge1xuICAgIFRyYWl0TG9nOiBKRkFDVE9SWV9ERVYgJiYgIUpGQUNUT1JZX0NMSSB8fCBKRkFDVE9SWV9ERUJVRyxcbiAgICBKRmFjdG9yeUVycm9yOiB7XG4gICAgICAgIGtleXM6IFtcIiQuYWJvdXQubmFtZVwiLCBcIiRkZXZfbmFtZVwiLCBcIiRuYW1lXCIsIFwibmFtZVwiLCBcImlkXCJdXG4gICAgfSxcbiAgICBKRmFjdG9yeVRyYWNlOiBKRkFDVE9SWV9ERVYgJiYgIUpGQUNUT1JZX0NMSVxuICAgICAgICAmJiB7XG4gICAgICAgICAgICBrZXlzOiBbXCIkZGV2X3RyYWNlTG9nXCIsIFwiJGRldl90cmFjZVNvdXJjZVwiXSxcbiAgICAgICAgICAgIGxpYk9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBvZmZsaW5lOiBCb29sZWFuKGdsb2JhbFRoaXMuY2hyb21lKSwgLy8gbG9hZGluZyBzb3VyY2VtYXBzIGlzIG5vdCByZXF1aXJlZCBpbiBjaHJvbWVcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5saW5lTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgIC8vICYmICh2YWx1ZS5maWxlTmFtZSArIHZhbHVlLmZ1bmN0aW9uTmFtZSkudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKCdqZmFjdG9yeScpIDwgMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICBqRmFjdG9yeURldjogSkZBQ1RPUllfREVWXG4gICAgICAgICYmIHtcbiAgICAgICAgICAgIHJlcXVpcmVDb21wYXRpYmlsaXR5OiB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpczoge1xuICAgICAgICAgICAgICAgICAgICB0ZXN0OiAoKSA9PiBnbG9iYWxUaGlzLFxuICAgICAgICAgICAgICAgICAgICBpbmZvOiBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL2dsb2JhbFRoaXNcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmV0Y2g6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVzdDogKCkgPT4gZmV0Y2gsXG4gICAgICAgICAgICAgICAgICAgIGluZm86IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0ZldGNoX0FQSS9Vc2luZ19GZXRjaFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBSZXF1ZXN0OiB7XG4gICAgICAgICAgICAgICAgICAgIHRlc3Q6ICgpID0+IFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIGluZm86IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL1JlcXVlc3RcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJBYm9ydENvbnRyb2xsZXIsIEFib3J0U2lnbmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVzdDogKCkgPT4gbmV3IEFib3J0Q29udHJvbGxlcigpLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgaW5mbzogXCJodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQWJvcnRDb250cm9sbGVyLCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9BYm9ydFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBNdXRhdGlvbk9ic2VydmVyOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlc3Q6ICgpID0+IE11dGF0aW9uT2JzZXJ2ZXIsXG4gICAgICAgICAgICAgICAgICAgIGluZm86IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL011dGF0aW9uT2JzZXJ2ZXJcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxufTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfQ0xJLCBKRkFDVE9SWV9ERVYsIGpGYWN0b3J5Q29uZmlnIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnkgTG9hZGVyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjb25zdCBqRmFjdG9yeUxvYWRlciA9IHtcbiAgICBzZXE6IFtdLFxuICAgIGluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlcSkge1xuICAgICAgICAgICAgbGV0IHNlcSA9IHRoaXMuc2VxO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2VxO1xuICAgICAgICAgICAgZm9yIChsZXQgbW9kdWxlIG9mIHNlcSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxldGUgZ2xvYmFsVGhpcy5qRmFjdG9yeU92ZXJyaWRlXG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uSW5pdChoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuc2VxLnB1c2goaGFuZGxlcilcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBqRmFjdG9yeURldigpIHtcbiAgICBjb25zb2xlLmxvZyhcImpGYWN0b3J5IGlzIHJ1bm5pbmcgaW4gZGV2ZWxvcG1lbnQgbW9kZTsgcGVyZm9ybWFuY2VzIHdpbGwgYmUgYWZmZWN0ZWRcIik7XG4gICAgZm9yIChsZXQgW25hbWUsIGVudHJ5XSBvZiBPYmplY3QuZW50cmllcyhqRmFjdG9yeUNvbmZpZy5qRmFjdG9yeURldi5yZXF1aXJlQ29tcGF0aWJpbGl0eSkpIHtcbiAgICAgICAgbGV0IHBhc3M7XG4gICAgICAgIHRyeSB7cGFzcyA9IEJvb2xlYW4oZW50cnkudGVzdCgpKX0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgICAgaWYgKCFwYXNzKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYGpGYWN0b3J5IG1heSByZXF1aXJlIHRoZSBzdXBwb3J0IG9mIFwiJHtuYW1lfVwiLCAke2VudHJ5LmluZm99YClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gakZhY3RvcnlJbml0KCkge1xuICAgICFqRmFjdG9yeUNvbmZpZy5UcmFpdExvZyAmJiAoSkZBQ1RPUllfREVWIHx8IEpGQUNUT1JZX0NMSSkgJiYgY29uc29sZS53YXJuKFwiakZhY3RvcnkgbG9ncyBkaXNhYmxlZFwiKTtcbn1cblxuSkZBQ1RPUllfREVWICYmIGpGYWN0b3J5TG9hZGVyLm9uSW5pdChqRmFjdG9yeURldik7XG5qRmFjdG9yeUxvYWRlci5vbkluaXQoakZhY3RvcnlJbml0KTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0ICQgZnJvbSBcImpxdWVyeVwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGpGYWN0b3J5IEhlbHBlcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ2VudHJhbGl6ZSBoZWxwZXJzIGFuZCBleHRlcm5hbHMgaW4gb25lIG1vZHVsZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY29uc3QgalF1ZXJ5ID0gJDtcblxuZXhwb3J0IGNvbnN0IGhlbHBlcl9pc05hdGl2ZSA9IF8uaXNOYXRpdmU7XG5leHBvcnQgY29uc3QgaGVscGVyX2lzU3RyaW5nID0gXy5pc1N0cmluZztcbmV4cG9ydCBjb25zdCBoZWxwZXJfaXNOdW1iZXIgPSBfLmlzTnVtYmVyO1xuZXhwb3J0IGNvbnN0IGhlbHBlcl9pc1BsYWluT2JqZWN0ID0gXy5pc1BsYWluT2JqZWN0O1xuZXhwb3J0IGNvbnN0IGhlbHBlcl9kZWZhdWx0c0RlZXAgPSBfLmRlZmF1bHRzRGVlcDtcbmV4cG9ydCBjb25zdCBoZWxwZXJfbG93ZXJGaXJzdCA9IF8ubG93ZXJGaXJzdDtcbmV4cG9ydCBjb25zdCBoZWxwZXJfZ2V0ID0gXy5nZXQ7XG5leHBvcnQgY29uc3QgaGVscGVyX3RlbXBsYXRlID0gXy50ZW1wbGF0ZTtcbmV4cG9ydCBjb25zdCBoZWxwZXJfY2FtZWxDYXNlID0gXy5jYW1lbENhc2U7XG5cbmV4cG9ydCBjb25zdCBOT09QID0gKCkgPT4ge307XG5leHBvcnQgY29uc3QgaGVscGVyX3NldEZ1bmN0aW9uTmFtZSA9IChuYW1lLCBmKSA9PiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZiwgXCJuYW1lXCIsIHsgdmFsdWU6IG5hbWUgfSk7XG5leHBvcnQgY29uc3QgaGVscGVyX3VybF9hYnMgPSB1cmwgPT4ge2hlbHBlcl91cmxfYWJzLmEuaHJlZiA9IHVybDsgcmV0dXJuIGhlbHBlcl91cmxfYWJzLmEuaHJlZn07XG5oZWxwZXJfdXJsX2Ficy5hID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IGpGYWN0b3J5Q29uZmlnIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBqRmFjdG9yeUxvYWRlciB9IGZyb20gXCIuL2pGYWN0b3J5LWxvYWRlclwiO1xuaW1wb3J0IHsgTk9PUCB9IGZyb20gXCIuL2pGYWN0b3J5LWhlbHBlcnNcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeVRyYWNlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtICNsaW1pdGF0aW9uIyBFcnJvci5zdGFjayBpcyBub3Qgc3RhbmRhcmRpemVkXG4vLyAtICNsaW1pdGF0aW9uIyBFcnJvci5zdGFjayBpcyBub3Qgc291cmNlLW1hcHBlZFxuLy8gLSAjbGltaXRhdGlvbiMgYnVnIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE1ODQyNDRcbi8vIC0gI2xpbWl0YXRpb24jIFN0YWNrVHJhY2UuanMgcmVzb2x2ZXMgc291cmNlbWFwcy4gVW5mb3J0dW5hdGVseSwgaXQgZG9lc24ndCB3b3JrIHdpdGggXCJ3ZWJwYWNrOlwiIHByb3RvY29sXG4vLyAgIHNlZSBodHRwczovL2dpdGh1Yi5jb20vc3RhY2t0cmFjZWpzL3N0YWNrdHJhY2UuanMvaXNzdWVzLzIwOVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS9zb3VyY2UtbWFwL1xuLy8gaHR0cHM6Ly93d3cuc3RhY2t0cmFjZWpzLmNvbS9cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ub3ZvY2FpbmUvc291cmNlbWFwcGVkLXN0YWNrdHJhY2Vcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlUcmFjZV9OT0ZJTFRFUiB7XG5cbiAgICBjb25zdHJ1Y3Rvcih7IGxhYmVsLCBzdGFja1RyYWNlTGltaXQsIGtleXMsIGxpYk9wdGlvbnMgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbCB8fCBcIlRoZSBzdGFjayBoYXMgYmVlbiBwcmludGVkIGluIHRoZSBjb25zb2xlXCI7XG4gICAgICAgIHRoaXMuc3RhY2tUcmFjZUxpbWl0ID0gc3RhY2tUcmFjZUxpbWl0IHx8IEluZmluaXR5O1xuICAgICAgICB0aGlzLmtleXMgPSBrZXlzIHx8IFtcInN0YWNrTG9nXCIsIFwic3RhY2tTb3VyY2VcIl07XG4gICAgICAgIHRoaXMubGliT3B0aW9ucyA9IGxpYk9wdGlvbnMgfHwge31cbiAgICB9XG5cbiAgICBjYXB0dXJlVHJhY2VTb3VyY2Uob21pdEFib3ZlRnVuY3Rpb25OYW1lLCBvbWl0U2VsZikge1xuICAgICAgICBsZXQgX3N0YWNrVHJhY2VMaW1pdDtcbiAgICAgICAgaWYgKHRoaXMuc3RhY2tUcmFjZUxpbWl0KSB7XG4gICAgICAgICAgICBfc3RhY2tUcmFjZUxpbWl0ID0gRXJyb3Iuc3RhY2tUcmFjZUxpbWl0O1xuICAgICAgICAgICAgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID0gdGhpcy5zdGFja1RyYWNlTGltaXRcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9taXRBYm92ZUZ1bmN0aW9uTmFtZSkge1xuICAgICAgICAgICAgb21pdEFib3ZlRnVuY3Rpb25OYW1lID0gXCJjYXB0dXJlVHJhY2VTb3VyY2VcIjtcbiAgICAgICAgICAgIG9taXRTZWxmID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGxldCB0cmFjZVNvdXJjZSA9IHtcbiAgICAgICAgICAgIHNvdXJjZTogbmV3IEVycm9yKCksXG4gICAgICAgICAgICBvbWl0QWJvdmVGdW5jdGlvbk5hbWUsXG4gICAgICAgICAgICBvbWl0U2VsZlxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5zdGFja1RyYWNlTGltaXQpIHtcbiAgICAgICAgICAgIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9IF9zdGFja1RyYWNlTGltaXRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhY2VTb3VyY2VcbiAgICB9XG5cbiAgICBhdHRhY2hUcmFjZSh0YXJnZXRPYmplY3QsIHRyYWNlU291cmNlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdHJhY2VTb3VyY2UgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRyYWNlU291cmNlID0gdGhpcy5jYXB0dXJlVHJhY2VTb3VyY2UodHJhY2VTb3VyY2UgfHwgXCJhdHRhY2hUcmFjZVwiLCAhdHJhY2VTb3VyY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRyYWNlID0gdHJhY2VTb3VyY2Uuc291cmNlO1xuICAgICAgICB0aGlzLnRvUHJpbnRhYmxlVHJhY2UodHJhY2VTb3VyY2UpXG4gICAgICAgICAgICAudGhlbihyID0+IHRyYWNlID0gcik7XG5cbiAgICAgICAgbGV0IGxvZyA9ICgpID0+IGNvbnNvbGUubG9nKHRyYWNlKSB8fCB0aGlzLmxhYmVsO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXRPYmplY3QsIHRoaXMua2V5c1swXSAvKiB0cmFjZUxvZyAqLywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAvLyBoaWRlIHRoZSBmdW5jdGlvbiBib2R5IHRvIGltcHJvdmUgcmVhZGFiaWxpdHkgaW4gZGV2dG9vbFxuICAgICAgICAgICAgZ2V0OiAoKSA9PiBsb2coKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldE9iamVjdCwgdGhpcy5rZXlzWzFdIC8qIHRyYWNlU291cmNlICovLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIC8vIGhpZGUgdGhlIHRyYWNlU291cmNlIEVycm9yIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkgaW4gZGV2dG9vbCwgc3BlY2lhbGx5IGluIEZpcmVmb3hcbiAgICAgICAgICAgIGdldDogKCkgPT4gdHJhY2VTb3VyY2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdG9QcmludGFibGVUcmFjZSh0cmFjZVNvdXJjZSkge1xuICAgICAgICAvLyBTUEVDOiB0aGlzIG92ZXJyaWRhYmxlIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZVxuICAgICAgICAvLyBiZWNhdXNlIHN0YWNrdHJhY2UgcGFyc2VycyBtYXkgYmUgYXN5bmNocm9ub3VzXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJhY2VTb3VyY2Uuc291cmNlKVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5VHJhY2VfTElCX1NUQUNLVFJBQ0UgZXh0ZW5kcyBKRmFjdG9yeVRyYWNlX05PRklMVEVSIHtcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcihjb25maWcpO1xuICAgIH1cblxuICAgIHRvUHJpbnRhYmxlVHJhY2UodHJhY2VTb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIFN0YWNrVHJhY2UuZnJvbUVycm9yKHRyYWNlU291cmNlLnNvdXJjZSwgdGhpcy5saWJPcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4odHJhY2VGcmFtZXMgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRyYWNlU291cmNlLm9taXRBYm92ZUZ1bmN0aW9uTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2xpY2UgPSB0cmFjZUZyYW1lcy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmZ1bmN0aW9uTmFtZSAmJiB2YWx1ZS5mdW5jdGlvbk5hbWUuZW5kc1dpdGgodHJhY2VTb3VyY2Uub21pdEFib3ZlRnVuY3Rpb25OYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpY2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2VTb3VyY2Uub21pdFNlbGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGljZSsrXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjZUZyYW1lcyA9IHRyYWNlRnJhbWVzLnNsaWNlKHNsaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cmFjZUZyYW1lcyA9IHRyYWNlRnJhbWVzXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIodGhpcy5saWJPcHRpb25zLmZpbHRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VHJhY2VGcmFtZXModHJhY2VGcmFtZXMpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3JtYXRUcmFjZUZyYW1lcyh0cmFjZUZyYW1lcykge1xuICAgICAgICBsZXQgaGVhZGVyO1xuICAgICAgICBsZXQgbGluZVByZWZpeDtcbiAgICAgICAgaWYgKHRoaXMubGliT3B0aW9ucy5vZmZsaW5lICYmIHdpbmRvdy5jaHJvbWUpIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBmYWxsb3dpbmcgc3ludGF4IGlzIGRldGVjdGVkIG9uIENocm9tZSxcbiAgICAgICAgICAgIC8vIHRoZSBjb25zb2xlLmxvZygpIHdpbGwgY29udmVydCB0aGUgZmlsZU5hbWVzIHVzaW5nIHNvdXJjZW1hcHNcbiAgICAgICAgICAgIGhlYWRlciA9IFwiRXJyb3JcXG5cIjsgLy8gbm90ZXMgdGhhdCBhbnl0aGluZyBhZnRlciBcIkVycm9yXCIgaXMgdmFsaWRcbiAgICAgICAgICAgIGxpbmVQcmVmaXggPSBcIlxcdGF0IFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGVhZGVyID0gXCJcIjtcbiAgICAgICAgICAgIGxpbmVQcmVmaXggPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWFkZXIgK1xuICAgICAgICAgICAgdHJhY2VGcmFtZXNcbiAgICAgICAgICAgICAgICAubWFwKHNmID0+IGxpbmVQcmVmaXggKyBzZi50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBqRmFjdG9yeVRyYWNlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjb25zdCBqRmFjdG9yeVRyYWNlID0ge307XG5cbmpGYWN0b3J5TG9hZGVyLm9uSW5pdChmdW5jdGlvbigpIHtcbiAgICBsZXQgY29uZmlnID0gakZhY3RvcnlDb25maWcuSkZhY3RvcnlUcmFjZTtcbiAgICBpZiAoY29uZmlnICYmIGNvbmZpZy51c2UgIT09IGZhbHNlKSB7XG4gICAgICAgIGxldCBjb25zdHJ1Y3RvcjtcbiAgICAgICAgY29uc3RydWN0b3IgPSB0eXBlb2YgY29uZmlnLnVzZSA9PT0gXCJmdW5jdGlvblwiID9cbiAgICAgICAgICAgIGNvbmZpZy51c2UgOlxuICAgICAgICAgICAgdHlwZW9mIFN0YWNrVHJhY2UgPT09IFwib2JqZWN0XCIgPyBKRmFjdG9yeVRyYWNlX0xJQl9TVEFDS1RSQUNFIDogSkZhY3RvcnlUcmFjZV9OT0ZJTFRFUjtcbiAgICAgICAgaWYgKGNvbnN0cnVjdG9yID09PSBKRmFjdG9yeVRyYWNlX0xJQl9TVEFDS1RSQUNFKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJqRmFjdG9yeTogU3RhY2sgdHJhY2UgZW5hYmxlZDsgUGVyZm9ybWFuY2Ugd2lsbCBiZSBhZmZlY3RlZFwiKVxuICAgICAgICB9XG4gICAgICAgIGpGYWN0b3J5VHJhY2UudHJhY2VyID0gbmV3IGNvbnN0cnVjdG9yKGNvbmZpZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgakZhY3RvcnlUcmFjZS50cmFjZXIgPSB7XG4gICAgICAgICAgICBjYXB0dXJlVHJhY2VTb3VyY2U6IE5PT1AsXG4gICAgICAgICAgICBhdHRhY2hUcmFjZTogTk9PUFxuICAgICAgICB9O1xuICAgIH1cbn0pOyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRkFDVE9SWV9ERVYsIGpGYWN0b3J5Q29uZmlnIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBoZWxwZXJfZ2V0LCBoZWxwZXJfaXNOYXRpdmUsIGhlbHBlcl9sb3dlckZpcnN0LCBoZWxwZXJfdGVtcGxhdGUgfSBmcm9tIFwiLi9qRmFjdG9yeS1oZWxwZXJzXCI7XG5pbXBvcnQgeyBqRmFjdG9yeVRyYWNlIH0gZnJvbSBcIi4vSkZhY3RvcnlUcmFjZVwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RXJyb3Jcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9IFwidW5zcGVjaWZpZWQgZXJyb3JcIiwgZGF0YSA9IG51bGwpIHtcbiAgICAgICAgZGF0YSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgZGF0YSk7XG4gICAgICAgIG1lc3NhZ2UgPSBKRmFjdG9yeUVycm9yLnRvUHJpbnRhYmxlKG1lc3NhZ2UsIGRhdGEpO1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy4kZGF0YSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgZGF0YSk7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VcbiAgICB9XG5cbiAgICAqIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICB5aWVsZCB0aGlzLm1lc3NhZ2U7XG4gICAgICAgIHlpZWxkIHRoaXMuJGRhdGE7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldElkKG9iamVjdCkge1xuICAgICAgICByZXR1cm4gb2JqZWN0WyhqRmFjdG9yeUNvbmZpZy5KRmFjdG9yeUVycm9yLmtleXMgfHwgSkZhY3RvcnlFcnJvci5ERUZBVUxUX0tFWVMpLmZpbmQoa2V5ID0+IHtcbiAgICAgICAgICAgIGxldCB2YWwgPSBoZWxwZXJfZ2V0KG9iamVjdCwga2V5KTtcbiAgICAgICAgICAgIHJldHVybiB2YWwgfHwgdmFsID09PSAwXG4gICAgICAgIH0pXVxuICAgIH1cblxuICAgIHN0YXRpYyB0b1ByaW50YWJsZURhdGEoZGF0YSkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZURhdGEgPSB7fTtcbiAgICAgICAgbGV0IG52O1xuICAgICAgICBmb3IgKGxldCBba2V5LCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gdmFsLm5hbWUgKyBcIigpXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gXCJudWxsXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gdmFsLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgobnYgPSBKRmFjdG9yeUVycm9yLmdldElkKHZhbCkpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9ICdcIicgKyBudiArICdcIidcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGVscGVyX2lzTmF0aXZlKHZhbC50b1N0cmluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWwudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudiA9IEpTT04uc3RyaW5naWZ5KHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IG52Lmxlbmd0aCA+IEpGYWN0b3J5RXJyb3IuSlNPTl9NQVhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnYuc3Vic3RyaW5nKDAsIEpGYWN0b3J5RXJyb3IuSlNPTl9NQVgpICsgXCJbLi4uXVwiIDogbnY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBcIltvYmplY3QgXCIgKyB2YWwuY29uc3RydWN0b3IubmFtZSArIFwiXVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gJ1wiJyArIHZhbCArICdcIic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IFN0cmluZyh2YWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGFba2V5XSA9IHZhbFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZURhdGFcbiAgICB9XG5cbiAgICBzdGF0aWMgdG9QcmludGFibGUodGVtcGxhdGUsIGRhdGEpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVNZXNzYWdlID0gW107XG4gICAgICAgIGZvciAobGV0IHBhcnQgb2YgdGVtcGxhdGUuc3BsaXQoXCI7XCIpKSB7XG4gICAgICAgICAgICBsZXQgcGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBsZXQgUkVfUExBQ0VIT0xERVIgPSBKRmFjdG9yeUVycm9yLlJFX1BMQUNFSE9MREVSO1xuICAgICAgICAgICAgUkVfUExBQ0VIT0xERVIubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgIGlmICgocGxhY2Vob2xkZXIgPSBSRV9QTEFDRUhPTERFUi5leGVjKHBhcnQpKSkge1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyWzFdICYmIHBsYWNlaG9sZGVyWzFdIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlTWVzc2FnZS5wdXNoKHBhcnQudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IHdoaWxlICgocGxhY2Vob2xkZXIgPSBSRV9QTEFDRUhPTERFUi5leGVjKHBhcnQpKSAhPT0gbnVsbClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVNZXNzYWdlLnB1c2gocGFydC50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWxwZXJfbG93ZXJGaXJzdChoZWxwZXJfdGVtcGxhdGUodGVtcGxhdGVNZXNzYWdlLmpvaW4oXCI7IFwiKSkoSkZhY3RvcnlFcnJvci50b1ByaW50YWJsZURhdGEoZGF0YSkpKTtcbiAgICB9XG59XG5cbkpGYWN0b3J5RXJyb3IuSlNPTl9NQVggPSA0MDtcbkpGYWN0b3J5RXJyb3IuREVGQVVMVF9LRVlTID0gW1wibmFtZVwiLCBcImlkXCJdO1xuSkZhY3RvcnlFcnJvci5SRV9QTEFDRUhPTERFUiA9IC9cXCR7KFtefV0rKX0vZztcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBqRmFjdG9yeUVycm9yXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBsZXQgakZhY3RvcnlFcnJvciA9IG5ldyBQcm94eShKRmFjdG9yeUVycm9yLCB7XG4gICAgc2V0OiBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgICAgICBsZXQgeyB0ZW1wbGF0ZSB9ID0gdmFsdWU7XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiB0YXJnZXRbcHJvcGVydHldKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhbHJlYWR5IGRlY2xhcmVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0W3Byb3BlcnR5XSA9IGNsYXNzIGV4dGVuZHMgSkZhY3RvcnlFcnJvciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihkYXRhLCB0cmFjZVNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHN1cGVyKHRlbXBsYXRlLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBqRmFjdG9yeVRyYWNlLnRyYWNlci5hdHRhY2hUcmFjZSh0aGlzLiRkYXRhLCB0cmFjZVNvdXJjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIENhdXRpb246IENocm9tZSBhdXRvbWF0aWNhbGx5IHJlc29sdmVzIHNvdXJjZW1hcCB3aGVuIGxvZ2dpbmcgZXJyb3JzXG4gICAgICAgIC8vIGJ1dCBvbmx5IGlmIHRoZSBlcnJvciBuYW1lIHN0YXJ0cyB3aXRoIFwiRXJyb3JcIlxuICAgICAgICB0YXJnZXRbcHJvcGVydHldLnByb3RvdHlwZS5uYW1lID0gXCJFcnJvciBqRmFjdG9yeUVycm9yLlwiICsgcHJvcGVydHk7XG5cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG59KTtcblxuakZhY3RvcnlFcnJvci5JTlZBTElEX1ZBTFVFID0geyB0ZW1wbGF0ZTogXCJpbnZhbGlkIHZhbHVlIGZvciAke3RhcmdldH07IFJlYXNvbjogJHtyZWFzb259OyBHaXZlbjogJHtnaXZlbn1cIiB9O1xuakZhY3RvcnlFcnJvci5JTlZBTElEX0NBTEwgPSB7IHRlbXBsYXRlOiBcImludmFsaWQgY2FsbCAke3RhcmdldH07IFJlYXNvbjogJHtyZWFzb259OyBPd25lcjogJHtvd25lcn1cIiB9O1xuakZhY3RvcnlFcnJvci5QUk9NSVNFX0VYUElSRUQgPSB7IHRlbXBsYXRlOiBcImV4cGlyZWQgcHJvbWlzZSAke3RhcmdldH07IFJlYXNvbjogJHtyZWFzb259XCIgfTtcbmpGYWN0b3J5RXJyb3IuUkVRVUVTVF9FUlJPUiA9IHsgdGVtcGxhdGU6IFwiZXJyb3IgcmVxdWVzdGluZyAke3RhcmdldH07IFJlYXNvbjogJHtyZWFzb259OyBPd25lcjogJHtvd25lcn1cIiB9O1xuakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCA9IHsgdGVtcGxhdGU6IFwiZHVwbGljYXRlZCBrZXkgZm9yICR7dGFyZ2V0fTsgR2l2ZW46ICR7Z2l2ZW59XCIgfTtcbmpGYWN0b3J5RXJyb3IuS0VZX01JU1NJTkcgPSB7IHRlbXBsYXRlOiBcIm1pc3Npbmcga2V5IGZvciAke3RhcmdldH07IEdpdmVuOiAke2dpdmVufVwiIH07IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBoZWxwZXJfaXNOdW1iZXIsIGhlbHBlcl9pc1BsYWluT2JqZWN0LCBoZWxwZXJfaXNTdHJpbmcgfSBmcm9tIFwiLi9qRmFjdG9yeS1oZWxwZXJzXCI7XG5pbXBvcnQgeyBqRmFjdG9yeUxvYWRlciB9IGZyb20gXCIuL2pGYWN0b3J5LWxvYWRlclwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RXhwZWN0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEEgc21hbGwgaW5wdXQvb3V0cHV0IHZhbGlkYXRpb24gdG9vbFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEFscGhhLCBEcmFmdFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQHJldHVybiB7KnxKRmFjdG9yeUV4cGVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEpGYWN0b3J5RXhwZWN0KGxhYmVsLCB2YWx1ZSkge1xuICAgIGlmIChuZXcudGFyZ2V0KSB7XG4gICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgSkZhY3RvcnlFeHBlY3QobGFiZWwsIHZhbHVlKVxuICAgIH1cbn1cblxuY29uc3QgZXJyb3IgPSBmdW5jdGlvbiBqRmFjdG9yeVRocm93KGxhYmVsLCB2YWx1ZSwgbWVzc2FnZSkge1xuICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICB0YXJnZXQ6IGxhYmVsLFxuICAgICAgICByZWFzb246IG1lc3NhZ2UsXG4gICAgICAgIGdpdmVuOiB2YWx1ZVxuICAgIH0pXG59O1xuXG5jb25zdCBzdGF0aWNNZXRob2RzID0ge1xuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90VW5kZWZpbmVkXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG5vdFVuZGVmaW5lZFxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG5vdFVuZGVmaW5lZChsYWJlbCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJjYW5ub3QgYmUgdW5kZWZpbmVkXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RFbXB0eVN0cmluZ1xuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RFbXB0eVN0cmluZ1xuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG5vdEVtcHR5U3RyaW5nKGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJjYW5ub3QgYmUgZW1wdHkgc3RyaW5nXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RGYWxzeVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RGYWxzeVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG5vdEZhbHN5KGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsICdjYW5ub3QgYmUgYSBmYWxzeSB2YWx1ZSAodW5kZWZpbmVkLCBudWxsLCBOYU4sIDAsIFwiXCIpJylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHZhbGlkU3BhY2VzXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHZhbGlkU3BhY2VzXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgdmFsaWRTcGFjZXMobGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICghdmFsdWUucmVwbGFjZSB8fCB2YWx1ZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwiaW52YWxpZCBzcGFjZSBkZWxpbWl0ZXJzXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBtYXRjaFJlZ1xuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gcmVnXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgbWF0Y2hSZWdcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBtYXRjaFJlZyhsYWJlbCwgdmFsdWUsIHJlZykge1xuICAgICAgICBpZiAoIXJlZy50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCAnc3RyaW5nIFwiJyArIHZhbHVlICsgJ1wiIG11c3QgbWF0Y2ggJyArIHJlZylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHBhcmFtIHsuLi4qfSBleHBlY3RlZFxuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlKGxhYmVsLCB2YWx1ZSwgLi4uZXhwZWN0ZWQpIHtcbiAgICAgICAgbGV0IG5hbWUsIG9rID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGNvbnN0cnVjdG9yIG9mIGV4cGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAoY29uc3RydWN0b3IgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuYW1lID0gXCJOdWxsXCJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJuYW1lXCIgaW4gY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgICAgICBuYW1lID0gY29uc3RydWN0b3IubmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRlc3QgPSBzdGF0aWNNZXRob2RzW1widHlwZVwiICsgbmFtZV07XG4gICAgICAgICAgICBpZiAodGVzdCkge1xuICAgICAgICAgICAgICAgIHRyeSB7b2sgPSB0ZXN0KGxhYmVsLCB2YWx1ZS8qLCBlKi8pfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2sgPSB2YWx1ZSBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2spIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvaykge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgW1wiICsgZXhwZWN0ZWQubWFwKGUgPT4gZS5uYW1lKS5qb2luKFwiLCBcIikgKyBcIl1cIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVOdWxsXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVOdWxsXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgdHlwZU51bGwobGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgbnVsbFwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZUJvb2xlYW5cbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZUJvb2xlYW5cbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlQm9vbGVhbihsYWJlbCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB0cnVlICYmIHZhbHVlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgYSBib29sZWFuXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlU3RyaW5nXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVTdHJpbmdcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlU3RyaW5nKGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIWhlbHBlcl9pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIGEgc3RyaW5nXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlTnVtYmVyXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVOdW1iZXJcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlTnVtYmVyKGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIWhlbHBlcl9pc051bWJlcih2YWx1ZSkpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIGEgbnVtYmVyXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlRnVuY3Rpb25cbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdHlwZUZ1bmN0aW9uXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgdHlwZUZ1bmN0aW9uKGxhYmVsLCB2YWx1ZSkge1xuICAgICAgICBpZiAoISh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIGEgZnVuY3Rpb25cIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHR5cGVQbGFpbk9iamVjdFxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0eXBlUGxhaW5PYmplY3RcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB0eXBlUGxhaW5PYmplY3QobGFiZWwsIHZhbHVlKSB7XG4gICAgICAgIGlmICghaGVscGVyX2lzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBiZSBhIHBsYWluIG9iamVjdFwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgZXF1YWxcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHBhcmFtIHsqfSBleHBlY3RlZFxuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGVxdWFsXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgZXF1YWwobGFiZWwsIHZhbHVlLCAuLi5leHBlY3RlZCkge1xuICAgICAgICBsZXQgb2sgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgZSBvZiBleHBlY3RlZCkge1xuICAgICAgICAgICAgaWYgKChvayA9IHZhbHVlID09PSBlKSkgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9rKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBiZSBvbmUgb2YgW1wiICsgZXhwZWN0ZWQgKyBcIl1cIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBlcXVhbEluXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBleHBlY3RlZFxuICAgICAqIEByZXR1cm4gSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGVxdWFsSW5cbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBlcXVhbEluKGxhYmVsLCB2YWx1ZSwgZXhwZWN0ZWQpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkKSkge1xuICAgICAgICAgICAgZXhwZWN0ZWQgPSBPYmplY3QudmFsdWVzKGV4cGVjdGVkKVxuICAgICAgICB9XG4gICAgICAgIGlmICghZXhwZWN0ZWQuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBiZSBvbmUgZnJvbSBbXCIgKyBleHBlY3RlZC5qb2luKFwiLCBcIikgKyBcIl1cIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHByb3BlcnRpZXNcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3QjXG4gICAgICogQHBhcmFtIHtBcnJheX0gZXhwZWN0ZWRcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBwcm9wZXJ0aWVzXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgcHJvcGVydGllcyhsYWJlbCwgdmFsdWUsIGV4cGVjdGVkKSB7XG4gICAgICAgIGZvciAobGV0IG5hbWUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChsYWJlbCArICcsIHByb3BlcnR5IG5hbWUgXCInICsgbmFtZSArICdcIicsIG5hbWUpLmVxdWFsSW4oZXhwZWN0ZWQpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB3cml0YWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgd3JpdGFibGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICB3cml0YWJsZShsYWJlbCwgdmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkud3JpdGFibGUpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIHdyaXRhYmxlXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RXcml0YWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90V3JpdGFibGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBub3RXcml0YWJsZShsYWJlbCwgdmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KS53cml0YWJsZSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3Qgbm90IGJlIHdyaXRhYmxlXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBlbnVtZXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBlbnVtZXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgZW51bWVyYWJsZShsYWJlbCwgdmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3QgYmUgZW51bWVyYWJsZVwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90RW51bWVyYWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90RW51bWVyYWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIG5vdEVudW1lcmFibGUobGFiZWwsIHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgZXJyb3IobGFiZWwsIHZhbHVlLCBcIm11c3Qgbm90IGJlIGVudW1lcmFibGVcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGNvbmZpZ3VyYWJsZVxuICAgICAqIEBtZW1iZXJPZiBKRmFjdG9yeUV4cGVjdCNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogQHJldHVybiBKRmFjdG9yeUV4cGVjdFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgY29uZmlndXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgY29uZmlndXJhYmxlKGxhYmVsLCB2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmICghT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KS5jb25maWd1cmFibGUpIHtcbiAgICAgICAgICAgIGVycm9yKGxhYmVsLCB2YWx1ZSwgXCJtdXN0IGJlIGNvbmZpZ3VyYWJsZVwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgbm90Q29uZmlndXJhYmxlXG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBub3RDb25maWd1cmFibGVcbiAgICAgKiBAbWVtYmVyT2YgSkZhY3RvcnlFeHBlY3RcbiAgICAgKi9cbiAgICBub3RDb25maWd1cmFibGUobGFiZWwsIHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkuY29uZmlndXJhYmxlKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwibXVzdCBub3QgYmUgY29uZmlndXJhYmxlXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCByZXNlcnZlZFByb3BlcnR5XG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0I1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCByZXNlcnZlZFByb3BlcnR5XG4gICAgICogQG1lbWJlck9mIEpGYWN0b3J5RXhwZWN0XG4gICAgICovXG4gICAgcmVzZXJ2ZWRQcm9wZXJ0eShsYWJlbCwgdmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoa2V5IGluIHZhbHVlKSB7XG4gICAgICAgICAgICBlcnJvcihsYWJlbCwgdmFsdWUsIFwiaXMgYSByZXNlcnZlZCBwcm9wZXJ0eVwiKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxufTtcblxuakZhY3RvcnlMb2FkZXIub25Jbml0KGZ1bmN0aW9uKCkge1xuICAgIE9iamVjdC5hc3NpZ24oSkZhY3RvcnlFeHBlY3QsIHN0YXRpY01ldGhvZHMpO1xuICAgIC8vIEdlbmVyYXRlIG1lbWJlcnMgZnJvbSBzdGF0aWMgbWV0aG9kc1xuICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzdGF0aWNNZXRob2RzKSkge1xuICAgICAgICBKRmFjdG9yeUV4cGVjdC5wcm90b3R5cGVbbmFtZV0gPVxuICAgICAgICAgICAgZnVuY3Rpb24gY2FsbFN0YXRpYyguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3RbbmFtZV0odGhpcy5sYWJlbCwgdGhpcy52YWx1ZSwgLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgICAgIH1cbiAgICB9XG59KTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfREVWLCBqRmFjdG9yeUNvbmZpZyB9IGZyb20gXCIuL2pGYWN0b3J5LWVudlwiO1xuaW1wb3J0IHsgSkZhY3RvcnlFeHBlY3QgfSBmcm9tIFwiLi9KRmFjdG9yeUV4cGVjdFwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5VHJhaXRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeVRyYWl0cyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtKRmFjdG9yeUNvcmVPYmplY3R8T2JqZWN0fSBjYWxsZXJJbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7Q2xhc3N8RnVuY3Rpb259IGNhbGxlckNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjYWxsZXJJbnN0YW5jZSwgY2FsbGVyQ29uc3RydWN0b3IsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0pGYWN0b3J5Q29yZU9iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FsbGVySW5zdGFuY2UgPSBjYWxsZXJJbnN0YW5jZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NsYXNzfEZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWxsZXJDb25zdHJ1Y3RvciA9IGNhbGxlckNvbnN0cnVjdG9yO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICB1c2UodHJhaXQsIC4uLnRyYWl0QXJncykge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5VHJhaXRzKHRyYWl0KVwiLCB0cmFpdCkudHlwZUZ1bmN0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjYWxsZXJDb25zdHJ1Y3RvciBpcyBub3QgYWx3YXlzIHRoZSBjYWxsZXJJbnN0YW5jZS5jb25zdHJ1Y3RvcjpcbiAgICAgICAgLy8gVGhlIFRyYWl0IGNhbiBiZSBpbmplY3RlZCBpbiBhbiBpbmhlcml0ZWQgY29uc3RydWN0b3IgZnJvbSBzdXBlcigpIGF0IGNhbGwgdGltZVxuICAgICAgICBsZXQgeyBjYWxsZXJJbnN0YW5jZSwgY2FsbGVyQ29uc3RydWN0b3IgfSA9IHRoaXM7XG5cbiAgICAgICAgLy8gRGV0ZWN0IGltcHJvcGVyIGR1cGxpY2F0aW9uIChjYW4gYmUgYSB0cmFpdCBhbHJlYWR5IGNhbGxlZCBieSBhIHN1cGVyIGNsYXNzKVxuICAgICAgICBsZXQgY2FjaGUgPSBKRmFjdG9yeVRyYWl0cy5DQUNIRS5nZXQoY2FsbGVySW5zdGFuY2UpO1xuXG4gICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgICAgaWYgKGNhY2hlLmhhcyh0cmFpdCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoakZhY3RvcnlDb25maWcuVHJhaXRMb2cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGAke3RyYWl0Lm5hbWV9IGFscmVhZHkgY2FsbGVkIG9uYCwgY2FsbGVySW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FjaGUuYWRkKHRyYWl0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgSkZhY3RvcnlUcmFpdHMuQ0FDSEUuc2V0KGNhbGxlckluc3RhbmNlLCBuZXcgV2Vha1NldChbdHJhaXRdKSlcbiAgICAgICAgfVxuXG4gICAgICAgICFjYWxsZXJDb25zdHJ1Y3Rvci5KRmFjdG9yeVRyYWl0ICYmIChjYWxsZXJDb25zdHJ1Y3Rvci5KRmFjdG9yeVRyYWl0ID0gbmV3IFdlYWtTZXQpO1xuXG4gICAgICAgIGlmICghY2FsbGVyQ29uc3RydWN0b3IuSkZhY3RvcnlUcmFpdC5oYXModHJhaXQpKSB7XG4gICAgICAgICAgICBjYWxsZXJDb25zdHJ1Y3Rvci5KRmFjdG9yeVRyYWl0LmFkZCh0cmFpdCk7XG4gICAgICAgICAgICB0aGlzLmV4cG9ydCh0cmFpdC5wcm90b3R5cGUsIGNhbGxlckNvbnN0cnVjdG9yLnByb3RvdHlwZSk7XG4gICAgICAgICAgICB0aGlzLmV4cG9ydCh0cmFpdCwgY2FsbGVyQ29uc3RydWN0b3IsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW4gYSBUcmFpdC5jb25zdHJ1Y3RvcihjYWxsZXJJbnN0YW5jZSwgLi4uYXJncykgOiB0aGlzICE9IGNhbGxlckluc3RhbmNlXG4gICAgICAgIC8vIEluIGEgVHJhaXQudHJhaXRfY29uc3RydWN0b3IoLi4uYXJncykgOiB0aGlzID09IGNhbGxlckluc3RhbmNlICh0cmFpdHMgaXMgaW5qZWN0ZWQgYW5kIGF2YWlsYWJsZSlcblxuICAgICAgICAvLyBUcmFpdHMgYXJlIGluamVjdGlvbnMuIFRoZXkgYXJlIG5vdCBkeW5hbWljIGluaGVyaXRhbmNlLlxuICAgICAgICAvLyBTbyB0aGUgVHJhaXQuY29uc3RydWN0b3IoKSBkb2Vzbid0IHNoYXJlIHRoZSBcInRoaXNcIiBrZXl3b3JkIHdpdGggaXRzIGNhbGxlci5cblxuICAgICAgICAvLyAjbGltaXRhdGlvbiMgTm8gd2F5IHRvIGJpbmQgYW4gRVM2IGNsYXNzIGNvbnN0cnVjdG9yIHRvIGFuIG9iamVjdFxuICAgICAgICAvLyA9PiBJbXBsZW1lbnRlciBjYW4gZGVmaW5lIGEgXCJ0cmFpdF9jb25zdHJ1Y3RvcigpXCIgdGhhdCBpcyBhdXRvbWF0aWNhbGx5IGJvdW5kIHRvIFwiY2FsbGVySW5zdGFuY2VcIlxuICAgICAgICAvLyBhbmQgY2FsbGVkIGFmdGVyIHRoZSBuYXRpdmUgdHJhaXQgY29uc3RydWN0b3IoKS5cblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcFxuICAgICAgICBsZXQgdHJhaXRJbnN0YW5jZSA9IG5ldyB0cmFpdChjYWxsZXJJbnN0YW5jZSwgLi4udHJhaXRBcmdzKTtcbiAgICAgICAgaWYgKHRyYWl0SW5zdGFuY2UudHJhaXRfY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIHRyYWl0SW5zdGFuY2UudHJhaXRfY29uc3RydWN0b3IuYXBwbHkoY2FsbGVySW5zdGFuY2UsIHRyYWl0QXJncylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIGV4cG9ydChzb3VyY2UsIHRhcmdldCwgaXNTdGF0aWMpIHtcbiAgICAgICAgbGV0IHNvdXJjZURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpO1xuXG4gICAgICAgIGZvciAobGV0IHByb3BlcnR5TmFtZSBvZiBPYmplY3Qua2V5cyhzb3VyY2VEZXNjcmlwdG9yKSkge1xuICAgICAgICAgICAgbGV0IHByZWZpeCA9IEpGYWN0b3J5VHJhaXRzLmdldFByZWZpeChwcm9wZXJ0eU5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoSkZhY3RvcnlUcmFpdHMuZ2V0VGFyZ2V0KHByb3BlcnR5TmFtZSwgdGFyZ2V0LCBwcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHByb3BlcnR5RGVzY3JpcHRvciA9IHNvdXJjZURlc2NyaXB0b3JbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgICBsZXQgcGFyc2VkID0gKHRoaXMub3B0aW9ucy5wYXJzZXIgfHwgSkZhY3RvcnlUcmFpdHMuZGVmYXVsdFBhcnNlcikoXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZSwgcHJvcGVydHlEZXNjcmlwdG9yLCBzb3VyY2UsIHRhcmdldCwgaXNTdGF0aWNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgKHsgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eURlc2NyaXB0b3IgfSA9IHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5TmFtZSwgcHJvcGVydHlEZXNjcmlwdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmYXVsdFBhcnNlcihwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvciwgc291cmNlLCB0YXJnZXQsIGlzU3RhdGljKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHByb3BlcnR5RGVzY3JpcHRvci52YWx1ZTtcblxuICAgICAgICBpZiAoaXNTdGF0aWMpIHtyZXR1cm4gbnVsbH0gLy8gZG9uJ3QgZXhwb3J0IHN0YXRpYyBtZW1iZXJzXG5cbiAgICAgICAgaWYgKHByb3BlcnR5TmFtZSBpbiB0YXJnZXQpIHsgLy8gc2tpcCBleGlzdGluZyBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBpZiAoakZhY3RvcnlDb25maWcuVHJhaXRMb2cpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgIGAke3RhcmdldC5jb25zdHJ1Y3Rvci5uYW1lfT4gc2tpcHBpbmcgZXhwb3J0IG9mIGV4aXN0aW5nIHByb3BlcnR5IFwiJHtwcm9wZXJ0eU5hbWV9XCJgLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikgeyAvLyBwcmV2ZW50IHNoYXJlZCBvYmplY3QgZXhwb3J0YXRpb25cbiAgICAgICAgICAgIGlmIChqRmFjdG9yeUNvbmZpZy5UcmFpdExvZykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgYCR7dGFyZ2V0LmNvbnN0cnVjdG9yLm5hbWV9PiBza2lwcGluZyBleHBvcnQgb2Ygc2hhcmVkIG9iamVjdCBcIiR7cHJvcGVydHlOYW1lfVwiYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvciB9XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFByZWZpeChrZXkpIHtcbiAgICAgICAgbGV0IHNwbGl0ID0ga2V5LnNwbGl0KFwiX1wiKTtcbiAgICAgICAgcmV0dXJuIHNwbGl0Lmxlbmd0aCA+IDEgPyBzcGxpdFswXSA6IG51bGw7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFRhcmdldChrZXksIHRhcmdldCwgcHJlZml4KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIEpGYWN0b3J5VHJhaXRzLkVYQ0xVREVTLmluY2x1ZGVzKGtleSkgfHxcbiAgICAgICAgICAgIHByZWZpeCA9PT0gXCJ0cmFpdFwiXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXJnZXRcbiAgICB9XG59XG5cbkpGYWN0b3J5VHJhaXRzLkNBQ0hFID0gbmV3IFdlYWtNYXA7XG5KRmFjdG9yeVRyYWl0cy5FWENMVURFUyA9IFtcImNvbnN0cnVjdG9yXCIsIFwicHJvdG90eXBlXCIsIFwibGVuZ3RoXCIsIFwic2l6ZVwiXTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfREVWLCBqRmFjdG9yeUNvbmZpZyB9IGZyb20gXCIuL2pGYWN0b3J5LWVudlwiO1xuaW1wb3J0IHsgSkZhY3RvcnlFeHBlY3QgfSBmcm9tIFwiLi9KRmFjdG9yeUV4cGVjdFwiO1xuaW1wb3J0IHsgakZhY3RvcnlFcnJvciB9IGZyb20gXCIuL0pGYWN0b3J5RXJyb3JcIjtcbmltcG9ydCB7IGhlbHBlcl9zZXRGdW5jdGlvbk5hbWUgfSBmcm9tIFwiLi9qRmFjdG9yeS1oZWxwZXJzXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXIge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH1cblxuICAgICogW1N5bWJvbC5pdGVyYXRvcl0oaGFuZGxlckdyb3VwcyA9IFtdKSB7XG5cbiAgICAgICAgaWYgKCFoYW5kbGVyR3JvdXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgaGFuZGxlckdyb3VwcyA9IE9iamVjdC5rZXlzKHRoaXMuaGFuZGxlcnMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYW5kbGVyR3JvdXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgaGFuZGxlckdyb3VwcyA9IFtcImRlZmF1bHRcIl1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGhhbmRsZXJHcm91cCBvZiBoYW5kbGVyR3JvdXBzKSB7XG4gICAgICAgICAgICBpZiAoaGFuZGxlckdyb3VwIGluIHRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCogdGhpcy5oYW5kbGVyc1toYW5kbGVyR3JvdXBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQHJldHVybiB7SkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyfSAqL1xuICAgIGZpcnN0KGhhbmRsZXJHcm91cCwgaGFuZGxlcikge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgW2hhbmRsZXJHcm91cCwgaGFuZGxlcl0gPSBbXCJkZWZhdWx0XCIsIGhhbmRsZXJHcm91cF1cbiAgICAgICAgfVxuICAgICAgICAodGhpcy5oYW5kbGVyc1toYW5kbGVyR3JvdXBdIHx8ICh0aGlzLmhhbmRsZXJzW2hhbmRsZXJHcm91cF0gPSBbXSkpLnVuc2hpZnQoaGFuZGxlcik7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgLyoqIEByZXR1cm4ge0pGYWN0b3J5RnVuY3Rpb25Db21wb3Nlcn0gKi9cbiAgICBsYXN0KGhhbmRsZXJHcm91cCwgaGFuZGxlcikge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgW2hhbmRsZXJHcm91cCwgaGFuZGxlcl0gPSBbXCJkZWZhdWx0XCIsIGhhbmRsZXJHcm91cF1cbiAgICAgICAgfVxuICAgICAgICAodGhpcy5oYW5kbGVyc1toYW5kbGVyR3JvdXBdIHx8ICh0aGlzLmhhbmRsZXJzW2hhbmRsZXJHcm91cF0gPSBbXSkpLnB1c2goaGFuZGxlcik7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgLyoqIEByZXR1cm4geyhmdW5jdGlvbigpOiAqKSAmIHtjb21wb3NlcjogSkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyfX0gKi9cbiAgICBjb21wb3NlKC4uLmhhbmRsZXJHcm91cHMpIHtcbiAgICAgICAgbGV0IGNvbXBvc2VyID0gdGhpcztcbiAgICAgICAgbGV0IGNvbXBvc2l0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhISAvL1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgd3JhcHBlZCBmdW5jdGlvbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgWW91IHNob3VsZCBCbGFja2JveCBKRmFjdG9yeUZ1bmN0aW9uLm1qcyAgICAvL1xuICAgICAgICAgICAgLy8gICAgdG8gc2ltcGxpZnkgZGVidWdnaW5nICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhIS0tISEhISAvL1xuICAgICAgICAgICAgbGV0IGNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IEFycmF5LmZyb20oYXJndW1lbnRzKSxcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxldCBpdGVyYXRvciA9IGNvbXBvc2VyW1N5bWJvbC5pdGVyYXRvcl0oaGFuZGxlckdyb3Vwcyk7XG4gICAgICAgICAgICBsZXQgaXRlcmF0aW9uID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgcmV0dXJuIEpGYWN0b3J5RnVuY3Rpb25Db21wb3Nlci5jb21wb3NpdGVfaXRlcmF0b3IoXG4gICAgICAgICAgICAgICAgdGhpcyAvKiBwcmVzZXJ2ZSBjYWxsIHNjb3BlICovLCBjb250ZXh0LCBpdGVyYXRpb24sIGl0ZXJhdG9yKVxuICAgICAgICB9O1xuICAgICAgICBjb21wb3NpdGUuY29tcG9zZXIgPSBjb21wb3NlcjtcbiAgICAgICAgcmV0dXJuIGNvbXBvc2l0ZTtcbiAgICB9XG5cbiAgICAvLyBTUEVDOiBDb21wb3NpdGUgZnVuY3Rpb25zIHJldHVybnMgcHJvbWlzZSAqb25seSogaWYgYXQgbGVhc3RcbiAgICAvLyBvbmUgaGFuZGxlciByZXR1cm5zIGEgcHJvbWlzZSAoYXN5bmMgZnVuY3Rpb24gb3IgcHJvbWlzZSByZXR1cm4pXG4gICAgLy8gU28gd2UgY2Fubm90IGp1c3QgaXRlcmF0ZSB1c2luZyBhbiBcImF3YWl0IGZvciBvZlwiXG4gICAgc3RhdGljIGNvbXBvc2l0ZV9pdGVyYXRvcihzY29wZSwgY29udGV4dCwgaXRlcmF0aW9uLCBoYW5kbGVycykge1xuICAgICAgICBsZXQgaGFuZGxlcixcbiAgICAgICAgICAgIHJlc3VsdDtcblxuICAgICAgICB3aGlsZSAoIWNvbnRleHQuY2FuY2VsZWQgJiYgIWl0ZXJhdGlvbi5kb25lKSB7XG4gICAgICAgICAgICBoYW5kbGVyID0gaXRlcmF0aW9uLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaGFuZGxlci5jYWxsKHNjb3BlLCBjb250ZXh0LCAuLi5jb250ZXh0LnBhcmFtZXRlcnMpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIoY29udGV4dCwgLi4uY29udGV4dC5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlcmF0aW9uID0gaGFuZGxlcnMubmV4dCgpOyAvLyBwcmVwYXJlcyBuZXh0IGl0ZXJhdGlvbiB0byBrbm93IGlmIFwiZG9uZVwiXG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVyYXRpb24uZG9uZVxuICAgICAgICAgICAgICAgICAgICAvLyBjYXNlIG9mIGxhc3QgaGFuZGxlciByZXR1cm5pbmcgYSBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIC8vICNsaW1pdGF0aW9uIyBub3cgd2F5IHRvIGRldGVjdCBpZiB0aGUgcHJvbWlzZSBpcyB0aGUgcmV0dXJuZWQgdmFsdWUgb3IgYW4gXCJhd2FpdFwiXG4gICAgICAgICAgICAgICAgICAgIC8vICh3ZSBkb24ndCB3YW50IHRvIGNoYW5nZSB0aGUgdmFsdWUgb2YgY29udGV4dC5yZXN1bHQgZHVyaW5nIGEgcGVuZGluZyBoYW5kbGVyKVxuICAgICAgICAgICAgICAgICAgICAvLyA9PiBuYXRpdmUgUHJvbWlzZSBhcmUgYWx3YXlzIGNoYWluZWRcbiAgICAgICAgICAgICAgICAgICAgJiYgcmVzdWx0LmNvbnN0cnVjdG9yICE9PSBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVzdWx0ID0gcmVzdWx0IC8vIHdlIGNhbiBzYWZlbHkgc2V0IHRoZSBuZXcgcmVzdWx0XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKGhlbHBlcl9zZXRGdW5jdGlvbk5hbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICBbaGFuZGxlci5uYW1lLCBcIltjb21wb3NpdGVBc3luY0hhbmRsZXJdXCJdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyLmNvbXBvc2l0ZV9pdGVyYXRvcihzY29wZSwgY29udGV4dCwgaXRlcmF0aW9uLCBoYW5kbGVycylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRleHQucmVzdWx0ID0gcmVzdWx0XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRleHQucmVzdWx0XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RnVuY3Rpb25FeHBpcmFibGUgLSBFeHBpcmFibGUgRnVuY3Rpb24gUGF0dGVyblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBmdW5jdGlvbiBqRmFjdG9yeUZ1bmN0aW9uRXhwaXJhYmxlKG9yaWdpbmFsSGFuZGxlcikge1xuICAgIHJldHVybiBuZXcgSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZShvcmlnaW5hbEhhbmRsZXIpLmNvbXBvc2UoKVxufVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcmlnaW5hbEhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEhhbmRsZXIgPSBvcmlnaW5hbEhhbmRsZXI7XG4gICAgICAgIHRoaXMuZXhwaXJlZENhbGxzID0gMDtcbiAgICAgICAgdGhpcy5jb21wb3NlciA9IG5ldyBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXI7XG5cbiAgICAgICAgbGV0IGlzRXhwaXJlZCA9IHRoaXMuY29tcG9zZXIuY29tcG9zZShcImNvbmRpdGlvbnNcIik7XG4gICAgICAgIGxldCBleHBpcmFibGUgPSB0aGlzO1xuICAgICAgICBsZXQgZXhwaXJlZDtcblxuICAgICAgICAvLyBjYW5ub3QgdXNlIGEgcmVhbCBhY2Nlc3NvciBoZXJlIChjb25kaXRpb25zIGNhbiBiZSBzY29wZWQsIHNvIGlzRXhwaXJlZCB0b28pXG4gICAgICAgIHRoaXMuaXNFeHBpcmVkID0gc2NvcGUgPT4gZXhwaXJlZCB8fCBpc0V4cGlyZWQuY2FsbChzY29wZSkgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuc2V0RXhwaXJlZCA9IHZhbHVlID0+IGV4cGlyZWQgPSB2YWx1ZSA/XG4gICAgICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIEVycm9yID8gdmFsdWUgOiBuZXcgakZhY3RvcnlFcnJvci5JTlZBTElEX0NBTEwoe1xuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5vcmlnaW5hbEhhbmRsZXIsXG4gICAgICAgICAgICAgICAgcmVhc29uOiBcIm1hbnVhbGx5IGV4cGlyZWRcIlxuICAgICAgICAgICAgfSkgOiBCb29sZWFuKHRoaXMuZXhwaXJlZENhbGxzID0gMCk7XG5cbiAgICAgICAgdGhpcy5hZGRFeHBpcmVDb25kaXRpb24gPSBmdW5jdGlvbihjb25kaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9zZXIubGFzdChcImNvbmRpdGlvbnNcIiwgZnVuY3Rpb24oY29udGV4dCkge1xuICAgICAgICAgICAgICAgIGxldCBkb25lID0gZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZS5hZGRFeHBpcmVDb25kaXRpb24oKSwgcmVzdWx0XCIsIHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHlwZShCb29sZWFuLCBFcnJvcilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhwaXJhYmxlLnNldEV4cGlyZWQocmVzdWx0ID9cbiAgICAgICAgICAgICAgICAgICAgICAgIChjb250ZXh0LmNhbmNlbGVkID0gdHJ1ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvciA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgakZhY3RvcnlFcnJvci5JTlZBTElEX0NBTEwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGV4cGlyYWJsZS5vcmlnaW5hbEhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJjb25kaXRpb25hbGx5IGV4cGlyZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gY29uZGl0aW9uLmFwcGx5KHRoaXMsIGNvbnRleHQucGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgPyByZXN1bHQudGhlbihkb25lKSA6IGRvbmUocmVzdWx0KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9zZSgpIHtcbiAgICAgICAgbGV0IGV4cGlyYWJsZSA9IHRoaXM7XG4gICAgICAgIGxldCBjb21wb3NpdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxldCBpc0V4cGlyZWQgPSBleHBpcmFibGUuaXNFeHBpcmVkKHRoaXMpO1xuICAgICAgICAgICAgbGV0IGNhbGwgPSBleHBpcmFibGUuY29uc3RydWN0b3IuY2FsbC5iaW5kKHVuZGVmaW5lZCwgZXhwaXJhYmxlLCB0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgcmV0dXJuIGlzRXhwaXJlZCBpbnN0YW5jZW9mIFByb21pc2UgPyBpc0V4cGlyZWQudGhlbihjYWxsKSA6IGNhbGwoaXNFeHBpcmVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oY29tcG9zaXRlLCB7XG4gICAgICAgICAgICBleHBpcmFibGU6IHRoaXMsXG4gICAgICAgICAgICBpc0V4cGlyZWQ6IGYgPT4gdGhpcy5pc0V4cGlyZWQoZiksXG4gICAgICAgICAgICBzZXRFeHBpcmVkOiBmID0+IHRoaXMuc2V0RXhwaXJlZChmKSxcbiAgICAgICAgICAgIGFkZEV4cGlyZUNvbmRpdGlvbjogZiA9PiB7dGhpcy5hZGRFeHBpcmVDb25kaXRpb24oZik7IHJldHVybiBjb21wb3NpdGV9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBjYWxsKGV4cGlyYWJsZSwgc2NvcGUsIGFyZ3MsIGlzRXhwaXJlZCkge1xuICAgICAgICByZXR1cm4gaXNFeHBpcmVkID8gZXhwaXJhYmxlLm9uRXhwaXJlZChpc0V4cGlyZWQpIDogZXhwaXJhYmxlLm9uTm90RXhwaXJlZChzY29wZSwgYXJncyk7XG4gICAgfVxuXG4gICAgb25FeHBpcmVkKGV4cGlyZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuZXhwaXJlZENhbGxzIDwgSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZS5NYXhXYXJuaW5nRXhwaXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5leHBpcmVkQ2FsbHMrKztcbiAgICAgICAgICAgIGlmIChqRmFjdG9yeUNvbmZpZy5UcmFpdExvZykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiguLi5uZXcgakZhY3RvcnlFcnJvci5JTlZBTElEX0NBTEwoe1xuICAgICAgICAgICAgICAgICAgICAuLi5leHBpcmVkLiRkYXRhLFxuICAgICAgICAgICAgICAgICAgICByZWFzb246IGV4cGlyZWQuJGRhdGEucmVhc29uXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwiOyBleHBpcmVkQ2FsbHM9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgdGhpcy5leHBpcmVkQ2FsbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICsgKHRoaXMuZXhwaXJlZENhbGxzID09PSBKRmFjdG9yeUZ1bmN0aW9uRXhwaXJhYmxlLk1heFdhcm5pbmdFeHBpcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIjsgTWF4IFdhcm5pbmcgRXhjZWVkZWRcIiA6IFwiXCIpXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleHBpcmVkXG4gICAgfVxuXG4gICAgb25Ob3RFeHBpcmVkKHNjb3BlLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbmFsSGFuZGxlci5hcHBseShzY29wZSwgYXJncylcbiAgICB9XG59XG5cbkpGYWN0b3J5RnVuY3Rpb25FeHBpcmFibGUuTWF4V2FybmluZ0V4cGlyYXRpb24gPSAxMDtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeUZ1bmN0aW9uQ29uZGl0aW9uYWwgLSBDb25kaXRpb25hbCBGdW5jdGlvbiBQYXR0ZXJuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGZ1bmN0aW9uIGpGYWN0b3J5RnVuY3Rpb25Db25kaXRpb25hbChvcmlnaW5hbEhhbmRsZXIpIHtcbiAgICByZXR1cm4gbmV3IEpGYWN0b3J5RnVuY3Rpb25Db25kaXRpb25hbChvcmlnaW5hbEhhbmRsZXIpLmNvbXBvc2UoKVxufVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlGdW5jdGlvbkNvbmRpdGlvbmFsIHtcblxuICAgIGNvbnN0cnVjdG9yKG9yaWdpbmFsSGFuZGxlcikge1xuICAgICAgICB0aGlzLm9yaWdpbmFsSGFuZGxlciA9IG9yaWdpbmFsSGFuZGxlcjtcbiAgICAgICAgdGhpcy5jb21wb3NlciA9IG5ldyBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXI7XG4gICAgICAgIHRoaXMuY29tcG9zZXIuZmlyc3QoXCJvcmlnaW5hbFwiLCBoZWxwZXJfc2V0RnVuY3Rpb25OYW1lKFxuICAgICAgICAgICAgW29yaWdpbmFsSGFuZGxlci5uYW1lLCBcIltjb25kaXRpb25dXCJdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxIYW5kbGVyLmFwcGx5KHRoaXMsIGNvbnRleHQucGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNvbXBvc2UoKSB7XG4gICAgICAgIGxldCBjb21wb3NpdGUgPSB0aGlzLmNvbXBvc2VyLmNvbXBvc2UoXCJjb25kaXRpb25zXCIsIFwib3JpZ2luYWxcIik7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGNvbXBvc2l0ZSwge1xuICAgICAgICAgICAgY29uZGl0aW9uYWw6IHRoaXMsXG4gICAgICAgICAgICBhZGRDb25kaXRpb246IGYgPT4ge3RoaXMuYWRkQ29uZGl0aW9uKGYpOyByZXR1cm4gY29tcG9zaXRlfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRDb25kaXRpb24oY29uZGl0aW9uKSB7XG4gICAgICAgIHRoaXMuY29tcG9zZXIubGFzdChcImNvbmRpdGlvbnNcIiwgZnVuY3Rpb24oY29udGV4dCkge1xuICAgICAgICAgICAgbGV0IGhhbmRsZSA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUZ1bmN0aW9uQ29uZGl0aW9uYWwuYWRkQ29uZGl0aW9uKCksIHJlc3VsdFwiLCByZXN1bHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudHlwZUJvb2xlYW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIXJlc3VsdCAmJiAoY29udGV4dC5jYW5jZWxlZCA9IHRydWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBjb25kaXRpb24uYXBwbHkodGhpcywgY29udGV4dC5wYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlID8gcmVzdWx0LnRoZW4oaGFuZGxlKSA6IGhhbmRsZShyZXN1bHQpO1xuICAgICAgICB9KVxuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeUZ1bmN0aW9uV3JhcHBhYmxlIC0gV3JhcHBhYmxlIEZ1bmN0aW9uIFBhdHRlcm5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgZnVuY3Rpb24gakZhY3RvcnlGdW5jdGlvbldyYXBwYWJsZShvcmlnaW5hbEhhbmRsZXIpIHtcbiAgICByZXR1cm4gbmV3IEpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUob3JpZ2luYWxIYW5kbGVyKS5jb21wb3NlKClcbn1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUge1xuXG4gICAgY29uc3RydWN0b3Iob3JpZ2luYWxIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxIYW5kbGVyID0gb3JpZ2luYWxIYW5kbGVyO1xuICAgICAgICB0aGlzLmNvbXBvc2VyID0gbmV3IEpGYWN0b3J5RnVuY3Rpb25Db21wb3NlcjtcbiAgICAgICAgdGhpcy5jb21wb3Nlci5maXJzdChcIm9yaWdpbmFsXCIsIGhlbHBlcl9zZXRGdW5jdGlvbk5hbWUoXG4gICAgICAgICAgICBbb3JpZ2luYWxIYW5kbGVyLm5hbWUsIFwiW3dyYXBwZWRdXCJdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxIYW5kbGVyLmFwcGx5KHRoaXMsIGNvbnRleHQucGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNvbXBvc2UoKSB7XG4gICAgICAgIGxldCBjb21wb3NpdGUgPSB0aGlzLmNvbXBvc2VyLmNvbXBvc2UoXCJiZWZvcmVcIiwgXCJvcmlnaW5hbFwiLCBcImFmdGVyXCIpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihjb21wb3NpdGUsIHtcbiAgICAgICAgICAgIHdyYXBwYWJsZTogdGhpcyxcbiAgICAgICAgICAgIGJlZm9yZUFsbDogZiA9PiB7dGhpcy5iZWZvcmVBbGwoZik7IHJldHVybiBjb21wb3NpdGV9LFxuICAgICAgICAgICAganVzdEJlZm9yZTogZiA9PiB7dGhpcy5qdXN0QmVmb3JlKGYpOyByZXR1cm4gY29tcG9zaXRlfSxcbiAgICAgICAgICAgIGp1c3RBZnRlcjogZiA9PiB7dGhpcy5qdXN0QWZ0ZXIoZik7IHJldHVybiBjb21wb3NpdGV9LFxuICAgICAgICAgICAgYWZ0ZXJBbGw6IGYgPT4ge3RoaXMuYWZ0ZXJBbGwoZik7IHJldHVybiBjb21wb3NpdGV9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGJlZm9yZUFsbChoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuY29tcG9zZXIuZmlyc3QoXCJiZWZvcmVcIiwgaGFuZGxlcik7XG4gICAgfVxuXG4gICAganVzdEJlZm9yZShoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuY29tcG9zZXIubGFzdChcImJlZm9yZVwiLCBoYW5kbGVyKTtcbiAgICB9XG5cbiAgICBqdXN0QWZ0ZXIoaGFuZGxlcikge1xuICAgICAgICB0aGlzLmNvbXBvc2VyLmZpcnN0KFwiYWZ0ZXJcIiwgaGFuZGxlcik7XG4gICAgfVxuXG4gICAgYWZ0ZXJBbGwoaGFuZGxlcikge1xuICAgICAgICB0aGlzLmNvbXBvc2VyLmxhc3QoXCJhZnRlclwiLCBoYW5kbGVyKTtcbiAgICB9XG59IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBKRmFjdG9yeVRyYWl0cyB9IGZyb20gXCIuL0pGYWN0b3J5VHJhaXRzXCI7XG5pbXBvcnQgeyBqRmFjdG9yeUZ1bmN0aW9uV3JhcHBhYmxlIH0gZnJvbSBcIi4vSkZhY3RvcnlGdW5jdGlvblwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGpGYWN0b3J5VHJhaXRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQmV0YVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBmdW5jdGlvbiBqRmFjdG9yeVRyYWl0cyhjYWxsZXJJbnN0YW5jZSwgY2FsbGVyQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IEpGYWN0b3J5VHJhaXRzKGNhbGxlckluc3RhbmNlLCBjYWxsZXJDb25zdHJ1Y3Rvciwge1xuXG4gICAgICAgIHBhcnNlcihwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvci8qLCBzb3VyY2UsIHRhcmdldCwgaXNTdGF0aWMgKi8pIHtcbiAgICAgICAgICAgIGxldCBwYXJzZWQgPSBKRmFjdG9yeVRyYWl0cy5kZWZhdWx0UGFyc2VyKC4uLmFyZ3VtZW50cyk7XG5cbiAgICAgICAgICAgIGlmIChwYXJzZWQpIHtcbiAgICAgICAgICAgICAgICAoeyBwcm9wZXJ0eU5hbWUsIHByb3BlcnR5RGVzY3JpcHRvciB9ID0gcGFyc2VkKTtcblxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHByb3BlcnR5RGVzY3JpcHRvci52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2YWx1ZS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJGluc3RhbGxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIkdW5pbnN0YWxsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJGVuYWJsZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRkaXNhYmxlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJHN0YXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5RGVzY3JpcHRvci52YWx1ZSA9IGpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iZWZvcmVBbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuJC5zdGF0ZXMuZW5hYmxlZCAmJiB0aGlzLiQuc2VydmljZS5waGFzZSA9PT0gXCJQSEFTRV9OT05FXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiY29tcG9uZW50IGRpc2FibGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRsb2dFcnIoLi4uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eURlc2NyaXB0b3IgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn0iLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgakZhY3RvcnlUcmFpdHMgfSBmcm9tIFwiLi9qRmFjdG9yeS10cmFpdHNcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBQcmVkZWZpbmVkIENvbXBvbmVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBAbWl4ZXMgVHJhaXRDb3JlXG4gKiBAbWl4ZXMgVHJhaXRBYm91dFxuICogQG1peGVzIFRyYWl0TG9nXG4gKiBAbWl4ZXMgVHJhaXRFdmVudHNcbiAqIEBtaXhlcyBUcmFpdFN0YXRlXG4gKiBAbWl4ZXMgVHJhaXRTZXJ2aWNlXG4gKiBAbWl4ZXMgVHJhaXRUYXNrXG4gKi9cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUNvcmVPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgSkZhY3RvcnlDb3JlT2JqZWN0LmluamVjdCh0aGlzLCBKRmFjdG9yeUNvcmVPYmplY3QsIG5hbWUpXG4gICAgfVxuXG4gICAgc3RhdGljIGluamVjdCh0YXJnZXQsIGNvbnN0cnVjdG9yLCBuYW1lKSB7XG4gICAgICAgIGpGYWN0b3J5VHJhaXRzKHRhcmdldCwgY29uc3RydWN0b3IpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0Q29yZSlcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRBYm91dCwgeyBuYW1lIH0pXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0TG9nKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdEV2ZW50cylcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRTdGF0ZSlcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRTZXJ2aWNlKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdFRhc2spO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbWl4ZXMgVHJhaXRGZXRjaFxuICogQG1peGVzIFRyYWl0RE9NXG4gKiBAbWl4ZXMgVHJhaXRDU1NcbiAqIEBtaXhlcyBUcmFpdE11dGF0aW9uXG4gKiBAbWl4ZXMgVHJhaXRUaW1lb3V0XG4gKiBAbWl4ZXMgVHJhaXRJbnRlcnZhbFxuICogQG1peGVzIFRyYWl0TGliVnVlXG4gKiBAbWl4ZXMgVHJhaXRMaWJSZWFjdFxuICovXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlDb21wb25lbnQgZXh0ZW5kcyBKRmFjdG9yeUNvcmVPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgc3VwZXIobmFtZSk7XG4gICAgICAgIEpGYWN0b3J5Q29tcG9uZW50LmluamVjdCh0aGlzLCBKRmFjdG9yeUNvbXBvbmVudClcbiAgICB9XG5cbiAgICBzdGF0aWMgaW5qZWN0KHRhcmdldCwgY29uc3RydWN0b3IpIHtcbiAgICAgICAgakZhY3RvcnlUcmFpdHModGFyZ2V0LCBjb25zdHJ1Y3RvcilcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRGZXRjaClcbiAgICAgICAgICAgIC51c2UoakZhY3RvcnkuVHJhaXRET00pXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0Q1NTKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdE11dGF0aW9uKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdFRpbWVvdXQpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0SW50ZXJ2YWwpXG4gICAgICAgICAgICAudXNlKGpGYWN0b3J5LlRyYWl0TGliVnVlKVxuICAgICAgICAgICAgLnVzZShqRmFjdG9yeS5UcmFpdExpYlJlYWN0KTtcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3Rvcnlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKiogQHJldHVybiB7SkZhY3RvcnlDb21wb25lbnR9ICovXG5leHBvcnQgY29uc3QgakZhY3RvcnkgPSAobmFtZSwgcHJvcGVydGllcykgPT4gT2JqZWN0LmFzc2lnbihuZXcgSkZhY3RvcnlDb21wb25lbnQobmFtZSksIHByb3BlcnRpZXMpOyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBqRmFjdG9yeUxvYWRlciB9IGZyb20gXCIuL2pGYWN0b3J5LWxvYWRlclwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGpGYWN0b3J5T2JqZWN0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0YXR1czogQWxwaGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlPYmplY3Qge1xuXG4gICAgc3RhdGljIGNyZWF0ZURlc2NyaXB0b3JzKGRlc2NyaXB0b3JQcm90b3R5cGUgPSBKRmFjdG9yeU9iamVjdC5ERVNDUklQVE9SU19QUk9UT1RZUEUpIHtcbiAgICAgICAgbGV0IGNyZWF0ZSA9IEpGYWN0b3J5T2JqZWN0LmNyZWF0ZShkZXNjcmlwdG9yUHJvdG90eXBlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgbGV0IG8gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgICAgIG8uTk9ORSA9IGNyZWF0ZSgpO1xuXG4gICAgICAgIG8uV1JJVEFCTEUgICAgID0gY3JlYXRlKHsgd3JpdGFibGU6IHRydWUgfSk7XG4gICAgICAgIG8uRU5VTUVSQUJMRSAgID0gY3JlYXRlKHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgby5DT05GSUdVUkFCTEUgPSBjcmVhdGUoeyBjb25maWd1cmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgby5DT05GSUdVUkFCTEVfV1JJVEFCTEUgICA9XG4gICAgICAgIG8uV1JJVEFCTEVfQ09ORklHVVJBQkxFICAgPSBjcmVhdGUoeyB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgICAgIG8uQ09ORklHVVJBQkxFX0VOVU1FUkFCTEUgPVxuICAgICAgICBvLkVOVU1FUkFCTEVfQ09ORklHVVJBQkxFID0gY3JlYXRlKHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgICAgIG8uRU5VTUVSQUJMRV9XUklUQUJMRSAgICAgPVxuICAgICAgICBvLldSSVRBQkxFX0VOVU1FUkFCTEUgICAgID0gY3JlYXRlKHsgd3JpdGFibGU6IHRydWUsIGVudW1lcmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgby5XUklUQUJMRV9FTlVNRVJBQkxFX0NPTkZJR1VSQUJMRSA9XG4gICAgICAgIG8uV1JJVEFCTEVfQ09ORklHVVJBQkxFX0VOVU1FUkFCTEUgPVxuICAgICAgICBvLkVOVU1FUkFCTEVfQ09ORklHVVJBQkxFX1dSSVRBQkxFID1cbiAgICAgICAgby5FTlVNRVJBQkxFX1dSSVRBQkxFX0NPTkZJR1VSQUJMRSA9XG4gICAgICAgIG8uQ09ORklHVVJBQkxFX1dSSVRBQkxFX0VOVU1FUkFCTEUgPVxuICAgICAgICBvLkNPTkZJR1VSQUJMRV9FTlVNRVJBQkxFX1dSSVRBQkxFID0gY3JlYXRlKHsgd3JpdGFibGU6IHRydWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICAvLyBTaG9ydGN1dHNcbiAgICAgICAgby5SRUFET05MWSA9IGNyZWF0ZSh7IHdyaXRhYmxlOiBmYWxzZSwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogZmFsc2UgfSk7XG5cbiAgICAgICAgcmV0dXJuIG9cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGFzc2lnbihvYmosICdteVByb3BlcnR5JywgMTIzLCB7d3JpdGFibGU6ZmFsc2V9KVxuICAgICAqIGFzc2lnbihvYmosIHthOjEsIGI6Mn0nLCB7d3JpdGFibGU6ZmFsc2V9KVxuICAgICAqXG4gICAgICogZGVwcmVjYXRlZFxuICAgICAqIGFzc2lnbihvYmosICdteVByb3BlcnR5Jywge3ZhbHVlOlwib2tcIiwgd3JpdGFibGU6ZmFsc2V9KSA9PiBub3Qgc3RyaWN0XG4gICAgICogYXNzaWduKG9iaiwgJ215UHJvcGVydHknLCAxMjMpID0+IHVzZSBuYXRpdmUgaW5zdGVhZFxuICAgICAqIGFzc2lnbihvYmosIHthOjEsIGI6Mn0pID0+IHVzZSBuYXRpdmUgaW5zdGVhZFxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NpZ24odGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgbGV0IGRlc2NyaXB0b3JzID0ge307XG5cbiAgICAgICAgc3dpdGNoICh0eXBlb2YgcHJvcGVydHkpIHtcblxuICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gYXNzaWduKG9iaiwgJ215UHJvcGVydHknLCAxMjMsIHt3cml0YWJsZTpmYWxzZX0pXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgICAgICAgICBpZiAoIWRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBkZXNjcmlwdG9yIGFyZ3VtZW50OyB1c2UgT2JqZWN0LmFzc2lnbiBpbnN0ZWFkXCIpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvciA9IE9iamVjdC5jcmVhdGUoZGVzY3JpcHRvcik7IC8vIGF2b2lkIGRlc2NyaXB0b3IgY29ycnVwdGlvblxuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKTtcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICAvLyBhc3NpZ24ob2JqLCB7YToxLCBiOjJ9Jywge3dyaXRhYmxlOmZhbHNlfSlcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgICAgICAgICAgICAgIFt2YWx1ZSwgZGVzY3JpcHRvcl0gPSBbcHJvcGVydHksIHZhbHVlXTtcblxuICAgICAgICAgICAgICAgIGlmICghZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIGRlc2NyaXB0b3IgYXJndW1lbnQ7IHVzZSBPYmplY3QuYXNzaWduIGluc3RlYWRcIilcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuYW1lIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yc1tuYW1lXSA9IE9iamVjdC5jcmVhdGUoZGVzY3JpcHRvcik7IC8vIGF2b2lkIGRlc2NyaXB0b3IgY29ycnVwdGlvblxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yc1tuYW1lXS52YWx1ZSA9IHZhbHVlW25hbWVdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IG5hbWUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvcnNbbmFtZV0gPSBPYmplY3QuY3JlYXRlKGRlc2NyaXB0b3IpOyAvLyBhdm9pZCBkZXNjcmlwdG9yIGNvcnJ1cHRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvcnNbbmFtZV0udmFsdWUgPSB2YWx1ZVtuYW1lXVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgZGVzY3JpcHRvcnMpO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBwcm9wZXJ0eSBhcmd1bWVudFwiKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRhcmdldFxuICAgIH1cblxuICAgIHN0YXRpYyBjcmVhdGUocHJvdG90eXBlLCBmbGF0ID0gZmFsc2UsIGRpc2luaGVyaXQgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChmbGF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZGlzaW5oZXJpdCA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiB7fSwgcHJvdG90eXBlLCBwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICBkaXNpbmhlcml0ID8gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBwcm90b3R5cGUpIDogcHJvdG90eXBlXG4gICAgICAgICAgICAgICAgKSwgcHJvcGVydGllcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBkaXNpbmhlcml0KG9iamVjdCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBvYmplY3QpO1xuICAgIH1cbn1cblxuSkZhY3RvcnlPYmplY3QuREVTQ1JJUFRPUlNfUFJPVE9UWVBFID0geyB3cml0YWJsZTogZmFsc2UsIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IGZhbHNlIH07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnlPYmplY3Rcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5qRmFjdG9yeUxvYWRlci5vbkluaXQoZnVuY3Rpb24oKSB7XG4gICAgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMgPSBKRmFjdG9yeU9iamVjdC5jcmVhdGVEZXNjcmlwdG9ycygpXG59KTsiLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfREVWIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBoZWxwZXJfY2FtZWxDYXNlIH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuaW1wb3J0IHsgSkZhY3RvcnlPYmplY3QgfSBmcm9tIFwiLi9KRmFjdG9yeU9iamVjdFwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5QWJvdXRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgbW9kdWxlR2VuSWQgPSAoKSA9PiArK21vZHVsZUdlbklkLnVpZDsgbW9kdWxlR2VuSWQudWlkID0gMDtcblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5QWJvdXQge1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBhYm91dCA9IHt9KSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlBYm91dChvd25lcilcIiwgb3duZXIpLnR5cGUoT2JqZWN0KTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlBYm91dChhYm91dClcIiwgYWJvdXQpXG4gICAgICAgICAgICAgICAgLnR5cGVQbGFpbk9iamVjdCgpXG4gICAgICAgICAgICAgICAgLnJlc2VydmVkUHJvcGVydHkoXCJ1aWRcIilcbiAgICAgICAgICAgICAgICAucmVzZXJ2ZWRQcm9wZXJ0eShcImZpbmdlcnByaW50XCIpO1xuICAgICAgICAgICAgaWYgKFwibmFtZVwiIGluIGFib3V0KSB7XG4gICAgICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUFib3V0KGFib3V0Lm5hbWUpXCIsIGFib3V0Lm5hbWUpXG4gICAgICAgICAgICAgICAgICAgIC50eXBlU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgLm5vdEVtcHR5U3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBuYW1lO1xuICAgICAgICBsZXQgZmluZ2VycHJpbnQ7XG4gICAgICAgIGxldCB1aWQgPSBtb2R1bGVHZW5JZCgpO1xuXG4gICAgICAgIGlmIChhYm91dC5uYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gYWJvdXQubmFtZTtcbiAgICAgICAgICAgIGRlbGV0ZSBhYm91dC5uYW1lO1xuICAgICAgICAgICAgZmluZ2VycHJpbnQgPSBcImpGYWN0b3J5XCIgKyBcIl9cIiArIGhlbHBlcl9jYW1lbENhc2UobmFtZS50b0xvd2VyQ2FzZSgpKSArIFwiX1wiICsgdWlkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgYWJvdXQubmFtZTtcbiAgICAgICAgICAgIG5hbWUgPSBgWyR7b3duZXIuY29uc3RydWN0b3IubmFtZX0jJHt1aWR9XWA7XG4gICAgICAgICAgICBmaW5nZXJwcmludCA9IFwiakZhY3RvcnlcIiArIFwiX1wiICsgb3duZXIuY29uc3RydWN0b3IubmFtZSArIFwiX1wiICsgdWlkO1xuICAgICAgICB9XG5cbiAgICAgICAgSkZhY3RvcnlPYmplY3QuYXNzaWduKHRoaXMsIC8qKiBAbGVuZHMgSkZhY3RvcnlBYm91dCMgKi8ge1xuICAgICAgICAgICAgdWlkLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGZpbmdlcnByaW50XG4gICAgICAgIH0sIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEUpO1xuXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgYWJvdXQpO1xuXG4gICAgICAgIC8vIC0tLVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlBYm91dC5uYW1lXCIsIHRoaXMubmFtZSlcbiAgICAgICAgICAgICAgICAubWF0Y2hSZWcoL15bXFx3W1xcXSNdKyQvKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlBYm91dC5maW5nZXJwcmludFwiLCB0aGlzLmZpbmdlcnByaW50KVxuICAgICAgICAgICAgICAgIC5tYXRjaFJlZygvXltcXHddKyQvKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCIvKiBqRmFjdG9yeSwgQ29weXJpZ2h0IChjKSAyMDE5LCBTdMOpcGhhbmUgUGxhemlzLCBodHRwczovL2dpdGh1Yi5jb20vamZhY3RvcnktZXMvamZhY3RvcnkvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cblxuaW1wb3J0IHsgSkZBQ1RPUllfREVWIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBqRmFjdG9yeUVycm9yIH0gZnJvbSBcIi4vSkZhY3RvcnlFcnJvclwiO1xuaW1wb3J0IHsgakZhY3RvcnlUcmFjZSB9IGZyb20gXCIuL0pGYWN0b3J5VHJhY2VcIjtcbmltcG9ydCB7IGpRdWVyeSwgaGVscGVyX2lzTmF0aXZlIH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5UHJvbWlzZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBQcm92aWRlcyBhd2FpdGFibGUsIGV4cGlyYWJsZSwgZGVidWdnYWJsZSBwcm9taXNlIGNoYWluc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEV4cGVyaW1lbnRhbCBEcmFmdFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vICNsaW1pdGF0aW9uIyBhc3luYyBmdW5jdGlvbnMgYWx3YXlzIHVzZSB0aGUgbmF0aXZlIFByb21pc2UgY29uc3RydWN0b3IgZXZlbiBpZiBuYXRpdmUgUHJvbWlzZSBjbGFzcyBpcyBvdmVycmlkZGVuXG4vLyAjbGltaXRhdGlvbiMgYXN5bmMgZnVuY3Rpb25zIGFsd2F5cyByZXR1cm5zIGEgbmF0aXZlIFByb21pc2UgZXZlbiBpZiByZXR1cm5pbmcgYW4gZXh0ZW5kZWQgUHJvbWlzZVxuLy8gI2xpbWl0YXRpb24jIGFzeW5jIGZ1bmN0aW9ucyBhbHdheXMgcmV0dXJucyBhIHBlbmRpbmcgUHJvbWlzZSBldmVuIGlmIHJldHVybmluZyBhIHJlc29sdmVkIFByb21pc2VcblxuY29uc3QgbW9kdWxlR2VuSWQgPSAoKSA9PiArK21vZHVsZUdlbklkLnVpZDsgbW9kdWxlR2VuSWQudWlkID0gMDtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeVByb21pc2Vcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlQcm9taXNlIGV4dGVuZHMgUHJvbWlzZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGNvbmZpZywgdHJhY2VTb3VyY2UgfSwgZXhlY3V0b3IpIHtcblxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgW25hbWUsIGNvbmZpZywgZXhlY3V0b3JdID0gW251bGwsIG51bGwsIGFyZ3VtZW50c1swXV1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNoYWluSWQgPSBtb2R1bGVHZW5JZCgpO1xuICAgICAgICBjb25maWcgPSB7IC4uLkpGYWN0b3J5UHJvbWlzZS5ERUZBVUxUX0NPTkZJRywgLi4uY29uZmlnIH07XG4gICAgICAgIG5hbWUgPSBuYW1lIHx8IFwidW5uYW1lZFwiO1xuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwibmFtZVwiLCBuYW1lKVxuICAgICAgICAgICAgICAgIC50eXBlKFN0cmluZywgTnVtYmVyKVxuICAgICAgICAgICAgICAgIC5tYXRjaFJlZygvXlteLiBdKyQvKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiY29uZmlnXCIsIGNvbmZpZykudHlwZVBsYWluT2JqZWN0KCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImV4ZWN1dG9yXCIsIGV4ZWN1dG9yKS50eXBlRnVuY3Rpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNvbHZlO1xuICAgICAgICBsZXQgcmVqZWN0O1xuXG4gICAgICAgIHN1cGVyKChfcmVzb2x2ZSwgX3JlamVjdCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSA9IF9yZXNvbHZlO1xuICAgICAgICAgICAgcmVqZWN0ID0gX3JlamVjdDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2hhaW4gPSBuZXcgSkZhY3RvcnlQcm9taXNlQ2hhaW4odGhpcywgY2hhaW5JZCwgbmFtZSwgY29uZmlnKTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICAkY2hhaW46IHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBjaGFpblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICR0eXBlOiB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IFwicHJvbWlzZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICRpc1NldHRsZWQ6IHtcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAkaXNSZWplY3RlZDoge1xuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJGlzRnVsZmlsbGVkOiB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAkaXNFeHBpcmVkOiB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJGlzQWJvcnRlZDoge1xuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICAgICAgJGRldl9uYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5hbWUgKyBcIltcIiArIGNoYWluSWQgKyBcIjowXVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAkZGV2X3BhdGg6IHtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgSkZhY3RvcnlQcm9taXNlUGF0aCh0aGlzKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJGRldl9wb3NpdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghaGVscGVyX2lzTmF0aXZlKGV4ZWN1dG9yKSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgICAgICAgICAgJGRldl9zb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBleGVjdXRvclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBqRmFjdG9yeVRyYWNlLnRyYWNlci5hdHRhY2hUcmFjZSh0aGlzLCB0cmFjZVNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0cnlBdXRvQ29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuJGNoYWluLmlzUGVuZGluZykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGNoYWluQ29tcGxldGUoXCJhdXRvLWNvbXBsZXRlZFwiKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENhc2Ugb2YgZXJyb3IgaW4gXCJjb21wbGV0ZVwiIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhdGNoIHRoZSBleGNlcHRpb24gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyBhbHJlYWR5IGZ1bGZpbGxlZFxuICAgICAgICAgICAgICAgICAgICAvLyBGdXJ0aGVybW9yZSB0aGlzIGlzc3VlIG11c3QgYmUgaGFuZGxlZCBieSB0aGUgY2hhaW4sIG5vdCB0aGUgY3VycmVudCBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSkgLy8gcHJpbnQgdGhlIGVycm9yIG90aGVyd2lzZSBub3RoaW5nIGhhcHBlbnNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgb25SZXNvbHZlID0gdmFsdWUgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ29uUmVzb2x2ZScsdGhpcy4kZGV2X25hbWUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICAvLyAyLjMuMS4gSWYgcHJvbWlzZSBhbmQgeCByZWZlciB0byB0aGUgc2FtZSBvYmplY3QsIHJlamVjdCBwcm9taXNlIHdpdGggYSBUeXBlRXJyb3IgYXMgdGhlIHJlYXNvbi5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgb25SZWplY3QobmV3IFR5cGVFcnJvcihcIkNoYWluaW5nIGN5Y2xlIGRldGVjdGVkIGZvciBwcm9taXNlIFwiICsgdGhpcy4kZGV2X25hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxldCB0aGVuO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiAodHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIgfHwgdHlwZW9mIHggPT0gXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAyLjMuMy4yLiBJZiByZXRyaWV2aW5nIHRoZSBwcm9wZXJ0eSB4LnRoZW4gcmVzdWx0cyBpbiBhIHRocm93biBleGNlcHRpb24gZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVqZWN0IHByb21pc2Ugd2l0aCBlIGFzIHRoZSByZWFzb24uXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25SZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc29sdmVQcm9taXNlID0gZnVuY3Rpb24oeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4zLjMuMy4xLiBJZi93aGVuIHJlc29sdmVQcm9taXNlIGlzIGNhbGxlZCB3aXRoIGEgdmFsdWUgeSwgcnVuIFtbUmVzb2x2ZV1dKHByb21pc2UsIHkpLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZSh5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlamVjdFByb21pc2UgPSBmdW5jdGlvbihyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyLjMuMy4zLjIuIElmL3doZW4gcmVqZWN0UHJvbWlzZSBpcyBjYWxsZWQgd2l0aCBhIHJlYXNvbiByLCByZWplY3QgcHJvbWlzZSB3aXRoIHIuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZWplY3Qocik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgcmVzb2x2ZVByb21pc2UsIHJlamVjdFByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IC8vIDIuMy4zLjMuNC4gSWYgY2FsbGluZyB0aGVuIHRocm93cyBhbiBleGNlcHRpb24gZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuMy4zLjMuNC4xLiBJZiByZXNvbHZlUHJvbWlzZSBvciByZWplY3RQcm9taXNlIGhhdmUgYmVlbiBjYWxsZWQsIGlnbm9yZSBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4zLjMuMy40LjIuIE90aGVyd2lzZSwgcmVqZWN0IHByb21pc2Ugd2l0aCBlIGFzIHRoZSByZWFzb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGlzUmVqZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaXNGdWxmaWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuJGNoYWluLmVycm9yRXhwaXJlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgb25TZXR0bGUodmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uUmVqZWN0ID0gcmVhc29uID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdvblJlamVjdCcsdGhpcy4kZGV2X25hbWUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRpc1JlamVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLiRpc0Z1bGZpbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJlamVjdChyZWFzb24pO1xuICAgICAgICAgICAgICAgIG9uU2V0dGxlKHJlYXNvbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvblNldHRsZSA9IHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuJHZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLiRpc1NldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy4kY2hhaW4uY2hhaW5NYXAuc2V0KHRoaXMsIHRydWUpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy4kY2hhaW4uY2hhaW5Db25maWcuY2hhaW5BdXRvQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kY2hhaW4uY2hhaW5NYXAuc2l6ZSA9PT0gMSAmJiAhdGhpcy4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB0cnlBdXRvQ29tcGxldGUoKSB3aWxsIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseSAodGhlbigpIGNhbGxiYWNrIGlzIGFzeW5jaHJvbm91cylcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBvZiBwcm9taXNlLnJlc29sdmUocHJpbWl0aXZlKSwgcHJldmVudHMgZm9sbG93aW5nIHRoZW4oKSBmcm9tIGJlaW5nIGltbWVkaWF0ZWx5IGxvY2tlZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRoZW4odHJ5QXV0b0NvbXBsZXRlKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeUF1dG9Db21wbGV0ZSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBfY2hhaW5BdXRvQ29tcGxldGUgPSBjb25maWcuY2hhaW5BdXRvQ29tcGxldGU7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb25maWcsIFwiY2hhaW5BdXRvQ29tcGxldGVcIiwge1xuICAgICAgICAgICAgZ2V0OiAoKSA9PiBfY2hhaW5BdXRvQ29tcGxldGUsXG4gICAgICAgICAgICBzZXQ6IHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoX2NoYWluQXV0b0NvbXBsZXRlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBfY2hhaW5BdXRvQ29tcGxldGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlBdXRvQ29tcGxldGUoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjaGFpbi5jaGFpbk1hcC5zZXQodGhpcywgZmFsc2UpO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgIF9fcmVzb2x2ZV9fOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG9uUmVzb2x2ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9fcmVqZWN0X186IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogb25SZWplY3RcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGV4ZWN1dG9yKG9uUmVzb2x2ZSwgb25SZWplY3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvblJlamVjdChlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgZm9yY2VUeXBlKSB7XG4gICAgICAgIGxldCB3cmFwcGVkRnVsZmlsbGVkO1xuICAgICAgICBsZXQgd3JhcHBlZFJlamVjdGVkO1xuICAgICAgICBsZXQgbmV3UHJvbWlzZTtcbiAgICAgICAgbGV0IGlzTmF0aXZlID0gaGVscGVyX2lzTmF0aXZlKG9uRnVsZmlsbGVkKSAmJiAhb25GdWxmaWxsZWQubmFtZS5zdGFydHNXaXRoKFwiYm91bmQgXCIpO1xuXG4gICAgICAgIGlmIChvbkZ1bGZpbGxlZCAmJiB0eXBlb2Ygb25GdWxmaWxsZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgd3JhcHBlZEZ1bGZpbGxlZCA9IGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICAvLyBcImF3YWl0XCIgbXVzdCBhbHdheXMgcnVuIHRoZSBuYXRpdmUgaGFuZGxlclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcImF3YWl0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU1BFQzogXCJhd2FpdFwiIHRocm93cyB0aGUgZXJyb3JFeHBpcmVkIGlmICRpc0Fib3J0ZWQgaXMgdHJ1ZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3dzIGFzeW5jIGZ1bmN0aW9uIHRvIHRyeSBjYXRjaCB0aGUgYXdhaXRlZCBhYm9ydGVkIHByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gb3IsIGlmIG5vdCBjYXVnaHQsIGJyZWFrcyBhbmQgaWdub3JlIHRoZSByZXN0IG9mIHRoZSBhc3luYyBmdW5jdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Byb21pc2UuJGlzQWJvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uUmVqZWN0ZWQobmV3UHJvbWlzZS4kY2hhaW4uZXJyb3JFeHBpcmVkKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRnVsZmlsbGVkKHIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGRvbid0IGNhbGwgdGhlIGhhbmRsZXIgaWYgZXhwaXJlZFxuICAgICAgICAgICAgICAgIGlmICghbmV3UHJvbWlzZS4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcm9taXNlLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1kZWJ1Z2dlclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25GdWxmaWxsZWQocilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9uUmVqZWN0ZWQgJiYgdHlwZW9mIG9uUmVqZWN0ZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgd3JhcHBlZFJlamVjdGVkID0gZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgICAgIGlmIChuZXdQcm9taXNlLiRpc1NldHRsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGlmICghbmV3UHJvbWlzZS4kaXNTZXR0bGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9uUmVqZWN0ZWQocilcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdHlwZSA9IGZvcmNlVHlwZSB8fCAoaXNOYXRpdmUgPyBcImF3YWl0XCIgOiBvbkZ1bGZpbGxlZCA9PT0gdW5kZWZpbmVkID8gXCJjYXRjaFwiIDogXCJ0aGVuXCIpO1xuICAgICAgICBuZXdQcm9taXNlID0gT2JqZWN0LmFzc2lnbihzdXBlci50aGVuKHdyYXBwZWRGdWxmaWxsZWQsIHdyYXBwZWRSZWplY3RlZCksIHRoaXMpO1xuICAgICAgICBtb2R1bGVHZW5JZC51aWQtLTsgLy8gcmV2ZXJzZSBiZWNhdXNlIG5vdCBhIG5ldyBjaGFpblxuICAgICAgICBuZXdQcm9taXNlLiR0eXBlID0gdHlwZTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBuZXdQcm9taXNlLiRkZXZfcG9zaXRpb24gPSB0aGlzLiRjaGFpbi5jaGFpbk1hcC5zaXplO1xuICAgICAgICAgICAgbGV0IGZOYW1lcyA9IFwiXCI7XG4gICAgICAgICAgICBpZiAob25GdWxmaWxsZWQgJiYgb25GdWxmaWxsZWQubmFtZSkge1xuICAgICAgICAgICAgICAgIGZOYW1lcyArPSBvbkZ1bGZpbGxlZC5uYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob25SZWplY3RlZCAmJiBvblJlamVjdGVkLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBmTmFtZXMgKz0gXCIsXCIgKyBvblJlamVjdGVkLm5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG5ld1Byb21pc2UsIHtcbiAgICAgICAgICAgICAgICAkZGV2X25hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRjaGFpbi5jaGFpbk5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCJbXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgdGhpcy4kY2hhaW4uY2hhaW5JZFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcIjpcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKyB0aGlzLiRkZXZfcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCJdXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCIuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgbmV3UHJvbWlzZS4kdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgKyAoZk5hbWVzID8gXCIoXCIgKyBmTmFtZXMgKyBcIilcIiA6IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwiW1wiXG4gICAgICAgICAgICAgICAgICAgICAgICArIG5ld1Byb21pc2UuJGNoYWluLmNoYWluSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCI6XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgbmV3UHJvbWlzZS4kZGV2X3Bvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwiXVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAkZGV2X3BhdGg6IHsgdmFsdWU6IG5ldyBKRmFjdG9yeVByb21pc2VQYXRoKHRoaXMuJGRldl9wYXRoLCBuZXdQcm9taXNlKSB9LFxuICAgICAgICAgICAgICAgICRkZXZfb25GdWxmaWxsZWQ6IHsgdmFsdWU6IG9uRnVsZmlsbGVkIH0sXG4gICAgICAgICAgICAgICAgJGRldl9vblJlamVjdGVkOiB7IHZhbHVlOiBvblJlamVjdGVkIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3UHJvbWlzZS4kY2hhaW4uY2hhaW5NYXAuc2V0KG5ld1Byb21pc2UsIGZhbHNlKTtcblxuICAgICAgICBpZiAodGhpcy4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAvLyBjYXNlOiBwMC50aGVuKCk7IGNoYWluQWJvcnQoKTsgcDEudGhlbigpXG4gICAgICAgICAgICAvLyA9PiB0aGUgbmV3IHByb21pc2UgbXVzdCBiZSBleHBpcmVkXG4gICAgICAgICAgICAvLyBpZiBwYXJlbnQgcHJvbWlzZSBpcyBqdXN0IGV4cGlyZWQsIGFib3J0IHNpbGVudGx5XG4gICAgICAgICAgICAvLyBpZiBwYXJlbnQgcHJvbWlzZSBpcyBhYm9ydGVkLCBhYm9ydCBleHBsaWNpdGx5XG4gICAgICAgICAgICBKRmFjdG9yeVByb21pc2Uuc2V0RXhwaXJlZChuZXdQcm9taXNlLCB0cnVlLCAhdGhpcy4kaXNBYm9ydGVkLCB0aGlzLiRjaGFpbi5lcnJvckV4cGlyZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld1Byb21pc2VcbiAgICB9XG5cbiAgICAkY2F0Y2hFeHBpcmVkKG9uRXhwaXJlZCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aGVuKHIgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuJGNoYWluLmNoYWluUm9vdC4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9uRXhwaXJlZChyKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gclxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB1bmRlZmluZWQsIFwiJGNhdGNoRXhwaXJlZFwiKVxuICAgIH1cblxuICAgIHN0YXRpYyByZXNvbHZlKG9wdGlvbmFsQXJncywgdmFsdWUpIHtcbiAgICAgICAgLy8gcmVzb2x2ZSgpXG4gICAgICAgIC8vIHJlc29sdmUob3B0aW9uYWxBcmdzLCB2YWx1ZSlcbiAgICAgICAgLy8gcmVzb2x2ZSh2YWx1ZSlcblxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgW29wdGlvbmFsQXJncywgdmFsdWVdID0gW3t9LCBvcHRpb25hbEFyZ3NdXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRpb25hbEFyZ3MpIHtcbiAgICAgICAgICAgIG9wdGlvbmFsQXJncyA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgdGhpcyAmJiBhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvLyBSZXR1cm5zIHRoZSBwcm9taXNlIGFzIGlzIChuYXRpdmUgc3BlYylcbiAgICAgICAgICAgIC8vIGJ1dCBvbmx5IGlmIG5vIG9wdGlvbmFsQXJnc1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMob3B0aW9uYWxBcmdzLCBmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIHJlamVjdChvcHRpb25hbEFyZ3MsIHJlYXNvbikge1xuICAgICAgICAvLyByZWplY3QoKVxuICAgICAgICAvLyByZWplY3Qob3B0aW9uYWxBcmdzLCByZWFzb24pXG4gICAgICAgIC8vIHJlamVjdChyZWFzb24pXG5cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIFtvcHRpb25hbEFyZ3MsIHJlYXNvbl0gPSBbe30sIG9wdGlvbmFsQXJnc11cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbmFsQXJncykge1xuICAgICAgICAgICAgb3B0aW9uYWxBcmdzID0ge31cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMob3B0aW9uYWxBcmdzLCBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHJlamVjdChyZWFzb24pXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICR0b1Byb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcylcbiAgICB9XG5cbiAgICAvLyBDb21wbGV0ZXMgYW4gZXhwaXJlcyB0aGUgd2hvbGUgY2hhaW4gYmVmb3JlIGl0cyBub3JtYWwgZW5kXG4gICAgLy8gU2V0cyB0aGUgJGlzQWJvcnRlZCB0byB0cnVlIG9uIGFib3J0ZWQgcHJvbWlzZXNcbiAgICAkY2hhaW5BYm9ydChyZWFzb24gPSBcIiRjaGFpbkFib3J0KClcIikge1xuICAgICAgICB0aGlzLiRjaGFpbi5jb21wbGV0ZShyZWFzb24sIHRydWUpO1xuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIC8vIE1hbnVhbGx5IGNvbXBsZXRlcyBhbiBleHBpcmVzIHRoZSB3aG9sZSBjaGFpblxuICAgIC8vIE9ubHkgcmVxdWlyZWQgaWYgYXdhaXRpbmcgXCJteVByb21pc2UuJGNoYWluXCJcbiAgICAvLyB3aGVuIHRoZSBhdXRvY29tcGxldGUgd2F0Y2hlciBpcyBub3QgdXNlZFxuICAgICRjaGFpbkNvbXBsZXRlKHJlYXNvbiA9IFwiJGNoYWluQ29tcGxldGUoKVwiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLiRjaGFpbi5jb21wbGV0ZShyZWFzb24sIGZhbHNlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogZS4kZGF0YS50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJUcnlpbmcgdG8gY29tcGxldGUgYSBwZW5kaW5nIGNoYWluLiBVc2UgJGNoYWluQWJvcnQoKSBpZiB5b3Ugd2FudCB0byBzdG9wIGl0LlwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgICRjaGFpbkF1dG9Db21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy4kY2hhaW4uY2hhaW5Db25maWcuY2hhaW5BdXRvQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHN0YXRpYyBzZXRFeHBpcmVkKHByb21pc2UsIGFib3J0LCBzaWxlbnQsIHJlYXNvbikge1xuICAgICAgICBpZiAoIXByb21pc2UuJGlzU2V0dGxlZCkge1xuICAgICAgICAgICAgaWYgKGFib3J0KSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS4kaXNBYm9ydGVkID0gIXNpbGVudDtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9fcmVzb2x2ZV9fKHJlYXNvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfQ0FMTCh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcInByb21pc2UgbXVzdCBiZSBhYm9ydGVkIG9yIHNldHRsZWQgYmVmb3JlIHNldHRpbmcgaXQgdG8gZXhwaXJlZC5cIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByb21pc2UuJGlzRXhwaXJlZCA9IHRydWU7XG4gICAgfVxufVxuXG5KRmFjdG9yeVByb21pc2UuREVGQVVMVF9DT05GSUcgPSB7XG4gICAgY2hhaW5BdXRvQ29tcGxldGU6IGZhbHNlXG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5UHJvbWlzZUNoYWluXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5UHJvbWlzZUNoYWluIHtcblxuICAgIGNvbnN0cnVjdG9yKGNoYWluUm9vdCwgY2hhaW5JZCwgY2hhaW5OYW1lLCBjaGFpbkNvbmZpZykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBjaGFpbkNvbmZpZzogeyB2YWx1ZTogY2hhaW5Db25maWcgfSxcbiAgICAgICAgICAgIGNoYWluUm9vdDogeyB2YWx1ZTogY2hhaW5Sb290IH0sXG4gICAgICAgICAgICBjaGFpbklkOiB7IHZhbHVlOiBjaGFpbklkIH0sXG4gICAgICAgICAgICBjaGFpbk5hbWU6IHsgdmFsdWU6IGNoYWluTmFtZSB9LFxuICAgICAgICAgICAgY2hhaW5NYXA6IHsgdmFsdWU6IG5ldyBNYXAgfSxcbiAgICAgICAgICAgIGlzQ29tcGxldGVkOiB7IHZhbHVlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlIH0sXG4gICAgICAgICAgICBkYXRhOiB7IHZhbHVlOiB7fSB9LFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXBcbiAgICAgICAgICAgIF9fZGVmZXJyZWRfXzogeyB2YWx1ZTogalF1ZXJ5LkRlZmVycmVkKCkgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldCBpc1BlbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY2hhaW5NYXAudmFsdWVzKCkpLmluY2x1ZGVzKGZhbHNlKVxuICAgIH1cblxuICAgIHRoZW4ob25SZXNvbHZlKSB7IC8vID0+IFwiYXdhaXQgY2hhaW5cIlxuICAgICAgICB0aGlzLl9fZGVmZXJyZWRfXy5kb25lKG9uUmVzb2x2ZSk7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgY29tcGxldGUocmVhc29uID0gXCJjaGFpbi5jb21wbGV0ZSgpXCIsIGFib3J0ICkge1xuICAgICAgICBsZXQgY2hhaW5Sb290ID0gdGhpcy5jaGFpblJvb3Q7XG4gICAgICAgIGlmICghY2hhaW5Sb290LiRpc0V4cGlyZWQpIHtcbiAgICAgICAgICAgIGxldCBlcnJvckV4cGlyZWQgPSBjaGFpblJvb3QuJGNoYWluLmVycm9yRXhwaXJlZCA9IG5ldyBqRmFjdG9yeUVycm9yLlBST01JU0VfRVhQSVJFRCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBjaGFpblJvb3QsXG4gICAgICAgICAgICAgICAgcmVhc29uXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IG1hcCA9IHRoaXMuY2hhaW5NYXA7XG4gICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIG1hcC5rZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBKRmFjdG9yeVByb21pc2Uuc2V0RXhwaXJlZChpdGVtLCBhYm9ydCwgZmFsc2UsIGVycm9yRXhwaXJlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzQ29tcGxldGVkXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgICAgICAgICB0aGlzLl9fZGVmZXJyZWRfXy5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlQcm9taXNlUGF0aFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeVByb21pc2VQYXRoIGV4dGVuZHMgQXJyYXkge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGZvciAobGV0IGkgb2YgYXJndW1lbnRzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHVzaCguLi5pKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2goaSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBwcmludGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcCgodiwgaSkgPT4gaSA9PT0gMCA/IHYuJGRldl9uYW1lIDogdi4kZGV2X25hbWUuc3BsaXQoXCIuXCIpWzFdKS5qb2luKFwiLlwiKVxuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge3JldHVybiB0aGlzLnByaW50YWJsZX1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKRmFjdG9yeVByb21pc2VTeW5jXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFByb21pc2UgdGhhdCB0cmllcyB0byByZXNvbHZlIHN5bmNocm9ub3VzbHlcbi8vIGFsbG93aW5nIHN5bmNocm9ub3VzIHN0YXRlcyBhbmQgcmVzdWx0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5UHJvbWlzZVN5bmMgZXh0ZW5kcyBQcm9taXNlIHtcblxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yKSB7XG5cbiAgICAgICAgbGV0IHN0YXRlcyA9IHtcbiAgICAgICAgICAgICRpc1NldHRsZWQ6IGZhbHNlLCAvLyB0cnVlID0gbm90IHBlbmRpbmdcbiAgICAgICAgICAgICRpc1JlamVjdGVkOiBudWxsLCAvLyB0cnVlID0gbm90IHBlbmRpbmcgKyByZWplY3RlZFxuICAgICAgICAgICAgJHZhbHVlOiB1bmRlZmluZWRcbiAgICAgICAgfTtcblxuICAgICAgICBzdXBlcigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgbGV0IG9uUmVzb2x2ZSA9IHIgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUocilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKG9uUmVzb2x2ZSwgb25SZWplY3QpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJGlzU2V0dGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJGlzUmVqZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlcy4kdmFsdWUgPSByO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IG9uUmVqZWN0ID0gciA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgcmVzb2x2ZSBwZW5kaW5nIHByb21pc2VcbiAgICAgICAgICAgICAgICAvLyB0byBrZWVwIG5hdGl2ZSBzcGVjaWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzLiRpc1NldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJGlzUmVqZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuJHZhbHVlID0gcjtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBleGVjdXRvcihvblJlc29sdmUsIG9uUmVqZWN0KVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIG9uUmVqZWN0KGUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgc3RhdGVzKTtcbiAgICAgICAgc3RhdGVzID0gdGhpc1xuICAgIH1cblxuICAgIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcblxuICAgICAgICBpZiAodGhpcy4kaXNTZXR0bGVkKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLiR2YWx1ZTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kaXNSZWplY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjYW5jZWwgYW55IHVuY2F1Z2h0IHJlamVjdGVkIHJlc3VsdCBmcm9tIHRoaXMgcHJvbWlzZVxuICAgICAgICAgICAgICAgICAgICAvLyBiZWZvcmUgcmV0dXJuaW5nIHRoZSBuZXcgb25lXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyLnRoZW4odW5kZWZpbmVkLCAoKSA9PiBudWxsKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob25SZWplY3RlZCAmJiB0eXBlb2Ygb25SZWplY3RlZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG9uUmVqZWN0ZWQodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSkZhY3RvcnlQcm9taXNlU3luYy5yZWplY3QodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAob25GdWxmaWxsZWQgJiYgdHlwZW9mIG9uRnVsZmlsbGVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gb25GdWxmaWxsZWQodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpGYWN0b3J5UHJvbWlzZVN5bmMucmVqZWN0KGUpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUodmFsdWUpXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSkZhY3RvcnlQcm9taXNlU3luYykge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBKRmFjdG9yeVByb21pc2VTeW5jKHZhbHVlLnRoZW4uYmluZCh2YWx1ZSkpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSkZhY3RvcnlQcm9taXNlU3luYyhyID0+IHIodmFsdWUpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRkFDVE9SWV9ERVYgfSBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcbmltcG9ydCB7IEpGYWN0b3J5RXhwZWN0IH0gZnJvbSBcIi4vSkZhY3RvcnlFeHBlY3RcIjtcbmltcG9ydCB7IEpGYWN0b3J5UHJvbWlzZVN5bmMgfSBmcm9tIFwiLi9KRmFjdG9yeVByb21pc2VcIjtcbmltcG9ydCB7IEpGYWN0b3J5RnVuY3Rpb25Db21wb3NlciB9IGZyb20gXCIuL0pGYWN0b3J5RnVuY3Rpb25cIjtcbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBqUXVlcnksIGhlbHBlcl9pc1BsYWluT2JqZWN0IH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5RXZlbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGh0dHBzOi8vbGVhcm4uanF1ZXJ5LmNvbS9ldmVudHMvZXZlbnQtZXh0ZW5zaW9ucy9cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RhdHVzOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5RXZlbnRzIHtcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIGpRdWVyeSBkb2Vzbid0IGhhbmRsZSBhc3luYyB0cmlnZ2VyIHNvIGpGYWN0b3J5IHByb3ZpZGVzIHRoZSBmb2xsb3dpbmcgOlxuICAgIC8vXG4gICAgLy8gLSB0cmlnZ2VyUGFyYWxsZWwoKTogdGhlIHRyaWdnZXIgZnVuY3Rpb24gcmV0dXJucyBhIFByb21pc2UuYWxsKHBlbmRpbmdBcnJheSlcbiAgICAvLyAgIHdoZXJlIHBlbmRpbmdBcnJheSBpcyBmaWxsZWQgYnkgYW55IGFzeW5jIHJ1bm5pbmcgaGFuZGxlci5cbiAgICAvLyAgIE5vdCByZWNvbW1lbmRlZCBiZWNhdXNlIGl0J3MgdGhlIGJlc3Qgd2F5IHRvIHByb2R1Y2UgdW5wcmVkaWN0YWJsZSBhc3luYyBzaWRlIGVmZmVjdHNcbiAgICAvL1xuICAgIC8vIC0gdHJpZ2dlclNlcmllcygpOiBoYW5kbGVycyBhcmUgcnVuIGluIGEgc3luY2hyb25vdXMgb3JkZXIsIHdpdGggXCJhd2FpdFwiXG4gICAgLy8gICBUaGlzIGF2b2lkcyB1bnByZWRpY3RhYmxlIGFzeW5jIHJhY2UgY29uZGl0aW9uXG4gICAgLy9cbiAgICAvLyAgQm90aCByZXR1cm5zIGEgSkZhY3RvcnlQcm9taXNlU3luYyB0aGF0IGNvbnRhaW5zIHRoZSBqRmFjdG9yeV9mdWxmaWxsZWQgZmxhZ1xuICAgIC8vICBUaGlzIGZsYWcgaXMgaW1tZWRpYXRlbHkgKG5vdCBhc3luYykgc2V0IHRvIHRydWUgaWYgbm8gYXN5bmMgaGFuZGxlciBpcyBzdGlsbCBwZW5kaW5nXG4gICAgLy9cbiAgICAvLyA9PiBoYW5kbGVycyBhcmUgd3JhcHBlZC4gT3JpZ2luYWxIYW5kbGVycyBhbmQgd3JhcHBlZEhhbmRsZXJzIHJlbGF0aW9ucyBhcmUgc3RvcmVkIGluIGEgV2Vha01hcFxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywgLyoqIEBsZW5kcyBKRmFjdG9yeUV2ZW50cyMgKi8ge1xuICAgICAgICAgICAgcmVnaXN0cnk6IHsgdmFsdWU6IGpRdWVyeShPYmplY3QuY3JlYXRlKG51bGwpKSB9LFxuICAgICAgICAgICAgaGFuZGxlcnM6IHsgdmFsdWU6IG5ldyBXZWFrTWFwIH0sXG4gICAgICAgICAgICBvbkxpc3RlbmVyVXBkYXRlOiB7IHZhbHVlOiBudWxsLCB3cml0YWJsZTogdHJ1ZSB9LFxuICAgICAgICAgICAgb25PYnNlcnZlclVwZGF0ZTogeyB2YWx1ZTogbnVsbCwgd3JpdGFibGU6IHRydWUgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbih7IGV2ZW50cywgaGFuZGxlciwgdGFyZ2V0LCBzZWxlY3RvciB9KSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlU2VsZWN0b3IoZXZlbnRzKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub24oe2hhbmRsZXJ9KVwiLCBoYW5kbGVyKS50eXBlRnVuY3Rpb24oKTtcbiAgICAgICAgICAgIHRhcmdldCAmJiBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLm9uKHt0YXJnZXR9KVwiLCB0YXJnZXQpLnR5cGUoU3RyaW5nLCBqUXVlcnksIEhUTUxFbGVtZW50KTtcbiAgICAgICAgICAgIHNlbGVjdG9yICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub24oe3NlbGVjdG9yfSlcIiwgdGFyZ2V0KS50eXBlU3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgd3JhcHBlZEhhbmRsZXIgPSB0aGlzLmhhbmRsZXJzLmdldChoYW5kbGVyKTtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgLy8gZG9uJ3QgbmVlZCB0byB3cmFwIERPTSBoYW5kbGVyc1xuICAgICAgICAgICAgaWYgKCF3cmFwcGVkSGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGhhbmRsZXIsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRhcmdldCkub24oZXZlbnRzLCBzZWxlY3RvciwgaGFuZGxlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGpRdWVyeSh0YXJnZXQpLm9uKGV2ZW50cywgaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vbkxpc3RlbmVyVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkxpc3RlbmVyVXBkYXRlKGFyZ3VtZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghd3JhcHBlZEhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChoYW5kbGVyLCB3cmFwcGVkSGFuZGxlciA9IGZ1bmN0aW9uKGUsIHsgZGF0YSwgc3RhY2sgfSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKCgpID0+IGhhbmRsZXIoZSwgZGF0YSkpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgd3JhcHBlZEhhbmRsZXIub3JpZ2luYWxIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVnaXN0cnkub24oZXZlbnRzLCB3cmFwcGVkSGFuZGxlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5vbk9ic2VydmVyVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbk9ic2VydmVyVXBkYXRlKGFyZ3VtZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9mZih7IGV2ZW50cywgaGFuZGxlciwgdGFyZ2V0LCBzZWxlY3RvciB9KSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkgeyAvLyBvZmYoKSBpcyB2YWxpZFxuICAgICAgICAgICAgICAgIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlU2VsZWN0b3IoZXZlbnRzKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVyICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub2ZmKHtoYW5kbGVyfSlcIiwgaGFuZGxlcikudHlwZUZ1bmN0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMub2ZmKHt0YXJnZXR9KVwiLCB0YXJnZXQpLnR5cGUoU3RyaW5nLCBqUXVlcnksIEhUTUxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBzZWxlY3RvciAmJiBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLm9mZih7c2VsZWN0b3J9KVwiLCB0YXJnZXQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIGpRdWVyeSh0YXJnZXQpLm9mZihldmVudHMsIHNlbGVjdG9yLCBoYW5kbGVyKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkodGFyZ2V0KS5vZmYoZXZlbnRzLCBoYW5kbGVyKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgalF1ZXJ5KFwiKlwiKS5vZmYoZXZlbnRzLCBoYW5kbGVyKTtcblxuICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gdGhpcy5oYW5kbGVycy5nZXQoaGFuZGxlcik7XG4gICAgICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcImhhbmRsZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJub3QgcmVnaXN0ZXJlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2l2ZW46IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdHJ5Lm9mZihldmVudHMsIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9uT2JzZXJ2ZXJVcGRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMub25PYnNlcnZlclVwZGF0ZShhcmd1bWVudHMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub25MaXN0ZW5lclVwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5vbkxpc3RlbmVyVXBkYXRlKGFyZ3VtZW50cylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJ1biBpbiBwYXJhbGxlbC4gRG9uJ3QgXCJhd2FpdFwiIGZvciBhc3luYyBoYW5kbGVyc1xuICAgICAqIE9idmlvdXNseSBwcm9kdWNlcyB1bnByZWRpY3RhYmxlIHJhY2UgY29uZGl0aW9uc1xuICAgICAqL1xuICAgIHRyaWdnZXJQYXJhbGxlbCh7IGV2ZW50cywgZGF0YSwgdGFyZ2V0IH0pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvcihldmVudHMpO1xuICAgICAgICAgICAgdGFyZ2V0XG4gICAgICAgICAgICAgICAgJiYgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUV2ZW50cy50cmlnZ2VyUGFyYWxsZWwoe3RhcmdldH0pXCIsIHRhcmdldCkudHlwZShTdHJpbmcsIGpRdWVyeSwgSFRNTEVsZW1lbnQpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgICAgICBjb25zdCBwZW5kaW5nID0gW107XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cy5zcGxpdChcIiBcIik7XG5cbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgZm9yIChsZXQgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRhcmdldCkudHJpZ2dlcihldmVudCwgeyBkYXRhLCBzdGFjayB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGV2ZW50IG9mIGV2ZW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0cnkudHJpZ2dlckhhbmRsZXIoZXZlbnQsIHsgZGF0YSwgc3RhY2sgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGhhbmRsZXIgb2Ygc3RhY2spIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBoYW5kbGVyKCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZVxuICAgICAgICAgICAgICAgICYmICFyZXN1bHQuJGlzU2V0dGxlZCAvLyBkb24ndCBuZWVkIHRvIGF3YWl0XG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2gocmVzdWx0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBlbmRpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocGVuZGluZylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBKRmFjdG9yeVByb21pc2VTeW5jLnJlc29sdmUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUnVuIGluIGRlY2xhcmF0aW9uIG9yZGVyIHN5bmNocm9ub3VzbHkuIFdpbGwgXCJhd2FpdFwiIGZvciBhc3luYyBoYW5kbGVyc1xuICAgICAqIFByZXZlbnRzIHVucHJlZGljdGFibGUgcmFjZSBjb25kaXRpb25zXG4gICAgICovXG4gICAgdHJpZ2dlclNlcmllcyh7IGV2ZW50cywgZGF0YSwgdGFyZ2V0IH0pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvcihldmVudHMpO1xuICAgICAgICAgICAgdGFyZ2V0ICYmIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMudHJpZ2dlclNlcmllcyh7dGFyZ2V0fSlcIiwgdGFyZ2V0KS50eXBlKFN0cmluZywgalF1ZXJ5LCBIVE1MRWxlbWVudClcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgSkZhY3RvcnlQcm9taXNlU3luYyhhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgICAgICBldmVudHMgPSBldmVudHMuc3BsaXQoXCIgXCIpO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0YXJnZXQpLnRyaWdnZXIoZXZlbnQsIHsgZGF0YSwgc3RhY2sgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBldmVudCBvZiBldmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS50cmlnZ2VySGFuZGxlcihldmVudCwgeyBkYXRhLCBzdGFjayB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaGFuZGxlciBvZiBzdGFjaykge1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBoYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgJiYgIXJlc3VsdC4kaXNTZXR0bGVkIC8vIGRvbid0IG5lZWQgdG8gYXdhaXRcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlFdmVudHNNYW5hZ2VyIGV4dGVuZHMgSkZhY3RvcnlFdmVudHMge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBwYXJlbnQ6IHsgdmFsdWU6IHBhcmVudCB9LFxuICAgICAgICAgICAgYWZmaWxpYXRlUnVsZXM6IHsgdmFsdWU6IG5ldyBKRmFjdG9yeUZ1bmN0aW9uQ29tcG9zZXIoKS5jb21wb3NlKCkgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZmZpbGlhdGVBZGRSdWxlKEpGYWN0b3J5RXZlbnRzTWFuYWdlci5ydWxlX25hbWVzcGFjZSlcbiAgICB9XG5cbiAgICBhZmZpbGlhdGUoZXZlbnRzID0gXCJcIiwgbmFtZXNwYWNlcyA9IFwiXCIsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHBhcnNlciA9IG5ldyBKRmFjdG9yeUV2ZW50U2VsZWN0b3JQYXJzZXIoZXZlbnRzKTtcbiAgICAgICAgZm9yIChsZXQgcGFyc2VkRXZlbnQgb2YgcGFyc2VyLmV2ZW50cykge1xuICAgICAgICAgICAgdGhpcy5hZmZpbGlhdGVSdWxlcyhwYXJzZWRFdmVudCwgbmFtZXNwYWNlcywgb3B0aW9ucylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VyLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgYWZmaWxpYXRlQWRkUnVsZShoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuYWZmaWxpYXRlUnVsZXMuY29tcG9zZXIubGFzdChoYW5kbGVyKVxuICAgIH1cblxuICAgIHN0YXRpYyBydWxlX25hbWVzcGFjZShjb250ZXh0LCBwYXJzZWRFdmVudCwgbmFtZXNwYWNlcykge1xuICAgICAgICBuYW1lc3BhY2VzID0gbmFtZXNwYWNlcy5zcGxpdChcIi5cIik7XG4gICAgICAgIGZvciAobGV0IG5hbWVzcGFjZSBvZiBuYW1lc3BhY2VzKSB7XG4gICAgICAgICAgICBuYW1lc3BhY2UgJiYgcGFyc2VkRXZlbnQuYWRkTmFtZXNwYWNlKG5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbihldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gT2JzZXJ2ZXJzOlxuICAgICAgICAvLyBldmVudHMsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyLCBvcHRpb25zXG5cbiAgICAgICAgLy8gRE9NIEV2ZW50czpcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXIsIG9wdGlvbnNcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLFxuICAgICAgICAvLyBldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnNcblxuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAvLyBldmVudHMsIGhhbmRsZXJcbiAgICAgICAgICAgICAgICBbaGFuZGxlciwgdGFyZ2V0XSA9IFt0YXJnZXQvKiwgdW5kZWZpbmVkKi9dO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzJdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgW2hhbmRsZXIsIHNlbGVjdG9yXSA9IFtzZWxlY3Rvci8qLCB1bmRlZmluZWQqL107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyLCBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIFtoYW5kbGVyLCBvcHRpb25zLCB0YXJnZXQsIHNlbGVjdG9yXSA9IFt0YXJnZXQsIHNlbGVjdG9yLyosIHVuZGVmaW5lZCwgdW5kZWZpbmVkKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1szXSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldCwgaGFuZGxlciwgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBbb3B0aW9ucywgaGFuZGxlciwgc2VsZWN0b3JdID0gW2hhbmRsZXIsIHNlbGVjdG9yLyosIHVuZGVmaW5lZCovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBldmVudHMgPSB0aGlzLmFmZmlsaWF0ZShldmVudHMsIHRoaXMucGFyZW50LiQuYWJvdXQuZmluZ2VycHJpbnQsIG9wdGlvbnMpO1xuXG4gICAgICAgIHRhcmdldCA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIHN1cGVyLm9uKHsgZXZlbnRzLCBoYW5kbGVyIH0pIDpcbiAgICAgICAgICAgIHN1cGVyLm9uKHsgZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLyosIG9wdGlvbnMqLyB9KVxuICAgIH1cblxuICAgIG9mZihldmVudHMsIHRhcmdldCwgc2VsZWN0b3IsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQm90aDpcbiAgICAgICAgLy8gZXZlbnRzIChjYW4gYmUgbmFtZXNwYWNlcylcbiAgICAgICAgLy8gZXZlbnRzLCBvcHRpb25zXG4gICAgICAgIC8vIG9wdGlvbnMgKGNhbiBiZSByZW1vdmFsKVxuXG4gICAgICAgIC8vIE9ic2VydmVyOlxuICAgICAgICAvLyBldmVudHMsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyLCBvcHRpb25zXG5cbiAgICAgICAgLy8gRE9NIEV2ZW50czpcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXJcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXIsIG9wdGlvbnNcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yXG4gICAgICAgIC8vIGV2ZW50cywgdGFyZ2V0LCBzZWxlY3RvciwgaGFuZGxlcixcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLCBvcHRpb25zXG5cbiAgICAgICAgY29uc3QgYXJnTCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIHN3aXRjaCAoYXJnTCkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgW29wdGlvbnMsIGV2ZW50c10gPSBbZXZlbnRzLyosIHVuZGVmaW5lZCovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZWxzZSBldmVudHMgKGNhbiBuYW1lc3BhY2VzKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzFdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgIFtoYW5kbGVyLCB0YXJnZXRdID0gW3RhcmdldC8qLCB1bmRlZmluZWQqL107XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoZWxwZXJfaXNQbGFpbk9iamVjdChhcmd1bWVudHNbMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cywgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBbb3B0aW9ucywgdGFyZ2V0XSA9IFt0YXJnZXQvKiwgdW5kZWZpbmVkKi9dXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVsc2UgZXZlbnRzLCB0YXJnZXRcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1syXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cywgdGFyZ2V0LCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgIFtoYW5kbGVyLCBzZWxlY3Rvcl0gPSBbc2VsZWN0b3IvKiwgdW5kZWZpbmVkKi9dO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50cywgaGFuZGxlciwgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBbaGFuZGxlciwgb3B0aW9ucywgdGFyZ2V0LCBzZWxlY3Rvcl0gPSBbdGFyZ2V0LCBzZWxlY3Rvci8qLCB1bmRlZmluZWQsIHVuZGVmaW5lZCovXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldCwgc2VsZWN0b3JcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbM10gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGhhbmRsZXIsIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgW29wdGlvbnMsIGhhbmRsZXIsIHNlbGVjdG9yXSA9IFtoYW5kbGVyLCBzZWxlY3Rvci8qLCB1bmRlZmluZWQqL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnRzID0gdGhpcy5hZmZpbGlhdGUoZXZlbnRzLCB0aGlzLnBhcmVudC4kLmFib3V0LmZpbmdlcnByaW50LCBvcHRpb25zKTtcblxuICAgICAgICBpZiAoYXJnTCA8IDIpIHtcbiAgICAgICAgICAgIHN1cGVyLm9mZih7IGV2ZW50cyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldCA/XG4gICAgICAgICAgICAgICAgc3VwZXIub2ZmKHsgZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLyosIG9wdGlvbnMqLyB9KSA6XG4gICAgICAgICAgICAgICAgc3VwZXIub2ZmKHsgZXZlbnRzLCBoYW5kbGVyIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0cmlnZ2VyKGV2ZW50cywgdGFyZ2V0LCBkYXRhKSB7XG4gICAgICAgIC8vIGV2ZW50c1xuICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGRhdGFcblxuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJvYmplY3RcIiAmJiAhdGFyZ2V0LmpxdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgW2RhdGEsIHRhcmdldF0gPSBbdGFyZ2V0XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0ID9cbiAgICAgICAgICAgIHN1cGVyLnRyaWdnZXJTZXJpZXMoeyBldmVudHMsIHRhcmdldCwgZGF0YSB9KSA6XG4gICAgICAgICAgICBzdXBlci50cmlnZ2VyU2VyaWVzKHsgZXZlbnRzLCBkYXRhIH0pXG4gICAgfVxuXG4gICAgdHJpZ2dlclBhcmFsbGVsKGV2ZW50cywgdGFyZ2V0LCBkYXRhKSB7XG4gICAgICAgIC8vIGV2ZW50c1xuICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgLy8gZXZlbnRzLCB0YXJnZXQsIGRhdGFcblxuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJvYmplY3RcIiAmJiAhdGFyZ2V0LmpxdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMsIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgW2RhdGEsIHRhcmdldF0gPSBbdGFyZ2V0XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBldmVudHMsIHRhcmdldFxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0ID9cbiAgICAgICAgICAgIHN1cGVyLnRyaWdnZXJQYXJhbGxlbCh7IGV2ZW50cywgdGFyZ2V0LCBkYXRhIH0pIDpcbiAgICAgICAgICAgIHN1cGVyLnRyaWdnZXJQYXJhbGxlbCh7IGV2ZW50cywgZGF0YSB9KVxuICAgIH1cblxuICAgIC8vICN1bm9wdGltaXplZCBkcmFmdCNcbiAgICAvLyBJdCdzIG5vdCBlYXN5IHRvIGtlZXAgdGhpcyBsaXN0IHVwIHRvIGRhdGUgYmVjYXVzZTpcbiAgICAvLyAtIGxpc3RlbmVycyBjYW4gYmUgcmVtb3ZlZCBieSBleHRlcm5hbCBkb20gbXV0YXRpb25zXG4gICAgLy8gLSBsaXN0ZW5lcnMgY2FuIGJlIGRlbGVnYXRlZFxuICAgIC8vIC0gb2ZmKCkgbWV0aG9kIGNhbiByZW1vdmUgbGlzdGVuZXJzIGdsb2JhbGx5XG4gICAgZ2V0RG9tTGlzdGVuZXJzKG5hbWVzcGFjZSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGxldCBlbG0gb2YgalF1ZXJ5KFwiKlwiKSkge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBqUXVlcnkuX2RhdGEoZWxtLCBcImV2ZW50c1wiKTtcbiAgICAgICAgICAgIGlmIChkYXRhKSB7Ly8gZGF0YSA9IHtjbGljazogW3t9XSwgLi4uIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlbnRyaWVzIG9mIE9iamVjdC52YWx1ZXMoZGF0YSkpIHsvLyBlbnRyaWVzID0gW3t0eXBlOi4uLn1dXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIGVudHJpZXMpIHsvLyBlbnRyeSA9IHt0eXBlLCBuYW1lc3BhY2UsIGhhbmRsZXIsIC4uLn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJzZXIgPSBuZXcgSkZhY3RvcnlFdmVudFNlbGVjdG9yKGVudHJ5Lm5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLmhhc05hbWVzcGFjZShuYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZXMgPSByZXN1bHQuZ2V0KGVsbSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXQoZWxtLCB0eXBlcyA9IHt9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2VudHJ5LnR5cGVdIHx8ICh0eXBlc1tlbnRyeS50eXBlXSA9IFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IGVudHJ5LnNlbGVjdG9yIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IGVudHJ5LmhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogZW50cnkubmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cblxuICAgIC8vICN1bm9wdGltaXplZCBkcmFmdCNcbiAgICBnZXRPYnNlcnZlcnMoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgTWFwKCk7XG4gICAgICAgIGxldCBldmVudHMgPSB0aGlzLnJlZ2lzdHJ5Ll9ldmVudHM7XG5cbiAgICAgICAgaWYgKCFldmVudHMpIHtcbiAgICAgICAgICAgIGxldCByZWdpc3RyeSA9IE9iamVjdC52YWx1ZXModGhpcy5yZWdpc3RyeSlbMF07XG4gICAgICAgICAgICBsZXQgZXhwYW5kbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHJlZ2lzdHJ5KS5maW5kKGsgPT4gay5pbmRleE9mKFwialF1ZXJ5XCIpID09PSAwKTtcbiAgICAgICAgICAgIGlmIChyZWdpc3RyeSAmJiBleHBhbmRvKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzID0gdGhpcy5yZWdpc3RyeS5fZXZlbnRzID0gcmVnaXN0cnlbZXhwYW5kb10uZXZlbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50cykge1xuICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhldmVudHMpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGV2ZW50ID0gcmVzdWx0LmdldChrZXkpO1xuICAgICAgICAgICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldChrZXksIGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZXZlbnRUeXBlRW50cnkgb2YgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogZXZlbnRUeXBlRW50cnkuaGFuZGxlci5vcmlnaW5hbEhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IGV2ZW50VHlwZUVudHJ5Lm5hbWVzcGFjZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeUV2ZW50U2VsZWN0b3JQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9ycykge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV2ZW50cy52YWxpZGF0ZVNlbGVjdG9yKHNlbGVjdG9ycyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIEFycmF5PEpGYWN0b3J5RXZlbnRTZWxlY3Rvcj5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXZlbnRzID0gc2VsZWN0b3JzLnNwbGl0KFwiIFwiKS5tYXAoc2VsZWN0b3IgPT4gbmV3IEpGYWN0b3J5RXZlbnRTZWxlY3RvcihzZWxlY3RvcikpXG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCBzID0gW107XG4gICAgICAgIGZvciAobGV0IGV2ZW50IG9mIHRoaXMuZXZlbnRzKSB7XG4gICAgICAgICAgICBzLnB1c2goZXZlbnQudG9TdHJpbmcoKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcy5qb2luKFwiIFwiKVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5RXZlbnRTZWxlY3RvciB7XG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgbGV0IFtldmVudCwgLi4ubmFtZXNwYWNlXSA9IHNlbGVjdG9yLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgdGhpcy5ldmVudCA9IGV2ZW50O1xuICAgICAgICB0aGlzLm5hbWVzcGFjZSA9IG5ldyBTZXQobmFtZXNwYWNlKVxuICAgIH1cblxuICAgIC8qKiBAcmV0dXJuIHtCb29sZWFufFN0cmluZ30gKi9cbiAgICBoYXNOYW1lc3BhY2UobmFtZXNwYWNlcykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobmFtZXNwYWNlcykpIHtcbiAgICAgICAgICAgIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc11cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBuYW1lc3BhY2Ugb2YgbmFtZXNwYWNlcykge1xuICAgICAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgICAgIGlmICghL15bXFx3Ol0rJC8udGVzdChuYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIm5hbWVzcGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIm11c3QgYmUgYWxwaGFudW1lcmljLCB1bmRlcnNjb3JlIGFuZCBjb2xvbiBjaGFyYWN0ZXJzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBnaXZlbjogbmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5hbWVzcGFjZSAmJiB0aGlzLm5hbWVzcGFjZS5oYXMobmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lc3BhY2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBhZGROYW1lc3BhY2UobmFtZXNwYWNlKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIGlmICghL15bXFx3Ol0rJC8udGVzdChuYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuSU5WQUxJRF9WQUxVRSh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJuYW1lc3BhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIm11c3QgYmUgYWxwaGFudW1lcmljLCB1bmRlcnNjb3JlIGFuZCBjb2xvbiBjaGFyYWN0ZXJzXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBuYW1lc3BhY2VcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZXNwYWNlLmFkZChuYW1lc3BhY2UpXG4gICAgfVxuXG4gICAgZGVsZXRlTmFtZXNwYWNlKG5hbWVzcGFjZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBpZiAoIS9eW1xcdzpdKyQvLnRlc3QobmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwibmFtZXNwYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJtdXN0IGJlIGFscGhhbnVtZXJpYywgdW5kZXJzY29yZSBhbmQgY29sb24gY2hhcmFjdGVyc1wiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogbmFtZXNwYWNlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWVzcGFjZS5kZWxldGUobmFtZXNwYWNlKVxuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lc3BhY2Uuc2l6ZSA/IHRoaXMuZXZlbnQgKyBcIi5cIiArIEFycmF5LmZyb20odGhpcy5uYW1lc3BhY2UudmFsdWVzKCkpLmpvaW4oXCIuXCIpIDogdGhpcy5ldmVudDtcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5pZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvciA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlFdmVudHMudmFsaWRhdGVTZWxlY3RvcihzZWxlY3RvcilcIiwgc2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgLm5vdFVuZGVmaW5lZCgpXG4gICAgICAgICAgICAgICAgLnZhbGlkU3BhY2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBbZXZlbnQsIG5zXSBvZiBzZWxlY3Rvci5zcGxpdChcIiBcIilcbiAgICAgICAgICAgIC5tYXAodiA9PiB2LnNwbGl0KFwiLlwiKSlcbiAgICAgICAgICAgIC5tYXAodiA9PiBbdi5zaGlmdCgpLCB2LmpvaW4oXCIuXCIpXSkpIHtcbiAgICAgICAgICAgIGV2ZW50ICYmIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgbnMgJiYgSkZhY3RvcnlFdmVudHMudmFsaWRhdGVOYW1lc3BhY2UobnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfTtcblxuICAgIEpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlRXZlbnQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlRXZlbnQoZXZlbnQpXCIsIGV2ZW50KVxuICAgICAgICAgICAgICAgIC5ub3RVbmRlZmluZWQoKVxuICAgICAgICAgICAgICAgIC5ub3RFbXB0eVN0cmluZygpXG4gICAgICAgICAgICAgICAgLnZhbGlkU3BhY2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIS9eW1xcdzpdKyQvLnRlc3QoZXZlbnQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5JTlZBTElEX1ZBTFVFKHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiSkZhY3RvcnlFdmVudHMudmFsaWRhdGVFdmVudChldmVudClcIixcbiAgICAgICAgICAgICAgICByZWFzb246IFwibXVzdCBiZSBhbHBoYW51bWVyaWMsIHVuZGVyc2NvcmUgYW5kIGNvbG9uIGNoYXJhY3RlcnNcIixcbiAgICAgICAgICAgICAgICBnaXZlbjogZXZlbnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH07XG5cbiAgICBKRmFjdG9yeUV2ZW50cy52YWxpZGF0ZU5hbWVzcGFjZSA9IGZ1bmN0aW9uKG5hbWVzcGFjZSkgeyAvLyBleDogbnMubnMyLm5zM1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5RXZlbnRzLnZhbGlkYXRlTmFtZXNwYWNlKG5hbWVzcGFjZSlcIiwgbmFtZXNwYWNlKVxuICAgICAgICAgICAgICAgIC5ub3RVbmRlZmluZWQoKVxuICAgICAgICAgICAgICAgIC5ub3RFbXB0eVN0cmluZygpXG4gICAgICAgICAgICAgICAgLnZhbGlkU3BhY2VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIS9eW1xcdzouXSskLy50ZXN0KG5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgIHRhcmdldDogXCJKRmFjdG9yeUV2ZW50cy52YWxpZGF0ZU5hbWVzcGFjZShuYW1lc3BhY2UpXCIsXG4gICAgICAgICAgICAgICAgcmVhc29uOiBcIm11c3QgYmUgYWxwaGFudW1lcmljLCB1bmRlcnNjb3JlLCBkb3QgYW5kIGNvbG9uIGNoYXJhY3RlcnNcIixcbiAgICAgICAgICAgICAgICBnaXZlbjogbmFtZXNwYWNlXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9O1xufSIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG5pbXBvcnQgeyBKRmFjdG9yeVByb21pc2UgfSBmcm9tIFwiLi9KRmFjdG9yeVByb21pc2VcIjtcbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSkZhY3RvcnlGZXRjaFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlGZXRjaCBleHRlbmRzIEpGYWN0b3J5UHJvbWlzZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25hbEFyZ3MsIHVybCwgZmV0Y2hPcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25hbEFyZ3MgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgc3VwZXIob3B0aW9uYWxBcmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uYWxBcmdzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgW29wdGlvbmFsQXJncywgdXJsLCBmZXRjaE9wdGlvbnNdID0gW3t9LCBhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXV1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGZldGNoUmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHVybCwgZmV0Y2hPcHRpb25zKTtcblxuICAgICAgICAgICAgc3VwZXIob3B0aW9uYWxBcmdzLCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHByb21pc2UgPSBmZXRjaChmZXRjaFJlcXVlc3QpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGNoYWluLmZldGNoUmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihyZXNwb25zZS5zdGF0dXMgKyBcIjpcIiArIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZldGNoT3B0aW9ucy4kdHlwZVRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHIgPT4gdGhpcy4kY2hhaW4ucmVzcG9uc2VUZXh0ID0gcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZldGNoT3B0aW9ucy4kdHlwZUpTT04pIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHIgPT4gdGhpcy4kY2hhaW4ucmVzcG9uc2VKU09OID0gcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2UuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuUkVRVUVTVF9FUlJPUih7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IHJlYXNvbi5tZXNzYWdlIHx8IHJlYXNvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy4kY2hhaW4uZmV0Y2hSZXNwb25zZSAmJiB0aGlzLiRjaGFpbi5mZXRjaFJlc3BvbnNlLnVybCB8fCB1cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBvd25lcjogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoUmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoUmVzcG9uc2U6IHRoaXMuJGNoYWluLmZldGNoUmVzcG9uc2UgfHwgbnVsbFxuICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25hbEFyZ3MudHJhY2VTb3VyY2UpXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuJGNoYWluLmZldGNoT3B0aW9ucyA9IGZldGNoT3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMuJGNoYWluLmZldGNoUmVxdWVzdCA9IGZldGNoUmVxdWVzdDtcblxuICAgICAgICAgICAgbGV0IGFib3J0Q3RybCA9IGZldGNoT3B0aW9ucy5hYm9ydENvbnRyb2xsZXIgfHwgbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgICAgZmV0Y2hPcHRpb25zLnNpZ25hbCA9IGFib3J0Q3RybC5zaWduYWw7XG4gICAgICAgICAgICB0aGlzLiRjaGFpbi5mZXRjaEFib3J0Q29udHJvbGxlciA9IGFib3J0Q3RybDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRjaGFpbkFib3J0KHJlYXNvbiA9IFwicmVxdWVzdCBhYm9ydGVkXCIpIHtcbiAgICAgICAgc3VwZXIuJGNoYWluQWJvcnQocmVhc29uKTtcbiAgICAgICAgdGhpcy4kY2hhaW4uZmV0Y2hBYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG59IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbmltcG9ydCB7IEpGQUNUT1JZX0RFViwgSkZBQ1RPUllfQ0xJIH0gZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBqRmFjdG9yeUZ1bmN0aW9uQ29uZGl0aW9uYWwgfSBmcm9tIFwiLi9KRmFjdG9yeUZ1bmN0aW9uXCI7XG5pbXBvcnQgeyBoZWxwZXJfZGVmYXVsdHNEZWVwLCBOT09QIH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5TG9nZ2VyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEEgY29udGV4dHVhbCBsb2dnZXIgdGhhdCBwcmVwZW5kcyBhIGxhYmVsIGFuZCBhbGxvd3MgcnVudGltZSBmaWx0ZXJpbmcgd2hpbGUgcHJlc2VydmluZyB0aGUgY2FsbGVyIGxpbmUgbnVtYmVyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGxvZ2dlci5jcmVhdGVTdWJMb2dnZXIobGFiZWwpIGNyZWF0ZSBhIHN1Yi1sb2dnZXIgb2YgbG9nZ2VyOyBcImxvZ2dlclwiIGNhbiBiZSBhIHN1Yi1sb2dnZXIuXG4vLyBsb2dnZXIuZGlzYWJsZSgpIGRpc2FibGUgY29uc29sZSBmb3IgaXRzZWxmIGFuZCBzdWItbG9nZ2Vyc1xuLy8gbG9nZ2VyLmRpc2FsbG93KCdsb2cnKSBkaXNhbGxvdyBsb2dnZXIubG9nKCkgb25seVxuLy8gbG9nZ2VyLmRpc2FsbG93KCdsb2cnLCBzdWJMb2dnZXIubGFiZWwpIGRpc2FsbG93IHN1Yi1sb2dnZXIubG9nKCkgb25seS4gVGhpcyBpcyBjYWxsYWJsZSBmcm9tIGFueSBsb2dnZXIvc3ViLWxvZ2dlclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXMgOiBCZXRhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgU1lNQk9MX0VOQUJMRUQgPSBTeW1ib2woKTtcblxuZXhwb3J0IGNsYXNzIEpGYWN0b3J5TG9nZ2VyIHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiBvcHRpb25zKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5TG9nZ2VyKG9wdGlvbnMpXCIsIG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgLnByb3BlcnRpZXMoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05GSUcpKVxuICAgICAgICB9XG4gICAgICAgIGhlbHBlcl9kZWZhdWx0c0RlZXAodGhpcywgb3B0aW9ucywgSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05GSUcpO1xuICAgICAgICB0aGlzLmNvbmRpdGlvbiA9IGpGYWN0b3J5RnVuY3Rpb25Db25kaXRpb25hbChKRmFjdG9yeUxvZ2dlci5ERUZBVUxUX0NPTkRJVElPTik7XG4gICAgICAgIHRoaXMuaW5zdGFsbEFjY2Vzc29yKFwibG9nXCIpO1xuICAgICAgICB0aGlzLmluc3RhbGxBY2Nlc3NvcihcIndhcm5cIik7XG4gICAgICAgIHRoaXMuaW5zdGFsbEFjY2Vzc29yKFwiZXJyb3JcIilcbiAgICB9XG5cbiAgICBnZXQgZW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbU1lNQk9MX0VOQUJMRURdICYmICh0aGlzLnBhcmVudExvZ2dlciA/IHRoaXMucGFyZW50TG9nZ2VyLmVuYWJsZWQgOiB0cnVlKVxuICAgIH1cblxuICAgIHNldCBlbmFibGVkKHYpIHtcbiAgICAgICAgdiA/IHRoaXMuZW5hYmxlKCkgOiB0aGlzLmRpc2FibGUoKVxuICAgIH1cblxuICAgIGVuYWJsZSgpIHtcbiAgICAgICAgaWYgKHRoaXNbU1lNQk9MX0VOQUJMRURdICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzW1NZTUJPTF9FTkFCTEVEXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNhYmxlKCkge1xuICAgICAgICBpZiAodGhpc1tTWU1CT0xfRU5BQkxFRF0gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzW1NZTUJPTF9FTkFCTEVEXSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzYWxsb3cobmF0aXZlTmFtZSwgbGFiZWwgPSB0aGlzLmxhYmVsKSB7XG4gICAgICAgIGlmICghdGhpcy5maWx0ZXJzW2xhYmVsXSkge3RoaXMuZmlsdGVyc1tsYWJlbF0gPSB7fX1cbiAgICAgICAgdGhpcy5maWx0ZXJzW2xhYmVsXVtuYXRpdmVOYW1lXSA9IHRydWVcbiAgICB9XG5cbiAgICBhbGxvdyhuYXRpdmVOYW1lLCBsYWJlbCA9IHRoaXMubGFiZWwpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyc1tsYWJlbF0pIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmZpbHRlcnNbbGFiZWxdW25hdGl2ZU5hbWVdXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbnN0YWxsQWNjZXNzb3IobmF0aXZlTmFtZSwgdGFyZ2V0TmFtZSA9IG5hdGl2ZU5hbWUsIHRhcmdldCA9IHRoaXMpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJKRmFjdG9yeUxvZ2dlcihuYXRpdmVOYW1lKVwiLCBuYXRpdmVOYW1lKS5lcXVhbEluKFtcImxvZ1wiLCBcIndhcm5cIiwgXCJlcnJvclwiXSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCB7XG4gICAgICAgICAgICBbdGFyZ2V0TmFtZV06IHtcbiAgICAgICAgICAgICAgICBnZXQ6IHRoaXMuYWNjZXNzb3IuYmluZCh0aGlzLCBuYXRpdmVOYW1lLyosIHRhcmdldCovKSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBhY2Nlc3NvcihuYXRpdmVOYW1lLyosIHRhcmdldCovKSB7XG4gICAgICAgIGlmICghdGhpc1tTWU1CT0xfRU5BQkxFRF0pIHtcbiAgICAgICAgICAgIHJldHVybiBOT09QO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvbihuYXRpdmVOYW1lKSAmJiB0aGlzLmZvcm1hdHRlcltuYXRpdmVOYW1lXSh0aGlzKSB8fCBOT09QXG4gICAgfVxuXG4gICAgY3JlYXRlU3ViTG9nZ2VyKGxhYmVsKSB7XG4gICAgICAgIC8qKiBAdHlwZSBKRmFjdG9yeUxvZ2dlciAqL1xuICAgICAgICBsZXQgc3ViID0gbmV3IEpGYWN0b3J5TG9nZ2VyKHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRoaXMuZW5hYmxlZCxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsICsgXCIuXCIgKyBsYWJlbCxcbiAgICAgICAgICAgIHN0eWxlc19jc3M6IHRoaXMuc3R5bGVzX2NzcyxcbiAgICAgICAgICAgIHN0eWxlc19jbGk6IHRoaXMuc3R5bGVzX2NsaSxcbiAgICAgICAgICAgIGNvbnNvbGU6IHRoaXMuY29uc29sZSxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogdGhpcy5mb3JtYXR0ZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHN1Yi5wYXJlbnRMb2dnZXIgPSB0aGlzO1xuICAgICAgICBzdWIuY29uZGl0aW9uLmFkZENvbmRpdGlvbigoKSA9PiB0aGlzLmVuYWJsZWQpO1xuICAgICAgICBzdWIuZmlsdGVycyA9IHRoaXMuZmlsdGVyczsgLy8gc2hhcmVkIHRvIGFsbG93L2Rpc2FsbG93IGZyb20gYW55d2hlcmVcbiAgICAgICAgcmV0dXJuIHN1YlxuICAgIH1cbn1cblxuLy8gI2xpbWl0YXRpb24jIFRvIHByZXNlcnZlIHRoZSBsaW5lIG51bWJlciwgd2UgY2FuIG9ubHkgdXNlIG5hdGl2ZSBmdW5jdGlvbnMsIGxpa2UgYmluZFxuLy8gI2xpbWl0YXRpb24jIEJlY2F1c2Ugd2UgdXNlIGJpbmQoKSwgb25seSB0aGUgc3R5bGUgb2YgdGhlIGZpcnN0IGVsZW1lbnQgY2FuIGJlIGVmZmljaWVudGx5IGRlZmluZWRcblxuSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX05BVElWRSA9IHtcbiAgICBsb2c6IGxvZ2dlciA9PiBsb2dnZXIuY29uc29sZS5sb2cuYmluZChsb2dnZXIuY29uc29sZSwgbG9nZ2VyLmxhYmVsICsgXCI+XCIpLFxuICAgIHdhcm46IGxvZ2dlciA9PiBsb2dnZXIuY29uc29sZS53YXJuLmJpbmQobG9nZ2VyLmNvbnNvbGUsIGxvZ2dlci5sYWJlbCArIFwiPlwiKSxcbiAgICBlcnJvcjogbG9nZ2VyID0+IGxvZ2dlci5jb25zb2xlLmVycm9yLmJpbmQobG9nZ2VyLmNvbnNvbGUsIGxvZ2dlci5sYWJlbCArIFwiPlwiKVxufTtcblxuSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX0NMSSA9IHtcbiAgICBsb2c6IGxvZ2dlciA9PiBsb2dnZXIuY29uc29sZS5sb2cuYmluZChsb2dnZXIuY29uc29sZSwgbG9nZ2VyLnN0eWxlc19jbGkubGFiZWwsIGxvZ2dlci5sYWJlbCArIFwiPlwiKSxcbiAgICB3YXJuOiBsb2dnZXIgPT4gbG9nZ2VyLmNvbnNvbGUud2Fybi5iaW5kKGxvZ2dlci5jb25zb2xlLCBsb2dnZXIuc3R5bGVzX2NsaS5sYWJlbCwgbG9nZ2VyLmxhYmVsICsgXCI+XCIpLFxuICAgIGVycm9yOiBsb2dnZXIgPT4gbG9nZ2VyLmNvbnNvbGUuZXJyb3IuYmluZChsb2dnZXIuY29uc29sZSwgbG9nZ2VyLnN0eWxlc19jbGkubGFiZWwsIGxvZ2dlci5sYWJlbCArIFwiPlwiKVxufTtcblxuSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX0JST1dTRVIgPSB7XG4gICAgbG9nOiBsb2dnZXIgPT4gbG9nZ2VyLmNvbnNvbGUubG9nLmJpbmQobG9nZ2VyLmNvbnNvbGUsIFwiJWNcIiArIGxvZ2dlci5sYWJlbCArIFwiPlwiLCBsb2dnZXIuc3R5bGVzX2Nzcy5sYWJlbCksXG4gICAgd2FybjogbG9nZ2VyID0+IGxvZ2dlci5jb25zb2xlLndhcm4uYmluZChsb2dnZXIuY29uc29sZSwgXCIlY1wiICsgbG9nZ2VyLmxhYmVsICsgXCI+XCIsIGxvZ2dlci5zdHlsZXNfY3NzLmxhYmVsKSxcbiAgICBlcnJvcjogbG9nZ2VyID0+IGxvZ2dlci5jb25zb2xlLmVycm9yLmJpbmQobG9nZ2VyLmNvbnNvbGUsIFwiJWNcIiArIGxvZ2dlci5sYWJlbCArIFwiPlwiLCBsb2dnZXIuc3R5bGVzX2Nzcy5sYWJlbClcbn07XG5cbi8qKiBAcmV0dXJuIHtib29sZWFufSAqL1xuSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05ESVRJT04gPSBmdW5jdGlvbihuYXRpdmVOYW1lKSB7XG4gICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICBKRmFjdG9yeUV4cGVjdChcIkpGYWN0b3J5TG9nZ2VyLmNvbmRpdGlvbihuYXRpdmVOYW1lKVwiLCBuYXRpdmVOYW1lKS5lcXVhbEluKFtcImxvZ1wiLCBcIndhcm5cIiwgXCJlcnJvclwiXSk7XG4gICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiSkZhY3RvcnlMb2dnZXIuZW5hYmxlZFwiLCB0aGlzLmVuYWJsZWQpLmVxdWFsKHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gISh0aGlzLmZpbHRlcnNbdGhpcy5sYWJlbF0gJiYgdGhpcy5maWx0ZXJzW3RoaXMubGFiZWxdW25hdGl2ZU5hbWVdKVxufTtcblxuSkZhY3RvcnlMb2dnZXIuREVGQVVMVF9DT05GSUcgPSAvKiogQGxlbmRzIEpGYWN0b3J5TG9nZ2VyIyAqLyB7XG4gICAgbGFiZWw6IFwiXCIsXG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBwYXJlbnRMb2dnZXI6IG51bGwsXG4gICAgZm9ybWF0dGVyOiBKRkFDVE9SWV9DTEkgP1xuICAgICAgICBKRmFjdG9yeUxvZ2dlci5GT1JNQVRURVJfQ0xJIDpcbiAgICAgICAgSkZhY3RvcnlMb2dnZXIuRk9STUFUVEVSX0JST1dTRVIsXG4gICAgY29uc29sZSxcbiAgICBmaWx0ZXJzOiB7XG4gICAgfSxcbiAgICBzdHlsZXNfY2xpOiB7XG4gICAgICAgIGxhYmVsOiBcIlxceDFiWzE7MzBtJXNcXHgxYlswbVwiXG4gICAgfSxcbiAgICBzdHlsZXNfY3NzOiB7XG4gICAgICAgIGxhYmVsOiBcImNvbG9yOiBncmF5XCJcbiAgICB9XG59OyIsIi8qIGpGYWN0b3J5LCBDb3B5cmlnaHQgKGMpIDIwMTksIFN0w6lwaGFuZSBQbGF6aXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9qZmFjdG9yeS1lcy9qZmFjdG9yeS9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dCAqL1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpGYWN0b3J5VGltZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdGF0dXM6IEJldGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgSkZhY3RvcnlUaW1lIGV4dGVuZHMgRGF0ZSB7XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvTG9jYWxlVGltZVN0cmluZygpICsgXCIsIFwiICsgdGhpcy5nZXRVVENNaWxsaXNlY29uZHMoKSArIFwibXMgKFwiICsgdGhpcy52YWx1ZU9mKCkgKyBcIilcIlxuICAgIH1cbiAgICAkdG9EdXJhdGlvblN0cmluZygpIHtcbiAgICAgICAgbGV0IGhvdXJzID0gdGhpcy5nZXRVVENIb3VycygpO1xuICAgICAgICBsZXQgbWludXRlcyA9IHRoaXMuZ2V0VVRDTWludXRlcygpO1xuICAgICAgICBsZXQgc2Vjb25kcyA9IHRoaXMuZ2V0VVRDU2Vjb25kcygpO1xuICAgICAgICBsZXQgbWlsbGlzZWNvbmRzID0gdGhpcy5nZXRVVENNaWxsaXNlY29uZHMoKTtcblxuICAgICAgICBsZXQgYSA9IFtdO1xuICAgICAgICBpZiAoaG91cnMpIHtcbiAgICAgICAgICAgIGEucHVzaChob3VycyArIFwiaFwiKVxuICAgICAgICB9XG4gICAgICAgIGlmIChtaW51dGVzKSB7XG4gICAgICAgICAgICBhLnB1c2gobWludXRlcyArIFwibWluXCIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlY29uZHMpIHtcbiAgICAgICAgICAgIGEucHVzaChzZWNvbmRzICsgXCJzXCIpXG4gICAgICAgIH1cbiAgICAgICAgYS5wdXNoKG1pbGxpc2Vjb25kcyArIFwibXNcIik7XG4gICAgICAgIGlmIChhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYS5qb2luKFwiLFwiKSArIFwiIChcIiArIHRoaXMudmFsdWVPZigpICsgXCIpXCI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBKRmFjdG9yeVRpbWVUcmFjZSBleHRlbmRzIERhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmVsYXBzZWQgPSBudWxsO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICB0MTogeyB2YWx1ZTogbnVsbCwgd3JpdGFibGU6IHRydWUgfSxcbiAgICAgICAgICAgIHQwOiB7IHZhbHVlOiBuZXcgSkZhY3RvcnlUaW1lKCkgfVxuICAgICAgICB9KVxuICAgIH1cbiAgICBlbmQoKSB7XG4gICAgICAgIHRoaXMudDEgPSBuZXcgSkZhY3RvcnlUaW1lKCk7XG4gICAgICAgIHRoaXMuZWxhcHNlZCA9IG5ldyBKRmFjdG9yeVRpbWUodGhpcy50MSAtIHRoaXMudDApLiR0b0R1cmF0aW9uU3RyaW5nKClcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsYXBzZWRcbiAgICB9XG59IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdENvcmVcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmltcG9ydCB7IEpGQUNUT1JZX0RFViwgakZhY3RvcnlDb25maWcgfSBmcm9tIFwiLi9qRmFjdG9yeS1lbnZcIjtcbmltcG9ydCB7IGpGYWN0b3J5RXJyb3IsIEpGYWN0b3J5RXJyb3IgfSBmcm9tIFwiLi9KRmFjdG9yeUVycm9yXCI7XG5pbXBvcnQgeyBqRmFjdG9yeSB9IGZyb20gXCIuL2pGYWN0b3J5XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV4cGVjdCB9IGZyb20gXCIuL0pGYWN0b3J5RXhwZWN0XCI7XG5pbXBvcnQgeyBKRmFjdG9yeUFib3V0IH0gZnJvbSBcIi4vSkZhY3RvcnlBYm91dFwiO1xuaW1wb3J0IHsgSkZhY3RvcnlMb2dnZXIgfSBmcm9tIFwiLi9KRmFjdG9yeUxvZ2dlclwiO1xuaW1wb3J0IHsgSkZhY3RvcnlQcm9taXNlLCBKRmFjdG9yeVByb21pc2VTeW5jIH0gZnJvbSBcIi4vSkZhY3RvcnlQcm9taXNlXCI7XG5pbXBvcnQgeyBKRmFjdG9yeUV2ZW50c01hbmFnZXIgfSBmcm9tIFwiLi9KRmFjdG9yeUV2ZW50c1wiO1xuaW1wb3J0IHsgSkZhY3RvcnlPYmplY3QgfSBmcm9tIFwiLi9KRmFjdG9yeU9iamVjdFwiO1xuaW1wb3J0IHsgSkZhY3RvcnlUaW1lVHJhY2UgfSBmcm9tIFwiLi9KRmFjdG9yeVRpbWVcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBPYmplY3Rcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgVHJhaXRDb3JlIHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qgb3duZXIgPSB0aGlzO1xuXG4gICAgICAgIGNsYXNzIFN1Yk1hcCBleHRlbmRzIE1hcCB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWRfYXV0b2luY1wiLCB7IHZhbHVlOiAwLCB3cml0YWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRyZWdpc3RlclN5bmMoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGxldCBzdWIgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7fSwge1xuICAgICAgICAgICAgICAgICAgICAkdmFsdWU6IHsgdmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgJHBoYXNlUmVtb3ZlOiB7IHZhbHVlOiBUcmFpdFNlcnZpY2UuZ2V0Q29udGV4dHVhbFJlbW92ZVBoYXNlKG93bmVyKSB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCBzdWIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdWJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRyZWdpc3RlckFzeW5jKGtleSwgdGFza05hbWUsIHByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGFzayA9IG93bmVyLiR0YXNrKHRhc2tOYW1lLCBwcm9taXNlLiRjaGFpbik7XG5cbiAgICAgICAgICAgICAgICAvLyBFbmQgb2YgcHJvbWlzZSBjaGFpbiBtdXN0IGNvbXBsZXRlIHRoZSB0YXNrXG4gICAgICAgICAgICAgICAgcHJvbWlzZS4kY2hhaW4udGhlbigoKSA9PiB7IC8vIHN5bmNocm9ub3VzIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgdGFzay4kY2hhaW5BdXRvQ29tcGxldGUoKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQWJvcnRlZCB0YXNrIG11c3QgYWJvcnQgdGhlIHByb21pc2UgaWYgc3RpbGwgcnVubmluZ1xuICAgICAgICAgICAgICAgIHRhc2suJGNoYWluLnRoZW4oKCkgPT4gey8vIHN5bmNocm9ub3VzIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcm9taXNlLiRjaGFpbi5pc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS4kY2hhaW5BYm9ydChcImFib3J0ZWQgYnkgdGFza1wiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvbWlzZSwgXCIkcGhhc2VSZW1vdmVcIiwgeyB2YWx1ZTogdGFzay4kcGhhc2VSZW1vdmUgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFza1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkaWRfcmVzb2x2ZShzdHIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyLmluZGV4T2YoXCI/XCIpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlkID0gKyt0aGlzLmlkX2F1dG9pbmM7XG4gICAgICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXD8vZywgaWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB7XG4gICAgICAgICAgICBbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXTogT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgICAgICAgIGFzc2lnbjogZnVuY3Rpb24ocHJvcGVydHksIHZhbHVlLCBkZXNjcmlwdG9yKSB7SkZhY3RvcnlPYmplY3QuYXNzaWduKHRoaXMsIHByb3BlcnR5LCB2YWx1ZSwgZGVzY3JpcHRvcil9LFxuICAgICAgICAgICAgY3JlYXRlU3ViTWFwOiAoKSA9PiBuZXcgU3ViTWFwKClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiJFwiLCB7IHZhbHVlOiBPYmplY3QuY3JlYXRlKHByb3RvKSB9KTtcblxuICAgICAgICAvLyBwcmUtZGVmaW5lIG1vc3QgaW1wb3J0YW50IHByb3BlcnRpZXNcbiAgICAgICAgLy8gdG8gb3JkZXIgdGhlbSBmaXJzdCBpbiBkZXZ0b29sIChyZWR1Y2VkIGZvcm0gb25seSlcbiAgICAgICAgdGhpcy4kLmFzc2lnbih7XG4gICAgICAgICAgICB0YXNrczogbnVsbCxcbiAgICAgICAgICAgIHJlcXVlc3RzOiBudWxsXG4gICAgICAgIH0sIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEVfV1JJVEFCTEUpO1xuICAgIH1cbn1cblxuVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFID0gU3ltYm9sKFwiX1wiKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBBYm91dFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdEFib3V0IHtcblxuICAgIHRyYWl0X2NvbnN0cnVjdG9yKGFib3V0KSB7XG4gICAgICAgIEpGYWN0b3J5T2JqZWN0LmFzc2lnbih0aGlzLiQsIFwiYWJvdXRcIixcbiAgICAgICAgICAgIG5ldyBKRmFjdG9yeUFib3V0KHRoaXMsIGFib3V0KSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuUkVBRE9OTFkpXG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IExvZ1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdExvZyB7XG5cbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgbGFiZWw6IHRoaXMuJC5hYm91dC5uYW1lXG4gICAgICAgIH0sIGpGYWN0b3J5Q29uZmlnLlRyYWl0TG9nIHx8IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBsb2dnZXIgPSBuZXcgSkZhY3RvcnlMb2dnZXIoY29uZmlnKTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy4kLCBcImxvZ2dlclwiLCB7IHZhbHVlOiBsb2dnZXIgfSk7XG5cbiAgICAgICAgbG9nZ2VyLmluc3RhbGxBY2Nlc3NvcihcImxvZ1wiLCAgIFwiJGxvZ1wiLCAgICAgdGhpcyk7XG4gICAgICAgIGxvZ2dlci5pbnN0YWxsQWNjZXNzb3IoXCJ3YXJuXCIsICBcIiRsb2dXYXJuXCIsIHRoaXMpO1xuICAgICAgICBsb2dnZXIuaW5zdGFsbEFjY2Vzc29yKFwiZXJyb3JcIiwgXCIkbG9nRXJyXCIsICB0aGlzKTtcbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVHJhaXQgVGFza3Ncbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgVHJhaXRUYXNrIHtcblxuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLiQuYXNzaWduKFwidGFza3NcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkdGFzayhpZCwgZXhlY3V0b3JPclZhbHVlKSB7XG4gICAgICAgIGlkID0gdGhpcy4kLnRhc2tzLiRpZF9yZXNvbHZlKGlkKTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiR0YXNrKGlkKVwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkdGFzayhleGVjdXRvck9yVmFsdWUpXCIsIGV4ZWN1dG9yT3JWYWx1ZSkubm90VW5kZWZpbmVkKCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kLnRhc2tzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkdGFzayhpZClcIiwgZ2l2ZW46IGlkIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGFzaztcblxuICAgICAgICBpZiAodHlwZW9mIGV4ZWN1dG9yT3JWYWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0YXNrICA9IG5ldyBKRmFjdG9yeVByb21pc2UoeyBuYW1lOiBpZCwgb3duZXI6IHRoaXMgfSwgZXhlY3V0b3JPclZhbHVlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFzayA9IEpGYWN0b3J5UHJvbWlzZS5yZXNvbHZlKHsgbmFtZTogaWQsIG93bmVyOiB0aGlzIH0sIGV4ZWN1dG9yT3JWYWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0YXNrLiRwaGFzZVJlbW92ZSA9IFRyYWl0U2VydmljZS5nZXRDb250ZXh0dWFsUmVtb3ZlUGhhc2UodGhpcyk7XG5cbiAgICAgICAgbGV0IG1ldHJpY3M7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIG1ldHJpY3MgPSBuZXcgSkZhY3RvcnlUaW1lVHJhY2UoKTtcbiAgICAgICAgICAgIHRhc2suJHRhc2tNZXRyaWNzID0geyAkZGV2X3RpbWluZzogbWV0cmljcyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGFzay4kY2hhaW4udGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICAgICAgbWV0cmljcy5lbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiQudGFza3MuZ2V0KGlkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHRhc2tSZW1vdmUoaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiQudGFza3Muc2V0KGlkLCB0YXNrKTtcbiAgICAgICAgcmV0dXJuIHRhc2tcbiAgICB9XG5cbiAgICAkdGFza1JlbW92ZShpZCwgcmVhc29uKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiJHRhc2tSZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICByZWFzb24gJiYgSkZhY3RvcnlFeHBlY3QoXCIkdGFza1JlbW92ZShyZWFzb24pXCIsIHJlYXNvbikudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiQudGFza3MuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLktFWV9NSVNTSU5HKHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIiR0YXNrUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyXG4gICAgICAgICAgICBpZiAodGhpcy4kLnRhc2tzLmdldChpZCkuX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLnRhc2tzLmdldChpZCkuX2NhbGxlZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbnRyeSA9IHRoaXMuJC50YXNrcy5nZXQoaWQpO1xuICAgICAgICAvLyBkZWxldGluZyBiZWZvcmUgY2hhaW5BYm9ydCgpIHRvIHByZXZlbnQgcmVtb3ZlKCkgcmVjYWxsXG4gICAgICAgIHRoaXMuJC50YXNrcy5kZWxldGUoaWQpO1xuICAgICAgICBlbnRyeS4kY2hhaW5BYm9ydChyZWFzb24gfHwgXCIkdGFza1JlbW92ZSgpXCIpO1xuICAgIH1cblxuICAgICR0YXNrUmVtb3ZlQWxsKHJlbW92ZVBoYXNlKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiJHRhc2tSZW1vdmVBbGwocmVtb3ZlUGhhc2UpXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRhc2tzID0gdGhpcy4kLnRhc2tzO1xuICAgICAgICBpZiAodGFza3Muc2l6ZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB0YXNrXSBvZiB0YXNrcykge1xuICAgICAgICAgICAgICAgIGlmICh0YXNrLiRwaGFzZVJlbW92ZSA9PT0gcmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdGFza1JlbW92ZShrZXksIFwiJHRhc2tSZW1vdmVBbGwoXCIgKyByZW1vdmVQaGFzZSArIFwiKVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgICR0YXNrUHJvbWlzZUFsbChhdXRvQ29tcGxldGUgPSBmYWxzZSkge1xuICAgICAgICBsZXQgcGVuZGluZyA9IFtdO1xuICAgICAgICBpZiAodGhpcy4kLnRhc2tzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHRhc2sgb2YgdGhpcy4kLnRhc2tzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF1dG9Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlcyB0aGUgY2hhaW4gYXMgc29vbiBhcyBubyBtb3JlIHBlbmRpbmcgcHJvbWlzZSBpbiB0aGUgY2hhaW5cbiAgICAgICAgICAgICAgICAgICAgdGFzay4kY2hhaW4uY2hhaW5Db25maWcuY2hhaW5BdXRvQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzdGlsbCBwZW5kaW5nID9cbiAgICAgICAgICAgICAgICBpZiAodGFzay4kY2hhaW4uaXNQZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCh0YXNrLiRjaGFpbilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBlbmRpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocGVuZGluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gSkZhY3RvcnlQcm9taXNlU3luYy5yZXNvbHZlKClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBFdmVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5leHBvcnQgY2xhc3MgVHJhaXRFdmVudHMge1xuXG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGFzc2lnblByaXZhdGUodGhpcywgXCJldmVudHNcIiwge1xuICAgICAgICAgICAgY3VzdG9tOiBuZXcgSkZhY3RvcnlFdmVudHNNYW5hZ2VyKHRoaXMpLFxuICAgICAgICAgICAga2VybmVsOiBuZXcgSkZhY3RvcnlFdmVudHNNYW5hZ2VyKHRoaXMpXG4gICAgICAgIH0sIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLk5PTkUpO1xuXG4gICAgICAgIGxldCBldmVudE1hbmFnZXIgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMuY3VzdG9tO1xuXG4gICAgICAgIC8vIGlmIChKRkFDVE9SWV9ERVYpIHsgLy8gdmVyeSBzbG93OyByZXF1aXJlcyBvcHRpbWl6YXRpb25cbiAgICAgICAgLy8gICAgIC8vIHJlZ2lzdHJ5IGFyZSBhdXRvIHVwZGF0ZWQgaW4gZGV2IG1vZGUgKHVub3B0aW1pemVkIGltcGxlbWVudGF0aW9uKVxuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgbGV0IGxpc3RlbmVyVXBkYXRlID0gKCkgPT4ge1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuJC5saXN0ZW5lcnMgPSBldmVudE1hbmFnZXIuZ2V0RG9tTGlzdGVuZXJzKHRoaXMuJC5hYm91dC5maW5nZXJwcmludCk7XG4gICAgICAgIC8vICAgICB9O1xuICAgICAgICAvLyAgICAgbGV0IG9ic2VydmVyVXBkYXRlID0gKCkgPT4ge1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuJC5vYnNlcnZlcnMgPSBldmVudE1hbmFnZXIuZ2V0T2JzZXJ2ZXJzKCk7XG4gICAgICAgIC8vICAgICB9O1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgZXZlbnRNYW5hZ2VyLm9uTGlzdGVuZXJVcGRhdGUgPSBsaXN0ZW5lclVwZGF0ZTtcbiAgICAgICAgLy8gICAgIGV2ZW50TWFuYWdlci5vbk9ic2VydmVyVXBkYXRlID0gb2JzZXJ2ZXJVcGRhdGU7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICBsZXQgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihsaXN0ZW5lclVwZGF0ZSk7XG4gICAgICAgIC8vICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwge2NoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZX0pO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgbGlzdGVuZXJVcGRhdGUoKTtcbiAgICAgICAgLy8gICAgIG9ic2VydmVyVXBkYXRlKCk7XG4gICAgICAgIC8vIH0gZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLiQsIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBldmVudE1hbmFnZXIuZ2V0RG9tTGlzdGVuZXJzLmJpbmQoZXZlbnRNYW5hZ2VyLCB0aGlzLiQuYWJvdXQuZmluZ2VycHJpbnQpLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvYnNlcnZlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBldmVudE1hbmFnZXIuZ2V0T2JzZXJ2ZXJzLmJpbmQoZXZlbnRNYW5hZ2VyKSxcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkb24oLyogZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLCBvcHRpb25zICovKSB7XG4gICAgICAgIHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5jdXN0b20ub24oLi4uYXJndW1lbnRzKVxuICAgIH1cblxuICAgICRvZmYoLyogZXZlbnRzLCB0YXJnZXQsIHNlbGVjdG9yLCBoYW5kbGVyLCBvcHRpb25zICovKSB7XG4gICAgICAgIHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5jdXN0b20ub2ZmKC4uLmFyZ3VtZW50cylcbiAgICB9XG5cbiAgICAkdHJpZ2dlcigvKiBldmVudHMsIHRhcmdldCwgZGF0YSAqLykge1xuICAgICAgICByZXR1cm4gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmN1c3RvbS50cmlnZ2VyKC4uLmFyZ3VtZW50cylcbiAgICB9XG5cbiAgICAkdHJpZ2dlclBhcmFsbGVsKC8qIGV2ZW50cywgdGFyZ2V0LCBkYXRhICovKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMuY3VzdG9tLnRyaWdnZXJQYXJhbGxlbCguLi5hcmd1bWVudHMpXG4gICAgfVxuXG4gICAgJG5vdGlmeShldmVudHMsIGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHRyaWdnZXIoZXZlbnRzLCBkYXRhKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbC50cmlnZ2VyKGV2ZW50cywgZGF0YSkpXG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IFN0YXRlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdFN0YXRlIHtcblxuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBjb25zdCBzdGF0ZVJvdXRlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG5cbiAgICAgICAgYXNzaWduUHJpdmF0ZSh0aGlzLCB7IHN0YXRlcywgc3RhdGVSb3V0ZXMgfSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuUkVBRE9OTFkpO1xuXG4gICAgICAgIEpGYWN0b3J5T2JqZWN0LmFzc2lnbih0aGlzLiQsIFwic3RhdGVzXCIsIG5ldyBQcm94eShzdGF0ZXMsIHtcbiAgICAgICAgICAgIHNldDogKHRhcmdldCwga2V5LCB2YWwpID0+IHRoaXMuJHN0YXRlKGtleSwgdmFsKSxcbiAgICAgICAgICAgIGdldDogKHRhcmdldCwga2V5KSA9PiBzdGF0ZXNba2V5XVxuICAgICAgICB9KSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuUkVBRE9OTFkpO1xuXG4gICAgICAgIGtlcm5lbC5vbihcImJlZm9yZVN0YXRlQ2hhbmdlXCIsIChlLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBsZXQgaDtcbiAgICAgICAgICAgIGlmIChzdGF0ZVJvdXRlc1tkYXRhLmtleV0gJiYgc3RhdGVSb3V0ZXNbZGF0YS5rZXldLmJlZm9yZVxuICAgICAgICAgICAgICAgICYmIChoID0gc3RhdGVSb3V0ZXNbZGF0YS5rZXldLmJlZm9yZShkYXRhLnZhbCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG5vdGlmeShoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAga2VybmVsLm9uKFwiYWZ0ZXJTdGF0ZUNoYW5nZVwiLCAoZSwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgbGV0IGg7XG4gICAgICAgICAgICBpZiAoc3RhdGVSb3V0ZXNbZGF0YS5rZXldICYmIHN0YXRlUm91dGVzW2RhdGEua2V5XS5hZnRlclxuICAgICAgICAgICAgICAgICYmIChoID0gc3RhdGVSb3V0ZXNbZGF0YS5rZXldLmFmdGVyKGRhdGEudmFsKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbm90aWZ5KGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc3RhdGUoa2V5LCB2YWwsIG5vdGlmeSA9IHRydWUpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkc3RhdGUoa2V5KVwiLCBrZXkpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiJHN0YXRlKG5vdGlmeSlcIiwgbm90aWZ5KS50eXBlQm9vbGVhbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBKRmFjdG9yeVByb21pc2VTeW5jKGFzeW5jIHJlc29sdmUgPT4ge1xuXG4gICAgICAgICAgICBsZXQgc3RhdGVzID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uc3RhdGVzO1xuICAgICAgICAgICAgbGV0IHByZXZpb3VzVmFsID0gc3RhdGVzW2tleV07XG4gICAgICAgICAgICBsZXQgcGVuZGluZztcblxuICAgICAgICAgICAgaWYgKCEoa2V5IGluIHN0YXRlcykgfHwgcHJldmlvdXNWYWwgIT09IHZhbCkge1xuXG4gICAgICAgICAgICAgICAgcGVuZGluZyA9IG5vdGlmeSAmJiB0aGlzLiRub3RpZnkoXCJiZWZvcmVTdGF0ZUNoYW5nZVwiLCB7IGtleSwgdmFsLCBwcmV2aW91c1ZhbCB9KTtcbiAgICAgICAgICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcgJiYgSkZhY3RvcnlFeHBlY3QoXCJiZWZvcmVTdGF0ZUNoYW5nZSByZXN1bHRcIiwgcGVuZGluZykudHlwZShKRmFjdG9yeVByb21pc2VTeW5jKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocGVuZGluZyAmJiAhcGVuZGluZy4kaXNTZXR0bGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlc1trZXldID0gcGVuZGluZztcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGVuZGluZztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN0YXRlc1trZXldXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzW2tleV0gPSB2YWw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcGVuZGluZyA9IG5vdGlmeSAmJiB0aGlzLiRub3RpZnkoXCJhZnRlclN0YXRlQ2hhbmdlXCIsIHsga2V5LCB2YWwsIHByZXZpb3VzVmFsIH0pO1xuICAgICAgICAgICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZyAmJiBKRmFjdG9yeUV4cGVjdChcImFmdGVyU3RhdGVDaGFuZ2UgcmVzdWx0XCIsIHBlbmRpbmcpLnR5cGUoSkZhY3RvcnlQcm9taXNlU3luYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGVuZGluZykge1xuICAgICAgICAgICAgICAgIHBlbmRpbmcudGhlbihyZXNvbHZlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBTZXJ2aWNlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0U2VydmljZSB7XG5cbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuYW1lIHRoaXMuJC5zZXJ2aWNlXG4gICAgICAgICAqIEB0eXBlIHtvYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBKRmFjdG9yeU9iamVjdC5hc3NpZ24odGhpcy4kLCBcInNlcnZpY2VcIiwgT2JqZWN0LmNyZWF0ZShudWxsKSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuUkVBRE9OTFkpO1xuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZSA9IFRyYWl0U2VydmljZS5QSEFTRS5OT05FO1xuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVF1ZXVlID0gSkZhY3RvcnlQcm9taXNlLnJlc29sdmUoeyBuYW1lOiBcInBoYXNlUXVldWVcIiB9LCBudWxsKTtcbiAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VUYXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAgPSB7XG4gICAgICAgICAgICBpbnN0YWxsOiBuZXcgU2V0KCksXG4gICAgICAgICAgICBlbmFibGU6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIGRpc2FibGU6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIHVuaW5zdGFsbDogbmV3IFNldCgpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU2V0IGluaXRpYWwgc3RhdGVzIGJ1dCBkb24ndCB0cmlnZ2VyIGV2ZW50c1xuICAgICAgICB0aGlzLiRzdGF0ZShcImluc3RhbGxlZFwiLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLiRzdGF0ZShcImVuYWJsZWRcIiwgZmFsc2UsIGZhbHNlKTtcblxuICAgICAgICAvLyBEZWZpbmUgdGhlIGV2ZW50cyB0byBub3RpZnkgYmVmb3JlL2FmdGVyIGEgc3RhdGUgY2hhbmdlXG4gICAgICAgIC8vIHN0YXRlTmFtZSA6IHtiZWZvcmUgOiBldmVudE5hbWUsIGFmdGVyIDogZXZlbnROYW1lfVxuXG4gICAgICAgIC8vIFNQRUNcbiAgICAgICAgLy8gc3RhdCBpcyBjaGFuZ2VkIGJlZm9yZSBjYWxsaW5nIGhhbmRsZXJzIGV2ZW4gaWYgcGVuZGluZ1xuXG4gICAgICAgIGFzc2lnblByaXZhdGVNZW1iZXIodGhpcywgXCJzdGF0ZVJvdXRlc1wiLCB7XG4gICAgICAgICAgICBpbnN0YWxsZWQ6IHsgYWZ0ZXI6IHZhbCA9PiB2YWwgPyBcImluc3RhbGxcIiA6IFwidW5pbnN0YWxsXCIgfSxcbiAgICAgICAgICAgIGVuYWJsZWQ6IHsgYWZ0ZXI6IHZhbCA9PiB2YWwgPyBcImVuYWJsZVwiICA6IFwiZGlzYWJsZVwiIH1cbiAgICAgICAgfSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuTk9ORSk7XG5cbiAgICAgICAgbGV0IGN1c3RvbSA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5jdXN0b207XG4gICAgICAgIGxldCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuXG4gICAgICAgIC8vIEF0dGFjaCBhIHJlbW92ZSBwaGFzZSBuYW1lc3BhY2VzIG9uIGV2ZW50c1xuICAgICAgICBjdXN0b20uYWZmaWxpYXRlQWRkUnVsZSgoY29udGV4dCwgcGFyc2VkRXZlbnQsIG5hbWVzcGFjZXMsIG9wdGlvbnMpID0+XG4gICAgICAgICAgICBUcmFpdFNlcnZpY2Uuc2V0RXZlbnROYW1lc3BhY2VSZW1vdmVQaGFzZSh0aGlzLCBwYXJzZWRFdmVudCwgb3B0aW9ucylcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBBdHRhY2ggbW9kdWxlIGV2ZW50IGhhbmRsZXJzXG5cbiAgICAgICAgLyoqIEBuYW1lIEpGYWN0b3J5Q29yZU9iamVjdCNvbkluc3RhbGwgKi9cbiAgICAgICAgLyoqIEBuYW1lIEpGYWN0b3J5Q29yZU9iamVjdCNvbkVuYWJsZSAqL1xuICAgICAgICAvKiogQG5hbWUgSkZhY3RvcnlDb3JlT2JqZWN0I29uRGlzYWJsZSAqL1xuICAgICAgICAvKiogQG5hbWUgSkZhY3RvcnlDb3JlT2JqZWN0I29uVW5pbnN0YWxsICovXG5cbiAgICAgICAgbGV0IHBoYXNlUmVzb2x2ZSA9IGhhbmRsZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuJC50YXNrcy5zaXplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdGFza1JlbW92ZUFsbCh0aGlzLiQuc2VydmljZS5waGFzZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwcm9taXNlID0gSkZhY3RvcnlQcm9taXNlU3luYy5yZXNvbHZlKCk7XG4gICAgICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IGhhbmRsZXIuY2FsbCh0aGlzKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy4kdGFza1Byb21pc2VBbGwodHJ1ZSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZVxuICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoLyp0aGlzLiQuc2VydmljZS5pc1BoYXNlS2lsbGluZyAmJiovIGUgaW5zdGFuY2VvZiBqRmFjdG9yeUVycm9yLlBST01JU0VfRVhQSVJFRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGxvZ0VycihcInVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiBpbiBcIiArIHRoaXMuJC5zZXJ2aWNlLnBoYXNlICsgXCI7XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZSBpbnN0YW5jZW9mIEpGYWN0b3J5RXJyb3IgPyBlIDogW2VdKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAga2VybmVsLm9uKFwiaW5zdGFsbFwiLCAoKSA9PiBwaGFzZVJlc29sdmUodGhpcy5vbkluc3RhbGwpKTtcbiAgICAgICAga2VybmVsLm9uKFwiZW5hYmxlXCIsICgpID0+IHBoYXNlUmVzb2x2ZSh0aGlzLm9uRW5hYmxlKSk7XG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgKCkgPT4gcGhhc2VSZXNvbHZlKHRoaXMub25EaXNhYmxlKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiBwaGFzZVJlc29sdmUodGhpcy5vblVuaW5zdGFsbCkpO1xuXG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgICAoKSA9PiB0aGlzLiRvZmYoeyByZW1vdmFsOiBUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSB9KSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRvZmYoeyByZW1vdmFsOiBUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMIH0pKTtcbiAgICB9XG5cbiAgICAkaW5zdGFsbChlbmFibGUpIHtcbiAgICAgICAgbGV0IHJlc29sdmU7XG4gICAgICAgIGNvbnN0IHAgPSBuZXcgSkZhY3RvcnlQcm9taXNlKFxuICAgICAgICAgICAgeyBuYW1lOiBcImluc3RhbGxcIiwgY29uZmlnOiB7IGNoYWluQXV0b0NvbXBsZXRlOiB0cnVlIH0gfSxcbiAgICAgICAgICAgIF9yZXNvbHZlID0+IHJlc29sdmUgPSBfcmVzb2x2ZSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuJC5zdGF0ZXMuaW5zdGFsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLklOU1RBTEw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdGF0ZShcImluc3RhbGxlZFwiLCB0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlTWFwLmluc3RhbGwuYWRkKHApO1xuICAgICAgICBwLiRjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlVGFzayA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZU1hcC5pbnN0YWxsLmRlbGV0ZShwKTtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZSA9IHRoaXMuJC5zZXJ2aWNlLnBoYXNlUXVldWUudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVRhc2sgPSBwO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHAuJGNoYWluXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBlbmFibGVcbiAgICAgICAgaWYgKGVuYWJsZSkge3JldHVybiB0aGlzLiRlbmFibGUoKX1cbiAgICAgICAgcmV0dXJuIHBcbiAgICB9XG5cbiAgICAkZW5hYmxlKCkge1xuICAgICAgICBsZXQgcmVzb2x2ZTtcbiAgICAgICAgY29uc3QgcCA9IG5ldyBKRmFjdG9yeVByb21pc2UoXG4gICAgICAgICAgICB7IG5hbWU6IFwiZW5hYmxlXCIsIGNvbmZpZzogeyBjaGFpbkF1dG9Db21wbGV0ZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgICBfcmVzb2x2ZSA9PiByZXNvbHZlID0gX3Jlc29sdmUpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuJC5zdGF0ZXMuaW5zdGFsbGVkICYmICF0aGlzLiQuc3RhdGVzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2UgPSBUcmFpdFNlcnZpY2UuUEhBU0UuRU5BQkxFO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RhdGUoXCJlbmFibGVkXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuZW5hYmxlLmFkZChwKTtcbiAgICAgICAgcC4kY2hhaW4udGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVRhc2sgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuZW5hYmxlLmRlbGV0ZShwKTtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZSA9IHRoaXMuJC5zZXJ2aWNlLnBoYXNlUXVldWUudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVRhc2sgPSBwO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHAuJGNoYWluXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcFxuICAgIH1cblxuICAgICRkaXNhYmxlKCkge1xuICAgICAgICBsZXQgcmVzb2x2ZTtcbiAgICAgICAgY29uc3QgcCA9IG5ldyBKRmFjdG9yeVByb21pc2UoXG4gICAgICAgICAgICB7IG5hbWU6IFwiZGlzYWJsZVwiLCBjb25maWc6IHsgY2hhaW5BdXRvQ29tcGxldGU6IHRydWUgfSB9LFxuICAgICAgICAgICAgX3Jlc29sdmUgPT4gcmVzb2x2ZSA9IF9yZXNvbHZlKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiQuc3RhdGVzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2UgPSBUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0YXRlKFwiZW5hYmxlZFwiLCBmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZU1hcC5kaXNhYmxlLmFkZChwKTtcbiAgICAgICAgcC4kY2hhaW4udGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVRhc2sgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuZGlzYWJsZS5kZWxldGUocCk7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZSA9IFRyYWl0U2VydmljZS5QSEFTRS5OT05FXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGV4cGlyZXMgYWxsIHN0YWNrZWQgZW5hYmxlXG4gICAgICAgIGZvciAobGV0IFtrZXksIHZhbF0gb2YgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuZW5hYmxlLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gdGhpcy4kLnNlcnZpY2UucGhhc2VUYXNrKSB7XG4gICAgICAgICAgICAgICAgVHJhaXRTZXJ2aWNlLnBoYXNlS2lsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbC4kY2hhaW5BYm9ydCgpO1xuICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuZW5hYmxlLmRlbGV0ZShrZXkpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVF1ZXVlID0gdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlVGFzayA9IHA7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm4gcC4kY2hhaW5cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwXG4gICAgfVxuXG4gICAgJHVuaW5zdGFsbCgpIHtcbiAgICAgICAgbGV0IHJlc29sdmU7XG4gICAgICAgIGNvbnN0IHAgPSBuZXcgSkZhY3RvcnlQcm9taXNlKFxuICAgICAgICAgICAgeyBuYW1lOiBcInVuaW5zdGFsbFwiLCBjb25maWc6IHsgY2hhaW5BdXRvQ29tcGxldGU6IHRydWUgfSB9LFxuICAgICAgICAgICAgX3Jlc29sdmUgPT4gcmVzb2x2ZSA9IF9yZXNvbHZlKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiQuc3RhdGVzLmluc3RhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZSA9IFRyYWl0U2VydmljZS5QSEFTRS5VTklOU1RBTEw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdGF0ZShcImluc3RhbGxlZFwiLCBmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZU1hcC51bmluc3RhbGwuYWRkKHApO1xuICAgICAgICBwLiRjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlVGFzayA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZU1hcC51bmluc3RhbGwuZGVsZXRlKHApO1xuICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2UgPSBUcmFpdFNlcnZpY2UuUEhBU0UuTk9ORVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBleHBpcmVzIGFsbCBzdGFja2VkIGluc3RhbGxcbiAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsXSBvZiB0aGlzLiQuc2VydmljZS5waGFzZU1hcC5pbnN0YWxsLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gdGhpcy4kLnNlcnZpY2UucGhhc2VUYXNrKSB7XG4gICAgICAgICAgICAgICAgVHJhaXRTZXJ2aWNlLnBoYXNlS2lsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbC4kY2hhaW5BYm9ydCgpO1xuICAgICAgICAgICAgdGhpcy4kLnNlcnZpY2UucGhhc2VNYXAuaW5zdGFsbC5kZWxldGUoa2V5KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gcXVldWUgZGlzYWJsZSBiZWZvcmUgdW5pbnN0YWxsXG4gICAgICAgIHRoaXMuJGRpc2FibGUoKTtcblxuICAgICAgICB0aGlzLiQuc2VydmljZS5waGFzZVF1ZXVlID0gdGhpcy4kLnNlcnZpY2UucGhhc2VRdWV1ZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJC5zZXJ2aWNlLnBoYXNlVGFzayA9IHA7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm4gcC4kY2hhaW5cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwXG4gICAgfVxuXG4gICAgc3RhdGljIHBoYXNlS2lsbChjb21wb25lbnQpIHtcbiAgICAgICAgLy8gY29tcG9uZW50LiQuc2VydmljZS5pc1BoYXNlS2lsbGluZyA9IHRydWU7XG4gICAgICAgIGlmIChjb21wb25lbnQuJC50YXNrcy5zaXplKSB7XG4gICAgICAgICAgICBjb21wb25lbnQuJHRhc2tSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLmdldENvbnRleHR1YWxSZW1vdmVQaGFzZShjb21wb25lbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb25lbnQuJC5zZXJ2aWNlLnBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkU7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldENvbnRleHR1YWxSZW1vdmVQaGFzZShqRmFjdG9yeUNvcmVPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIFRyYWl0U2VydmljZS5QSEFTRV9SRVZFUlRbakZhY3RvcnlDb3JlT2JqZWN0LiQuc2VydmljZS5waGFzZV1cbiAgICB9XG5cbiAgICBzdGF0aWMgc2V0RXZlbnROYW1lc3BhY2VSZW1vdmVQaGFzZShqRmFjdG9yeUNvcmVPYmplY3QsIHBhcnNlZEV2ZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBjdXJSZW1vdmVQaGFzZSA9IHBhcnNlZEV2ZW50Lmhhc05hbWVzcGFjZShUcmFpdFNlcnZpY2UuUEhBU0VTKTtcbiAgICAgICAgbGV0IG5ld1JlbW92ZVBoYXNlID0gb3B0aW9ucyAmJiBvcHRpb25zLnJlbW92YWw7XG5cbiAgICAgICAgaWYgKCFuZXdSZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgbmV3UmVtb3ZlUGhhc2UgPSBUcmFpdFNlcnZpY2UuZ2V0Q29udGV4dHVhbFJlbW92ZVBoYXNlKGpGYWN0b3J5Q29yZU9iamVjdCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzcGVjaWFsIGNhc2UgOiBvbihcInVuaW5zdGFsbFwiKSB3aXRoIHJlbW92YWwgPSBESVNBQkxFICh0aGUgZGVmYXVsdCB2YWx1ZSlcbiAgICAgICAgLy8gPT4gZGlzYWJsZSgpIGlzIGFsd2F5cyBjYWxsZWQgYmVmb3JlIHVuaW5zdGFsbCgpIGNhdXNpbmcgdGhlIGV2ZW50IHRvIGJlIHJlbW92ZWQgdG9vIGVhcmx5XG4gICAgICAgIGlmIChwYXJzZWRFdmVudC5ldmVudCA9PT0gXCJ1bmluc3RhbGxcIiAmJiBuZXdSZW1vdmVQaGFzZSA9PT0gVHJhaXRTZXJ2aWNlLlBIQVNFLkRJU0FCTEUpIHtcbiAgICAgICAgICAgIG5ld1JlbW92ZVBoYXNlID0gVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1clJlbW92ZVBoYXNlICE9PSBuZXdSZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgcGFyc2VkRXZlbnQuZGVsZXRlTmFtZXNwYWNlKGN1clJlbW92ZVBoYXNlKTtcbiAgICAgICAgICAgIHBhcnNlZEV2ZW50LmFkZE5hbWVzcGFjZShuZXdSZW1vdmVQaGFzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwYXJzZWRFdmVudC5hZGROYW1lc3BhY2UobmV3UmVtb3ZlUGhhc2UpO1xuICAgIH1cbn1cblxuVHJhaXRTZXJ2aWNlLlBIQVNFID0ge1xuICAgIE5PTkU6IFwiUEhBU0VfTk9ORVwiLFxuICAgIElOU1RBTEw6IFwiUEhBU0VfSU5TVEFMTFwiLFxuICAgIEVOQUJMRTogXCJQSEFTRV9FTkFCTEVcIixcbiAgICBESVNBQkxFOiBcIlBIQVNFX0RJU0FCTEVcIixcbiAgICBVTklOU1RBTEw6IFwiUEhBU0VfVU5JTlNUQUxMXCJcbn07XG5cblRyYWl0U2VydmljZS5QSEFTRV9SRVZFUlQgPSB7XG4gICAgW1RyYWl0U2VydmljZS5QSEFTRS5JTlNUQUxMXTogVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTCxcbiAgICBbVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTF06IFRyYWl0U2VydmljZS5QSEFTRS5JTlNUQUxMLFxuICAgIFtUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRV06IFRyYWl0U2VydmljZS5QSEFTRS5FTkFCTEUsXG4gICAgW1RyYWl0U2VydmljZS5QSEFTRS5FTkFCTEVdOiBUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSxcbiAgICBbVHJhaXRTZXJ2aWNlLlBIQVNFLk5PTkVdOiBUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRVxufTtcblxuVHJhaXRTZXJ2aWNlLlBIQVNFUyA9IE9iamVjdC52YWx1ZXMoVHJhaXRTZXJ2aWNlLlBIQVNFKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByaXZhdGUoc2NvcGUsIHByb3BlcnR5LCB2YWx1ZSwgZGVzY3JpcHRvcikge1xuICAgIEpGYWN0b3J5T2JqZWN0LmFzc2lnbihzY29wZS4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0sIHByb3BlcnR5LCB2YWx1ZSwgZGVzY3JpcHRvcilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByaXZhdGVNZW1iZXIoc2NvcGUsIHByb3BlcnR5LCB2YWx1ZSwgZGVzY3JpcHRvcikge1xuICAgIEpGYWN0b3J5T2JqZWN0LmFzc2lnbihzY29wZS4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV1bcHJvcGVydHldLCB2YWx1ZSwgZGVzY3JpcHRvcilcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmpGYWN0b3J5LlBIQVNFID0gSkZhY3RvcnlPYmplY3QuZGlzaW5oZXJpdChUcmFpdFNlcnZpY2UuUEhBU0UpO1xuXG5qRmFjdG9yeS5UcmFpdENvcmUgPSBUcmFpdENvcmU7XG5qRmFjdG9yeS5UcmFpdEFib3V0ID0gVHJhaXRBYm91dDtcbmpGYWN0b3J5LlRyYWl0TG9nID0gVHJhaXRMb2c7XG5qRmFjdG9yeS5UcmFpdEV2ZW50cyA9IFRyYWl0RXZlbnRzO1xuakZhY3RvcnkuVHJhaXRTdGF0ZSA9IFRyYWl0U3RhdGU7XG5qRmFjdG9yeS5UcmFpdFNlcnZpY2UgPSBUcmFpdFNlcnZpY2U7XG5qRmFjdG9yeS5UcmFpdFRhc2sgPSBUcmFpdFRhc2s7IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdENvbXBvbmVudHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmltcG9ydCB7IGpGYWN0b3J5IH0gZnJvbSBcIi4vakZhY3RvcnlcIjtcbmltcG9ydCB7IEpGQUNUT1JZX0RFViB9IGZyb20gXCIuL2pGYWN0b3J5LWVudlwiO1xuaW1wb3J0IHsgakZhY3RvcnlFcnJvciB9IGZyb20gXCIuL0pGYWN0b3J5RXJyb3JcIjtcbmltcG9ydCB7IEpGYWN0b3J5RXhwZWN0IH0gZnJvbSBcIi4vSkZhY3RvcnlFeHBlY3RcIjtcbmltcG9ydCB7IFRyYWl0Q29yZSwgVHJhaXRTZXJ2aWNlIH0gZnJvbSBcIi4vVHJhaXRzQ29yZVwiO1xuaW1wb3J0IHsgSkZhY3RvcnlGZXRjaCB9IGZyb20gXCIuL0pGYWN0b3J5RmV0Y2hcIjtcbmltcG9ydCB7IEpGYWN0b3J5UHJvbWlzZSB9IGZyb20gXCIuL0pGYWN0b3J5UHJvbWlzZVwiO1xuaW1wb3J0IHsgSkZhY3RvcnlPYmplY3QgfSBmcm9tIFwiLi9KRmFjdG9yeU9iamVjdFwiO1xuaW1wb3J0IHsgakZhY3RvcnlUcmFjZSB9IGZyb20gXCIuL0pGYWN0b3J5VHJhY2VcIjtcbmltcG9ydCB7IGhlbHBlcl9pc1BsYWluT2JqZWN0LCBoZWxwZXJfdXJsX2FicywgalF1ZXJ5IH0gZnJvbSBcIi4vakZhY3RvcnktaGVscGVyc1wiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IEZldGNoXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0RmV0Y2gge1xuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuICAgICAgICBrZXJuZWwub24oXCJkaXNhYmxlXCIsICgpID0+IHRoaXMuJGZldGNoUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRmZXRjaFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJyZXF1ZXN0c1wiLCB0aGlzLiQuY3JlYXRlU3ViTWFwKCksIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEUpO1xuICAgIH1cblxuICAgICRmZXRjaChpZCwgdXJsLCBmZXRjaE9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZCA9IHRoaXMuJC5yZXF1ZXN0cy4kaWRfcmVzb2x2ZShpZCk7XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2goaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiRmZXRjaCh1cmwpXCIsIHVybCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2goZmV0Y2hPcHRpb25zKVwiLCBmZXRjaE9wdGlvbnMpLnR5cGVQbGFpbk9iamVjdCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuJC5yZXF1ZXN0cy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX0RVUExJQ0FURUQoeyB0YXJnZXQ6IFwiJGZldGNoKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcm9taXNlID0gbmV3IEpGYWN0b3J5RmV0Y2goe1xuICAgICAgICAgICAgbmFtZTogaWQsXG4gICAgICAgICAgICB0cmFjZVNvdXJjZTogakZhY3RvcnlUcmFjZS50cmFjZXIuY2FwdHVyZVRyYWNlU291cmNlKFwiJGZldGNoXCIpLFxuICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgY2hhaW5BdXRvQ29tcGxldGU6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdXJsLCBmZXRjaE9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuJC5yZXF1ZXN0cy4kcmVnaXN0ZXJBc3luYyhpZCwgJyRmZXRjaChcIicgKyBpZCArICdcIiknLCBwcm9taXNlKTtcblxuICAgICAgICBwcm9taXNlLiRjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiQucmVxdWVzdHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGZldGNoUmVtb3ZlKGlkKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICAkZmV0Y2hUZXh0KGlkLCB1cmwsIGZldGNoT3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRmZXRjaChpZCwgdXJsLCB7IC4uLmZldGNoT3B0aW9ucywgJHR5cGVUZXh0OiB0cnVlIH0pO1xuICAgIH1cblxuICAgICRmZXRjaEpTT04oaWQsIHVybCwgZmV0Y2hPcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZldGNoKGlkLCB1cmwsIHsgLi4uZmV0Y2hPcHRpb25zLCAkdHlwZUpTT046IHRydWUgfSk7XG4gICAgfVxuXG4gICAgJGZldGNoUmVtb3ZlKGlkLCByZWFzb24pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2hSZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICByZWFzb24gJiYgSkZhY3RvcnlFeHBlY3QoXCIkZmV0Y2hSZW1vdmUocmVhc29uKVwiLCByZWFzb24pLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLnJlcXVlc3RzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkZmV0Y2hSZW1vdmUoaWQpXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBpZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZGVidWdnZXIsYnJhY2Utc3R5bGVcbiAgICAgICAgICAgIGlmICh0aGlzLiQucmVxdWVzdHMuZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLnJlcXVlc3RzLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQucmVxdWVzdHMuZ2V0KGlkKTtcbiAgICAgICAgdGhpcy4kLnJlcXVlc3RzLmRlbGV0ZShpZCk7XG4gICAgICAgIGVudHJ5LiRjaGFpbkFib3J0KHJlYXNvbiB8fCBcIiRmZXRjaFJlbW92ZSgpXCIpO1xuICAgIH1cblxuICAgICRmZXRjaFJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQucmVxdWVzdHM7XG4gICAgICAgIGlmIChzdWJzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgc3ViXSBvZiBzdWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yi4kcGhhc2VSZW1vdmUgPT09IHJlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGZldGNoUmVtb3ZlKGtleSwgXCIkZmV0Y2hSZW1vdmVBbGwoXCIgKyByZW1vdmVQaGFzZSArIFwiKVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFpdCBUaW1lb3V0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0VGltZW91dCB7XG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgKCkgPT4gdGhpcy4kdGltZW91dFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSkpO1xuICAgICAgICBrZXJuZWwub24oXCJ1bmluc3RhbGxcIiwgKCkgPT4gdGhpcy4kdGltZW91dFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJ0aW1lb3V0c1wiLCB0aGlzLiQuY3JlYXRlU3ViTWFwKCksIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEUpO1xuICAgIH1cblxuICAgICR0aW1lb3V0KGlkLCBkZWxheSwgaGFuZGxlciA9IG51bGwsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gaWRcbiAgICAgICAgLy8gaWQsIGRlbGF5XG4gICAgICAgIC8vIGlkLCBkZWxheSwgaGFuZGxlciwgLi4uYXJnc1xuXG4gICAgICAgIGlkID0gdGhpcy4kLnRpbWVvdXRzLiRpZF9yZXNvbHZlKGlkKTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImRlbGF5XCIsIGRlbGF5KS50eXBlTnVtYmVyKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImhhbmRsZXJcIiwgaGFuZGxlcikudHlwZShGdW5jdGlvbiwgbnVsbCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kLnRpbWVvdXRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkdGltZW91dChpZClcIiwgZ2l2ZW46IGlkIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGltZXI7XG4gICAgICAgIGxldCBwcm9taXNlID0gbmV3IEpGYWN0b3J5UHJvbWlzZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBpZCxcbiAgICAgICAgICAgICAgICB0cmFjZVNvdXJjZTogakZhY3RvcnlUcmFjZS50cmFjZXIuY2FwdHVyZVRyYWNlU291cmNlKFwiJHRpbWVvdXRcIiksXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoYWluQXV0b0NvbXBsZXRlOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJvbWlzZS4kaXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGhhbmRsZXIgPyBoYW5kbGVyKC4uLmFyZ3MpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGRlbGF5KVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHByb21pc2UuJGNoYWluLmRhdGEudGltZXIgPSB0aW1lcjtcbiAgICAgICAgdGhpcy4kLnRpbWVvdXRzLiRyZWdpc3RlckFzeW5jKGlkLCAnJHRpbWVvdXQoXCInICsgaWQgKyAnXCIpJywgcHJvbWlzZSk7XG5cbiAgICAgICAgcHJvbWlzZS4kY2hhaW4udGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4kLnRpbWVvdXRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiR0aW1lb3V0UmVtb3ZlKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgJHRpbWVvdXRSZW1vdmUoaWQsIHJlYXNvbikge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiR0aW1lb3V0UmVtb3ZlKGlkKVwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgcmVhc29uICYmIEpGYWN0b3J5RXhwZWN0KFwiJHRpbWVvdXRSZW1vdmUocmVhc29uKVwiLCByZWFzb24pLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLnRpbWVvdXRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkdGltZW91dFJlbW92ZShpZClcIixcbiAgICAgICAgICAgICAgICAgICAgZ2l2ZW46IGlkXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1kZWJ1Z2dlcixicmFjZS1zdHlsZVxuICAgICAgICAgICAgaWYgKHRoaXMuJC50aW1lb3V0cy5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQudGltZW91dHMuZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQudGltZW91dHMuZ2V0KGlkKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGVudHJ5LiRjaGFpbi5kYXRhLnRpbWVyKTtcbiAgICAgICAgLy8gZGVsZXRpbmcgYmVmb3JlIGNoYWluQWJvcnQoKSB0byBwcmV2ZW50IHJlbW92ZSgpIHJlY2FsbFxuICAgICAgICB0aGlzLiQudGltZW91dHMuZGVsZXRlKGlkKTtcbiAgICAgICAgZW50cnkuJGNoYWluQWJvcnQocmVhc29uIHx8IFwiJHRpbWVvdXRSZW1vdmUoKVwiKTtcbiAgICB9XG5cbiAgICAkdGltZW91dFJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdWJzID0gdGhpcy4kLnRpbWVvdXRzO1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiR0aW1lb3V0UmVtb3ZlKGtleSwgXCIkdGltZW91dFJlbW92ZUFsbCgpXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IEludGVydmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0SW50ZXJ2YWwge1xuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuICAgICAgICBrZXJuZWwub24oXCJkaXNhYmxlXCIsICgpID0+IHRoaXMuJGludGVydmFsUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRpbnRlcnZhbFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJ0aW1laW50c1wiLCB0aGlzLiQuY3JlYXRlU3ViTWFwKCksIEpGYWN0b3J5T2JqZWN0LmRlc2NyaXB0b3JzLkVOVU1FUkFCTEUpO1xuICAgIH1cblxuICAgICRpbnRlcnZhbChpZCwgZGVsYXksIGhhbmRsZXIsIC4uLmFyZ3MpIHtcbiAgICAgICAgaWQgPSB0aGlzLiQudGltZWludHMuJGlkX3Jlc29sdmUoaWQpO1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImhhbmRsZXJcIiwgaGFuZGxlcikudHlwZUZ1bmN0aW9uKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImRlbGF5XCIsIGRlbGF5KS50eXBlTnVtYmVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kLnRpbWVpbnRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkaW50ZXJ2YWwoaWQpXCIsIGdpdmVuOiBpZCB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKGhhbmRsZXIsIGRlbGF5LCAuLi5hcmdzKTtcbiAgICAgICAgdGhpcy4kLnRpbWVpbnRzLiRyZWdpc3RlclN5bmMoaWQsIHRpbWVyKVxuICAgIH1cblxuICAgICRpbnRlcnZhbFJlbW92ZShpZCkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcIiRpbnRlcnZhbFJlbW92ZShpZClcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLnRpbWVpbnRzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkaW50ZXJ2YWxSZW1vdmUoaWQpXCIsXG4gICAgICAgICAgICAgICAgICAgIGdpdmVuOiBpZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZGVidWdnZXIsYnJhY2Utc3R5bGVcbiAgICAgICAgICAgIGlmICh0aGlzLiQudGltZWludHMuZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLnRpbWVpbnRzLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLiQudGltZWludHMuZ2V0KGlkKS4kdmFsdWUpO1xuICAgICAgICB0aGlzLiQudGltZWludHMuZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICRpbnRlcnZhbFJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQudGltZWludHM7XG4gICAgICAgIGlmIChzdWJzLnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgc3ViXSBvZiBzdWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yi4kcGhhc2VSZW1vdmUgPT09IHJlbW92ZVBoYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGludGVydmFsUmVtb3ZlKGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVHJhaXQgTXV0YXRpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0TXV0YXRpb24ge1xuICAgIHRyYWl0X2NvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBrZXJuZWwgPSB0aGlzLiRbVHJhaXRDb3JlLlNZTUJPTF9QUklWQVRFXS5ldmVudHMua2VybmVsO1xuICAgICAgICBrZXJuZWwub24oXCJkaXNhYmxlXCIsICgpID0+IHRoaXMuJG11dGF0aW9uUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRtdXRhdGlvblJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJtdXRhdGlvbnNcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkbXV0YXRpb24oaWQsIHBhcmVudCwgY29uZmlnLCBoYW5kbGVyKSB7XG4gICAgICAgIGlkID0gdGhpcy4kLm11dGF0aW9ucy4kaWRfcmVzb2x2ZShpZCk7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaWRcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwicGFyZW50XCIsIHBhcmVudCkudHlwZShIVE1MRWxlbWVudCwgRG9jdW1lbnQpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJjb25maWdcIiwgY29uZmlnKS50eXBlUGxhaW5PYmplY3QoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaGFuZGxlclwiLCBoYW5kbGVyKS50eXBlRnVuY3Rpb24oKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiQubXV0YXRpb25zLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkbXV0YXRpb24oaWQpXCIsIGdpdmVuOiBpZCB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGhhbmRsZXIpO1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHBhcmVudCwgY29uZmlnKTtcbiAgICAgICAgdGhpcy4kLm11dGF0aW9ucy4kcmVnaXN0ZXJTeW5jKGlkLCBvYnNlcnZlcik7XG4gICAgfVxuXG4gICAgJG11dGF0aW9uUmVtb3ZlKGlkLCByZWFzb24pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkbXV0YXRpb25SZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICByZWFzb24gJiYgSkZhY3RvcnlFeHBlY3QoXCIkbXV0YXRpb25SZW1vdmUocmVhc29uKVwiLCByZWFzb24pLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLm11dGF0aW9ucy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX01JU1NJTkcoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiJG11dGF0aW9uUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLm11dGF0aW9ucy5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQubXV0YXRpb25zLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kLm11dGF0aW9ucy5nZXQoaWQpLiR2YWx1ZS5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMuJC5tdXRhdGlvbnMuZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICRtdXRhdGlvblJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQubXV0YXRpb25zO1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRtdXRhdGlvblJlbW92ZShrZXkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRyYWl0IERPTVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBjbGFzcyBUcmFpdERPTSB7XG4gICAgdHJhaXRfY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuJFtUcmFpdENvcmUuU1lNQk9MX1BSSVZBVEVdLmV2ZW50cy5rZXJuZWw7XG4gICAgICAgIGtlcm5lbC5vbihcImRpc2FibGVcIiwgKCkgPT4gdGhpcy4kZG9tUmVtb3ZlQWxsKFRyYWl0U2VydmljZS5QSEFTRS5ESVNBQkxFKSk7XG4gICAgICAgIGtlcm5lbC5vbihcInVuaW5zdGFsbFwiLCAoKSA9PiB0aGlzLiRkb21SZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTCkpO1xuICAgICAgICB0aGlzLiQuYXNzaWduKFwiZG9tXCIsIHRoaXMuJC5jcmVhdGVTdWJNYXAoKSwgSkZhY3RvcnlPYmplY3QuZGVzY3JpcHRvcnMuRU5VTUVSQUJMRSk7XG4gICAgfVxuXG4gICAgJGRvbShpZCwgalF1ZXJ5QXJndW1lbnQsIGFwcGVuZFRvKSB7XG4gICAgICAgIGlkID0gdGhpcy4kLmRvbS4kaWRfcmVzb2x2ZShpZCk7XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJpZFwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJqUXVlcnlBcmd1bWVudFwiLCBqUXVlcnlBcmd1bWVudCkudHlwZShTdHJpbmcsIE9iamVjdCk7XG4gICAgICAgICAgICBhcHBlbmRUbyAmJiBKRmFjdG9yeUV4cGVjdChcImFwcGVuZFRvXCIsIGFwcGVuZFRvKS50eXBlKFN0cmluZywgT2JqZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkb21JZDtcbiAgICAgICAgaWYgKGlkWzBdID09PSBcIiNcIikge1xuICAgICAgICAgICAgaWQgPSBpZC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICBkb21JZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYgJiYgdGhpcy4kLmRvbS5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkZG9tKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkb20gPSBqUXVlcnkoalF1ZXJ5QXJndW1lbnQpO1xuXG4gICAgICAgIGlmIChkb21bMF0udGFnTmFtZSA9PT0gXCJURU1QTEFURVwiKSB7XG4gICAgICAgICAgICBkb20gPSBqUXVlcnkoalF1ZXJ5KGRvbVswXSkuaHRtbCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb21JZCkge1xuICAgICAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgICAgIGlmIChkb21bMF0ubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLklOVkFMSURfVkFMVUUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcIiRkb20oI2lkKVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2l2ZW46IGRvbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJjYW5ub3Qgc2V0IHRoZSBkb20gaWQ6IHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBzZWxlY3Rpb24gaXNuJ3QgYW4gRUxFTUVOVF9OT0RFXCJcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb21bMF0uaWQgPSBpZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFwcGVuZFRvKSB7XG4gICAgICAgICAgICBkb20uYXBwZW5kVG8oYXBwZW5kVG8pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy4kLmRvbS4kcmVnaXN0ZXJTeW5jKGlkLCBkb20pLiR2YWx1ZTtcbiAgICB9XG5cbiAgICAkZG9tRmV0Y2goaWQsIHVybCwgZmV0Y2hPcHRpb25zLCBhcHBlbmRUbykge1xuICAgICAgICBpZiAoZmV0Y2hPcHRpb25zICYmICFoZWxwZXJfaXNQbGFpbk9iamVjdChmZXRjaE9wdGlvbnMpKSB7XG4gICAgICAgICAgICBbZmV0Y2hPcHRpb25zLCBhcHBlbmRUb10gPSBbe30sIGZldGNoT3B0aW9uc11cbiAgICAgICAgfVxuXG4gICAgICAgIGlkID0gdGhpcy4kLmRvbS4kaWRfcmVzb2x2ZShpZCk7XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJpZFwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJ1cmxcIiwgdXJsKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBhcHBlbmRUbyAmJiBKRmFjdG9yeUV4cGVjdChcImFwcGVuZFRvXCIsIGFwcGVuZFRvKS50eXBlKFN0cmluZywgT2JqZWN0KTtcbiAgICAgICAgICAgIGZldGNoT3B0aW9ucyAmJiBKRmFjdG9yeUV4cGVjdChcImZldGNoT3B0aW9uc1wiLCBmZXRjaE9wdGlvbnMpLnR5cGUoT2JqZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkb21JZDtcbiAgICAgICAgaWYgKGlkWzBdID09PSBcIiNcIikge1xuICAgICAgICAgICAgaWQgPSBpZC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICBkb21JZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYgJiYgdGhpcy4kLmRvbS5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkZG9tRmV0Y2goaWQpXCIsIGdpdmVuOiBpZCB9KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHByb21pc2UgPSB0aGlzLiRmZXRjaFRleHQoJyRkb21GZXRjaChcIicgKyBpZCArICdcIiknLCB1cmwsIGZldGNoT3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKHIgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBkb20gPSBqUXVlcnkocik7XG4gICAgICAgICAgICAgICAgaWYgKGRvbUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbVswXS5pZCA9IGlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcHBlbmRUbykge1xuICAgICAgICAgICAgICAgICAgICBkb20uYXBwZW5kVG8oYXBwZW5kVG8pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkb21cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuJC5kb20uJHJlZ2lzdGVyQXN5bmMoaWQsICckZG9tRmV0Y2goXCInICsgaWQgKyAnXCIpJywgcHJvbWlzZSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlXG4gICAgfVxuXG4gICAgJGRvbVJlbW92ZShpZCwgcmVhc29uKSB7XG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiJGRvbVJlbW92ZShpZClcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIHJlYXNvbiAmJiBKRmFjdG9yeUV4cGVjdChcIiRkb21SZW1vdmUocmVhc29uKVwiLCByZWFzb24pLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4kLmRvbS5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX01JU1NJTkcoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiJGRvbVJlbW92ZShpZClcIixcbiAgICAgICAgICAgICAgICAgICAgZ2l2ZW46IGlkXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1kZWJ1Z2dlcixicmFjZS1zdHlsZVxuICAgICAgICAgICAgaWYgKHRoaXMuJC5kb20uZ2V0KGlkKS5fZGVidWdfcmVtb3ZlX2NhbGxlZCkge2RlYnVnZ2VyfVxuICAgICAgICAgICAgdGhpcy4kLmRvbS5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGVudHJ5ID0gdGhpcy4kLmRvbS5nZXQoaWQpO1xuICAgICAgICBsZXQgdmFsdWUgPSBlbnRyeS4kdmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIGpRdWVyeSkge1xuICAgICAgICAgICAgdmFsdWUucmVtb3ZlKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW50cnkgaW5zdGFuY2VvZiBKRmFjdG9yeUZldGNoKSB7XG4gICAgICAgICAgICBlbnRyeS4kY2hhaW5BYm9ydChyZWFzb24gfHwgXCIkZG9tUmVtb3ZlKClcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kLmRvbS5kZWxldGUoaWQpXG4gICAgfVxuXG4gICAgJGRvbVJlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQuZG9tO1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRkb21SZW1vdmUoa2V5KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgVHJhaXQgQ1NTXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNsYXNzIFRyYWl0Q1NTIHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qga2VybmVsID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbDtcbiAgICAgICAga2VybmVsLm9uKFwiZGlzYWJsZVwiLCAoKSA9PiB0aGlzLiRjc3NSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLkRJU0FCTEUpKTtcbiAgICAgICAga2VybmVsLm9uKFwidW5pbnN0YWxsXCIsICgpID0+IHRoaXMuJGNzc1JlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJjc3NcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkY3NzKGlkLCBzdHlsZUJvZHkpIHtcbiAgICAgICAgaWQgPSB0aGlzLiQuY3NzLiRpZF9yZXNvbHZlKGlkKTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImNzc1wiLCBzdHlsZUJvZHkpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjc3NJZDtcbiAgICAgICAgaWYgKGlkWzBdID09PSBcIiNcIikge1xuICAgICAgICAgICAgaWQgPSBpZC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICBjc3NJZCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYgJiYgdGhpcy4kLmNzcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkY3NzKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiQuY3NzLiRyZWdpc3RlclN5bmMoaWQsXG4gICAgICAgICAgICBqUXVlcnkoXCI8c3R5bGU+XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoY3NzSWQgPyB7IGlkIH0gOiB7fSlcbiAgICAgICAgICAgICAgICAuaHRtbChzdHlsZUJvZHkpXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKFwiaGVhZFwiKVxuICAgICAgICApLiR2YWx1ZTtcbiAgICB9XG5cbiAgICAkY3NzRmV0Y2goaWQsIHVybCwgYXBwZW5kVG8gPSBcImhlYWRcIikge1xuICAgICAgICBpZCA9IHRoaXMuJC5jc3MuJGlkX3Jlc29sdmUoaWQpO1xuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwiaWRcIiwgaWQpLnR5cGVTdHJpbmcoKTtcbiAgICAgICAgICAgIEpGYWN0b3J5RXhwZWN0KFwidXJsXCIsIHVybCkudHlwZVN0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNzc0lkO1xuICAgICAgICBpZiAoaWRbMF0gPT09IFwiI1wiKSB7XG4gICAgICAgICAgICBpZCA9IGlkLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIGNzc0lkID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiB0aGlzLiQuY3NzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBqRmFjdG9yeUVycm9yLktFWV9EVVBMSUNBVEVEKHsgdGFyZ2V0OiBcIiRjc3NGZXRjaChpZClcIiwgZ2l2ZW46IGlkIH0pXG4gICAgICAgIH1cblxuICAgICAgICB1cmwgPSBoZWxwZXJfdXJsX2Ficyh1cmwpO1xuXG4gICAgICAgIGxldCBleGlzdCA9IGpRdWVyeShhcHBlbmRUbykuZmluZChgbGlua1tocmVmPVwiJHt1cmx9XCJdYClbMF07XG4gICAgICAgIGlmIChleGlzdCkge1xuICAgICAgICAgICAgZXhpc3QuZGF0YXNldC51c2FnZSA9IHBhcnNlSW50KGV4aXN0LmRhdGFzZXQudXNhZ2UpICsgMTtcbiAgICAgICAgICAgIGxldCBkb20gPSBqUXVlcnkoZXhpc3QpO1xuXG4gICAgICAgICAgICBsZXQgcHJvbWlzZSA9IEpGYWN0b3J5UHJvbWlzZS5yZXNvbHZlKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzogeyBjaGFpbkF1dG9Db21wbGV0ZTogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICB0cmFjZVNvdXJjZTogakZhY3RvcnlUcmFjZS50cmFjZXIuY2FwdHVyZVRyYWNlU291cmNlKFwiJGNzc0ZldGNoXCIpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkb21cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwcm9taXNlLiRjaGFpbi5kYXRhLmRvbSA9IGRvbTtcbiAgICAgICAgICAgIHRoaXMuJC5jc3MuJHJlZ2lzdGVyQXN5bmMoaWQsICckY3NzRmV0Y2goXCInICsgaWQgKyAnXCIpJywgcHJvbWlzZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgZG9tO1xuICAgICAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgSkZhY3RvcnlQcm9taXNlKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzogeyBjaGFpbkF1dG9Db21wbGV0ZTogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICB0cmFjZVNvdXJjZTogakZhY3RvcnlUcmFjZS50cmFjZXIuY2FwdHVyZVRyYWNlU291cmNlKFwiJGNzc0ZldGNoXCIpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXNvbHZlID0+IGRvbSA9IGpRdWVyeShcIjxsaW5rPlwiLFxuICAgICAgICAgICAgICAgICAgICB7IGlkOiBjc3NJZCA/IGlkIDogXCJcIiwgcmVsOiBcInN0eWxlc2hlZXRcIiwgdHlwZTogXCJ0ZXh0L2Nzc1wiLCBcImRhdGEtdXNhZ2VcIjogXCIxXCIgfSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKGFwcGVuZFRvKVxuICAgICAgICAgICAgICAgICAgICAub24oXCJsb2FkXCIsICgpID0+IHJlc29sdmUoZG9tKSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJocmVmXCIsIHVybClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHByb21pc2UuJGNoYWluLmRhdGEuZG9tID0gZG9tO1xuICAgICAgICAgICAgdGhpcy4kLmNzcy4kcmVnaXN0ZXJBc3luYyhpZCwgJyRjc3NGZXRjaChcIicgKyBpZCArICdcIiknLCBwcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkY3NzUmVtb3ZlKGlkLCByZWFzb24pIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkY3NzUmVtb3ZlKGlkKVwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgcmVhc29uICYmIEpGYWN0b3J5RXhwZWN0KFwiJGNzc1JlbW92ZShyZWFzb24pXCIsIHJlYXNvbikudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiQuY3NzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkY3NzUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLmNzcy5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQuY3NzLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQuY3NzLmdldChpZCk7XG4gICAgICAgIGxldCB2YWx1ZSA9IGVudHJ5LiRjaGFpbiAmJiBlbnRyeS4kY2hhaW4uZGF0YS5kb20gfHwgZW50cnkuJHZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBqUXVlcnkpIHtcbiAgICAgICAgICAgIGxldCB1c2FnZSA9IHBhcnNlSW50KHZhbHVlWzBdLmRhdGFzZXQudXNhZ2UpIC0gMTtcbiAgICAgICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlWzBdLmRhdGFzZXQudXNhZ2UgPSB1c2FnZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS5yZW1vdmUoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlbnRyeSBpbnN0YW5jZW9mIEpGYWN0b3J5UHJvbWlzZSkge1xuICAgICAgICAgICAgZW50cnkuJGNoYWluQWJvcnQocmVhc29uIHx8IFwiJGNzc1JlbW92ZSgpXCIpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kLmNzcy5kZWxldGUoaWQpXG4gICAgfVxuXG4gICAgJGNzc1JlbW92ZUFsbChyZW1vdmVQaGFzZSkge1xuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInJlbW92ZVBoYXNlXCIsIHJlbW92ZVBoYXNlKVxuICAgICAgICAgICAgICAgIC5lcXVhbEluKFRyYWl0U2VydmljZS5QSEFTRVMpXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YnMgPSB0aGlzLiQuY3NzO1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRjc3NSZW1vdmUoa2V5KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRyYWl0TGliVnVlIHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qga2VybmVsID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbDtcbiAgICAgICAga2VybmVsLm9uKFwiZGlzYWJsZVwiLCAoKSA9PiB0aGlzLiR2dWVSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLkRJU0FCTEUpKTtcbiAgICAgICAga2VybmVsLm9uKFwidW5pbnN0YWxsXCIsICgpID0+IHRoaXMuJHZ1ZVJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuVU5JTlNUQUxMKSk7XG4gICAgICAgIHRoaXMuJC5hc3NpZ24oXCJ2dWVcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkdnVlKGlkLCB2dWUpIHtcbiAgICAgICAgaWQgPSB0aGlzLiQudnVlLiRpZF9yZXNvbHZlKGlkKTtcblxuICAgICAgICBpZiAoSkZBQ1RPUllfREVWKSB7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcImlkXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBKRmFjdG9yeUV4cGVjdChcInZ1ZVwiLCB2dWUpLnR5cGUoT2JqZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYgJiYgdGhpcy4kLnZ1ZS5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfRFVQTElDQVRFRCh7IHRhcmdldDogXCIkdnVlKGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiQudnVlLiRyZWdpc3RlclN5bmMoaWQsIHZ1ZSkuJHZhbHVlO1xuICAgIH1cblxuICAgICR2dWVSZW1vdmUoaWQpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkdnVlUmVtb3ZlKGlkKVwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiQudnVlLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgakZhY3RvcnlFcnJvci5LRVlfTUlTU0lORyh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCIkdnVlUmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLnZ1ZS5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkKSB7ZGVidWdnZXJ9XG4gICAgICAgICAgICB0aGlzLiQudnVlLmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZW50cnkgPSB0aGlzLiQudnVlLmdldChpZCk7XG4gICAgICAgIGpRdWVyeShlbnRyeS4kdmFsdWUuJGVsKS5yZW1vdmUoKTtcbiAgICAgICAgZW50cnkuJHZhbHVlLiRkZXN0cm95KCk7XG4gICAgICAgIHRoaXMuJC52dWUuZGVsZXRlKGlkKVxuICAgIH1cblxuICAgICR2dWVSZW1vdmVBbGwocmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJyZW1vdmVQaGFzZVwiLCByZW1vdmVQaGFzZSlcbiAgICAgICAgICAgICAgICAuZXF1YWxJbihUcmFpdFNlcnZpY2UuUEhBU0VTKVxuICAgICAgICB9XG4gICAgICAgIGxldCBzdWJzID0gdGhpcy4kLnZ1ZTtcbiAgICAgICAgaWYgKHN1YnMuc2l6ZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBzdWJdIG9mIHN1YnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3ViLiRwaGFzZVJlbW92ZSA9PT0gcmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdnVlUmVtb3ZlKGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUcmFpdExpYlJlYWN0IHtcbiAgICB0cmFpdF9jb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3Qga2VybmVsID0gdGhpcy4kW1RyYWl0Q29yZS5TWU1CT0xfUFJJVkFURV0uZXZlbnRzLmtlcm5lbDtcbiAgICAgICAga2VybmVsLm9uKFwiZGlzYWJsZVwiLCAoKSA9PiB0aGlzLiRyZWFjdFJlbW92ZUFsbChUcmFpdFNlcnZpY2UuUEhBU0UuRElTQUJMRSkpO1xuICAgICAgICBrZXJuZWwub24oXCJ1bmluc3RhbGxcIiwgKCkgPT4gdGhpcy4kcmVhY3RSZW1vdmVBbGwoVHJhaXRTZXJ2aWNlLlBIQVNFLlVOSU5TVEFMTCkpO1xuICAgICAgICB0aGlzLiQuYXNzaWduKFwicmVhY3RcIiwgdGhpcy4kLmNyZWF0ZVN1Yk1hcCgpLCBKRmFjdG9yeU9iamVjdC5kZXNjcmlwdG9ycy5FTlVNRVJBQkxFKTtcbiAgICB9XG5cbiAgICAkcmVhY3QoaWQsIGNvbnRhaW5lciwgZWxlbWVudCwgLi4ucmVuZGVyT3RoZXJBcmd1bWVudHMpIHtcbiAgICAgICAgaWQgPSB0aGlzLiQucmVhY3QuJGlkX3Jlc29sdmUoaWQpO1xuXG4gICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgIGlmICghakZhY3RvcnkuUmVhY3RET00pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJqRmFjdG9yeS5SZWFjdERPTT1SZWFjdERPTSBtdXN0IGJlIHNldCBiZWZvcmUgdXNpbmcgdGhlIFJlYWN0IFRyYWl0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJpZFwiLCBpZCkudHlwZVN0cmluZygpO1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJjb250YWluZXJcIiwgY29udGFpbmVyKS50eXBlKEhUTUxFbGVtZW50LCBqUXVlcnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFViAmJiB0aGlzLiQucmVhY3QuaGFzKGlkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX0RVUExJQ0FURUQoeyB0YXJnZXQ6IFwiJHJlYWN0KGlkKVwiLCBnaXZlbjogaWQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRhaW5lciA9IGpRdWVyeShjb250YWluZXIpWzBdO1xuICAgICAgICBsZXQgdmlldyA9IGpGYWN0b3J5LlJlYWN0RE9NLnJlbmRlcihlbGVtZW50LCBjb250YWluZXIsIC4uLnJlbmRlck90aGVyQXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuJC5yZWFjdC4kcmVnaXN0ZXJTeW5jKGlkLCB7IGNvbnRhaW5lciwgdmlldyB9KS4kdmFsdWUudmlldztcbiAgICB9XG5cbiAgICAkcmVhY3RSZW1vdmUoaWQpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCIkcmVhY3RSZW1vdmUoaWQpXCIsIGlkKS50eXBlU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuJC5yZWFjdC5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGpGYWN0b3J5RXJyb3IuS0VZX01JU1NJTkcoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiJHJlYWN0UmVtb3ZlKGlkKVwiLFxuICAgICAgICAgICAgICAgICAgICBnaXZlbjogaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyLGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBpZiAodGhpcy4kLnJlYWN0LmdldChpZCkuX2RlYnVnX3JlbW92ZV9jYWxsZWQpIHtkZWJ1Z2dlcn1cbiAgICAgICAgICAgIHRoaXMuJC5yZWFjdC5nZXQoaWQpLl9kZWJ1Z19yZW1vdmVfY2FsbGVkID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy4kLnJlYWN0LmdldChpZCkuJHZhbHVlO1xuICAgICAgICBsZXQgZWwgPSB2YWx1ZS5jb250YWluZXI7XG4gICAgICAgIGlmIChlbCkge1xuICAgICAgICAgICAgaWYgKCFqRmFjdG9yeS5SZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKGVsKSkge1xuICAgICAgICAgICAgICAgIGlmIChKRkFDVE9SWV9ERVYpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbG9nV2FybihcInVubW91bnRDb21wb25lbnRBdE5vZGUgZmFpbGVkIHRvIHVubW91bnRcIiwgZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGpRdWVyeShlbCkucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kLnJlYWN0LmRlbGV0ZShpZClcbiAgICB9XG5cbiAgICAkcmVhY3RSZW1vdmVBbGwocmVtb3ZlUGhhc2UpIHtcbiAgICAgICAgaWYgKEpGQUNUT1JZX0RFVikge1xuICAgICAgICAgICAgSkZhY3RvcnlFeHBlY3QoXCJyZW1vdmVQaGFzZVwiLCByZW1vdmVQaGFzZSlcbiAgICAgICAgICAgICAgICAuZXF1YWxJbihUcmFpdFNlcnZpY2UuUEhBU0VTKVxuICAgICAgICB9XG4gICAgICAgIGxldCBzdWJzID0gdGhpcy4kLnJlYWN0O1xuICAgICAgICBpZiAoc3Vicy5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHN1Yl0gb2Ygc3Vicykge1xuICAgICAgICAgICAgICAgIGlmIChzdWIuJHBoYXNlUmVtb3ZlID09PSByZW1vdmVQaGFzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWFjdFJlbW92ZShrZXkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuakZhY3RvcnkuVHJhaXRGZXRjaCA9IFRyYWl0RmV0Y2g7XG5qRmFjdG9yeS5UcmFpdFRpbWVvdXQgPSBUcmFpdFRpbWVvdXQ7XG5qRmFjdG9yeS5UcmFpdEludGVydmFsID0gVHJhaXRJbnRlcnZhbDtcbmpGYWN0b3J5LlRyYWl0TXV0YXRpb24gPSBUcmFpdE11dGF0aW9uO1xuakZhY3RvcnkuVHJhaXRET00gPSBUcmFpdERPTTtcbmpGYWN0b3J5LlRyYWl0Q1NTID0gVHJhaXRDU1M7XG5qRmFjdG9yeS5UcmFpdExpYlZ1ZSA9IFRyYWl0TGliVnVlO1xuakZhY3RvcnkuVHJhaXRMaWJSZWFjdCA9IFRyYWl0TGliUmVhY3Q7IiwiLyogakZhY3RvcnksIENvcHlyaWdodCAoYykgMjAxOSwgU3TDqXBoYW5lIFBsYXppcywgaHR0cHM6Ly9naXRodWIuY29tL2pmYWN0b3J5LWVzL2pmYWN0b3J5L2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gakZhY3RvcnkgYnVuZGxlIGluZGV4IChzZWUgcGFja2FnZS5qc29uIHNjcmlwdHMgdG8gY29tcGlsZSB0aGUgL2Rpc3QpXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFVzZWQgYnkgdGhlIGJ1aWxkIHNjcmlwdHMgdG8gY29tcGlsZSBtb2R1bGVzIHRhcmdldGluZyB0aGUgY29uZmlndXJhdGlvbiAocHJvZHVjdGlvbiwgZGV2ZWxvcG1lbnQsIGRlYnVnLi4uKVxuLy8gQWxtb3N0IGV2ZXJ5dGhpbmcgaXMgZXhwb3J0ZWQ7IFRoZSByZXN1bHRpbmcgbW9kdWxlcyBzaG91bGQgYmUgaW1wb3J0ZWQgYnkgYSBidW5kbGVyIHRoYXQgc3VwcG9ydHMgVHJlZSBTaGFja2luZy5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5pbXBvcnQgeyBqRmFjdG9yeUxvYWRlciB9IGZyb20gXCIuL2pGYWN0b3J5LWxvYWRlclwiO1xuXG5leHBvcnQgKiBmcm9tIFwiLi9qRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vakZhY3RvcnktZW52XCI7XG5cbmV4cG9ydCAqIGZyb20gXCIuL2pGYWN0b3J5LXRyYWl0c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vakZhY3RvcnktbG9hZGVyXCI7XG5cbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5QWJvdXRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5RXJyb3JcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5RXZlbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9KRmFjdG9yeUV4cGVjdFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlGZXRjaFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlGdW5jdGlvblwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlMb2dnZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5T2JqZWN0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9KRmFjdG9yeVByb21pc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0pGYWN0b3J5VGltZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlUcmFjZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSkZhY3RvcnlUcmFpdHNcIjtcblxuZXhwb3J0ICogZnJvbSBcIi4vVHJhaXRzQ29yZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vVHJhaXRzQ29tcG9uZW50c1wiO1xuXG5pZiAodHlwZW9mIGpGYWN0b3J5T3ZlcnJpZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgIWpGYWN0b3J5T3ZlcnJpZGUpIHtcbiAgICBqRmFjdG9yeUxvYWRlci5pbml0KCk7XG59Il0sIm5hbWVzIjpbIkpGQUNUT1JZX0NMSSIsInByb2Nlc3MiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJqRmFjdG9yeUNvbmZpZyIsIlRyYWl0TG9nIiwiSkZhY3RvcnlFcnJvciIsImtleXMiLCJKRmFjdG9yeVRyYWNlIiwibGliT3B0aW9ucyIsIm9mZmxpbmUiLCJCb29sZWFuIiwiZ2xvYmFsVGhpcyIsImNocm9tZSIsImZpbHRlciIsInZhbHVlIiwibGluZU51bWJlciIsImpGYWN0b3J5RGV2IiwicmVxdWlyZUNvbXBhdGliaWxpdHkiLCJ0ZXN0IiwiaW5mbyIsImZldGNoIiwiUmVxdWVzdCIsIkFib3J0Q29udHJvbGxlciwgQWJvcnRTaWduYWwiLCJBYm9ydENvbnRyb2xsZXIiLCJzaWduYWwiLCJNdXRhdGlvbk9ic2VydmVyIiwiakZhY3RvcnlMb2FkZXIiLCJzZXEiLCJbb2JqZWN0IE9iamVjdF0iLCJ0aGlzIiwibW9kdWxlIiwiakZhY3RvcnlPdmVycmlkZSIsImhhbmRsZXIiLCJwdXNoIiwib25Jbml0IiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJlbnRyeSIsIk9iamVjdCIsImVudHJpZXMiLCJwYXNzIiwiaWdub3JlIiwid2FybiIsImpRdWVyeSIsIiQiLCJoZWxwZXJfaXNOYXRpdmUiLCJfIiwiaXNOYXRpdmUiLCJoZWxwZXJfaXNTdHJpbmciLCJpc1N0cmluZyIsImhlbHBlcl9pc051bWJlciIsImlzTnVtYmVyIiwiaGVscGVyX2lzUGxhaW5PYmplY3QiLCJpc1BsYWluT2JqZWN0IiwiaGVscGVyX2RlZmF1bHRzRGVlcCIsImRlZmF1bHRzRGVlcCIsImhlbHBlcl9sb3dlckZpcnN0IiwibG93ZXJGaXJzdCIsImhlbHBlcl9nZXQiLCJnZXQiLCJoZWxwZXJfdGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsImhlbHBlcl9jYW1lbENhc2UiLCJjYW1lbENhc2UiLCJOT09QIiwiaGVscGVyX3NldEZ1bmN0aW9uTmFtZSIsImYiLCJkZWZpbmVQcm9wZXJ0eSIsImhlbHBlcl91cmxfYWJzIiwidXJsIiwiYSIsImhyZWYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJKRmFjdG9yeVRyYWNlX05PRklMVEVSIiwibGFiZWwiLCJzdGFja1RyYWNlTGltaXQiLCJJbmZpbml0eSIsIm9taXRBYm92ZUZ1bmN0aW9uTmFtZSIsIm9taXRTZWxmIiwiX3N0YWNrVHJhY2VMaW1pdCIsIkVycm9yIiwidHJhY2VTb3VyY2UiLCJzb3VyY2UiLCJ0YXJnZXRPYmplY3QiLCJjYXB0dXJlVHJhY2VTb3VyY2UiLCJ0cmFjZSIsInRvUHJpbnRhYmxlVHJhY2UiLCJ0aGVuIiwiciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsIkpGYWN0b3J5VHJhY2VfTElCX1NUQUNLVFJBQ0UiLCJjb25maWciLCJzdXBlciIsIlN0YWNrVHJhY2UiLCJmcm9tRXJyb3IiLCJ0cmFjZUZyYW1lcyIsInNsaWNlIiwiZmluZEluZGV4IiwiZnVuY3Rpb25OYW1lIiwiZW5kc1dpdGgiLCJmb3JtYXRUcmFjZUZyYW1lcyIsImhlYWRlciIsImxpbmVQcmVmaXgiLCJ3aW5kb3ciLCJtYXAiLCJzZiIsInRvU3RyaW5nIiwiam9pbiIsImpGYWN0b3J5VHJhY2UiLCJ1c2UiLCJjb25zdHJ1Y3RvciIsInRyYWNlciIsImF0dGFjaFRyYWNlIiwibWVzc2FnZSIsImRhdGEiLCJhc3NpZ24iLCJjcmVhdGUiLCJ0b1ByaW50YWJsZSIsIiRkYXRhIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmplY3QiLCJERUZBVUxUX0tFWVMiLCJmaW5kIiwia2V5IiwidmFsIiwidGVtcGxhdGVEYXRhIiwibnYiLCJ1bmRlZmluZWQiLCJnZXRJZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJsZW5ndGgiLCJKU09OX01BWCIsInN1YnN0cmluZyIsImUiLCJTdHJpbmciLCJ0ZW1wbGF0ZU1lc3NhZ2UiLCJwYXJ0Iiwic3BsaXQiLCJwbGFjZWhvbGRlciIsIlJFX1BMQUNFSE9MREVSIiwibGFzdEluZGV4IiwiZXhlYyIsInRyaW0iLCJ0b1ByaW50YWJsZURhdGEiLCJqRmFjdG9yeUVycm9yIiwiUHJveHkiLCJzZXQiLCJ0YXJnZXQiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsIkpGYWN0b3J5RXhwZWN0IiwiSU5WQUxJRF9WQUxVRSIsIklOVkFMSURfQ0FMTCIsIlBST01JU0VfRVhQSVJFRCIsIlJFUVVFU1RfRVJST1IiLCJLRVlfRFVQTElDQVRFRCIsIktFWV9NSVNTSU5HIiwiZXJyb3IiLCJyZWFzb24iLCJnaXZlbiIsInN0YXRpY01ldGhvZHMiLCJub3RVbmRlZmluZWQiLCJub3RFbXB0eVN0cmluZyIsIm5vdEZhbHN5IiwidmFsaWRTcGFjZXMiLCJyZXBsYWNlIiwibWF0Y2hSZWciLCJyZWciLCJleHBlY3RlZCIsIm9rIiwidHlwZU51bGwiLCJ0eXBlQm9vbGVhbiIsInR5cGVTdHJpbmciLCJ0eXBlTnVtYmVyIiwidHlwZUZ1bmN0aW9uIiwidHlwZVBsYWluT2JqZWN0IiwiZXF1YWxJbiIsIkFycmF5IiwiaXNBcnJheSIsInZhbHVlcyIsImluY2x1ZGVzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsIndyaXRhYmxlIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwibm90V3JpdGFibGUiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImNhbGwiLCJub3RFbnVtZXJhYmxlIiwibm90Q29uZmlndXJhYmxlIiwicmVzZXJ2ZWRQcm9wZXJ0eSIsImFyZ3MiLCJKRmFjdG9yeVRyYWl0cyIsImNhbGxlckluc3RhbmNlIiwiY2FsbGVyQ29uc3RydWN0b3IiLCJvcHRpb25zIiwidHJhaXQiLCJ0cmFpdEFyZ3MiLCJjYWNoZSIsIkNBQ0hFIiwiaGFzIiwiYWRkIiwiV2Vha1NldCIsIkpGYWN0b3J5VHJhaXQiLCJleHBvcnQiLCJ0cmFpdEluc3RhbmNlIiwidHJhaXRfY29uc3RydWN0b3IiLCJhcHBseSIsImlzU3RhdGljIiwic291cmNlRGVzY3JpcHRvciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJwcm9wZXJ0eU5hbWUiLCJwcmVmaXgiLCJnZXRQcmVmaXgiLCJnZXRUYXJnZXQiLCJwcm9wZXJ0eURlc2NyaXB0b3IiLCJwYXJzZWQiLCJwYXJzZXIiLCJkZWZhdWx0UGFyc2VyIiwiRVhDTFVERVMiLCJXZWFrTWFwIiwiSkZhY3RvcnlGdW5jdGlvbkNvbXBvc2VyIiwiaGFuZGxlcnMiLCJoYW5kbGVyR3JvdXBzIiwiaGFuZGxlckdyb3VwIiwiYXJndW1lbnRzIiwidW5zaGlmdCIsImNvbXBvc2VyIiwiY29tcG9zaXRlIiwiY29udGV4dCIsImNhbmNlbGVkIiwicGFyYW1ldGVycyIsImZyb20iLCJyZXN1bHQiLCJpdGVyYXRpb24iLCJuZXh0IiwiY29tcG9zaXRlX2l0ZXJhdG9yIiwic2NvcGUiLCJkb25lIiwiSkZhY3RvcnlGdW5jdGlvbkV4cGlyYWJsZSIsIm9yaWdpbmFsSGFuZGxlciIsImV4cGlyZWRDYWxscyIsImV4cGlyZWQiLCJpc0V4cGlyZWQiLCJjb21wb3NlIiwiZXhwaXJhYmxlIiwic2V0RXhwaXJlZCIsImFkZEV4cGlyZUNvbmRpdGlvbiIsImNvbmRpdGlvbiIsImxhc3QiLCJ0eXBlIiwiYmluZCIsIm9uRXhwaXJlZCIsIm9uTm90RXhwaXJlZCIsIk1heFdhcm5pbmdFeHBpcmF0aW9uIiwiakZhY3RvcnlGdW5jdGlvbkNvbmRpdGlvbmFsIiwiSkZhY3RvcnlGdW5jdGlvbkNvbmRpdGlvbmFsIiwiZmlyc3QiLCJjb25kaXRpb25hbCIsImFkZENvbmRpdGlvbiIsImhhbmRsZSIsImpGYWN0b3J5RnVuY3Rpb25XcmFwcGFibGUiLCJKRmFjdG9yeUZ1bmN0aW9uV3JhcHBhYmxlIiwid3JhcHBhYmxlIiwiYmVmb3JlQWxsIiwianVzdEJlZm9yZSIsImp1c3RBZnRlciIsImFmdGVyQWxsIiwiakZhY3RvcnlUcmFpdHMiLCJzdGF0ZXMiLCJlbmFibGVkIiwic2VydmljZSIsInBoYXNlIiwib3duZXIiLCIkbG9nRXJyIiwiSkZhY3RvcnlDb3JlT2JqZWN0IiwiaW5qZWN0IiwiakZhY3RvcnkiLCJUcmFpdENvcmUiLCJUcmFpdEFib3V0IiwiVHJhaXRFdmVudHMiLCJUcmFpdFN0YXRlIiwiVHJhaXRTZXJ2aWNlIiwiVHJhaXRUYXNrIiwiSkZhY3RvcnlDb21wb25lbnQiLCJUcmFpdEZldGNoIiwiVHJhaXRET00iLCJUcmFpdENTUyIsIlRyYWl0TXV0YXRpb24iLCJUcmFpdFRpbWVvdXQiLCJUcmFpdEludGVydmFsIiwiVHJhaXRMaWJWdWUiLCJUcmFpdExpYlJlYWN0IiwicHJvcGVydGllcyIsIkpGYWN0b3J5T2JqZWN0IiwiZGVzY3JpcHRvclByb3RvdHlwZSIsIkRFU0NSSVBUT1JTX1BST1RPVFlQRSIsIm8iLCJOT05FIiwiV1JJVEFCTEUiLCJFTlVNRVJBQkxFIiwiQ09ORklHVVJBQkxFIiwiQ09ORklHVVJBQkxFX1dSSVRBQkxFIiwiV1JJVEFCTEVfQ09ORklHVVJBQkxFIiwiQ09ORklHVVJBQkxFX0VOVU1FUkFCTEUiLCJFTlVNRVJBQkxFX0NPTkZJR1VSQUJMRSIsIkVOVU1FUkFCTEVfV1JJVEFCTEUiLCJXUklUQUJMRV9FTlVNRVJBQkxFIiwiV1JJVEFCTEVfRU5VTUVSQUJMRV9DT05GSUdVUkFCTEUiLCJXUklUQUJMRV9DT05GSUdVUkFCTEVfRU5VTUVSQUJMRSIsIkVOVU1FUkFCTEVfQ09ORklHVVJBQkxFX1dSSVRBQkxFIiwiRU5VTUVSQUJMRV9XUklUQUJMRV9DT05GSUdVUkFCTEUiLCJDT05GSUdVUkFCTEVfV1JJVEFCTEVfRU5VTUVSQUJMRSIsIkNPTkZJR1VSQUJMRV9FTlVNRVJBQkxFX1dSSVRBQkxFIiwiUkVBRE9OTFkiLCJkZXNjcmlwdG9yIiwiZGVzY3JpcHRvcnMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZmxhdCIsImRpc2luaGVyaXQiLCJjcmVhdGVEZXNjcmlwdG9ycyIsIm1vZHVsZUdlbklkIiwidWlkIiwiSkZhY3RvcnlBYm91dCIsImFib3V0IiwiZmluZ2VycHJpbnQiLCJ0b0xvd2VyQ2FzZSIsIkpGYWN0b3J5UHJvbWlzZSIsImV4ZWN1dG9yIiwiY2hhaW5JZCIsInJlamVjdCIsIkRFRkFVTFRfQ09ORklHIiwiTnVtYmVyIiwiX3Jlc29sdmUiLCJfcmVqZWN0IiwiY2hhaW4iLCJKRmFjdG9yeVByb21pc2VDaGFpbiIsIiRjaGFpbiIsIiR0eXBlIiwiJHZhbHVlIiwiJGlzU2V0dGxlZCIsIiRpc1JlamVjdGVkIiwiJGlzRnVsZmlsbGVkIiwiJGlzRXhwaXJlZCIsIiRpc0Fib3J0ZWQiLCIkZGV2X25hbWUiLCIkZGV2X3BhdGgiLCJKRmFjdG9yeVByb21pc2VQYXRoIiwiJGRldl9wb3NpdGlvbiIsIiRkZXZfc291cmNlIiwidHJ5QXV0b0NvbXBsZXRlIiwiaXNQZW5kaW5nIiwiJGNoYWluQ29tcGxldGUiLCJvblJlc29sdmUiLCJvblJlamVjdCIsIlR5cGVFcnJvciIsIngiLCJjYWxsZWQiLCJyZXNvbHZlUHJvbWlzZSIsInkiLCJyZWplY3RQcm9taXNlIiwiZXJyb3JFeHBpcmVkIiwib25TZXR0bGUiLCJjaGFpbk1hcCIsImNoYWluQ29uZmlnIiwiY2hhaW5BdXRvQ29tcGxldGUiLCJzaXplIiwiX2NoYWluQXV0b0NvbXBsZXRlIiwiX19yZXNvbHZlX18iLCJfX3JlamVjdF9fIiwib25GdWxmaWxsZWQiLCJvblJlamVjdGVkIiwiZm9yY2VUeXBlIiwid3JhcHBlZEZ1bGZpbGxlZCIsIndyYXBwZWRSZWplY3RlZCIsIm5ld1Byb21pc2UiLCJzdGFydHNXaXRoIiwiZk5hbWVzIiwiY2hhaW5OYW1lIiwiJGRldl9vbkZ1bGZpbGxlZCIsIiRkZXZfb25SZWplY3RlZCIsImNoYWluUm9vdCIsIm9wdGlvbmFsQXJncyIsImNvbXBsZXRlIiwicHJvbWlzZSIsImFib3J0Iiwic2lsZW50IiwiTWFwIiwiaXNDb21wbGV0ZWQiLCJfX2RlZmVycmVkX18iLCJEZWZlcnJlZCIsIml0ZW0iLCJpIiwicHJpbnRhYmxlIiwidiIsIkpGYWN0b3J5UHJvbWlzZVN5bmMiLCJKRmFjdG9yeUV2ZW50cyIsInJlZ2lzdHJ5Iiwib25MaXN0ZW5lclVwZGF0ZSIsIm9uT2JzZXJ2ZXJVcGRhdGUiLCJldmVudHMiLCJzZWxlY3RvciIsInZhbGlkYXRlU2VsZWN0b3IiLCJIVE1MRWxlbWVudCIsIndyYXBwZWRIYW5kbGVyIiwib24iLCJzdGFjayIsIm9mZiIsInBlbmRpbmciLCJldmVudCIsInRyaWdnZXIiLCJ0cmlnZ2VySGFuZGxlciIsImFsbCIsImFzeW5jIiwiSkZhY3RvcnlFdmVudHNNYW5hZ2VyIiwicGFyZW50IiwiYWZmaWxpYXRlUnVsZXMiLCJhZmZpbGlhdGVBZGRSdWxlIiwicnVsZV9uYW1lc3BhY2UiLCJuYW1lc3BhY2VzIiwiSkZhY3RvcnlFdmVudFNlbGVjdG9yUGFyc2VyIiwicGFyc2VkRXZlbnQiLCJuYW1lc3BhY2UiLCJhZGROYW1lc3BhY2UiLCJhZmZpbGlhdGUiLCJhcmdMIiwianF1ZXJ5IiwidHJpZ2dlclNlcmllcyIsInRyaWdnZXJQYXJhbGxlbCIsImVsbSIsIl9kYXRhIiwidHlwZXMiLCJKRmFjdG9yeUV2ZW50U2VsZWN0b3IiLCJoYXNOYW1lc3BhY2UiLCJfZXZlbnRzIiwiZXhwYW5kbyIsImsiLCJpbmRleE9mIiwiZXZlbnRUeXBlRW50cnkiLCJzZWxlY3RvcnMiLCJzIiwiU2V0IiwiZGVsZXRlIiwibnMiLCJzaGlmdCIsInZhbGlkYXRlRXZlbnQiLCJ2YWxpZGF0ZU5hbWVzcGFjZSIsIkpGYWN0b3J5RmV0Y2giLCJmZXRjaE9wdGlvbnMiLCJmZXRjaFJlcXVlc3QiLCJyZXNwb25zZSIsImZldGNoUmVzcG9uc2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiJHR5cGVUZXh0IiwidGV4dCIsInJlc3BvbnNlVGV4dCIsIiR0eXBlSlNPTiIsImpzb24iLCJyZXNwb25zZUpTT04iLCJjYXRjaCIsImFib3J0Q3RybCIsImFib3J0Q29udHJvbGxlciIsImZldGNoQWJvcnRDb250cm9sbGVyIiwiJGNoYWluQWJvcnQiLCJTWU1CT0xfRU5BQkxFRCIsIkpGYWN0b3J5TG9nZ2VyIiwiREVGQVVMVF9DT05ESVRJT04iLCJpbnN0YWxsQWNjZXNzb3IiLCJwYXJlbnRMb2dnZXIiLCJlbmFibGUiLCJkaXNhYmxlIiwibmF0aXZlTmFtZSIsImZpbHRlcnMiLCJ0YXJnZXROYW1lIiwiYWNjZXNzb3IiLCJmb3JtYXR0ZXIiLCJzdWIiLCJzdHlsZXNfY3NzIiwic3R5bGVzX2NsaSIsIkZPUk1BVFRFUl9OQVRJVkUiLCJsb2dnZXIiLCJGT1JNQVRURVJfQ0xJIiwiRk9STUFUVEVSX0JST1dTRVIiLCJlcXVhbCIsIkpGYWN0b3J5VGltZSIsIkRhdGUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJnZXRVVENNaWxsaXNlY29uZHMiLCJ2YWx1ZU9mIiwiaG91cnMiLCJnZXRVVENIb3VycyIsIm1pbnV0ZXMiLCJnZXRVVENNaW51dGVzIiwic2Vjb25kcyIsImdldFVUQ1NlY29uZHMiLCJtaWxsaXNlY29uZHMiLCJKRmFjdG9yeVRpbWVUcmFjZSIsImVsYXBzZWQiLCJ0MSIsInQwIiwiJHRvRHVyYXRpb25TdHJpbmciLCJTdWJNYXAiLCIkcGhhc2VSZW1vdmUiLCJnZXRDb250ZXh0dWFsUmVtb3ZlUGhhc2UiLCJ0YXNrTmFtZSIsInRhc2siLCIkdGFzayIsIiRjaGFpbkF1dG9Db21wbGV0ZSIsInN0ciIsImlkIiwiaWRfYXV0b2luYyIsInByb3RvIiwiU1lNQk9MX1BSSVZBVEUiLCJjcmVhdGVTdWJNYXAiLCJ0YXNrcyIsInJlcXVlc3RzIiwiZXhlY3V0b3JPclZhbHVlIiwiJGlkX3Jlc29sdmUiLCJtZXRyaWNzIiwiJHRhc2tNZXRyaWNzIiwiJGRldl90aW1pbmciLCJlbmQiLCIkdGFza1JlbW92ZSIsIl9jYWxsZWQiLCJyZW1vdmVQaGFzZSIsIlBIQVNFUyIsImF1dG9Db21wbGV0ZSIsImFzc2lnblByaXZhdGUiLCJjdXN0b20iLCJrZXJuZWwiLCJldmVudE1hbmFnZXIiLCJsaXN0ZW5lcnMiLCJnZXREb21MaXN0ZW5lcnMiLCJvYnNlcnZlcnMiLCJnZXRPYnNlcnZlcnMiLCIkdHJpZ2dlciIsInN0YXRlUm91dGVzIiwiJHN0YXRlIiwiaCIsImJlZm9yZSIsIiRub3RpZnkiLCJhZnRlciIsIm5vdGlmeSIsInByZXZpb3VzVmFsIiwiUEhBU0UiLCJwaGFzZVF1ZXVlIiwicGhhc2VUYXNrIiwicGhhc2VNYXAiLCJpbnN0YWxsIiwidW5pbnN0YWxsIiwiYXNzaWduUHJpdmF0ZU1lbWJlciIsImluc3RhbGxlZCIsInNldEV2ZW50TmFtZXNwYWNlUmVtb3ZlUGhhc2UiLCJwaGFzZVJlc29sdmUiLCIkdGFza1JlbW92ZUFsbCIsIiR0YXNrUHJvbWlzZUFsbCIsIm9uSW5zdGFsbCIsIm9uRW5hYmxlIiwib25EaXNhYmxlIiwib25Vbmluc3RhbGwiLCIkb2ZmIiwicmVtb3ZhbCIsIkRJU0FCTEUiLCJVTklOU1RBTEwiLCJwIiwiSU5TVEFMTCIsIiRlbmFibGUiLCJFTkFCTEUiLCJwaGFzZUtpbGwiLCIkZGlzYWJsZSIsImNvbXBvbmVudCIsImpGYWN0b3J5Q29yZU9iamVjdCIsIlBIQVNFX1JFVkVSVCIsImN1clJlbW92ZVBoYXNlIiwibmV3UmVtb3ZlUGhhc2UiLCJkZWxldGVOYW1lc3BhY2UiLCIkZmV0Y2hSZW1vdmVBbGwiLCIkcmVnaXN0ZXJBc3luYyIsIiRmZXRjaFJlbW92ZSIsIiRmZXRjaCIsIl9kZWJ1Z19yZW1vdmVfY2FsbGVkIiwic3VicyIsIiR0aW1lb3V0UmVtb3ZlQWxsIiwiZGVsYXkiLCJ0aW1lb3V0cyIsIkZ1bmN0aW9uIiwidGltZXIiLCJzZXRUaW1lb3V0IiwiJHRpbWVvdXRSZW1vdmUiLCJjbGVhclRpbWVvdXQiLCIkaW50ZXJ2YWxSZW1vdmVBbGwiLCJ0aW1laW50cyIsInNldEludGVydmFsIiwiJHJlZ2lzdGVyU3luYyIsImNsZWFySW50ZXJ2YWwiLCIkaW50ZXJ2YWxSZW1vdmUiLCIkbXV0YXRpb25SZW1vdmVBbGwiLCJtdXRhdGlvbnMiLCJEb2N1bWVudCIsIm9ic2VydmVyIiwib2JzZXJ2ZSIsImRpc2Nvbm5lY3QiLCIkbXV0YXRpb25SZW1vdmUiLCIkZG9tUmVtb3ZlQWxsIiwialF1ZXJ5QXJndW1lbnQiLCJhcHBlbmRUbyIsImRvbUlkIiwiZG9tIiwidGFnTmFtZSIsImh0bWwiLCJub2RlVHlwZSIsIk5vZGUiLCJFTEVNRU5UX05PREUiLCIkZmV0Y2hUZXh0IiwicmVtb3ZlIiwiJGRvbVJlbW92ZSIsIiRjc3NSZW1vdmVBbGwiLCJzdHlsZUJvZHkiLCJjc3NJZCIsImNzcyIsImF0dHIiLCJleGlzdCIsImRhdGFzZXQiLCJ1c2FnZSIsInBhcnNlSW50IiwicmVsIiwiZGF0YS11c2FnZSIsIiRjc3NSZW1vdmUiLCIkdnVlUmVtb3ZlQWxsIiwidnVlIiwiJGVsIiwiJGRlc3Ryb3kiLCIkdnVlUmVtb3ZlIiwiJHJlYWN0UmVtb3ZlQWxsIiwiY29udGFpbmVyIiwiZWxlbWVudCIsInJlbmRlck90aGVyQXJndW1lbnRzIiwicmVhY3QiLCJSZWFjdERPTSIsInZpZXciLCJyZW5kZXIiLCJlbCIsInVubW91bnRDb21wb25lbnRBdE5vZGUiLCIkbG9nV2FybiIsIiRyZWFjdFJlbW92ZSIsImluaXQiXSwibWFwcGluZ3MiOiI7Ozs7YUFZYUEsRUFDVSxvQkFBWkMsU0FBMkJBLFFBQVFDLFVBQVlELFFBQVFDLFNBQVNDLEtBRzlEQyxFQUFpQixDQUMxQkMsVUFBMkJMLElBTitDLEVBTzFFTSxjQUFlLENBQ1hDLEtBQU0sQ0FBQyxlQUFnQixZQUFhLFFBQVMsT0FBUSxPQUV6REMsZUFBZ0NSLEdBQ3pCLENBQ0NPLEtB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
